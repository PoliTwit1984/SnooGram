2024-10-30 05:19:41,511 - DEBUG - receive_response_headers.complete return_value=(b'HTTP/1.1', 200, b'OK', [(b'Server', b'nginx/1.18.0'), (b'Date', b'Wed, 30 Oct 2024 10:19:41 GMT'), (b'Content-Type', b'application/json'), (b'Content-Length', b'254'), (b'Connection', b'keep-alive'), (b'Strict-Transport-Security', b'max-age=31536000; includeSubDomains; preload'), (b'Access-Control-Allow-Origin', b'*'), (b'Access-Control-Allow-Methods', b'GET, POST, OPTIONS'), (b'Access-Control-Expose-Headers', b'Content-Length,Content-Type,Date,Server,Connection')])
2024-10-30 05:19:41,519 - INFO - HTTP Request: POST https://api.telegram.org/bot7867694458:AAEFLZjWPyd1p640mHENnBt479WRYfSavWg/getMe "HTTP/1.1 200 OK"
2024-10-30 05:19:41,519 - DEBUG - receive_response_body.started request=<Request [b'POST']>
2024-10-30 05:19:41,519 - DEBUG - receive_response_body.complete
2024-10-30 05:19:41,520 - DEBUG - response_closed.started
2024-10-30 05:19:41,520 - DEBUG - response_closed.complete
2024-10-30 05:19:41,520 - DEBUG - User(api_kwargs={'can_connect_to_business': False, 'has_main_web_app': False}, can_join_groups=True, can_read_all_group_messages=False, first_name='RedditBot', id=7867694458, is_bot=True, supports_inline_queries=False, username='RedditImage_bot')
2024-10-30 05:19:41,520 - DEBUG - Exiting: get_me
2024-10-30 05:19:41,520 - DEBUG - This Bot is already initialized.
2024-10-30 05:19:41,520 - DEBUG - Entering: send_video
2024-10-30 05:19:41,545 - DEBUG - send_request_headers.started request=<Request [b'POST']>
2024-10-30 05:19:41,545 - DEBUG - send_request_headers.complete
2024-10-30 05:19:41,545 - DEBUG - send_request_body.started request=<Request [b'POST']>
2024-10-30 05:19:46,052 - DEBUG - send_request_body.complete
2024-10-30 05:19:46,053 - DEBUG - receive_response_headers.started request=<Request [b'POST']>
2024-10-30 05:19:46,054 - DEBUG - receive_response_headers.complete return_value=(b'HTTP/1.1', 413, b'Request Entity Too Large', [(b'Server', b'nginx/1.18.0'), (b'Date', b'Wed, 30 Oct 2024 10:19:41 GMT'), (b'Content-Type', b'application/json'), (b'Content-Length', b'70'), (b'Connection', b'close'), (b'Strict-Transport-Security', b'max-age=31536000; includeSubDomains; preload'), (b'Access-Control-Allow-Origin', b'*'), (b'Access-Control-Expose-Headers', b'Content-Length,Content-Type,Date,Server,Connection')])
2024-10-30 05:19:46,054 - INFO - HTTP Request: POST https://api.telegram.org/bot7867694458:AAEFLZjWPyd1p640mHENnBt479WRYfSavWg/sendVideo "HTTP/1.1 413 Request Entity Too Large"
2024-10-30 05:19:46,054 - DEBUG - receive_response_body.started request=<Request [b'POST']>
2024-10-30 05:19:46,055 - DEBUG - receive_response_body.complete
2024-10-30 05:19:46,055 - DEBUG - response_closed.started
2024-10-30 05:19:46,055 - DEBUG - response_closed.complete
2024-10-30 05:19:46,056 - DEBUG - This Bot is already shut down. Returning.
2024-10-30 05:19:46,056 - DEBUG - Shut down of Updater complete
2024-10-30 05:19:46,056 - ERROR - Failed to send video to Telegram: Request Entity Too Large (413)
2024-10-30 05:19:46,057 - ERROR - Error sending video post 1ge9gol: Request Entity Too Large (413)
2024-10-30 05:19:46,057 - INFO - Checking post: 1ge98kx - Score: 257 - URL: https://www.redgifs.com/watch/frontspecificspittlebug
2024-10-30 05:19:46,058 - INFO - Post 1ge98kx is a duplicate, skipping
2024-10-30 05:19:46,058 - INFO - Checking post: 1geqscs - Score: 239 - URL: https://www.redgifs.com/watch/previousweequeensnake
2024-10-30 05:19:46,059 - INFO - Request URL: 'https://cosmossnoogram-centralus.documents.azure.com:443/dbs/ToDoList/colls/sent_posts/docs/'
Request method: 'POST'
Request headers:
    'Cache-Control': 'no-cache'
    'x-ms-version': 'REDACTED'
    'x-ms-documentdb-query-iscontinuationexpected': 'REDACTED'
    'x-ms-consistency-level': 'REDACTED'
    'x-ms-documentdb-isquery': 'REDACTED'
    'Content-Type': 'application/query+json'
    'x-ms-session-token': 'REDACTED'
    'x-ms-documentdb-query-enablecrosspartition': 'REDACTED'
    'x-ms-date': 'REDACTED'
    'authorization': 'REDACTED'
    'Accept': 'application/json'
    'x-ms-cosmos-correlated-activityid': 'REDACTED'
    'Content-Length': '107'
    'User-Agent': 'azsdk-python-cosmos/4.5.1 Python/3.12.4 (macOS-15.0.1-arm64-arm-64bit)'
A body is sent with the request
2024-10-30 05:19:46,111 - DEBUG - https://cosmossnoogram-centralus.documents.azure.com:443 "POST /dbs/ToDoList/colls/sent_posts/docs/ HTTP/11" 200 None
2024-10-30 05:19:46,113 - INFO - Response status: 200
Response headers:
    'Cache-Control': 'no-store, no-cache'
    'Pragma': 'no-cache'
    'Transfer-Encoding': 'chunked'
    'Content-Type': 'application/json'
    'Server': 'Microsoft-HTTPAPI/2.0'
    'Strict-Transport-Security': 'REDACTED'
    'x-ms-activity-id': 'REDACTED'
    'x-ms-last-state-change-utc': 'REDACTED'
    'x-ms-resource-quota': 'REDACTED'
    'x-ms-resource-usage': 'REDACTED'
    'x-ms-schemaversion': 'REDACTED'
    'lsn': 'REDACTED'
    'x-ms-item-count': 'REDACTED'
    'x-ms-request-charge': 'REDACTED'
    'x-ms-alt-content-path': 'REDACTED'
    'x-ms-content-path': 'REDACTED'
    'x-ms-documentdb-partitionkeyrangeid': 'REDACTED'
    'x-ms-xp-role': 'REDACTED'
    'x-ms-cosmos-query-execution-info': 'REDACTED'
    'x-ms-global-Committed-lsn': 'REDACTED'
    'x-ms-number-of-read-regions': 'REDACTED'
    'x-ms-transport-request-id': 'REDACTED'
    'x-ms-cosmos-llsn': 'REDACTED'
    'x-ms-session-token': 'REDACTED'
    'x-ms-request-duration-ms': 'REDACTED'
    'x-ms-serviceversion': 'REDACTED'
    'x-ms-cosmos-is-partition-key-delete-pending': 'REDACTED'
    'x-ms-cosmos-physical-partition-id': 'REDACTED'
    'x-ms-cosmos-internal-partition-id': 'REDACTED'
    'x-ms-gatewayversion': 'REDACTED'
    'Date': 'Wed, 30 Oct 2024 10:19:46 GMT'
2024-10-30 05:19:46,113 - INFO - Found video post: 1geqscs
2024-10-30 05:19:46,115 - DEBUG - Starting new HTTPS connection (1): api.redgifs.com:443
2024-10-30 05:19:46,232 - DEBUG - https://api.redgifs.com:443 "GET /v2/gifs/previousweequeensnake HTTP/11" 200 None
2024-10-30 05:19:46,239 - DEBUG - Starting new HTTPS connection (1): files.redgifs.com:443
2024-10-30 05:19:46,314 - DEBUG - https://files.redgifs.com:443 "GET /PreviousWeeQueensnake.mp4 HTTP/11" 200 50070206
2024-10-30 05:19:48,001 - INFO - Successfully downloaded media to downloads/videos/1geqscs_20241030_051946_2fd81a4e.mp4
2024-10-30 05:19:48,003 - DEBUG - Using selector: KqueueSelector
2024-10-30 05:19:48,003 - INFO - Attempting to send video to Telegram - Path: downloads/videos/1geqscs_20241030_051946_2fd81a4e.mp4
2024-10-30 05:19:48,003 - DEBUG - load_ssl_context verify=True cert=None trust_env=True http2=False
2024-10-30 05:19:48,004 - DEBUG - load_verify_locations cafile='/Users/joewilson/PythonProjects/Snoogram/venv/lib/python3.12/site-packages/certifi/cacert.pem'
2024-10-30 05:19:48,011 - DEBUG - load_ssl_context verify=True cert=None trust_env=True http2=False
2024-10-30 05:19:48,012 - DEBUG - load_verify_locations cafile='/Users/joewilson/PythonProjects/Snoogram/venv/lib/python3.12/site-packages/certifi/cacert.pem'
2024-10-30 05:19:48,019 - DEBUG - Entering: get_me
2024-10-30 05:19:48,019 - DEBUG - connect_tcp.started host='api.telegram.org' port=443 local_address=None timeout=5.0 socket_options=None
2024-10-30 05:19:48,142 - DEBUG - connect_tcp.complete return_value=<httpcore._backends.anyio.AnyIOStream object at 0x108eacaa0>
2024-10-30 05:19:48,142 - DEBUG - start_tls.started ssl_context=<ssl.SSLContext object at 0x108ee5ed0> server_hostname='api.telegram.org' timeout=5.0
2024-10-30 05:19:48,277 - DEBUG - start_tls.complete return_value=<httpcore._backends.anyio.AnyIOStream object at 0x108eacfb0>
2024-10-30 05:19:48,278 - DEBUG - send_request_headers.started request=<Request [b'POST']>
2024-10-30 05:19:48,279 - DEBUG - send_request_headers.complete
2024-10-30 05:19:48,279 - DEBUG - send_request_body.started request=<Request [b'POST']>
2024-10-30 05:19:48,279 - DEBUG - send_request_body.complete
2024-10-30 05:19:48,279 - DEBUG - receive_response_headers.started request=<Request [b'POST']>
2024-10-30 05:19:48,490 - DEBUG - receive_response_headers.complete return_value=(b'HTTP/1.1', 200, b'OK', [(b'Server', b'nginx/1.18.0'), (b'Date', b'Wed, 30 Oct 2024 10:19:48 GMT'), (b'Content-Type', b'application/json'), (b'Content-Length', b'254'), (b'Connection', b'keep-alive'), (b'Strict-Transport-Security', b'max-age=31536000; includeSubDomains; preload'), (b'Access-Control-Allow-Origin', b'*'), (b'Access-Control-Allow-Methods', b'GET, POST, OPTIONS'), (b'Access-Control-Expose-Headers', b'Content-Length,Content-Type,Date,Server,Connection')])
2024-10-30 05:19:48,491 - INFO - HTTP Request: POST https://api.telegram.org/bot7867694458:AAEFLZjWPyd1p640mHENnBt479WRYfSavWg/getMe "HTTP/1.1 200 OK"
2024-10-30 05:19:48,491 - DEBUG - receive_response_body.started request=<Request [b'POST']>
2024-10-30 05:19:48,491 - DEBUG - receive_response_body.complete
2024-10-30 05:19:48,491 - DEBUG - response_closed.started
2024-10-30 05:19:48,492 - DEBUG - response_closed.complete
2024-10-30 05:19:48,492 - DEBUG - User(api_kwargs={'can_connect_to_business': False, 'has_main_web_app': False}, can_join_groups=True, can_read_all_group_messages=False, first_name='RedditBot', id=7867694458, is_bot=True, supports_inline_queries=False, username='RedditImage_bot')
2024-10-30 05:19:48,492 - DEBUG - Exiting: get_me
2024-10-30 05:19:48,492 - DEBUG - This Bot is already initialized.
2024-10-30 05:19:48,492 - DEBUG - Entering: send_video
2024-10-30 05:19:48,507 - DEBUG - send_request_headers.started request=<Request [b'POST']>
2024-10-30 05:19:48,507 - DEBUG - send_request_headers.complete
2024-10-30 05:19:48,507 - DEBUG - send_request_body.started request=<Request [b'POST']>
2024-10-30 05:19:52,611 - DEBUG - send_request_body.complete
2024-10-30 05:19:52,612 - DEBUG - receive_response_headers.started request=<Request [b'POST']>
2024-10-30 05:19:55,076 - DEBUG - receive_response_headers.complete return_value=(b'HTTP/1.1', 200, b'OK', [(b'Server', b'nginx/1.18.0'), (b'Date', b'Wed, 30 Oct 2024 10:19:55 GMT'), (b'Content-Type', b'application/json'), (b'Content-Length', b'600'), (b'Connection', b'keep-alive'), (b'Strict-Transport-Security', b'max-age=31536000; includeSubDomains; preload'), (b'Access-Control-Allow-Origin', b'*'), (b'Access-Control-Allow-Methods', b'GET, POST, OPTIONS'), (b'Access-Control-Expose-Headers', b'Content-Length,Content-Type,Date,Server,Connection')])
2024-10-30 05:19:55,077 - INFO - HTTP Request: POST https://api.telegram.org/bot7867694458:AAEFLZjWPyd1p640mHENnBt479WRYfSavWg/sendVideo "HTTP/1.1 200 OK"
2024-10-30 05:19:55,077 - DEBUG - receive_response_body.started request=<Request [b'POST']>
2024-10-30 05:19:55,077 - DEBUG - receive_response_body.complete
2024-10-30 05:19:55,077 - DEBUG - response_closed.started
2024-10-30 05:19:55,078 - DEBUG - response_closed.complete
2024-10-30 05:19:55,080 - DEBUG - Message(caption='From r/girlsfinishingthejob: I love when he covers my titties with his hot cum ðŸ¥°\nUpvotes: 239', channel_chat_created=False, chat=Chat(id=-1002490380283, title='Reddit_Pic_Stream', type=<ChatType.CHANNEL>), date=datetime.datetime(2024, 10, 30, 10, 19, 54, tzinfo=<UTC>), delete_chat_photo=False, group_chat_created=False, message_id=228, sender_chat=Chat(id=-1002490380283, title='Reddit_Pic_Stream', type=<ChatType.CHANNEL>), supergroup_chat_created=False, video=Video(duration=0, file_id='BAACAgEAAyEGAASUcC_7AAPkZyIISn0sh-hujCORnEsu2PODPPcAAq8EAAIZEBFF2IkqWihqIqc2BA', file_name='1geqscs_20241030_051946_2fd81a4e.mp4', file_size=50070206, file_unique_id='AgADrwQAAhkQEUU', height=320, mime_type='video/mp4', width=320))
2024-10-30 05:19:55,080 - DEBUG - Exiting: send_video
2024-10-30 05:19:55,081 - DEBUG - close.started
2024-10-30 05:19:55,081 - DEBUG - close.complete
2024-10-30 05:19:55,082 - DEBUG - This Bot is already shut down. Returning.
2024-10-30 05:19:55,082 - DEBUG - Shut down of Updater complete
2024-10-30 05:19:55,082 - INFO - Successfully sent video to Telegram
2024-10-30 05:19:55,085 - ERROR - Error processing subreddit girlsfinishingthejob: (sqlite3.OperationalError) attempt to write a readonly database
[SQL: INSERT INTO sent_post (post_id, subreddit_name, sent_at) VALUES (?, ?, ?)]
[parameters: ('1geqscs', 'girlsfinishingthejob', '2024-10-30 10:19:55.084822')]
(Background on this error at: https://sqlalche.me/e/20/e3q8)
2024-10-30 05:19:55,088 - ERROR - Job "send_to_telegram (trigger: interval[0:01:00], next run at: 2024-10-30 05:20:16 CDT)" raised an exception
Traceback (most recent call last):
  File "/Users/joewilson/PythonProjects/Snoogram/venv/lib/python3.12/site-packages/sqlalchemy/engine/base.py", line 1967, in _exec_single_context
    self.dialect.do_execute(
  File "/Users/joewilson/PythonProjects/Snoogram/venv/lib/python3.12/site-packages/sqlalchemy/engine/default.py", line 941, in do_execute
    cursor.execute(statement, parameters)
sqlite3.OperationalError: attempt to write a readonly database

The above exception was the direct cause of the following exception:

Traceback (most recent call last):
  File "/Users/joewilson/PythonProjects/Snoogram/venv/lib/python3.12/site-packages/apscheduler/executors/base.py", line 125, in run_job
    retval = job.func(*job.args, **job.kwargs)
             ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/Users/joewilson/PythonProjects/Snoogram/backend/app.py", line 265, in send_to_telegram
    # Update last_check in Cosmos DB
                ^^^^^^^^^^^^^^^^^^^^^
  File "/Users/joewilson/PythonProjects/Snoogram/backend/db_operations.py", line 100, in add_sent_post
  File "/Users/joewilson/PythonProjects/Snoogram/venv/lib/python3.12/site-packages/sqlalchemy/orm/scoping.py", line 597, in commit
    return self._proxied.commit()
           ^^^^^^^^^^^^^^^^^^^^^^
  File "/Users/joewilson/PythonProjects/Snoogram/venv/lib/python3.12/site-packages/sqlalchemy/orm/session.py", line 2028, in commit
    trans.commit(_to_root=True)
  File "<string>", line 2, in commit
  File "/Users/joewilson/PythonProjects/Snoogram/venv/lib/python3.12/site-packages/sqlalchemy/orm/state_changes.py", line 139, in _go
    ret_value = fn(self, *arg, **kw)
                ^^^^^^^^^^^^^^^^^^^^
  File "/Users/joewilson/PythonProjects/Snoogram/venv/lib/python3.12/site-packages/sqlalchemy/orm/session.py", line 1313, in commit
    self._prepare_impl()
  File "<string>", line 2, in _prepare_impl
  File "/Users/joewilson/PythonProjects/Snoogram/venv/lib/python3.12/site-packages/sqlalchemy/orm/state_changes.py", line 139, in _go
    ret_value = fn(self, *arg, **kw)
                ^^^^^^^^^^^^^^^^^^^^
  File "/Users/joewilson/PythonProjects/Snoogram/venv/lib/python3.12/site-packages/sqlalchemy/orm/session.py", line 1288, in _prepare_impl
    self.session.flush()
  File "/Users/joewilson/PythonProjects/Snoogram/venv/lib/python3.12/site-packages/sqlalchemy/orm/session.py", line 4352, in flush
    self._flush(objects)
  File "/Users/joewilson/PythonProjects/Snoogram/venv/lib/python3.12/site-packages/sqlalchemy/orm/session.py", line 4487, in _flush
    with util.safe_reraise():
  File "/Users/joewilson/PythonProjects/Snoogram/venv/lib/python3.12/site-packages/sqlalchemy/util/langhelpers.py", line 146, in __exit__
    raise exc_value.with_traceback(exc_tb)
  File "/Users/joewilson/PythonProjects/Snoogram/venv/lib/python3.12/site-packages/sqlalchemy/orm/session.py", line 4448, in _flush
    flush_context.execute()
  File "/Users/joewilson/PythonProjects/Snoogram/venv/lib/python3.12/site-packages/sqlalchemy/orm/unitofwork.py", line 466, in execute
    rec.execute(self)
  File "/Users/joewilson/PythonProjects/Snoogram/venv/lib/python3.12/site-packages/sqlalchemy/orm/unitofwork.py", line 642, in execute
    util.preloaded.orm_persistence.save_obj(
  File "/Users/joewilson/PythonProjects/Snoogram/venv/lib/python3.12/site-packages/sqlalchemy/orm/persistence.py", line 93, in save_obj
    _emit_insert_statements(
  File "/Users/joewilson/PythonProjects/Snoogram/venv/lib/python3.12/site-packages/sqlalchemy/orm/persistence.py", line 1233, in _emit_insert_statements
    result = connection.execute(
             ^^^^^^^^^^^^^^^^^^^
  File "/Users/joewilson/PythonProjects/Snoogram/venv/lib/python3.12/site-packages/sqlalchemy/engine/base.py", line 1418, in execute
    return meth(
           ^^^^^
  File "/Users/joewilson/PythonProjects/Snoogram/venv/lib/python3.12/site-packages/sqlalchemy/sql/elements.py", line 515, in _execute_on_connection
    return connection._execute_clauseelement(
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/Users/joewilson/PythonProjects/Snoogram/venv/lib/python3.12/site-packages/sqlalchemy/engine/base.py", line 1640, in _execute_clauseelement
    ret = self._execute_context(
          ^^^^^^^^^^^^^^^^^^^^^^
  File "/Users/joewilson/PythonProjects/Snoogram/venv/lib/python3.12/site-packages/sqlalchemy/engine/base.py", line 1846, in _execute_context
    return self._exec_single_context(
           ^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/Users/joewilson/PythonProjects/Snoogram/venv/lib/python3.12/site-packages/sqlalchemy/engine/base.py", line 1986, in _exec_single_context
    self._handle_dbapi_exception(
  File "/Users/joewilson/PythonProjects/Snoogram/venv/lib/python3.12/site-packages/sqlalchemy/engine/base.py", line 2355, in _handle_dbapi_exception
    raise sqlalchemy_exception.with_traceback(exc_info[2]) from e
  File "/Users/joewilson/PythonProjects/Snoogram/venv/lib/python3.12/site-packages/sqlalchemy/engine/base.py", line 1967, in _exec_single_context
    self.dialect.do_execute(
  File "/Users/joewilson/PythonProjects/Snoogram/venv/lib/python3.12/site-packages/sqlalchemy/engine/default.py", line 941, in do_execute
    cursor.execute(statement, parameters)
sqlalchemy.exc.OperationalError: (sqlite3.OperationalError) attempt to write a readonly database
[SQL: INSERT INTO sent_post (post_id, subreddit_name, sent_at) VALUES (?, ?, ?)]
[parameters: ('1geqscs', 'girlsfinishingthejob', '2024-10-30 10:19:55.084822')]
(Background on this error at: https://sqlalche.me/e/20/e3q8)
2024-10-30 05:20:16,972 - DEBUG - Looking for jobs to run
2024-10-30 05:20:16,974 - DEBUG - Next wakeup is due at 2024-10-30 05:21:16.969826-05:00 (in 59.995268 seconds)
2024-10-30 05:20:16,974 - INFO - Running job "send_to_telegram (trigger: interval[0:01:00], next run at: 2024-10-30 05:21:16 CDT)" (scheduled at 2024-10-30 05:20:16.969826-05:00)
2024-10-30 05:20:16,975 - INFO - Running job "send_to_telegram (trigger: interval[0:01:00], next run at: 2024-10-30 05:21:16 CDT)" (scheduled at 2024-10-30 05:20:16.970029-05:00)
2024-10-30 05:20:16,975 - INFO - Processing subreddit: girlsfinishingthejob
2024-10-30 05:20:16,975 - INFO - Processing subreddit: wifebutt
2024-10-30 05:20:16,976 - INFO - Fetching top posts of the day
2024-10-30 05:20:16,976 - INFO - Fetching top posts of the month
2024-10-30 05:20:16,977 - DEBUG - Fetching: GET https://oauth.reddit.com/r/girlsfinishingthejob/top at 1730283616.977462
2024-10-30 05:20:16,977 - DEBUG - Fetching: GET https://oauth.reddit.com/r/wifebutt/top at 1730283616.977789
2024-10-30 05:20:16,977 - DEBUG - Data: None
2024-10-30 05:20:16,978 - DEBUG - Data: None
2024-10-30 05:20:16,978 - DEBUG - Params: {'limit': 50, 'raw_json': 1, 't': 'day'}
2024-10-30 05:20:16,978 - DEBUG - Params: {'limit': 50, 'raw_json': 1, 't': 'month'}
2024-10-30 05:20:17,386 - DEBUG - https://oauth.reddit.com:443 "GET /r/girlsfinishingthejob/top?t=day&limit=50&raw_json=1 HTTP/11" 200 24112
2024-10-30 05:20:17,395 - DEBUG - Response: 200 (24112 bytes) (rst-0:rem-148.0:used-2 ratelimit) at 1730283617.395413
2024-10-30 05:20:17,466 - INFO - Checking post: 1gelyz1 - Score: 7091 - URL: https://www.redgifs.com/watch/uttersvelteamphibian
2024-10-30 05:20:17,472 - INFO - Request URL: 'https://cosmossnoogram-centralus.documents.azure.com:443/dbs/ToDoList/colls/sent_posts/docs/'
Request method: 'POST'
Request headers:
    'Cache-Control': 'no-cache'
    'x-ms-version': 'REDACTED'
    'x-ms-documentdb-query-iscontinuationexpected': 'REDACTED'
    'x-ms-consistency-level': 'REDACTED'
    'x-ms-documentdb-isquery': 'REDACTED'
    'Content-Type': 'application/query+json'
    'x-ms-session-token': 'REDACTED'
    'x-ms-documentdb-query-enablecrosspartition': 'REDACTED'
    'x-ms-date': 'REDACTED'
    'authorization': 'REDACTED'
    'Accept': 'application/json'
    'x-ms-cosmos-correlated-activityid': 'REDACTED'
    'Content-Length': '107'
    'User-Agent': 'azsdk-python-cosmos/4.5.1 Python/3.12.4 (macOS-15.0.1-arm64-arm-64bit)'
A body is sent with the request
2024-10-30 05:20:17,504 - DEBUG - https://cosmossnoogram-centralus.documents.azure.com:443 "POST /dbs/ToDoList/colls/sent_posts/docs/ HTTP/11" 200 None
2024-10-30 05:20:17,505 - INFO - Response status: 200
Response headers:
    'Cache-Control': 'no-store, no-cache'
    'Pragma': 'no-cache'
    'Transfer-Encoding': 'chunked'
    'Content-Type': 'application/json'
    'Server': 'Microsoft-HTTPAPI/2.0'
    'Strict-Transport-Security': 'REDACTED'
    'x-ms-activity-id': 'REDACTED'
    'x-ms-last-state-change-utc': 'REDACTED'
    'x-ms-resource-quota': 'REDACTED'
    'x-ms-resource-usage': 'REDACTED'
    'x-ms-schemaversion': 'REDACTED'
    'lsn': 'REDACTED'
    'x-ms-item-count': 'REDACTED'
    'x-ms-request-charge': 'REDACTED'
    'x-ms-alt-content-path': 'REDACTED'
    'x-ms-content-path': 'REDACTED'
    'x-ms-quorum-acked-lsn': 'REDACTED'
    'x-ms-current-write-quorum': 'REDACTED'
    'x-ms-current-replica-set-size': 'REDACTED'
    'x-ms-documentdb-partitionkeyrangeid': 'REDACTED'
    'x-ms-xp-role': 'REDACTED'
    'x-ms-cosmos-query-execution-info': 'REDACTED'
    'x-ms-global-Committed-lsn': 'REDACTED'
    'x-ms-number-of-read-regions': 'REDACTED'
    'x-ms-transport-request-id': 'REDACTED'
    'x-ms-cosmos-llsn': 'REDACTED'
    'x-ms-cosmos-quorum-acked-llsn': 'REDACTED'
    'x-ms-session-token': 'REDACTED'
    'x-ms-request-duration-ms': 'REDACTED'
    'x-ms-serviceversion': 'REDACTED'
    'x-ms-cosmos-is-partition-key-delete-pending': 'REDACTED'
    'x-ms-cosmos-physical-partition-id': 'REDACTED'
    'x-ms-cosmos-internal-partition-id': 'REDACTED'
    'x-ms-gatewayversion': 'REDACTED'
    'Date': 'Wed, 30 Oct 2024 10:20:17 GMT'
2024-10-30 05:20:17,505 - INFO - Found video post: 1gelyz1
2024-10-30 05:20:17,506 - DEBUG - Starting new HTTPS connection (1): api.redgifs.com:443
2024-10-30 05:20:17,598 - DEBUG - https://api.redgifs.com:443 "GET /v2/gifs/uttersvelteamphibian HTTP/11" 200 None
2024-10-30 05:20:17,600 - DEBUG - Starting new HTTPS connection (1): files.redgifs.com:443
2024-10-30 05:20:17,669 - DEBUG - https://files.redgifs.com:443 "GET /UtterSvelteAmphibian.mp4 HTTP/11" 200 42980012
2024-10-30 05:20:18,004 - DEBUG - https://oauth.reddit.com:443 "GET /r/wifebutt/top?t=month&limit=50&raw_json=1 HTTP/11" 200 49242
2024-10-30 05:20:18,039 - DEBUG - Response: 200 (49242 bytes) (rst-0:rem-149.0:used-1 ratelimit) at 1730283618.039145
2024-10-30 05:20:18,044 - INFO - Checking post: 1g9w053 - Score: 5353 - URL: https://www.reddit.com/gallery/1g9w053
2024-10-30 05:20:18,046 - INFO - Request URL: 'https://cosmossnoogram-centralus.documents.azure.com:443/dbs/ToDoList/colls/sent_posts/docs/'
Request method: 'POST'
Request headers:
    'Cache-Control': 'no-cache'
    'x-ms-version': 'REDACTED'
    'x-ms-documentdb-query-iscontinuationexpected': 'REDACTED'
    'x-ms-consistency-level': 'REDACTED'
    'x-ms-documentdb-isquery': 'REDACTED'
    'Content-Type': 'application/query+json'
    'x-ms-session-token': 'REDACTED'
    'x-ms-documentdb-query-enablecrosspartition': 'REDACTED'
    'x-ms-date': 'REDACTED'
    'authorization': 'REDACTED'
    'Accept': 'application/json'
    'x-ms-cosmos-correlated-activityid': 'REDACTED'
    'Content-Length': '107'
    'User-Agent': 'azsdk-python-cosmos/4.5.1 Python/3.12.4 (macOS-15.0.1-arm64-arm-64bit)'
A body is sent with the request
2024-10-30 05:20:18,100 - DEBUG - https://cosmossnoogram-centralus.documents.azure.com:443 "POST /dbs/ToDoList/colls/sent_posts/docs/ HTTP/11" 200 None
2024-10-30 05:20:18,101 - INFO - Response status: 200
Response headers:
    'Cache-Control': 'no-store, no-cache'
    'Pragma': 'no-cache'
    'Transfer-Encoding': 'chunked'
    'Content-Type': 'application/json'
    'Server': 'Microsoft-HTTPAPI/2.0'
    'Strict-Transport-Security': 'REDACTED'
    'x-ms-activity-id': 'REDACTED'
    'x-ms-last-state-change-utc': 'REDACTED'
    'x-ms-resource-quota': 'REDACTED'
    'x-ms-resource-usage': 'REDACTED'
    'x-ms-schemaversion': 'REDACTED'
    'lsn': 'REDACTED'
    'x-ms-item-count': 'REDACTED'
    'x-ms-request-charge': 'REDACTED'
    'x-ms-alt-content-path': 'REDACTED'
    'x-ms-content-path': 'REDACTED'
    'x-ms-quorum-acked-lsn': 'REDACTED'
    'x-ms-current-write-quorum': 'REDACTED'
    'x-ms-current-replica-set-size': 'REDACTED'
    'x-ms-documentdb-partitionkeyrangeid': 'REDACTED'
    'x-ms-xp-role': 'REDACTED'
    'x-ms-cosmos-query-execution-info': 'REDACTED'
    'x-ms-global-Committed-lsn': 'REDACTED'
    'x-ms-number-of-read-regions': 'REDACTED'
    'x-ms-transport-request-id': 'REDACTED'
    'x-ms-cosmos-llsn': 'REDACTED'
    'x-ms-cosmos-quorum-acked-llsn': 'REDACTED'
    'x-ms-session-token': 'REDACTED'
    'x-ms-request-duration-ms': 'REDACTED'
    'x-ms-serviceversion': 'REDACTED'
    'x-ms-cosmos-is-partition-key-delete-pending': 'REDACTED'
    'x-ms-cosmos-physical-partition-id': 'REDACTED'
    'x-ms-cosmos-internal-partition-id': 'REDACTED'
    'x-ms-gatewayversion': 'REDACTED'
    'Date': 'Wed, 30 Oct 2024 10:20:17 GMT'
2024-10-30 05:20:18,101 - INFO - Post 1g9w053 is not an image or video post, skipping
2024-10-30 05:20:18,101 - INFO - Checking post: 1fv4cfc - Score: 4583 - URL: https://www.reddit.com/gallery/1fv4cfc
2024-10-30 05:20:18,102 - INFO - Request URL: 'https://cosmossnoogram-centralus.documents.azure.com:443/dbs/ToDoList/colls/sent_posts/docs/'
Request method: 'POST'
Request headers:
    'Cache-Control': 'no-cache'
    'x-ms-version': 'REDACTED'
    'x-ms-documentdb-query-iscontinuationexpected': 'REDACTED'
    'x-ms-consistency-level': 'REDACTED'
    'x-ms-documentdb-isquery': 'REDACTED'
    'Content-Type': 'application/query+json'
    'x-ms-session-token': 'REDACTED'
    'x-ms-documentdb-query-enablecrosspartition': 'REDACTED'
    'x-ms-date': 'REDACTED'
    'authorization': 'REDACTED'
    'Accept': 'application/json'
    'x-ms-cosmos-correlated-activityid': 'REDACTED'
    'Content-Length': '107'
    'User-Agent': 'azsdk-python-cosmos/4.5.1 Python/3.12.4 (macOS-15.0.1-arm64-arm-64bit)'
A body is sent with the request
2024-10-30 05:20:18,159 - DEBUG - https://cosmossnoogram-centralus.documents.azure.com:443 "POST /dbs/ToDoList/colls/sent_posts/docs/ HTTP/11" 200 None
2024-10-30 05:20:18,160 - INFO - Response status: 200
Response headers:
    'Cache-Control': 'no-store, no-cache'
    'Pragma': 'no-cache'
    'Transfer-Encoding': 'chunked'
    'Content-Type': 'application/json'
    'Server': 'Microsoft-HTTPAPI/2.0'
    'Strict-Transport-Security': 'REDACTED'
    'x-ms-activity-id': 'REDACTED'
    'x-ms-last-state-change-utc': 'REDACTED'
    'x-ms-resource-quota': 'REDACTED'
    'x-ms-resource-usage': 'REDACTED'
    'x-ms-schemaversion': 'REDACTED'
    'lsn': 'REDACTED'
    'x-ms-item-count': 'REDACTED'
    'x-ms-request-charge': 'REDACTED'
    'x-ms-alt-content-path': 'REDACTED'
    'x-ms-content-path': 'REDACTED'
    'x-ms-documentdb-partitionkeyrangeid': 'REDACTED'
    'x-ms-xp-role': 'REDACTED'
    'x-ms-cosmos-query-execution-info': 'REDACTED'
    'x-ms-global-Committed-lsn': 'REDACTED'
    'x-ms-number-of-read-regions': 'REDACTED'
    'x-ms-transport-request-id': 'REDACTED'
    'x-ms-cosmos-llsn': 'REDACTED'
    'x-ms-session-token': 'REDACTED'
    'x-ms-request-duration-ms': 'REDACTED'
    'x-ms-serviceversion': 'REDACTED'
    'x-ms-cosmos-is-partition-key-delete-pending': 'REDACTED'
    'x-ms-cosmos-physical-partition-id': 'REDACTED'
    'x-ms-cosmos-internal-partition-id': 'REDACTED'
    'x-ms-gatewayversion': 'REDACTED'
    'Date': 'Wed, 30 Oct 2024 10:20:17 GMT'
2024-10-30 05:20:18,161 - INFO - Post 1fv4cfc is not an image or video post, skipping
2024-10-30 05:20:18,161 - INFO - Checking post: 1ganrp0 - Score: 4206 - URL: https://i.redd.it/ezatz8645lwd1.jpeg
2024-10-30 05:20:18,162 - INFO - Request URL: 'https://cosmossnoogram-centralus.documents.azure.com:443/dbs/ToDoList/colls/sent_posts/docs/'
Request method: 'POST'
Request headers:
    'Cache-Control': 'no-cache'
    'x-ms-version': 'REDACTED'
    'x-ms-documentdb-query-iscontinuationexpected': 'REDACTED'
    'x-ms-consistency-level': 'REDACTED'
    'x-ms-documentdb-isquery': 'REDACTED'
    'Content-Type': 'application/query+json'
    'x-ms-session-token': 'REDACTED'
    'x-ms-documentdb-query-enablecrosspartition': 'REDACTED'
    'x-ms-date': 'REDACTED'
    'authorization': 'REDACTED'
    'Accept': 'application/json'
    'x-ms-cosmos-correlated-activityid': 'REDACTED'
    'Content-Length': '107'
    'User-Agent': 'azsdk-python-cosmos/4.5.1 Python/3.12.4 (macOS-15.0.1-arm64-arm-64bit)'
A body is sent with the request
2024-10-30 05:20:18,224 - DEBUG - https://cosmossnoogram-centralus.documents.azure.com:443 "POST /dbs/ToDoList/colls/sent_posts/docs/ HTTP/11" 200 None
2024-10-30 05:20:18,224 - INFO - Response status: 200
Response headers:
    'Cache-Control': 'no-store, no-cache'
    'Pragma': 'no-cache'
    'Transfer-Encoding': 'chunked'
    'Content-Type': 'application/json'
    'Server': 'Microsoft-HTTPAPI/2.0'
    'Strict-Transport-Security': 'REDACTED'
    'x-ms-activity-id': 'REDACTED'
    'x-ms-last-state-change-utc': 'REDACTED'
    'x-ms-resource-quota': 'REDACTED'
    'x-ms-resource-usage': 'REDACTED'
    'x-ms-schemaversion': 'REDACTED'
    'lsn': 'REDACTED'
    'x-ms-item-count': 'REDACTED'
    'x-ms-request-charge': 'REDACTED'
    'x-ms-alt-content-path': 'REDACTED'
    'x-ms-content-path': 'REDACTED'
    'x-ms-documentdb-partitionkeyrangeid': 'REDACTED'
    'x-ms-xp-role': 'REDACTED'
    'x-ms-cosmos-query-execution-info': 'REDACTED'
    'x-ms-global-Committed-lsn': 'REDACTED'
    'x-ms-number-of-read-regions': 'REDACTED'
    'x-ms-transport-request-id': 'REDACTED'
    'x-ms-cosmos-llsn': 'REDACTED'
    'x-ms-session-token': 'REDACTED'
    'x-ms-request-duration-ms': 'REDACTED'
    'x-ms-serviceversion': 'REDACTED'
    'x-ms-cosmos-is-partition-key-delete-pending': 'REDACTED'
    'x-ms-cosmos-physical-partition-id': 'REDACTED'
    'x-ms-cosmos-internal-partition-id': 'REDACTED'
    'x-ms-gatewayversion': 'REDACTED'
    'Date': 'Wed, 30 Oct 2024 10:20:17 GMT'
2024-10-30 05:20:18,224 - INFO - Post 1ganrp0 is a duplicate, skipping
2024-10-30 05:20:18,224 - INFO - Checking post: 1gdrcjt - Score: 4070 - URL: https://www.redgifs.com/watch/unrealisticdefinitebarebirdbat
2024-10-30 05:20:18,225 - INFO - Post 1gdrcjt is a duplicate, skipping
2024-10-30 05:20:18,225 - INFO - Checking post: 1g30sx1 - Score: 3961 - URL: https://www.redgifs.com/watch/hardwarlikesunbittern
2024-10-30 05:20:18,226 - INFO - Post 1g30sx1 is a duplicate, skipping
2024-10-30 05:20:18,226 - INFO - Checking post: 1fs7839 - Score: 3853 - URL: https://www.reddit.com/gallery/1fs7839
2024-10-30 05:20:18,226 - INFO - Request URL: 'https://cosmossnoogram-centralus.documents.azure.com:443/dbs/ToDoList/colls/sent_posts/docs/'
Request method: 'POST'
Request headers:
    'Cache-Control': 'no-cache'
    'x-ms-version': 'REDACTED'
    'x-ms-documentdb-query-iscontinuationexpected': 'REDACTED'
    'x-ms-consistency-level': 'REDACTED'
    'x-ms-documentdb-isquery': 'REDACTED'
    'Content-Type': 'application/query+json'
    'x-ms-session-token': 'REDACTED'
    'x-ms-documentdb-query-enablecrosspartition': 'REDACTED'
    'x-ms-date': 'REDACTED'
    'authorization': 'REDACTED'
    'Accept': 'application/json'
    'x-ms-cosmos-correlated-activityid': 'REDACTED'
    'Content-Length': '107'
    'User-Agent': 'azsdk-python-cosmos/4.5.1 Python/3.12.4 (macOS-15.0.1-arm64-arm-64bit)'
A body is sent with the request
2024-10-30 05:20:18,291 - DEBUG - https://cosmossnoogram-centralus.documents.azure.com:443 "POST /dbs/ToDoList/colls/sent_posts/docs/ HTTP/11" 200 None
2024-10-30 05:20:18,294 - INFO - Response status: 200
Response headers:
    'Cache-Control': 'no-store, no-cache'
    'Pragma': 'no-cache'
    'Transfer-Encoding': 'chunked'
    'Content-Type': 'application/json'
    'Server': 'Microsoft-HTTPAPI/2.0'
    'Strict-Transport-Security': 'REDACTED'
    'x-ms-activity-id': 'REDACTED'
    'x-ms-last-state-change-utc': 'REDACTED'
    'x-ms-resource-quota': 'REDACTED'
    'x-ms-resource-usage': 'REDACTED'
    'x-ms-schemaversion': 'REDACTED'
    'lsn': 'REDACTED'
    'x-ms-item-count': 'REDACTED'
    'x-ms-request-charge': 'REDACTED'
    'x-ms-alt-content-path': 'REDACTED'
    'x-ms-content-path': 'REDACTED'
    'x-ms-documentdb-partitionkeyrangeid': 'REDACTED'
    'x-ms-xp-role': 'REDACTED'
    'x-ms-cosmos-query-execution-info': 'REDACTED'
    'x-ms-global-Committed-lsn': 'REDACTED'
    'x-ms-number-of-read-regions': 'REDACTED'
    'x-ms-transport-request-id': 'REDACTED'
    'x-ms-cosmos-llsn': 'REDACTED'
    'x-ms-session-token': 'REDACTED'
    'x-ms-request-duration-ms': 'REDACTED'
    'x-ms-serviceversion': 'REDACTED'
    'x-ms-cosmos-is-partition-key-delete-pending': 'REDACTED'
    'x-ms-cosmos-physical-partition-id': 'REDACTED'
    'x-ms-cosmos-internal-partition-id': 'REDACTED'
    'x-ms-gatewayversion': 'REDACTED'
    'Date': 'Wed, 30 Oct 2024 10:20:18 GMT'
2024-10-30 05:20:18,294 - INFO - Post 1fs7839 is not an image or video post, skipping
2024-10-30 05:20:18,295 - INFO - Checking post: 1g2rse9 - Score: 3767 - URL: https://i.redd.it/gzxs1aeshjud1.png
2024-10-30 05:20:18,297 - INFO - Post 1g2rse9 is a duplicate, skipping
2024-10-30 05:20:18,297 - INFO - Checking post: 1ge9loz - Score: 3725 - URL: https://www.redgifs.com/watch/deadlygregariouswoodchuck
2024-10-30 05:20:18,297 - INFO - Post 1ge9loz is a duplicate, skipping
2024-10-30 05:20:18,297 - INFO - Checking post: 1g0e966 - Score: 3638 - URL: https://www.reddit.com/gallery/1g0e966
2024-10-30 05:20:18,298 - INFO - Request URL: 'https://cosmossnoogram-centralus.documents.azure.com:443/dbs/ToDoList/colls/sent_posts/docs/'
Request method: 'POST'
Request headers:
    'Cache-Control': 'no-cache'
    'x-ms-version': 'REDACTED'
    'x-ms-documentdb-query-iscontinuationexpected': 'REDACTED'
    'x-ms-consistency-level': 'REDACTED'
    'x-ms-documentdb-isquery': 'REDACTED'
    'Content-Type': 'application/query+json'
    'x-ms-session-token': 'REDACTED'
    'x-ms-documentdb-query-enablecrosspartition': 'REDACTED'
    'x-ms-date': 'REDACTED'
    'authorization': 'REDACTED'
    'Accept': 'application/json'
    'x-ms-cosmos-correlated-activityid': 'REDACTED'
    'Content-Length': '107'
    'User-Agent': 'azsdk-python-cosmos/4.5.1 Python/3.12.4 (macOS-15.0.1-arm64-arm-64bit)'
A body is sent with the request
2024-10-30 05:20:18,353 - DEBUG - https://cosmossnoogram-centralus.documents.azure.com:443 "POST /dbs/ToDoList/colls/sent_posts/docs/ HTTP/11" 200 None
2024-10-30 05:20:18,353 - INFO - Response status: 200
Response headers:
    'Cache-Control': 'no-store, no-cache'
    'Pragma': 'no-cache'
    'Transfer-Encoding': 'chunked'
    'Content-Type': 'application/json'
    'Server': 'Microsoft-HTTPAPI/2.0'
    'Strict-Transport-Security': 'REDACTED'
    'x-ms-activity-id': 'REDACTED'
    'x-ms-last-state-change-utc': 'REDACTED'
    'x-ms-resource-quota': 'REDACTED'
    'x-ms-resource-usage': 'REDACTED'
    'x-ms-schemaversion': 'REDACTED'
    'lsn': 'REDACTED'
    'x-ms-item-count': 'REDACTED'
    'x-ms-request-charge': 'REDACTED'
    'x-ms-alt-content-path': 'REDACTED'
    'x-ms-content-path': 'REDACTED'
    'x-ms-documentdb-partitionkeyrangeid': 'REDACTED'
    'x-ms-xp-role': 'REDACTED'
    'x-ms-cosmos-query-execution-info': 'REDACTED'
    'x-ms-global-Committed-lsn': 'REDACTED'
    'x-ms-number-of-read-regions': 'REDACTED'
    'x-ms-transport-request-id': 'REDACTED'
    'x-ms-cosmos-llsn': 'REDACTED'
    'x-ms-session-token': 'REDACTED'
    'x-ms-request-duration-ms': 'REDACTED'
    'x-ms-serviceversion': 'REDACTED'
    'x-ms-cosmos-is-partition-key-delete-pending': 'REDACTED'
    'x-ms-cosmos-physical-partition-id': 'REDACTED'
    'x-ms-cosmos-internal-partition-id': 'REDACTED'
    'x-ms-gatewayversion': 'REDACTED'
    'Date': 'Wed, 30 Oct 2024 10:20:18 GMT'
2024-10-30 05:20:18,354 - INFO - Post 1g0e966 is not an image or video post, skipping
2024-10-30 05:20:18,354 - INFO - Checking post: 1gckgcy - Score: 3394 - URL: https://i.redd.it/njd0mbyjl3xd1.jpeg
2024-10-30 05:20:18,355 - INFO - Post 1gckgcy is a duplicate, skipping
2024-10-30 05:20:18,355 - INFO - Checking post: 1fznoil - Score: 3338 - URL: https://i.redd.it/eruk3694dptd1.jpeg
2024-10-30 05:20:18,355 - INFO - Post 1fznoil is a duplicate, skipping
2024-10-30 05:20:18,355 - INFO - Checking post: 1g3dsj7 - Score: 3178 - URL: https://i.redd.it/cg9oigznmpud1.jpeg
2024-10-30 05:20:18,356 - INFO - Post 1g3dsj7 is a duplicate, skipping
2024-10-30 05:20:18,356 - INFO - Checking post: 1g4dx9i - Score: 3138 - URL: https://i.redd.it/5kv3c8f3lyud1.jpeg
2024-10-30 05:20:18,356 - INFO - Request URL: 'https://cosmossnoogram-centralus.documents.azure.com:443/dbs/ToDoList/colls/sent_posts/docs/'
Request method: 'POST'
Request headers:
    'Cache-Control': 'no-cache'
    'x-ms-version': 'REDACTED'
    'x-ms-documentdb-query-iscontinuationexpected': 'REDACTED'
    'x-ms-consistency-level': 'REDACTED'
    'x-ms-documentdb-isquery': 'REDACTED'
    'Content-Type': 'application/query+json'
    'x-ms-session-token': 'REDACTED'
    'x-ms-documentdb-query-enablecrosspartition': 'REDACTED'
    'x-ms-date': 'REDACTED'
    'authorization': 'REDACTED'
    'Accept': 'application/json'
    'x-ms-cosmos-correlated-activityid': 'REDACTED'
    'Content-Length': '107'
    'User-Agent': 'azsdk-python-cosmos/4.5.1 Python/3.12.4 (macOS-15.0.1-arm64-arm-64bit)'
A body is sent with the request
2024-10-30 05:20:18,417 - DEBUG - https://cosmossnoogram-centralus.documents.azure.com:443 "POST /dbs/ToDoList/colls/sent_posts/docs/ HTTP/11" 200 None
2024-10-30 05:20:18,418 - INFO - Response status: 200
Response headers:
    'Cache-Control': 'no-store, no-cache'
    'Pragma': 'no-cache'
    'Transfer-Encoding': 'chunked'
    'Content-Type': 'application/json'
    'Server': 'Microsoft-HTTPAPI/2.0'
    'Strict-Transport-Security': 'REDACTED'
    'x-ms-activity-id': 'REDACTED'
    'x-ms-last-state-change-utc': 'REDACTED'
    'x-ms-resource-quota': 'REDACTED'
    'x-ms-resource-usage': 'REDACTED'
    'x-ms-schemaversion': 'REDACTED'
    'lsn': 'REDACTED'
    'x-ms-item-count': 'REDACTED'
    'x-ms-request-charge': 'REDACTED'
    'x-ms-alt-content-path': 'REDACTED'
    'x-ms-content-path': 'REDACTED'
    'x-ms-documentdb-partitionkeyrangeid': 'REDACTED'
    'x-ms-xp-role': 'REDACTED'
    'x-ms-cosmos-query-execution-info': 'REDACTED'
    'x-ms-global-Committed-lsn': 'REDACTED'
    'x-ms-number-of-read-regions': 'REDACTED'
    'x-ms-transport-request-id': 'REDACTED'
    'x-ms-cosmos-llsn': 'REDACTED'
    'x-ms-session-token': 'REDACTED'
    'x-ms-request-duration-ms': 'REDACTED'
    'x-ms-serviceversion': 'REDACTED'
    'x-ms-cosmos-is-partition-key-delete-pending': 'REDACTED'
    'x-ms-cosmos-physical-partition-id': 'REDACTED'
    'x-ms-cosmos-internal-partition-id': 'REDACTED'
    'x-ms-gatewayversion': 'REDACTED'
    'Date': 'Wed, 30 Oct 2024 10:20:18 GMT'
2024-10-30 05:20:18,418 - INFO - Post 1g4dx9i is a duplicate, skipping
2024-10-30 05:20:18,418 - INFO - Checking post: 1ftaz41 - Score: 3135 - URL: https://i.redd.it/2meejva1g1sd1.jpeg
2024-10-30 05:20:18,419 - INFO - Request URL: 'https://cosmossnoogram-centralus.documents.azure.com:443/dbs/ToDoList/colls/sent_posts/docs/'
Request method: 'POST'
Request headers:
    'Cache-Control': 'no-cache'
    'x-ms-version': 'REDACTED'
    'x-ms-documentdb-query-iscontinuationexpected': 'REDACTED'
    'x-ms-consistency-level': 'REDACTED'
    'x-ms-documentdb-isquery': 'REDACTED'
    'Content-Type': 'application/query+json'
    'x-ms-session-token': 'REDACTED'
    'x-ms-documentdb-query-enablecrosspartition': 'REDACTED'
    'x-ms-date': 'REDACTED'
    'authorization': 'REDACTED'
    'Accept': 'application/json'
    'x-ms-cosmos-correlated-activityid': 'REDACTED'
    'Content-Length': '107'
    'User-Agent': 'azsdk-python-cosmos/4.5.1 Python/3.12.4 (macOS-15.0.1-arm64-arm-64bit)'
A body is sent with the request
2024-10-30 05:20:18,476 - DEBUG - https://cosmossnoogram-centralus.documents.azure.com:443 "POST /dbs/ToDoList/colls/sent_posts/docs/ HTTP/11" 200 None
2024-10-30 05:20:18,476 - INFO - Response status: 200
Response headers:
    'Cache-Control': 'no-store, no-cache'
    'Pragma': 'no-cache'
    'Transfer-Encoding': 'chunked'
    'Content-Type': 'application/json'
    'Server': 'Microsoft-HTTPAPI/2.0'
    'Strict-Transport-Security': 'REDACTED'
    'x-ms-activity-id': 'REDACTED'
    'x-ms-last-state-change-utc': 'REDACTED'
    'x-ms-resource-quota': 'REDACTED'
    'x-ms-resource-usage': 'REDACTED'
    'x-ms-schemaversion': 'REDACTED'
    'lsn': 'REDACTED'
    'x-ms-item-count': 'REDACTED'
    'x-ms-request-charge': 'REDACTED'
    'x-ms-alt-content-path': 'REDACTED'
    'x-ms-content-path': 'REDACTED'
    'x-ms-documentdb-partitionkeyrangeid': 'REDACTED'
    'x-ms-xp-role': 'REDACTED'
    'x-ms-cosmos-query-execution-info': 'REDACTED'
    'x-ms-global-Committed-lsn': 'REDACTED'
    'x-ms-number-of-read-regions': 'REDACTED'
    'x-ms-transport-request-id': 'REDACTED'
    'x-ms-cosmos-llsn': 'REDACTED'
    'x-ms-session-token': 'REDACTED'
    'x-ms-request-duration-ms': 'REDACTED'
    'x-ms-serviceversion': 'REDACTED'
    'x-ms-cosmos-is-partition-key-delete-pending': 'REDACTED'
    'x-ms-cosmos-physical-partition-id': 'REDACTED'
    'x-ms-cosmos-internal-partition-id': 'REDACTED'
    'x-ms-gatewayversion': 'REDACTED'
    'Date': 'Wed, 30 Oct 2024 10:20:18 GMT'
2024-10-30 05:20:18,477 - INFO - Found image post: 1ftaz41 with URL: https://i.redd.it/2meejva1g1sd1.jpeg
2024-10-30 05:20:18,477 - DEBUG - Starting new HTTPS connection (1): i.redd.it:443
2024-10-30 05:20:18,641 - DEBUG - https://i.redd.it:443 "GET /2meejva1g1sd1.jpeg HTTP/11" 200 1985406
2024-10-30 05:20:18,987 - INFO - Successfully downloaded media to downloads/pics/1ftaz41_20241030_052018_48b57fcf.jpeg
2024-10-30 05:20:18,988 - DEBUG - Using selector: KqueueSelector
2024-10-30 05:20:18,988 - INFO - Attempting to send photo to Telegram - Path: downloads/pics/1ftaz41_20241030_052018_48b57fcf.jpeg
2024-10-30 05:20:18,989 - DEBUG - load_ssl_context verify=True cert=None trust_env=True http2=False
2024-10-30 05:20:18,989 - DEBUG - load_verify_locations cafile='/Users/joewilson/PythonProjects/Snoogram/venv/lib/python3.12/site-packages/certifi/cacert.pem'
2024-10-30 05:20:18,998 - DEBUG - load_ssl_context verify=True cert=None trust_env=True http2=False
2024-10-30 05:20:18,998 - DEBUG - load_verify_locations cafile='/Users/joewilson/PythonProjects/Snoogram/venv/lib/python3.12/site-packages/certifi/cacert.pem'
2024-10-30 05:20:19,005 - DEBUG - Entering: get_me
2024-10-30 05:20:19,006 - DEBUG - connect_tcp.started host='api.telegram.org' port=443 local_address=None timeout=5.0 socket_options=None
2024-10-30 05:20:19,022 - INFO - Successfully downloaded media to downloads/videos/1gelyz1_20241030_052017_ba5c8ead.mp4
2024-10-30 05:20:19,023 - DEBUG - Using selector: KqueueSelector
2024-10-30 05:20:19,024 - INFO - Attempting to send video to Telegram - Path: downloads/videos/1gelyz1_20241030_052017_ba5c8ead.mp4
2024-10-30 05:20:19,024 - DEBUG - Entering: get_me
2024-10-30 05:20:19,024 - DEBUG - connect_tcp.started host='api.telegram.org' port=443 local_address=None timeout=5.0 socket_options=None
2024-10-30 05:20:19,130 - DEBUG - connect_tcp.complete return_value=<httpcore._backends.anyio.AnyIOStream object at 0x108d9f890>
2024-10-30 05:20:19,130 - DEBUG - start_tls.started ssl_context=<ssl.SSLContext object at 0x108f3e7d0> server_hostname='api.telegram.org' timeout=5.0
2024-10-30 05:20:19,145 - DEBUG - connect_tcp.complete return_value=<httpcore._backends.anyio.AnyIOStream object at 0x108eac230>
2024-10-30 05:20:19,145 - DEBUG - start_tls.started ssl_context=<ssl.SSLContext object at 0x108f3e7d0> server_hostname='api.telegram.org' timeout=5.0
2024-10-30 05:20:19,263 - DEBUG - start_tls.complete return_value=<httpcore._backends.anyio.AnyIOStream object at 0x108d9ffb0>
2024-10-30 05:20:19,264 - DEBUG - send_request_headers.started request=<Request [b'POST']>
2024-10-30 05:20:19,265 - DEBUG - send_request_headers.complete
2024-10-30 05:20:19,265 - DEBUG - send_request_body.started request=<Request [b'POST']>
2024-10-30 05:20:19,265 - DEBUG - send_request_body.complete
2024-10-30 05:20:19,265 - DEBUG - receive_response_headers.started request=<Request [b'POST']>
2024-10-30 05:20:19,274 - DEBUG - start_tls.complete return_value=<httpcore._backends.anyio.AnyIOStream object at 0x108eae5d0>
2024-10-30 05:20:19,274 - DEBUG - send_request_headers.started request=<Request [b'POST']>
2024-10-30 05:20:19,274 - DEBUG - send_request_headers.complete
2024-10-30 05:20:19,274 - DEBUG - send_request_body.started request=<Request [b'POST']>
2024-10-30 05:20:19,275 - DEBUG - send_request_body.complete
2024-10-30 05:20:19,275 - DEBUG - receive_response_headers.started request=<Request [b'POST']>
2024-10-30 05:20:19,383 - DEBUG - receive_response_headers.complete return_value=(b'HTTP/1.1', 200, b'OK', [(b'Server', b'nginx/1.18.0'), (b'Date', b'Wed, 30 Oct 2024 10:20:19 GMT'), (b'Content-Type', b'application/json'), (b'Content-Length', b'254'), (b'Connection', b'keep-alive'), (b'Strict-Transport-Security', b'max-age=31536000; includeSubDomains; preload'), (b'Access-Control-Allow-Origin', b'*'), (b'Access-Control-Allow-Methods', b'GET, POST, OPTIONS'), (b'Access-Control-Expose-Headers', b'Content-Length,Content-Type,Date,Server,Connection')])
2024-10-30 05:20:19,384 - INFO - HTTP Request: POST https://api.telegram.org/bot7867694458:AAEFLZjWPyd1p640mHENnBt479WRYfSavWg/getMe "HTTP/1.1 200 OK"
2024-10-30 05:20:19,384 - DEBUG - receive_response_body.started request=<Request [b'POST']>
2024-10-30 05:20:19,385 - DEBUG - receive_response_body.complete
2024-10-30 05:20:19,385 - DEBUG - response_closed.started
2024-10-30 05:20:19,385 - DEBUG - response_closed.complete
2024-10-30 05:20:19,385 - DEBUG - User(api_kwargs={'can_connect_to_business': False, 'has_main_web_app': False}, can_join_groups=True, can_read_all_group_messages=False, first_name='RedditBot', id=7867694458, is_bot=True, supports_inline_queries=False, username='RedditImage_bot')
2024-10-30 05:20:19,386 - DEBUG - Exiting: get_me
2024-10-30 05:20:19,386 - DEBUG - This Bot is already initialized.
2024-10-30 05:20:19,386 - DEBUG - Entering: send_photo
2024-10-30 05:20:19,392 - DEBUG - receive_response_headers.complete return_value=(b'HTTP/1.1', 200, b'OK', [(b'Server', b'nginx/1.18.0'), (b'Date', b'Wed, 30 Oct 2024 10:20:19 GMT'), (b'Content-Type', b'application/json'), (b'Content-Length', b'254'), (b'Connection', b'keep-alive'), (b'Strict-Transport-Security', b'max-age=31536000; includeSubDomains; preload'), (b'Access-Control-Allow-Origin', b'*'), (b'Access-Control-Allow-Methods', b'GET, POST, OPTIONS'), (b'Access-Control-Expose-Headers', b'Content-Length,Content-Type,Date,Server,Connection')])
2024-10-30 05:20:19,393 - INFO - HTTP Request: POST https://api.telegram.org/bot7867694458:AAEFLZjWPyd1p640mHENnBt479WRYfSavWg/getMe "HTTP/1.1 200 OK"
2024-10-30 05:20:19,393 - DEBUG - send_request_headers.started request=<Request [b'POST']>
2024-10-30 05:20:19,393 - DEBUG - receive_response_body.started request=<Request [b'POST']>
2024-10-30 05:20:19,394 - DEBUG - receive_response_body.complete
2024-10-30 05:20:19,394 - DEBUG - send_request_headers.complete
2024-10-30 05:20:19,394 - DEBUG - response_closed.started
2024-10-30 05:20:19,394 - DEBUG - send_request_body.started request=<Request [b'POST']>
2024-10-30 05:20:19,394 - DEBUG - response_closed.complete
2024-10-30 05:20:19,395 - DEBUG - User(api_kwargs={'can_connect_to_business': False, 'has_main_web_app': False}, can_join_groups=True, can_read_all_group_messages=False, first_name='RedditBot', id=7867694458, is_bot=True, supports_inline_queries=False, username='RedditImage_bot')
2024-10-30 05:20:19,395 - DEBUG - Exiting: get_me
2024-10-30 05:20:19,395 - DEBUG - This Updater is already initialized.
2024-10-30 05:20:19,395 - DEBUG - Entering: send_video
2024-10-30 05:20:19,409 - DEBUG - send_request_headers.started request=<Request [b'POST']>
2024-10-30 05:20:19,410 - DEBUG - send_request_headers.complete
2024-10-30 05:20:19,410 - DEBUG - send_request_body.started request=<Request [b'POST']>
2024-10-30 05:20:20,299 - DEBUG - send_request_body.complete
2024-10-30 05:20:20,299 - DEBUG - receive_response_headers.started request=<Request [b'POST']>
2024-10-30 05:20:21,263 - DEBUG - receive_response_headers.complete return_value=(b'HTTP/1.1', 200, b'OK', [(b'Server', b'nginx/1.18.0'), (b'Date', b'Wed, 30 Oct 2024 10:20:20 GMT'), (b'Content-Type', b'application/json'), (b'Content-Length', b'1274'), (b'Connection', b'keep-alive'), (b'Strict-Transport-Security', b'max-age=31536000; includeSubDomains; preload'), (b'Access-Control-Allow-Origin', b'*'), (b'Access-Control-Allow-Methods', b'GET, POST, OPTIONS'), (b'Access-Control-Expose-Headers', b'Content-Length,Content-Type,Date,Server,Connection')])
2024-10-30 05:20:21,264 - INFO - HTTP Request: POST https://api.telegram.org/bot7867694458:AAEFLZjWPyd1p640mHENnBt479WRYfSavWg/sendPhoto "HTTP/1.1 200 OK"
2024-10-30 05:20:21,264 - DEBUG - receive_response_body.started request=<Request [b'POST']>
2024-10-30 05:20:21,265 - DEBUG - receive_response_body.complete
2024-10-30 05:20:21,265 - DEBUG - response_closed.started
2024-10-30 05:20:21,265 - DEBUG - response_closed.complete
2024-10-30 05:20:21,270 - DEBUG - Message(caption='From r/wifebutt: My freshly showered wifebutt getting laundry done before hubby gets homeâ¤ï¸\nUpvotes: 3,135', channel_chat_created=False, chat=Chat(id=-1002490380283, title='Reddit_Pic_Stream', type=<ChatType.CHANNEL>), date=datetime.datetime(2024, 10, 30, 10, 20, 20, tzinfo=<UTC>), delete_chat_photo=False, group_chat_created=False, message_id=230, photo=(PhotoSize(file_id='AgACAgEAAyEGAASUcC_7AAOVZyH6fIsDbmatiKqYBM-ekhjWV94AAkatMRsZEBFFVdgzLssswhoBAAMCAANzAAM2BA', file_size=1559, file_unique_id='AQADRq0xGxkQEUV4', height=90, width=58), PhotoSize(file_id='AgACAgEAAyEGAASUcC_7AAOVZyH6fIsDbmatiKqYBM-ekhjWV94AAkatMRsZEBFFVdgzLssswhoBAAMCAANtAAM2BA', file_size=20620, file_unique_id='AQADRq0xGxkQEUVy', height=320, width=206), PhotoSize(file_id='AgACAgEAAyEGAASUcC_7AAOVZyH6fIsDbmatiKqYBM-ekhjWV94AAkatMRsZEBFFVdgzLssswhoBAAMCAAN4AAM2BA', file_size=93007, file_unique_id='AQADRq0xGxkQEUV9', height=800, width=516), PhotoSize(file_id='AgACAgEAAyEGAASUcC_7AAOVZyH6fIsDbmatiKqYBM-ekhjWV94AAkatMRsZEBFFVdgzLssswhoBAAMCAAN5AAM2BA', file_size=202595, file_unique_id='AQADRq0xGxkQEUV-', height=1280, width=826), PhotoSize(file_id='AgACAgEAAyEGAASUcC_7AAOVZyH6fIsDbmatiKqYBM-ekhjWV94AAkatMRsZEBFFVdgzLssswhoBAAMCAAN3AAM2BA', file_size=633586, file_unique_id='AQADRq0xGxkQEUV8', height=2560, width=1653)), sender_chat=Chat(id=-1002490380283, title='Reddit_Pic_Stream', type=<ChatType.CHANNEL>), supergroup_chat_created=False)
2024-10-30 05:20:21,271 - DEBUG - Exiting: send_photo
2024-10-30 05:20:21,272 - DEBUG - close.started
2024-10-30 05:20:21,272 - DEBUG - close.complete
2024-10-30 05:20:21,272 - DEBUG - close.started
2024-10-30 05:20:21,273 - DEBUG - close.complete
2024-10-30 05:20:21,273 - DEBUG - This Bot is already shut down. Returning.
2024-10-30 05:20:21,273 - DEBUG - Shut down of Updater complete
2024-10-30 05:20:21,273 - INFO - Successfully sent photo to Telegram
2024-10-30 05:20:21,276 - ERROR - Error processing subreddit wifebutt: (sqlite3.OperationalError) attempt to write a readonly database
[SQL: INSERT INTO sent_post (post_id, subreddit_name, sent_at) VALUES (?, ?, ?)]
[parameters: ('1ftaz41', 'wifebutt', '2024-10-30 10:20:21.276268')]
(Background on this error at: https://sqlalche.me/e/20/e3q8)
2024-10-30 05:20:21,279 - ERROR - Job "send_to_telegram (trigger: interval[0:01:00], next run at: 2024-10-30 05:21:16 CDT)" raised an exception
Traceback (most recent call last):
  File "/Users/joewilson/PythonProjects/Snoogram/venv/lib/python3.12/site-packages/sqlalchemy/engine/base.py", line 1967, in _exec_single_context
    self.dialect.do_execute(
  File "/Users/joewilson/PythonProjects/Snoogram/venv/lib/python3.12/site-packages/sqlalchemy/engine/default.py", line 941, in do_execute
    cursor.execute(statement, parameters)
sqlite3.OperationalError: attempt to write a readonly database

The above exception was the direct cause of the following exception:

Traceback (most recent call last):
  File "/Users/joewilson/PythonProjects/Snoogram/venv/lib/python3.12/site-packages/apscheduler/executors/base.py", line 125, in run_job
    retval = job.func(*job.args, **job.kwargs)
             ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/Users/joewilson/PythonProjects/Snoogram/backend/app.py", line 265, in send_to_telegram
    # Update last_check in Cosmos DB
                ^^^^^^^^^^^^^^^^^^^^^
  File "/Users/joewilson/PythonProjects/Snoogram/backend/db_operations.py", line 100, in add_sent_post
  File "/Users/joewilson/PythonProjects/Snoogram/venv/lib/python3.12/site-packages/sqlalchemy/orm/scoping.py", line 597, in commit
    return self._proxied.commit()
           ^^^^^^^^^^^^^^^^^^^^^^
  File "/Users/joewilson/PythonProjects/Snoogram/venv/lib/python3.12/site-packages/sqlalchemy/orm/session.py", line 2028, in commit
    trans.commit(_to_root=True)
  File "<string>", line 2, in commit
  File "/Users/joewilson/PythonProjects/Snoogram/venv/lib/python3.12/site-packages/sqlalchemy/orm/state_changes.py", line 139, in _go
    ret_value = fn(self, *arg, **kw)
                ^^^^^^^^^^^^^^^^^^^^
  File "/Users/joewilson/PythonProjects/Snoogram/venv/lib/python3.12/site-packages/sqlalchemy/orm/session.py", line 1313, in commit
    self._prepare_impl()
  File "<string>", line 2, in _prepare_impl
  File "/Users/joewilson/PythonProjects/Snoogram/venv/lib/python3.12/site-packages/sqlalchemy/orm/state_changes.py", line 139, in _go
    ret_value = fn(self, *arg, **kw)
                ^^^^^^^^^^^^^^^^^^^^
  File "/Users/joewilson/PythonProjects/Snoogram/venv/lib/python3.12/site-packages/sqlalchemy/orm/session.py", line 1288, in _prepare_impl
    self.session.flush()
  File "/Users/joewilson/PythonProjects/Snoogram/venv/lib/python3.12/site-packages/sqlalchemy/orm/session.py", line 4352, in flush
    self._flush(objects)
  File "/Users/joewilson/PythonProjects/Snoogram/venv/lib/python3.12/site-packages/sqlalchemy/orm/session.py", line 4487, in _flush
    with util.safe_reraise():
  File "/Users/joewilson/PythonProjects/Snoogram/venv/lib/python3.12/site-packages/sqlalchemy/util/langhelpers.py", line 146, in __exit__
    raise exc_value.with_traceback(exc_tb)
  File "/Users/joewilson/PythonProjects/Snoogram/venv/lib/python3.12/site-packages/sqlalchemy/orm/session.py", line 4448, in _flush
    flush_context.execute()
  File "/Users/joewilson/PythonProjects/Snoogram/venv/lib/python3.12/site-packages/sqlalchemy/orm/unitofwork.py", line 466, in execute
    rec.execute(self)
  File "/Users/joewilson/PythonProjects/Snoogram/venv/lib/python3.12/site-packages/sqlalchemy/orm/unitofwork.py", line 642, in execute
    util.preloaded.orm_persistence.save_obj(
  File "/Users/joewilson/PythonProjects/Snoogram/venv/lib/python3.12/site-packages/sqlalchemy/orm/persistence.py", line 93, in save_obj
    _emit_insert_statements(
  File "/Users/joewilson/PythonProjects/Snoogram/venv/lib/python3.12/site-packages/sqlalchemy/orm/persistence.py", line 1233, in _emit_insert_statements
    result = connection.execute(
             ^^^^^^^^^^^^^^^^^^^
  File "/Users/joewilson/PythonProjects/Snoogram/venv/lib/python3.12/site-packages/sqlalchemy/engine/base.py", line 1418, in execute
    return meth(
           ^^^^^
  File "/Users/joewilson/PythonProjects/Snoogram/venv/lib/python3.12/site-packages/sqlalchemy/sql/elements.py", line 515, in _execute_on_connection
    return connection._execute_clauseelement(
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/Users/joewilson/PythonProjects/Snoogram/venv/lib/python3.12/site-packages/sqlalchemy/engine/base.py", line 1640, in _execute_clauseelement
    ret = self._execute_context(
          ^^^^^^^^^^^^^^^^^^^^^^
  File "/Users/joewilson/PythonProjects/Snoogram/venv/lib/python3.12/site-packages/sqlalchemy/engine/base.py", line 1846, in _execute_context
    return self._exec_single_context(
           ^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/Users/joewilson/PythonProjects/Snoogram/venv/lib/python3.12/site-packages/sqlalchemy/engine/base.py", line 1986, in _exec_single_context
    self._handle_dbapi_exception(
  File "/Users/joewilson/PythonProjects/Snoogram/venv/lib/python3.12/site-packages/sqlalchemy/engine/base.py", line 2355, in _handle_dbapi_exception
    raise sqlalchemy_exception.with_traceback(exc_info[2]) from e
  File "/Users/joewilson/PythonProjects/Snoogram/venv/lib/python3.12/site-packages/sqlalchemy/engine/base.py", line 1967, in _exec_single_context
    self.dialect.do_execute(
  File "/Users/joewilson/PythonProjects/Snoogram/venv/lib/python3.12/site-packages/sqlalchemy/engine/default.py", line 941, in do_execute
    cursor.execute(statement, parameters)
sqlalchemy.exc.OperationalError: (sqlite3.OperationalError) attempt to write a readonly database
[SQL: INSERT INTO sent_post (post_id, subreddit_name, sent_at) VALUES (?, ?, ?)]
[parameters: ('1ftaz41', 'wifebutt', '2024-10-30 10:20:21.276268')]
(Background on this error at: https://sqlalche.me/e/20/e3q8)
2024-10-30 05:20:39,425 - DEBUG - send_request_body.failed exception=WriteError(ClosedResourceError())
2024-10-30 05:20:39,427 - DEBUG - response_closed.started
2024-10-30 05:20:39,427 - DEBUG - response_closed.complete
2024-10-30 05:20:39,428 - DEBUG - This Application is already shut down. Returning.
2024-10-30 05:20:39,428 - ERROR - Failed to send video to Telegram: httpx.WriteError: 
2024-10-30 05:20:39,429 - ERROR - Error sending video post 1gelyz1: httpx.WriteError: 
2024-10-30 05:20:39,429 - INFO - Checking post: 1gejrnl - Score: 2581 - URL: https://v3.redgifs.com/watch/graydefensivepika
2024-10-30 05:20:39,437 - INFO - Request URL: 'https://cosmossnoogram-centralus.documents.azure.com:443/dbs/ToDoList/colls/sent_posts/docs/'
Request method: 'POST'
Request headers:
    'Cache-Control': 'no-cache'
    'x-ms-version': 'REDACTED'
    'x-ms-documentdb-query-iscontinuationexpected': 'REDACTED'
    'x-ms-consistency-level': 'REDACTED'
    'x-ms-documentdb-isquery': 'REDACTED'
    'Content-Type': 'application/query+json'
    'x-ms-session-token': 'REDACTED'
    'x-ms-documentdb-query-enablecrosspartition': 'REDACTED'
    'x-ms-date': 'REDACTED'
    'authorization': 'REDACTED'
    'Accept': 'application/json'
    'x-ms-cosmos-correlated-activityid': 'REDACTED'
    'Content-Length': '107'
    'User-Agent': 'azsdk-python-cosmos/4.5.1 Python/3.12.4 (macOS-15.0.1-arm64-arm-64bit)'
A body is sent with the request
2024-10-30 05:20:39,469 - DEBUG - https://cosmossnoogram-centralus.documents.azure.com:443 "POST /dbs/ToDoList/colls/sent_posts/docs/ HTTP/11" 200 None
2024-10-30 05:20:39,470 - INFO - Response status: 200
Response headers:
    'Cache-Control': 'no-store, no-cache'
    'Pragma': 'no-cache'
    'Transfer-Encoding': 'chunked'
    'Content-Type': 'application/json'
    'Server': 'Microsoft-HTTPAPI/2.0'
    'Strict-Transport-Security': 'REDACTED'
    'x-ms-activity-id': 'REDACTED'
    'x-ms-last-state-change-utc': 'REDACTED'
    'x-ms-resource-quota': 'REDACTED'
    'x-ms-resource-usage': 'REDACTED'
    'x-ms-schemaversion': 'REDACTED'
    'lsn': 'REDACTED'
    'x-ms-item-count': 'REDACTED'
    'x-ms-request-charge': 'REDACTED'
    'x-ms-alt-content-path': 'REDACTED'
    'x-ms-content-path': 'REDACTED'
    'x-ms-documentdb-partitionkeyrangeid': 'REDACTED'
    'x-ms-xp-role': 'REDACTED'
    'x-ms-cosmos-query-execution-info': 'REDACTED'
    'x-ms-global-Committed-lsn': 'REDACTED'
    'x-ms-number-of-read-regions': 'REDACTED'
    'x-ms-transport-request-id': 'REDACTED'
    'x-ms-cosmos-llsn': 'REDACTED'
    'x-ms-session-token': 'REDACTED'
    'x-ms-request-duration-ms': 'REDACTED'
    'x-ms-serviceversion': 'REDACTED'
    'x-ms-cosmos-is-partition-key-delete-pending': 'REDACTED'
    'x-ms-cosmos-physical-partition-id': 'REDACTED'
    'x-ms-cosmos-internal-partition-id': 'REDACTED'
    'x-ms-gatewayversion': 'REDACTED'
    'Date': 'Wed, 30 Oct 2024 10:20:39 GMT'
2024-10-30 05:20:39,470 - INFO - Post 1gejrnl is a duplicate, skipping
2024-10-30 05:20:39,470 - INFO - Checking post: 1gelw33 - Score: 2301 - URL: https://www.redgifs.com/watch/drydarkgraysable
2024-10-30 05:20:39,470 - INFO - Post 1gelw33 is a duplicate, skipping
2024-10-30 05:20:39,470 - INFO - Checking post: 1gevvp0 - Score: 1189 - URL: https://www.redgifs.com/watch/medicalplumhen
2024-10-30 05:20:39,471 - INFO - Post 1gevvp0 is a duplicate, skipping
2024-10-30 05:20:39,471 - INFO - Checking post: 1gesoj7 - Score: 750 - URL: https://www.redgifs.com/watch/lightgreytrickydragonfly
2024-10-30 05:20:39,471 - INFO - Post 1gesoj7 is a duplicate, skipping
2024-10-30 05:20:39,471 - INFO - Checking post: 1geuuqp - Score: 439 - URL: https://www.redgifs.com/watch/cheerfulbeigebagworm
2024-10-30 05:20:39,471 - INFO - Post 1geuuqp is a duplicate, skipping
2024-10-30 05:20:39,471 - INFO - Checking post: 1geakrb - Score: 397 - URL: https://www.redgifs.com/watch/illinformedthickgalapagoshawk
2024-10-30 05:20:39,471 - INFO - Post 1geakrb is a duplicate, skipping
2024-10-30 05:20:39,471 - INFO - Checking post: 1gerubz - Score: 364 - URL: https://v3.redgifs.com/watch/trickysquarepseudodynerusquadrisectus
2024-10-30 05:20:39,472 - INFO - Post 1gerubz is a duplicate, skipping
2024-10-30 05:20:39,472 - INFO - Checking post: 1getxhl - Score: 341 - URL: https://www.redgifs.com/watch/purpledemandingboaconstrictor
2024-10-30 05:20:39,472 - INFO - Post 1getxhl is a duplicate, skipping
2024-10-30 05:20:39,472 - INFO - Checking post: 1ge9gol - Score: 279 - URL: https://v3.redgifs.com/watch/circulardeeppinkamericanbulldog
2024-10-30 05:20:39,472 - INFO - Request URL: 'https://cosmossnoogram-centralus.documents.azure.com:443/dbs/ToDoList/colls/sent_posts/docs/'
Request method: 'POST'
Request headers:
    'Cache-Control': 'no-cache'
    'x-ms-version': 'REDACTED'
    'x-ms-documentdb-query-iscontinuationexpected': 'REDACTED'
    'x-ms-consistency-level': 'REDACTED'
    'x-ms-documentdb-isquery': 'REDACTED'
    'Content-Type': 'application/query+json'
    'x-ms-session-token': 'REDACTED'
    'x-ms-documentdb-query-enablecrosspartition': 'REDACTED'
    'x-ms-date': 'REDACTED'
    'authorization': 'REDACTED'
    'Accept': 'application/json'
    'x-ms-cosmos-correlated-activityid': 'REDACTED'
    'Content-Length': '107'
    'User-Agent': 'azsdk-python-cosmos/4.5.1 Python/3.12.4 (macOS-15.0.1-arm64-arm-64bit)'
A body is sent with the request
2024-10-30 05:20:39,501 - DEBUG - https://cosmossnoogram-centralus.documents.azure.com:443 "POST /dbs/ToDoList/colls/sent_posts/docs/ HTTP/11" 200 None
2024-10-30 05:20:39,501 - INFO - Response status: 200
Response headers:
    'Cache-Control': 'no-store, no-cache'
    'Pragma': 'no-cache'
    'Transfer-Encoding': 'chunked'
    'Content-Type': 'application/json'
    'Server': 'Microsoft-HTTPAPI/2.0'
    'Strict-Transport-Security': 'REDACTED'
    'x-ms-activity-id': 'REDACTED'
    'x-ms-last-state-change-utc': 'REDACTED'
    'x-ms-resource-quota': 'REDACTED'
    'x-ms-resource-usage': 'REDACTED'
    'x-ms-schemaversion': 'REDACTED'
    'lsn': 'REDACTED'
    'x-ms-item-count': 'REDACTED'
    'x-ms-request-charge': 'REDACTED'
    'x-ms-alt-content-path': 'REDACTED'
    'x-ms-content-path': 'REDACTED'
    'x-ms-documentdb-partitionkeyrangeid': 'REDACTED'
    'x-ms-xp-role': 'REDACTED'
    'x-ms-cosmos-query-execution-info': 'REDACTED'
    'x-ms-global-Committed-lsn': 'REDACTED'
    'x-ms-number-of-read-regions': 'REDACTED'
    'x-ms-transport-request-id': 'REDACTED'
    'x-ms-cosmos-llsn': 'REDACTED'
    'x-ms-session-token': 'REDACTED'
    'x-ms-request-duration-ms': 'REDACTED'
    'x-ms-serviceversion': 'REDACTED'
    'x-ms-cosmos-is-partition-key-delete-pending': 'REDACTED'
    'x-ms-cosmos-physical-partition-id': 'REDACTED'
    'x-ms-cosmos-internal-partition-id': 'REDACTED'
    'x-ms-gatewayversion': 'REDACTED'
    'Date': 'Wed, 30 Oct 2024 10:20:39 GMT'
2024-10-30 05:20:39,502 - INFO - Found video post: 1ge9gol
2024-10-30 05:20:39,502 - DEBUG - Starting new HTTPS connection (1): api.redgifs.com:443
2024-10-30 05:20:39,594 - DEBUG - https://api.redgifs.com:443 "GET /v2/gifs/circulardeeppinkamericanbulldog HTTP/11" 200 None
2024-10-30 05:20:39,600 - DEBUG - Starting new HTTPS connection (1): files.redgifs.com:443
2024-10-30 05:20:39,666 - DEBUG - https://files.redgifs.com:443 "GET /CircularDeeppinkAmericanbulldog.mp4 HTTP/11" 200 61415883
2024-10-30 05:20:41,171 - INFO - Successfully downloaded media to downloads/videos/1ge9gol_20241030_052039_fff8ab71.mp4
2024-10-30 05:20:41,174 - DEBUG - Using selector: KqueueSelector
2024-10-30 05:20:41,174 - INFO - Attempting to send video to Telegram - Path: downloads/videos/1ge9gol_20241030_052039_fff8ab71.mp4
2024-10-30 05:20:41,175 - DEBUG - load_ssl_context verify=True cert=None trust_env=True http2=False
2024-10-30 05:20:41,176 - DEBUG - load_verify_locations cafile='/Users/joewilson/PythonProjects/Snoogram/venv/lib/python3.12/site-packages/certifi/cacert.pem'
2024-10-30 05:20:41,187 - DEBUG - load_ssl_context verify=True cert=None trust_env=True http2=False
2024-10-30 05:20:41,188 - DEBUG - load_verify_locations cafile='/Users/joewilson/PythonProjects/Snoogram/venv/lib/python3.12/site-packages/certifi/cacert.pem'
2024-10-30 05:20:41,196 - DEBUG - Entering: get_me
2024-10-30 05:20:41,196 - DEBUG - connect_tcp.started host='api.telegram.org' port=443 local_address=None timeout=5.0 socket_options=None
2024-10-30 05:20:41,323 - DEBUG - connect_tcp.complete return_value=<httpcore._backends.anyio.AnyIOStream object at 0x108d9ee70>
2024-10-30 05:20:41,323 - DEBUG - start_tls.started ssl_context=<ssl.SSLContext object at 0x108e9e6d0> server_hostname='api.telegram.org' timeout=5.0
2024-10-30 05:20:41,458 - DEBUG - start_tls.complete return_value=<httpcore._backends.anyio.AnyIOStream object at 0x108d7a780>
2024-10-30 05:20:41,459 - DEBUG - send_request_headers.started request=<Request [b'POST']>
2024-10-30 05:20:41,459 - DEBUG - send_request_headers.complete
2024-10-30 05:20:41,460 - DEBUG - send_request_body.started request=<Request [b'POST']>
2024-10-30 05:20:41,460 - DEBUG - send_request_body.complete
2024-10-30 05:20:41,460 - DEBUG - receive_response_headers.started request=<Request [b'POST']>
2024-10-30 05:20:41,581 - DEBUG - receive_response_headers.complete return_value=(b'HTTP/1.1', 200, b'OK', [(b'Server', b'nginx/1.18.0'), (b'Date', b'Wed, 30 Oct 2024 10:20:41 GMT'), (b'Content-Type', b'application/json'), (b'Content-Length', b'254'), (b'Connection', b'keep-alive'), (b'Strict-Transport-Security', b'max-age=31536000; includeSubDomains; preload'), (b'Access-Control-Allow-Origin', b'*'), (b'Access-Control-Allow-Methods', b'GET, POST, OPTIONS'), (b'Access-Control-Expose-Headers', b'Content-Length,Content-Type,Date,Server,Connection')])
2024-10-30 05:20:41,582 - INFO - HTTP Request: POST https://api.telegram.org/bot7867694458:AAEFLZjWPyd1p640mHENnBt479WRYfSavWg/getMe "HTTP/1.1 200 OK"
2024-10-30 05:20:41,582 - DEBUG - receive_response_body.started request=<Request [b'POST']>
2024-10-30 05:20:41,583 - DEBUG - receive_response_body.complete
2024-10-30 05:20:41,583 - DEBUG - response_closed.started
2024-10-30 05:20:41,583 - DEBUG - response_closed.complete
2024-10-30 05:20:41,585 - DEBUG - User(api_kwargs={'can_connect_to_business': False, 'has_main_web_app': False}, can_join_groups=True, can_read_all_group_messages=False, first_name='RedditBot', id=7867694458, is_bot=True, supports_inline_queries=False, username='RedditImage_bot')
2024-10-30 05:20:41,586 - DEBUG - Exiting: get_me
2024-10-30 05:20:41,586 - DEBUG - This Bot is already initialized.
2024-10-30 05:20:41,586 - DEBUG - Entering: send_video
2024-10-30 05:20:41,618 - DEBUG - send_request_headers.started request=<Request [b'POST']>
2024-10-30 05:20:41,618 - DEBUG - send_request_headers.complete
2024-10-30 05:20:41,618 - DEBUG - send_request_body.started request=<Request [b'POST']>
2024-10-30 05:20:45,859 - DEBUG - send_request_body.complete
2024-10-30 05:20:45,860 - DEBUG - receive_response_headers.started request=<Request [b'POST']>
2024-10-30 05:20:45,860 - DEBUG - receive_response_headers.complete return_value=(b'HTTP/1.1', 413, b'Request Entity Too Large', [(b'Server', b'nginx/1.18.0'), (b'Date', b'Wed, 30 Oct 2024 10:20:41 GMT'), (b'Content-Type', b'application/json'), (b'Content-Length', b'70'), (b'Connection', b'close'), (b'Strict-Transport-Security', b'max-age=31536000; includeSubDomains; preload'), (b'Access-Control-Allow-Origin', b'*'), (b'Access-Control-Expose-Headers', b'Content-Length,Content-Type,Date,Server,Connection')])
2024-10-30 05:20:45,860 - INFO - HTTP Request: POST https://api.telegram.org/bot7867694458:AAEFLZjWPyd1p640mHENnBt479WRYfSavWg/sendVideo "HTTP/1.1 413 Request Entity Too Large"
2024-10-30 05:20:45,860 - DEBUG - receive_response_body.started request=<Request [b'POST']>
2024-10-30 05:20:45,860 - DEBUG - receive_response_body.complete
2024-10-30 05:20:45,861 - DEBUG - response_closed.started
2024-10-30 05:20:45,861 - DEBUG - response_closed.complete
2024-10-30 05:20:45,861 - DEBUG - This Bot is already shut down. Returning.
2024-10-30 05:20:45,861 - DEBUG - Shut down of Updater complete
2024-10-30 05:20:45,861 - ERROR - Failed to send video to Telegram: Request Entity Too Large (413)
2024-10-30 05:20:45,862 - ERROR - Error sending video post 1ge9gol: Request Entity Too Large (413)
2024-10-30 05:20:45,862 - INFO - Checking post: 1ge98kx - Score: 258 - URL: https://www.redgifs.com/watch/frontspecificspittlebug
2024-10-30 05:20:45,862 - INFO - Post 1ge98kx is a duplicate, skipping
2024-10-30 05:20:45,862 - INFO - Checking post: 1geqscs - Score: 236 - URL: https://www.redgifs.com/watch/previousweequeensnake
2024-10-30 05:20:45,863 - INFO - Request URL: 'https://cosmossnoogram-centralus.documents.azure.com:443/dbs/ToDoList/colls/sent_posts/docs/'
Request method: 'POST'
Request headers:
    'Cache-Control': 'no-cache'
    'x-ms-version': 'REDACTED'
    'x-ms-documentdb-query-iscontinuationexpected': 'REDACTED'
    'x-ms-consistency-level': 'REDACTED'
    'x-ms-documentdb-isquery': 'REDACTED'
    'Content-Type': 'application/query+json'
    'x-ms-session-token': 'REDACTED'
    'x-ms-documentdb-query-enablecrosspartition': 'REDACTED'
    'x-ms-date': 'REDACTED'
    'authorization': 'REDACTED'
    'Accept': 'application/json'
    'x-ms-cosmos-correlated-activityid': 'REDACTED'
    'Content-Length': '107'
    'User-Agent': 'azsdk-python-cosmos/4.5.1 Python/3.12.4 (macOS-15.0.1-arm64-arm-64bit)'
A body is sent with the request
2024-10-30 05:20:45,926 - DEBUG - https://cosmossnoogram-centralus.documents.azure.com:443 "POST /dbs/ToDoList/colls/sent_posts/docs/ HTTP/11" 200 None
2024-10-30 05:20:45,926 - INFO - Response status: 200
Response headers:
    'Cache-Control': 'no-store, no-cache'
    'Pragma': 'no-cache'
    'Transfer-Encoding': 'chunked'
    'Content-Type': 'application/json'
    'Server': 'Microsoft-HTTPAPI/2.0'
    'Strict-Transport-Security': 'REDACTED'
    'x-ms-activity-id': 'REDACTED'
    'x-ms-last-state-change-utc': 'REDACTED'
    'x-ms-resource-quota': 'REDACTED'
    'x-ms-resource-usage': 'REDACTED'
    'x-ms-schemaversion': 'REDACTED'
    'lsn': 'REDACTED'
    'x-ms-item-count': 'REDACTED'
    'x-ms-request-charge': 'REDACTED'
    'x-ms-alt-content-path': 'REDACTED'
    'x-ms-content-path': 'REDACTED'
    'x-ms-documentdb-partitionkeyrangeid': 'REDACTED'
    'x-ms-xp-role': 'REDACTED'
    'x-ms-cosmos-query-execution-info': 'REDACTED'
    'x-ms-global-Committed-lsn': 'REDACTED'
    'x-ms-number-of-read-regions': 'REDACTED'
    'x-ms-transport-request-id': 'REDACTED'
    'x-ms-cosmos-llsn': 'REDACTED'
    'x-ms-session-token': 'REDACTED'
    'x-ms-request-duration-ms': 'REDACTED'
    'x-ms-serviceversion': 'REDACTED'
    'x-ms-cosmos-is-partition-key-delete-pending': 'REDACTED'
    'x-ms-cosmos-physical-partition-id': 'REDACTED'
    'x-ms-cosmos-internal-partition-id': 'REDACTED'
    'x-ms-gatewayversion': 'REDACTED'
    'Date': 'Wed, 30 Oct 2024 10:20:45 GMT'
2024-10-30 05:20:45,926 - INFO - Found video post: 1geqscs
2024-10-30 05:20:45,927 - DEBUG - Starting new HTTPS connection (1): api.redgifs.com:443
2024-10-30 05:20:46,076 - DEBUG - https://api.redgifs.com:443 "GET /v2/gifs/previousweequeensnake HTTP/11" 200 None
2024-10-30 05:20:46,080 - DEBUG - Starting new HTTPS connection (1): files.redgifs.com:443
2024-10-30 05:20:46,150 - DEBUG - https://files.redgifs.com:443 "GET /PreviousWeeQueensnake.mp4 HTTP/11" 200 50070206
2024-10-30 05:20:47,660 - INFO - Successfully downloaded media to downloads/videos/1geqscs_20241030_052046_2fd81a4e.mp4
2024-10-30 05:20:47,662 - DEBUG - Using selector: KqueueSelector
2024-10-30 05:20:47,662 - INFO - Attempting to send video to Telegram - Path: downloads/videos/1geqscs_20241030_052046_2fd81a4e.mp4
2024-10-30 05:20:47,662 - DEBUG - load_ssl_context verify=True cert=None trust_env=True http2=False
2024-10-30 05:20:47,663 - DEBUG - load_verify_locations cafile='/Users/joewilson/PythonProjects/Snoogram/venv/lib/python3.12/site-packages/certifi/cacert.pem'
2024-10-30 05:20:47,670 - DEBUG - load_ssl_context verify=True cert=None trust_env=True http2=False
2024-10-30 05:20:47,671 - DEBUG - load_verify_locations cafile='/Users/joewilson/PythonProjects/Snoogram/venv/lib/python3.12/site-packages/certifi/cacert.pem'
2024-10-30 05:20:47,678 - DEBUG - Entering: get_me
2024-10-30 05:20:47,678 - DEBUG - connect_tcp.started host='api.telegram.org' port=443 local_address=None timeout=5.0 socket_options=None
2024-10-30 05:20:47,801 - DEBUG - connect_tcp.complete return_value=<httpcore._backends.anyio.AnyIOStream object at 0x108e63980>
2024-10-30 05:20:47,802 - DEBUG - start_tls.started ssl_context=<ssl.SSLContext object at 0x108e92f50> server_hostname='api.telegram.org' timeout=5.0
2024-10-30 05:20:47,939 - DEBUG - start_tls.complete return_value=<httpcore._backends.anyio.AnyIOStream object at 0x108e600b0>
2024-10-30 05:20:47,939 - DEBUG - send_request_headers.started request=<Request [b'POST']>
2024-10-30 05:20:47,939 - DEBUG - send_request_headers.complete
2024-10-30 05:20:47,939 - DEBUG - send_request_body.started request=<Request [b'POST']>
2024-10-30 05:20:47,939 - DEBUG - send_request_body.complete
2024-10-30 05:20:47,939 - DEBUG - receive_response_headers.started request=<Request [b'POST']>
2024-10-30 05:20:48,068 - DEBUG - receive_response_headers.complete return_value=(b'HTTP/1.1', 200, b'OK', [(b'Server', b'nginx/1.18.0'), (b'Date', b'Wed, 30 Oct 2024 10:20:48 GMT'), (b'Content-Type', b'application/json'), (b'Content-Length', b'254'), (b'Connection', b'keep-alive'), (b'Strict-Transport-Security', b'max-age=31536000; includeSubDomains; preload'), (b'Access-Control-Allow-Origin', b'*'), (b'Access-Control-Allow-Methods', b'GET, POST, OPTIONS'), (b'Access-Control-Expose-Headers', b'Content-Length,Content-Type,Date,Server,Connection')])
2024-10-30 05:20:48,069 - INFO - HTTP Request: POST https://api.telegram.org/bot7867694458:AAEFLZjWPyd1p640mHENnBt479WRYfSavWg/getMe "HTTP/1.1 200 OK"
2024-10-30 05:20:48,069 - DEBUG - receive_response_body.started request=<Request [b'POST']>
2024-10-30 05:20:48,069 - DEBUG - receive_response_body.complete
2024-10-30 05:20:48,070 - DEBUG - response_closed.started
2024-10-30 05:20:48,070 - DEBUG - response_closed.complete
2024-10-30 05:20:48,070 - DEBUG - User(api_kwargs={'can_connect_to_business': False, 'has_main_web_app': False}, can_join_groups=True, can_read_all_group_messages=False, first_name='RedditBot', id=7867694458, is_bot=True, supports_inline_queries=False, username='RedditImage_bot')
2024-10-30 05:20:48,071 - DEBUG - Exiting: get_me
2024-10-30 05:20:48,071 - DEBUG - This Bot is already initialized.
2024-10-30 05:20:48,071 - DEBUG - Entering: send_video
2024-10-30 05:20:48,082 - DEBUG - send_request_headers.started request=<Request [b'POST']>
2024-10-30 05:20:48,082 - DEBUG - send_request_headers.complete
2024-10-30 05:20:48,082 - DEBUG - send_request_body.started request=<Request [b'POST']>
2024-10-30 05:20:51,775 - DEBUG - send_request_body.complete
2024-10-30 05:20:51,776 - DEBUG - receive_response_headers.started request=<Request [b'POST']>
2024-10-30 05:20:55,581 - DEBUG - receive_response_headers.complete return_value=(b'HTTP/1.1', 200, b'OK', [(b'Server', b'nginx/1.18.0'), (b'Date', b'Wed, 30 Oct 2024 10:20:55 GMT'), (b'Content-Type', b'application/json'), (b'Content-Length', b'600'), (b'Connection', b'keep-alive'), (b'Strict-Transport-Security', b'max-age=31536000; includeSubDomains; preload'), (b'Access-Control-Allow-Origin', b'*'), (b'Access-Control-Allow-Methods', b'GET, POST, OPTIONS'), (b'Access-Control-Expose-Headers', b'Content-Length,Content-Type,Date,Server,Connection')])
2024-10-30 05:20:55,582 - INFO - HTTP Request: POST https://api.telegram.org/bot7867694458:AAEFLZjWPyd1p640mHENnBt479WRYfSavWg/sendVideo "HTTP/1.1 200 OK"
2024-10-30 05:20:55,582 - DEBUG - receive_response_body.started request=<Request [b'POST']>
2024-10-30 05:20:55,582 - DEBUG - receive_response_body.complete
2024-10-30 05:20:55,583 - DEBUG - response_closed.started
2024-10-30 05:20:55,583 - DEBUG - response_closed.complete
2024-10-30 05:20:55,584 - DEBUG - Message(caption='From r/girlsfinishingthejob: I love when he covers my titties with his hot cum ðŸ¥°\nUpvotes: 236', channel_chat_created=False, chat=Chat(id=-1002490380283, title='Reddit_Pic_Stream', type=<ChatType.CHANNEL>), date=datetime.datetime(2024, 10, 30, 10, 20, 55, tzinfo=<UTC>), delete_chat_photo=False, group_chat_created=False, message_id=231, sender_chat=Chat(id=-1002490380283, title='Reddit_Pic_Stream', type=<ChatType.CHANNEL>), supergroup_chat_created=False, video=Video(duration=0, file_id='BAACAgEAAyEGAASUcC_7AAPnZyIIh8MTuPkNucatPStT7QfQ-20AArAEAAIZEBFF_ffqCw1qWEk2BA', file_name='1geqscs_20241030_052046_2fd81a4e.mp4', file_size=50070206, file_unique_id='AgADsAQAAhkQEUU', height=320, mime_type='video/mp4', width=320))
2024-10-30 05:20:55,585 - DEBUG - Exiting: send_video
2024-10-30 05:20:55,586 - DEBUG - close.started
2024-10-30 05:20:55,586 - DEBUG - close.complete
2024-10-30 05:20:55,586 - DEBUG - This Bot is already shut down. Returning.
2024-10-30 05:20:55,586 - DEBUG - Shut down of Updater complete
2024-10-30 05:20:55,587 - INFO - Successfully sent video to Telegram
2024-10-30 05:20:55,591 - ERROR - Error processing subreddit girlsfinishingthejob: (sqlite3.OperationalError) attempt to write a readonly database
[SQL: INSERT INTO sent_post (post_id, subreddit_name, sent_at) VALUES (?, ?, ?)]
[parameters: ('1geqscs', 'girlsfinishingthejob', '2024-10-30 10:20:55.590959')]
(Background on this error at: https://sqlalche.me/e/20/e3q8)
2024-10-30 05:20:55,593 - ERROR - Job "send_to_telegram (trigger: interval[0:01:00], next run at: 2024-10-30 05:21:16 CDT)" raised an exception
Traceback (most recent call last):
  File "/Users/joewilson/PythonProjects/Snoogram/venv/lib/python3.12/site-packages/sqlalchemy/engine/base.py", line 1967, in _exec_single_context
    self.dialect.do_execute(
  File "/Users/joewilson/PythonProjects/Snoogram/venv/lib/python3.12/site-packages/sqlalchemy/engine/default.py", line 941, in do_execute
    cursor.execute(statement, parameters)
sqlite3.OperationalError: attempt to write a readonly database

The above exception was the direct cause of the following exception:

Traceback (most recent call last):
  File "/Users/joewilson/PythonProjects/Snoogram/venv/lib/python3.12/site-packages/apscheduler/executors/base.py", line 125, in run_job
    retval = job.func(*job.args, **job.kwargs)
             ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/Users/joewilson/PythonProjects/Snoogram/backend/app.py", line 265, in send_to_telegram
    # Update last_check in Cosmos DB
                ^^^^^^^^^^^^^^^^^^^^^
  File "/Users/joewilson/PythonProjects/Snoogram/backend/db_operations.py", line 100, in add_sent_post
  File "/Users/joewilson/PythonProjects/Snoogram/venv/lib/python3.12/site-packages/sqlalchemy/orm/scoping.py", line 597, in commit
    return self._proxied.commit()
           ^^^^^^^^^^^^^^^^^^^^^^
  File "/Users/joewilson/PythonProjects/Snoogram/venv/lib/python3.12/site-packages/sqlalchemy/orm/session.py", line 2028, in commit
    trans.commit(_to_root=True)
  File "<string>", line 2, in commit
  File "/Users/joewilson/PythonProjects/Snoogram/venv/lib/python3.12/site-packages/sqlalchemy/orm/state_changes.py", line 139, in _go
    ret_value = fn(self, *arg, **kw)
                ^^^^^^^^^^^^^^^^^^^^
  File "/Users/joewilson/PythonProjects/Snoogram/venv/lib/python3.12/site-packages/sqlalchemy/orm/session.py", line 1313, in commit
    self._prepare_impl()
  File "<string>", line 2, in _prepare_impl
  File "/Users/joewilson/PythonProjects/Snoogram/venv/lib/python3.12/site-packages/sqlalchemy/orm/state_changes.py", line 139, in _go
    ret_value = fn(self, *arg, **kw)
                ^^^^^^^^^^^^^^^^^^^^
  File "/Users/joewilson/PythonProjects/Snoogram/venv/lib/python3.12/site-packages/sqlalchemy/orm/session.py", line 1288, in _prepare_impl
    self.session.flush()
  File "/Users/joewilson/PythonProjects/Snoogram/venv/lib/python3.12/site-packages/sqlalchemy/orm/session.py", line 4352, in flush
    self._flush(objects)
  File "/Users/joewilson/PythonProjects/Snoogram/venv/lib/python3.12/site-packages/sqlalchemy/orm/session.py", line 4487, in _flush
    with util.safe_reraise():
  File "/Users/joewilson/PythonProjects/Snoogram/venv/lib/python3.12/site-packages/sqlalchemy/util/langhelpers.py", line 146, in __exit__
    raise exc_value.with_traceback(exc_tb)
  File "/Users/joewilson/PythonProjects/Snoogram/venv/lib/python3.12/site-packages/sqlalchemy/orm/session.py", line 4448, in _flush
    flush_context.execute()
  File "/Users/joewilson/PythonProjects/Snoogram/venv/lib/python3.12/site-packages/sqlalchemy/orm/unitofwork.py", line 466, in execute
    rec.execute(self)
  File "/Users/joewilson/PythonProjects/Snoogram/venv/lib/python3.12/site-packages/sqlalchemy/orm/unitofwork.py", line 642, in execute
    util.preloaded.orm_persistence.save_obj(
  File "/Users/joewilson/PythonProjects/Snoogram/venv/lib/python3.12/site-packages/sqlalchemy/orm/persistence.py", line 93, in save_obj
    _emit_insert_statements(
  File "/Users/joewilson/PythonProjects/Snoogram/venv/lib/python3.12/site-packages/sqlalchemy/orm/persistence.py", line 1233, in _emit_insert_statements
    result = connection.execute(
             ^^^^^^^^^^^^^^^^^^^
  File "/Users/joewilson/PythonProjects/Snoogram/venv/lib/python3.12/site-packages/sqlalchemy/engine/base.py", line 1418, in execute
    return meth(
           ^^^^^
  File "/Users/joewilson/PythonProjects/Snoogram/venv/lib/python3.12/site-packages/sqlalchemy/sql/elements.py", line 515, in _execute_on_connection
    return connection._execute_clauseelement(
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/Users/joewilson/PythonProjects/Snoogram/venv/lib/python3.12/site-packages/sqlalchemy/engine/base.py", line 1640, in _execute_clauseelement
    ret = self._execute_context(
          ^^^^^^^^^^^^^^^^^^^^^^
  File "/Users/joewilson/PythonProjects/Snoogram/venv/lib/python3.12/site-packages/sqlalchemy/engine/base.py", line 1846, in _execute_context
    return self._exec_single_context(
           ^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/Users/joewilson/PythonProjects/Snoogram/venv/lib/python3.12/site-packages/sqlalchemy/engine/base.py", line 1986, in _exec_single_context
    self._handle_dbapi_exception(
  File "/Users/joewilson/PythonProjects/Snoogram/venv/lib/python3.12/site-packages/sqlalchemy/engine/base.py", line 2355, in _handle_dbapi_exception
    raise sqlalchemy_exception.with_traceback(exc_info[2]) from e
  File "/Users/joewilson/PythonProjects/Snoogram/venv/lib/python3.12/site-packages/sqlalchemy/engine/base.py", line 1967, in _exec_single_context
    self.dialect.do_execute(
  File "/Users/joewilson/PythonProjects/Snoogram/venv/lib/python3.12/site-packages/sqlalchemy/engine/default.py", line 941, in do_execute
    cursor.execute(statement, parameters)
sqlalchemy.exc.OperationalError: (sqlite3.OperationalError) attempt to write a readonly database
[SQL: INSERT INTO sent_post (post_id, subreddit_name, sent_at) VALUES (?, ?, ?)]
[parameters: ('1geqscs', 'girlsfinishingthejob', '2024-10-30 10:20:55.590959')]
(Background on this error at: https://sqlalche.me/e/20/e3q8)
2024-10-30 05:21:16,976 - DEBUG - Looking for jobs to run
2024-10-30 05:21:16,977 - DEBUG - Next wakeup is due at 2024-10-30 05:22:16.969826-05:00 (in 59.991889 seconds)
2024-10-30 05:21:16,978 - INFO - Running job "send_to_telegram (trigger: interval[0:01:00], next run at: 2024-10-30 05:22:16 CDT)" (scheduled at 2024-10-30 05:21:16.969826-05:00)
2024-10-30 05:21:16,978 - INFO - Running job "send_to_telegram (trigger: interval[0:01:00], next run at: 2024-10-30 05:22:16 CDT)" (scheduled at 2024-10-30 05:21:16.970029-05:00)
2024-10-30 05:21:16,978 - INFO - Processing subreddit: girlsfinishingthejob
2024-10-30 05:21:16,978 - INFO - Processing subreddit: wifebutt
2024-10-30 05:21:16,979 - INFO - Fetching top posts of the day
2024-10-30 05:21:16,979 - INFO - Fetching top posts of the month
2024-10-30 05:21:16,980 - DEBUG - Fetching: GET https://oauth.reddit.com/r/girlsfinishingthejob/top at 1730283676.980101
2024-10-30 05:21:16,980 - DEBUG - Fetching: GET https://oauth.reddit.com/r/wifebutt/top at 1730283676.980331
2024-10-30 05:21:16,980 - DEBUG - Data: None
2024-10-30 05:21:16,980 - DEBUG - Data: None
2024-10-30 05:21:16,980 - DEBUG - Params: {'limit': 50, 'raw_json': 1, 't': 'day'}
2024-10-30 05:21:16,980 - DEBUG - Params: {'limit': 50, 'raw_json': 1, 't': 'month'}
2024-10-30 05:21:17,328 - DEBUG - https://oauth.reddit.com:443 "GET /r/girlsfinishingthejob/top?t=day&limit=50&raw_json=1 HTTP/11" 200 24363
2024-10-30 05:21:17,337 - DEBUG - Response: 200 (24363 bytes) (rst-0:rem-148.0:used-2 ratelimit) at 1730283677.337874
2024-10-30 05:21:17,402 - INFO - Checking post: 1gelyz1 - Score: 7093 - URL: https://www.redgifs.com/watch/uttersvelteamphibian
2024-10-30 05:21:17,406 - INFO - Request URL: 'https://cosmossnoogram-centralus.documents.azure.com:443/dbs/ToDoList/colls/sent_posts/docs/'
Request method: 'POST'
Request headers:
    'Cache-Control': 'no-cache'
    'x-ms-version': 'REDACTED'
    'x-ms-documentdb-query-iscontinuationexpected': 'REDACTED'
    'x-ms-consistency-level': 'REDACTED'
    'x-ms-documentdb-isquery': 'REDACTED'
    'Content-Type': 'application/query+json'
    'x-ms-session-token': 'REDACTED'
    'x-ms-documentdb-query-enablecrosspartition': 'REDACTED'
    'x-ms-date': 'REDACTED'
    'authorization': 'REDACTED'
    'Accept': 'application/json'
    'x-ms-cosmos-correlated-activityid': 'REDACTED'
    'Content-Length': '107'
    'User-Agent': 'azsdk-python-cosmos/4.5.1 Python/3.12.4 (macOS-15.0.1-arm64-arm-64bit)'
A body is sent with the request
2024-10-30 05:21:17,437 - DEBUG - https://cosmossnoogram-centralus.documents.azure.com:443 "POST /dbs/ToDoList/colls/sent_posts/docs/ HTTP/11" 200 None
2024-10-30 05:21:17,438 - INFO - Response status: 200
Response headers:
    'Cache-Control': 'no-store, no-cache'
    'Pragma': 'no-cache'
    'Transfer-Encoding': 'chunked'
    'Content-Type': 'application/json'
    'Server': 'Microsoft-HTTPAPI/2.0'
    'Strict-Transport-Security': 'REDACTED'
    'x-ms-activity-id': 'REDACTED'
    'x-ms-last-state-change-utc': 'REDACTED'
    'x-ms-resource-quota': 'REDACTED'
    'x-ms-resource-usage': 'REDACTED'
    'x-ms-schemaversion': 'REDACTED'
    'lsn': 'REDACTED'
    'x-ms-item-count': 'REDACTED'
    'x-ms-request-charge': 'REDACTED'
    'x-ms-alt-content-path': 'REDACTED'
    'x-ms-content-path': 'REDACTED'
    'x-ms-documentdb-partitionkeyrangeid': 'REDACTED'
    'x-ms-xp-role': 'REDACTED'
    'x-ms-cosmos-query-execution-info': 'REDACTED'
    'x-ms-global-Committed-lsn': 'REDACTED'
    'x-ms-number-of-read-regions': 'REDACTED'
    'x-ms-transport-request-id': 'REDACTED'
    'x-ms-cosmos-llsn': 'REDACTED'
    'x-ms-session-token': 'REDACTED'
    'x-ms-request-duration-ms': 'REDACTED'
    'x-ms-serviceversion': 'REDACTED'
    'x-ms-cosmos-is-partition-key-delete-pending': 'REDACTED'
    'x-ms-cosmos-physical-partition-id': 'REDACTED'
    'x-ms-cosmos-internal-partition-id': 'REDACTED'
    'x-ms-gatewayversion': 'REDACTED'
    'Date': 'Wed, 30 Oct 2024 10:21:17 GMT'
2024-10-30 05:21:17,438 - INFO - Found video post: 1gelyz1
2024-10-30 05:21:17,438 - DEBUG - Starting new HTTPS connection (1): api.redgifs.com:443
2024-10-30 05:21:17,542 - DEBUG - https://api.redgifs.com:443 "GET /v2/gifs/uttersvelteamphibian HTTP/11" 200 None
2024-10-30 05:21:17,544 - DEBUG - Starting new HTTPS connection (1): files.redgifs.com:443
2024-10-30 05:21:17,615 - DEBUG - https://files.redgifs.com:443 "GET /UtterSvelteAmphibian.mp4 HTTP/11" 200 42980012
2024-10-30 05:21:17,866 - DEBUG - https://oauth.reddit.com:443 "GET /r/wifebutt/top?t=month&limit=50&raw_json=1 HTTP/11" 200 49244
2024-10-30 05:21:17,894 - DEBUG - Response: 200 (49244 bytes) (rst-0:rem-147.0:used-3 ratelimit) at 1730283677.89467
2024-10-30 05:21:17,900 - INFO - Checking post: 1g9w053 - Score: 5352 - URL: https://www.reddit.com/gallery/1g9w053
2024-10-30 05:21:17,901 - INFO - Request URL: 'https://cosmossnoogram-centralus.documents.azure.com:443/dbs/ToDoList/colls/sent_posts/docs/'
Request method: 'POST'
Request headers:
    'Cache-Control': 'no-cache'
    'x-ms-version': 'REDACTED'
    'x-ms-documentdb-query-iscontinuationexpected': 'REDACTED'
    'x-ms-consistency-level': 'REDACTED'
    'x-ms-documentdb-isquery': 'REDACTED'
    'Content-Type': 'application/query+json'
    'x-ms-session-token': 'REDACTED'
    'x-ms-documentdb-query-enablecrosspartition': 'REDACTED'
    'x-ms-date': 'REDACTED'
    'authorization': 'REDACTED'
    'Accept': 'application/json'
    'x-ms-cosmos-correlated-activityid': 'REDACTED'
    'Content-Length': '107'
    'User-Agent': 'azsdk-python-cosmos/4.5.1 Python/3.12.4 (macOS-15.0.1-arm64-arm-64bit)'
A body is sent with the request
2024-10-30 05:21:17,966 - DEBUG - https://cosmossnoogram-centralus.documents.azure.com:443 "POST /dbs/ToDoList/colls/sent_posts/docs/ HTTP/11" 200 None
2024-10-30 05:21:17,967 - INFO - Response status: 200
Response headers:
    'Cache-Control': 'no-store, no-cache'
    'Pragma': 'no-cache'
    'Transfer-Encoding': 'chunked'
    'Content-Type': 'application/json'
    'Server': 'Microsoft-HTTPAPI/2.0'
    'Strict-Transport-Security': 'REDACTED'
    'x-ms-activity-id': 'REDACTED'
    'x-ms-last-state-change-utc': 'REDACTED'
    'x-ms-resource-quota': 'REDACTED'
    'x-ms-resource-usage': 'REDACTED'
    'x-ms-schemaversion': 'REDACTED'
    'lsn': 'REDACTED'
    'x-ms-item-count': 'REDACTED'
    'x-ms-request-charge': 'REDACTED'
    'x-ms-alt-content-path': 'REDACTED'
    'x-ms-content-path': 'REDACTED'
    'x-ms-documentdb-partitionkeyrangeid': 'REDACTED'
    'x-ms-xp-role': 'REDACTED'
    'x-ms-cosmos-query-execution-info': 'REDACTED'
    'x-ms-global-Committed-lsn': 'REDACTED'
    'x-ms-number-of-read-regions': 'REDACTED'
    'x-ms-transport-request-id': 'REDACTED'
    'x-ms-cosmos-llsn': 'REDACTED'
    'x-ms-session-token': 'REDACTED'
    'x-ms-request-duration-ms': 'REDACTED'
    'x-ms-serviceversion': 'REDACTED'
    'x-ms-cosmos-is-partition-key-delete-pending': 'REDACTED'
    'x-ms-cosmos-physical-partition-id': 'REDACTED'
    'x-ms-cosmos-internal-partition-id': 'REDACTED'
    'x-ms-gatewayversion': 'REDACTED'
    'Date': 'Wed, 30 Oct 2024 10:21:17 GMT'
2024-10-30 05:21:17,967 - INFO - Post 1g9w053 is not an image or video post, skipping
2024-10-30 05:21:17,967 - INFO - Checking post: 1fv4cfc - Score: 4584 - URL: https://www.reddit.com/gallery/1fv4cfc
2024-10-30 05:21:17,968 - INFO - Request URL: 'https://cosmossnoogram-centralus.documents.azure.com:443/dbs/ToDoList/colls/sent_posts/docs/'
Request method: 'POST'
Request headers:
    'Cache-Control': 'no-cache'
    'x-ms-version': 'REDACTED'
    'x-ms-documentdb-query-iscontinuationexpected': 'REDACTED'
    'x-ms-consistency-level': 'REDACTED'
    'x-ms-documentdb-isquery': 'REDACTED'
    'Content-Type': 'application/query+json'
    'x-ms-session-token': 'REDACTED'
    'x-ms-documentdb-query-enablecrosspartition': 'REDACTED'
    'x-ms-date': 'REDACTED'
    'authorization': 'REDACTED'
    'Accept': 'application/json'
    'x-ms-cosmos-correlated-activityid': 'REDACTED'
    'Content-Length': '107'
    'User-Agent': 'azsdk-python-cosmos/4.5.1 Python/3.12.4 (macOS-15.0.1-arm64-arm-64bit)'
A body is sent with the request
2024-10-30 05:21:18,027 - DEBUG - https://cosmossnoogram-centralus.documents.azure.com:443 "POST /dbs/ToDoList/colls/sent_posts/docs/ HTTP/11" 200 None
2024-10-30 05:21:18,027 - INFO - Response status: 200
Response headers:
    'Cache-Control': 'no-store, no-cache'
    'Pragma': 'no-cache'
    'Transfer-Encoding': 'chunked'
    'Content-Type': 'application/json'
    'Server': 'Microsoft-HTTPAPI/2.0'
    'Strict-Transport-Security': 'REDACTED'
    'x-ms-activity-id': 'REDACTED'
    'x-ms-last-state-change-utc': 'REDACTED'
    'x-ms-resource-quota': 'REDACTED'
    'x-ms-resource-usage': 'REDACTED'
    'x-ms-schemaversion': 'REDACTED'
    'lsn': 'REDACTED'
    'x-ms-item-count': 'REDACTED'
    'x-ms-request-charge': 'REDACTED'
    'x-ms-alt-content-path': 'REDACTED'
    'x-ms-content-path': 'REDACTED'
    'x-ms-documentdb-partitionkeyrangeid': 'REDACTED'
    'x-ms-xp-role': 'REDACTED'
    'x-ms-cosmos-query-execution-info': 'REDACTED'
    'x-ms-global-Committed-lsn': 'REDACTED'
    'x-ms-number-of-read-regions': 'REDACTED'
    'x-ms-transport-request-id': 'REDACTED'
    'x-ms-cosmos-llsn': 'REDACTED'
    'x-ms-session-token': 'REDACTED'
    'x-ms-request-duration-ms': 'REDACTED'
    'x-ms-serviceversion': 'REDACTED'
    'x-ms-cosmos-is-partition-key-delete-pending': 'REDACTED'
    'x-ms-cosmos-physical-partition-id': 'REDACTED'
    'x-ms-cosmos-internal-partition-id': 'REDACTED'
    'x-ms-gatewayversion': 'REDACTED'
    'Date': 'Wed, 30 Oct 2024 10:21:17 GMT'
2024-10-30 05:21:18,027 - INFO - Post 1fv4cfc is not an image or video post, skipping
2024-10-30 05:21:18,027 - INFO - Checking post: 1ganrp0 - Score: 4204 - URL: https://i.redd.it/ezatz8645lwd1.jpeg
2024-10-30 05:21:18,028 - INFO - Request URL: 'https://cosmossnoogram-centralus.documents.azure.com:443/dbs/ToDoList/colls/sent_posts/docs/'
Request method: 'POST'
Request headers:
    'Cache-Control': 'no-cache'
    'x-ms-version': 'REDACTED'
    'x-ms-documentdb-query-iscontinuationexpected': 'REDACTED'
    'x-ms-consistency-level': 'REDACTED'
    'x-ms-documentdb-isquery': 'REDACTED'
    'Content-Type': 'application/query+json'
    'x-ms-session-token': 'REDACTED'
    'x-ms-documentdb-query-enablecrosspartition': 'REDACTED'
    'x-ms-date': 'REDACTED'
    'authorization': 'REDACTED'
    'Accept': 'application/json'
    'x-ms-cosmos-correlated-activityid': 'REDACTED'
    'Content-Length': '107'
    'User-Agent': 'azsdk-python-cosmos/4.5.1 Python/3.12.4 (macOS-15.0.1-arm64-arm-64bit)'
A body is sent with the request
2024-10-30 05:21:18,098 - DEBUG - https://cosmossnoogram-centralus.documents.azure.com:443 "POST /dbs/ToDoList/colls/sent_posts/docs/ HTTP/11" 200 None
2024-10-30 05:21:18,098 - INFO - Response status: 200
Response headers:
    'Cache-Control': 'no-store, no-cache'
    'Pragma': 'no-cache'
    'Transfer-Encoding': 'chunked'
    'Content-Type': 'application/json'
    'Server': 'Microsoft-HTTPAPI/2.0'
    'Strict-Transport-Security': 'REDACTED'
    'x-ms-activity-id': 'REDACTED'
    'x-ms-last-state-change-utc': 'REDACTED'
    'x-ms-resource-quota': 'REDACTED'
    'x-ms-resource-usage': 'REDACTED'
    'x-ms-schemaversion': 'REDACTED'
    'lsn': 'REDACTED'
    'x-ms-item-count': 'REDACTED'
    'x-ms-request-charge': 'REDACTED'
    'x-ms-alt-content-path': 'REDACTED'
    'x-ms-content-path': 'REDACTED'
    'x-ms-documentdb-partitionkeyrangeid': 'REDACTED'
    'x-ms-xp-role': 'REDACTED'
    'x-ms-cosmos-query-execution-info': 'REDACTED'
    'x-ms-global-Committed-lsn': 'REDACTED'
    'x-ms-number-of-read-regions': 'REDACTED'
    'x-ms-transport-request-id': 'REDACTED'
    'x-ms-cosmos-llsn': 'REDACTED'
    'x-ms-session-token': 'REDACTED'
    'x-ms-request-duration-ms': 'REDACTED'
    'x-ms-serviceversion': 'REDACTED'
    'x-ms-cosmos-is-partition-key-delete-pending': 'REDACTED'
    'x-ms-cosmos-physical-partition-id': 'REDACTED'
    'x-ms-cosmos-internal-partition-id': 'REDACTED'
    'x-ms-gatewayversion': 'REDACTED'
    'Date': 'Wed, 30 Oct 2024 10:21:17 GMT'
2024-10-30 05:21:18,098 - INFO - Post 1ganrp0 is a duplicate, skipping
2024-10-30 05:21:18,099 - INFO - Checking post: 1gdrcjt - Score: 4059 - URL: https://www.redgifs.com/watch/unrealisticdefinitebarebirdbat
2024-10-30 05:21:18,099 - INFO - Post 1gdrcjt is a duplicate, skipping
2024-10-30 05:21:18,099 - INFO - Checking post: 1g30sx1 - Score: 3962 - URL: https://www.redgifs.com/watch/hardwarlikesunbittern
2024-10-30 05:21:18,099 - INFO - Post 1g30sx1 is a duplicate, skipping
2024-10-30 05:21:18,099 - INFO - Checking post: 1fs7839 - Score: 3852 - URL: https://www.reddit.com/gallery/1fs7839
2024-10-30 05:21:18,100 - INFO - Request URL: 'https://cosmossnoogram-centralus.documents.azure.com:443/dbs/ToDoList/colls/sent_posts/docs/'
Request method: 'POST'
Request headers:
    'Cache-Control': 'no-cache'
    'x-ms-version': 'REDACTED'
    'x-ms-documentdb-query-iscontinuationexpected': 'REDACTED'
    'x-ms-consistency-level': 'REDACTED'
    'x-ms-documentdb-isquery': 'REDACTED'
    'Content-Type': 'application/query+json'
    'x-ms-session-token': 'REDACTED'
    'x-ms-documentdb-query-enablecrosspartition': 'REDACTED'
    'x-ms-date': 'REDACTED'
    'authorization': 'REDACTED'
    'Accept': 'application/json'
    'x-ms-cosmos-correlated-activityid': 'REDACTED'
    'Content-Length': '107'
    'User-Agent': 'azsdk-python-cosmos/4.5.1 Python/3.12.4 (macOS-15.0.1-arm64-arm-64bit)'
A body is sent with the request
2024-10-30 05:21:18,163 - DEBUG - https://cosmossnoogram-centralus.documents.azure.com:443 "POST /dbs/ToDoList/colls/sent_posts/docs/ HTTP/11" 200 None
2024-10-30 05:21:18,164 - INFO - Response status: 200
Response headers:
    'Cache-Control': 'no-store, no-cache'
    'Pragma': 'no-cache'
    'Transfer-Encoding': 'chunked'
    'Content-Type': 'application/json'
    'Server': 'Microsoft-HTTPAPI/2.0'
    'Strict-Transport-Security': 'REDACTED'
    'x-ms-activity-id': 'REDACTED'
    'x-ms-last-state-change-utc': 'REDACTED'
    'x-ms-resource-quota': 'REDACTED'
    'x-ms-resource-usage': 'REDACTED'
    'x-ms-schemaversion': 'REDACTED'
    'lsn': 'REDACTED'
    'x-ms-item-count': 'REDACTED'
    'x-ms-request-charge': 'REDACTED'
    'x-ms-alt-content-path': 'REDACTED'
    'x-ms-content-path': 'REDACTED'
    'x-ms-quorum-acked-lsn': 'REDACTED'
    'x-ms-current-write-quorum': 'REDACTED'
    'x-ms-current-replica-set-size': 'REDACTED'
    'x-ms-documentdb-partitionkeyrangeid': 'REDACTED'
    'x-ms-xp-role': 'REDACTED'
    'x-ms-cosmos-query-execution-info': 'REDACTED'
    'x-ms-global-Committed-lsn': 'REDACTED'
    'x-ms-number-of-read-regions': 'REDACTED'
    'x-ms-transport-request-id': 'REDACTED'
    'x-ms-cosmos-llsn': 'REDACTED'
    'x-ms-cosmos-quorum-acked-llsn': 'REDACTED'
    'x-ms-session-token': 'REDACTED'
    'x-ms-request-duration-ms': 'REDACTED'
    'x-ms-serviceversion': 'REDACTED'
    'x-ms-cosmos-is-partition-key-delete-pending': 'REDACTED'
    'x-ms-cosmos-physical-partition-id': 'REDACTED'
    'x-ms-cosmos-internal-partition-id': 'REDACTED'
    'x-ms-gatewayversion': 'REDACTED'
    'Date': 'Wed, 30 Oct 2024 10:21:17 GMT'
2024-10-30 05:21:18,165 - INFO - Post 1fs7839 is not an image or video post, skipping
2024-10-30 05:21:18,165 - INFO - Checking post: 1g2rse9 - Score: 3769 - URL: https://i.redd.it/gzxs1aeshjud1.png
2024-10-30 05:21:18,166 - INFO - Post 1g2rse9 is a duplicate, skipping
2024-10-30 05:21:18,167 - INFO - Checking post: 1ge9loz - Score: 3732 - URL: https://www.redgifs.com/watch/deadlygregariouswoodchuck
2024-10-30 05:21:18,168 - INFO - Post 1ge9loz is a duplicate, skipping
2024-10-30 05:21:18,168 - INFO - Checking post: 1g0e966 - Score: 3636 - URL: https://www.reddit.com/gallery/1g0e966
2024-10-30 05:21:18,169 - INFO - Request URL: 'https://cosmossnoogram-centralus.documents.azure.com:443/dbs/ToDoList/colls/sent_posts/docs/'
Request method: 'POST'
Request headers:
    'Cache-Control': 'no-cache'
    'x-ms-version': 'REDACTED'
    'x-ms-documentdb-query-iscontinuationexpected': 'REDACTED'
    'x-ms-consistency-level': 'REDACTED'
    'x-ms-documentdb-isquery': 'REDACTED'
    'Content-Type': 'application/query+json'
    'x-ms-session-token': 'REDACTED'
    'x-ms-documentdb-query-enablecrosspartition': 'REDACTED'
    'x-ms-date': 'REDACTED'
    'authorization': 'REDACTED'
    'Accept': 'application/json'
    'x-ms-cosmos-correlated-activityid': 'REDACTED'
    'Content-Length': '107'
    'User-Agent': 'azsdk-python-cosmos/4.5.1 Python/3.12.4 (macOS-15.0.1-arm64-arm-64bit)'
A body is sent with the request
2024-10-30 05:21:18,224 - DEBUG - https://cosmossnoogram-centralus.documents.azure.com:443 "POST /dbs/ToDoList/colls/sent_posts/docs/ HTTP/11" 200 None
2024-10-30 05:21:18,225 - INFO - Response status: 200
Response headers:
    'Cache-Control': 'no-store, no-cache'
    'Pragma': 'no-cache'
    'Transfer-Encoding': 'chunked'
    'Content-Type': 'application/json'
    'Server': 'Microsoft-HTTPAPI/2.0'
    'Strict-Transport-Security': 'REDACTED'
    'x-ms-activity-id': 'REDACTED'
    'x-ms-last-state-change-utc': 'REDACTED'
    'x-ms-resource-quota': 'REDACTED'
    'x-ms-resource-usage': 'REDACTED'
    'x-ms-schemaversion': 'REDACTED'
    'lsn': 'REDACTED'
    'x-ms-item-count': 'REDACTED'
    'x-ms-request-charge': 'REDACTED'
    'x-ms-alt-content-path': 'REDACTED'
    'x-ms-content-path': 'REDACTED'
    'x-ms-documentdb-partitionkeyrangeid': 'REDACTED'
    'x-ms-xp-role': 'REDACTED'
    'x-ms-cosmos-query-execution-info': 'REDACTED'
    'x-ms-global-Committed-lsn': 'REDACTED'
    'x-ms-number-of-read-regions': 'REDACTED'
    'x-ms-transport-request-id': 'REDACTED'
    'x-ms-cosmos-llsn': 'REDACTED'
    'x-ms-session-token': 'REDACTED'
    'x-ms-request-duration-ms': 'REDACTED'
    'x-ms-serviceversion': 'REDACTED'
    'x-ms-cosmos-is-partition-key-delete-pending': 'REDACTED'
    'x-ms-cosmos-physical-partition-id': 'REDACTED'
    'x-ms-cosmos-internal-partition-id': 'REDACTED'
    'x-ms-gatewayversion': 'REDACTED'
    'Date': 'Wed, 30 Oct 2024 10:21:17 GMT'
2024-10-30 05:21:18,225 - INFO - Post 1g0e966 is not an image or video post, skipping
2024-10-30 05:21:18,225 - INFO - Checking post: 1gckgcy - Score: 3395 - URL: https://i.redd.it/njd0mbyjl3xd1.jpeg
2024-10-30 05:21:18,226 - INFO - Post 1gckgcy is a duplicate, skipping
2024-10-30 05:21:18,226 - INFO - Checking post: 1fznoil - Score: 3339 - URL: https://i.redd.it/eruk3694dptd1.jpeg
2024-10-30 05:21:18,226 - INFO - Post 1fznoil is a duplicate, skipping
2024-10-30 05:21:18,226 - INFO - Checking post: 1g3dsj7 - Score: 3183 - URL: https://i.redd.it/cg9oigznmpud1.jpeg
2024-10-30 05:21:18,226 - INFO - Post 1g3dsj7 is a duplicate, skipping
2024-10-30 05:21:18,227 - INFO - Checking post: 1g4dx9i - Score: 3138 - URL: https://i.redd.it/5kv3c8f3lyud1.jpeg
2024-10-30 05:21:18,227 - INFO - Request URL: 'https://cosmossnoogram-centralus.documents.azure.com:443/dbs/ToDoList/colls/sent_posts/docs/'
Request method: 'POST'
Request headers:
    'Cache-Control': 'no-cache'
    'x-ms-version': 'REDACTED'
    'x-ms-documentdb-query-iscontinuationexpected': 'REDACTED'
    'x-ms-consistency-level': 'REDACTED'
    'x-ms-documentdb-isquery': 'REDACTED'
    'Content-Type': 'application/query+json'
    'x-ms-session-token': 'REDACTED'
    'x-ms-documentdb-query-enablecrosspartition': 'REDACTED'
    'x-ms-date': 'REDACTED'
    'authorization': 'REDACTED'
    'Accept': 'application/json'
    'x-ms-cosmos-correlated-activityid': 'REDACTED'
    'Content-Length': '107'
    'User-Agent': 'azsdk-python-cosmos/4.5.1 Python/3.12.4 (macOS-15.0.1-arm64-arm-64bit)'
A body is sent with the request
2024-10-30 05:21:18,283 - DEBUG - https://cosmossnoogram-centralus.documents.azure.com:443 "POST /dbs/ToDoList/colls/sent_posts/docs/ HTTP/11" 200 None
2024-10-30 05:21:18,285 - INFO - Response status: 200
Response headers:
    'Cache-Control': 'no-store, no-cache'
    'Pragma': 'no-cache'
    'Transfer-Encoding': 'chunked'
    'Content-Type': 'application/json'
    'Server': 'Microsoft-HTTPAPI/2.0'
    'Strict-Transport-Security': 'REDACTED'
    'x-ms-activity-id': 'REDACTED'
    'x-ms-last-state-change-utc': 'REDACTED'
    'x-ms-resource-quota': 'REDACTED'
    'x-ms-resource-usage': 'REDACTED'
    'x-ms-schemaversion': 'REDACTED'
    'lsn': 'REDACTED'
    'x-ms-item-count': 'REDACTED'
    'x-ms-request-charge': 'REDACTED'
    'x-ms-alt-content-path': 'REDACTED'
    'x-ms-content-path': 'REDACTED'
    'x-ms-quorum-acked-lsn': 'REDACTED'
    'x-ms-current-write-quorum': 'REDACTED'
    'x-ms-current-replica-set-size': 'REDACTED'
    'x-ms-documentdb-partitionkeyrangeid': 'REDACTED'
    'x-ms-xp-role': 'REDACTED'
    'x-ms-cosmos-query-execution-info': 'REDACTED'
    'x-ms-global-Committed-lsn': 'REDACTED'
    'x-ms-number-of-read-regions': 'REDACTED'
    'x-ms-transport-request-id': 'REDACTED'
    'x-ms-cosmos-llsn': 'REDACTED'
    'x-ms-cosmos-quorum-acked-llsn': 'REDACTED'
    'x-ms-session-token': 'REDACTED'
    'x-ms-request-duration-ms': 'REDACTED'
    'x-ms-serviceversion': 'REDACTED'
    'x-ms-cosmos-is-partition-key-delete-pending': 'REDACTED'
    'x-ms-cosmos-physical-partition-id': 'REDACTED'
    'x-ms-cosmos-internal-partition-id': 'REDACTED'
    'x-ms-gatewayversion': 'REDACTED'
    'Date': 'Wed, 30 Oct 2024 10:21:17 GMT'
2024-10-30 05:21:18,285 - INFO - Post 1g4dx9i is a duplicate, skipping
2024-10-30 05:21:18,285 - INFO - Checking post: 1ge2oko - Score: 3128 - URL: https://i.redd.it/3vk9ocmf6ixd1.jpeg
2024-10-30 05:21:18,287 - INFO - Request URL: 'https://cosmossnoogram-centralus.documents.azure.com:443/dbs/ToDoList/colls/sent_posts/docs/'
Request method: 'POST'
Request headers:
    'Cache-Control': 'no-cache'
    'x-ms-version': 'REDACTED'
    'x-ms-documentdb-query-iscontinuationexpected': 'REDACTED'
    'x-ms-consistency-level': 'REDACTED'
    'x-ms-documentdb-isquery': 'REDACTED'
    'Content-Type': 'application/query+json'
    'x-ms-session-token': 'REDACTED'
    'x-ms-documentdb-query-enablecrosspartition': 'REDACTED'
    'x-ms-date': 'REDACTED'
    'authorization': 'REDACTED'
    'Accept': 'application/json'
    'x-ms-cosmos-correlated-activityid': 'REDACTED'
    'Content-Length': '107'
    'User-Agent': 'azsdk-python-cosmos/4.5.1 Python/3.12.4 (macOS-15.0.1-arm64-arm-64bit)'
A body is sent with the request
2024-10-30 05:21:18,329 - DEBUG - https://cosmossnoogram-centralus.documents.azure.com:443 "POST /dbs/ToDoList/colls/sent_posts/docs/ HTTP/11" 200 None
2024-10-30 05:21:18,331 - INFO - Response status: 200
Response headers:
    'Cache-Control': 'no-store, no-cache'
    'Pragma': 'no-cache'
    'Transfer-Encoding': 'chunked'
    'Content-Type': 'application/json'
    'Server': 'Microsoft-HTTPAPI/2.0'
    'Strict-Transport-Security': 'REDACTED'
    'x-ms-activity-id': 'REDACTED'
    'x-ms-last-state-change-utc': 'REDACTED'
    'x-ms-resource-quota': 'REDACTED'
    'x-ms-resource-usage': 'REDACTED'
    'x-ms-schemaversion': 'REDACTED'
    'lsn': 'REDACTED'
    'x-ms-item-count': 'REDACTED'
    'x-ms-request-charge': 'REDACTED'
    'x-ms-alt-content-path': 'REDACTED'
    'x-ms-content-path': 'REDACTED'
    'x-ms-documentdb-partitionkeyrangeid': 'REDACTED'
    'x-ms-xp-role': 'REDACTED'
    'x-ms-cosmos-query-execution-info': 'REDACTED'
    'x-ms-global-Committed-lsn': 'REDACTED'
    'x-ms-number-of-read-regions': 'REDACTED'
    'x-ms-transport-request-id': 'REDACTED'
    'x-ms-cosmos-llsn': 'REDACTED'
    'x-ms-session-token': 'REDACTED'
    'x-ms-request-duration-ms': 'REDACTED'
    'x-ms-serviceversion': 'REDACTED'
    'x-ms-cosmos-is-partition-key-delete-pending': 'REDACTED'
    'x-ms-cosmos-physical-partition-id': 'REDACTED'
    'x-ms-cosmos-internal-partition-id': 'REDACTED'
    'x-ms-gatewayversion': 'REDACTED'
    'Date': 'Wed, 30 Oct 2024 10:21:17 GMT'
2024-10-30 05:21:18,331 - INFO - Found image post: 1ge2oko with URL: https://i.redd.it/3vk9ocmf6ixd1.jpeg
2024-10-30 05:21:18,334 - DEBUG - Starting new HTTPS connection (1): i.redd.it:443
2024-10-30 05:21:18,517 - DEBUG - https://i.redd.it:443 "GET /3vk9ocmf6ixd1.jpeg HTTP/11" 200 2942027
2024-10-30 05:21:18,876 - INFO - Successfully downloaded media to downloads/pics/1ge2oko_20241030_052118_c0dedffe.jpeg
2024-10-30 05:21:18,877 - DEBUG - Using selector: KqueueSelector
2024-10-30 05:21:18,877 - INFO - Attempting to send photo to Telegram - Path: downloads/pics/1ge2oko_20241030_052118_c0dedffe.jpeg
2024-10-30 05:21:18,878 - DEBUG - load_ssl_context verify=True cert=None trust_env=True http2=False
2024-10-30 05:21:18,878 - DEBUG - load_verify_locations cafile='/Users/joewilson/PythonProjects/Snoogram/venv/lib/python3.12/site-packages/certifi/cacert.pem'
2024-10-30 05:21:18,885 - DEBUG - load_ssl_context verify=True cert=None trust_env=True http2=False
2024-10-30 05:21:18,885 - DEBUG - load_verify_locations cafile='/Users/joewilson/PythonProjects/Snoogram/venv/lib/python3.12/site-packages/certifi/cacert.pem'
2024-10-30 05:21:18,892 - DEBUG - Entering: get_me
2024-10-30 05:21:18,930 - DEBUG - connect_tcp.started host='api.telegram.org' port=443 local_address=None timeout=5.0 socket_options=None
2024-10-30 05:21:18,962 - INFO - Successfully downloaded media to downloads/videos/1gelyz1_20241030_052117_ba5c8ead.mp4
2024-10-30 05:21:18,964 - DEBUG - Using selector: KqueueSelector
2024-10-30 05:21:18,964 - INFO - Attempting to send video to Telegram - Path: downloads/videos/1gelyz1_20241030_052117_ba5c8ead.mp4
2024-10-30 05:21:18,964 - DEBUG - Entering: get_me
2024-10-30 05:21:18,964 - DEBUG - connect_tcp.started host='api.telegram.org' port=443 local_address=None timeout=5.0 socket_options=None
2024-10-30 05:21:19,061 - DEBUG - connect_tcp.complete return_value=<httpcore._backends.anyio.AnyIOStream object at 0x108975280>
2024-10-30 05:21:19,062 - DEBUG - start_tls.started ssl_context=<ssl.SSLContext object at 0x10aa45250> server_hostname='api.telegram.org' timeout=5.0
2024-10-30 05:21:19,090 - DEBUG - connect_tcp.complete return_value=<httpcore._backends.anyio.AnyIOStream object at 0x108d9c1d0>
2024-10-30 05:21:19,090 - DEBUG - start_tls.started ssl_context=<ssl.SSLContext object at 0x10aa45250> server_hostname='api.telegram.org' timeout=5.0
2024-10-30 05:21:19,196 - DEBUG - start_tls.complete return_value=<httpcore._backends.anyio.AnyIOStream object at 0x108a63ce0>
2024-10-30 05:21:19,197 - DEBUG - send_request_headers.started request=<Request [b'POST']>
2024-10-30 05:21:19,198 - DEBUG - send_request_headers.complete
2024-10-30 05:21:19,198 - DEBUG - send_request_body.started request=<Request [b'POST']>
2024-10-30 05:21:19,199 - DEBUG - send_request_body.complete
2024-10-30 05:21:19,199 - DEBUG - receive_response_headers.started request=<Request [b'POST']>
2024-10-30 05:21:19,227 - DEBUG - start_tls.complete return_value=<httpcore._backends.anyio.AnyIOStream object at 0x108d7b4d0>
2024-10-30 05:21:19,227 - DEBUG - send_request_headers.started request=<Request [b'POST']>
2024-10-30 05:21:19,228 - DEBUG - send_request_headers.complete
2024-10-30 05:21:19,228 - DEBUG - send_request_body.started request=<Request [b'POST']>
2024-10-30 05:21:19,228 - DEBUG - send_request_body.complete
2024-10-30 05:21:19,228 - DEBUG - receive_response_headers.started request=<Request [b'POST']>
2024-10-30 05:21:19,317 - DEBUG - receive_response_headers.complete return_value=(b'HTTP/1.1', 200, b'OK', [(b'Server', b'nginx/1.18.0'), (b'Date', b'Wed, 30 Oct 2024 10:21:19 GMT'), (b'Content-Type', b'application/json'), (b'Content-Length', b'254'), (b'Connection', b'keep-alive'), (b'Strict-Transport-Security', b'max-age=31536000; includeSubDomains; preload'), (b'Access-Control-Allow-Origin', b'*'), (b'Access-Control-Allow-Methods', b'GET, POST, OPTIONS'), (b'Access-Control-Expose-Headers', b'Content-Length,Content-Type,Date,Server,Connection')])
2024-10-30 05:21:19,318 - INFO - HTTP Request: POST https://api.telegram.org/bot7867694458:AAEFLZjWPyd1p640mHENnBt479WRYfSavWg/getMe "HTTP/1.1 200 OK"
2024-10-30 05:21:19,318 - DEBUG - receive_response_body.started request=<Request [b'POST']>
2024-10-30 05:21:19,318 - DEBUG - receive_response_body.complete
2024-10-30 05:21:19,318 - DEBUG - response_closed.started
2024-10-30 05:21:19,319 - DEBUG - response_closed.complete
2024-10-30 05:21:19,319 - DEBUG - User(api_kwargs={'can_connect_to_business': False, 'has_main_web_app': False}, can_join_groups=True, can_read_all_group_messages=False, first_name='RedditBot', id=7867694458, is_bot=True, supports_inline_queries=False, username='RedditImage_bot')
2024-10-30 05:21:19,320 - DEBUG - Exiting: get_me
2024-10-30 05:21:19,320 - DEBUG - This Bot is already initialized.
2024-10-30 05:21:19,320 - DEBUG - Entering: send_photo
2024-10-30 05:21:19,322 - DEBUG - send_request_headers.started request=<Request [b'POST']>
2024-10-30 05:21:19,323 - DEBUG - send_request_headers.complete
2024-10-30 05:21:19,323 - DEBUG - send_request_body.started request=<Request [b'POST']>
2024-10-30 05:21:19,387 - DEBUG - receive_response_headers.complete return_value=(b'HTTP/1.1', 200, b'OK', [(b'Server', b'nginx/1.18.0'), (b'Date', b'Wed, 30 Oct 2024 10:21:19 GMT'), (b'Content-Type', b'application/json'), (b'Content-Length', b'254'), (b'Connection', b'keep-alive'), (b'Strict-Transport-Security', b'max-age=31536000; includeSubDomains; preload'), (b'Access-Control-Allow-Origin', b'*'), (b'Access-Control-Allow-Methods', b'GET, POST, OPTIONS'), (b'Access-Control-Expose-Headers', b'Content-Length,Content-Type,Date,Server,Connection')])
2024-10-30 05:21:19,387 - INFO - HTTP Request: POST https://api.telegram.org/bot7867694458:AAEFLZjWPyd1p640mHENnBt479WRYfSavWg/getMe "HTTP/1.1 200 OK"
2024-10-30 05:21:19,388 - DEBUG - receive_response_body.started request=<Request [b'POST']>
2024-10-30 05:21:19,388 - DEBUG - receive_response_body.complete
2024-10-30 05:21:19,388 - DEBUG - response_closed.started
2024-10-30 05:21:19,388 - DEBUG - response_closed.complete
2024-10-30 05:21:19,388 - DEBUG - User(api_kwargs={'can_connect_to_business': False, 'has_main_web_app': False}, can_join_groups=True, can_read_all_group_messages=False, first_name='RedditBot', id=7867694458, is_bot=True, supports_inline_queries=False, username='RedditImage_bot')
2024-10-30 05:21:19,389 - DEBUG - Exiting: get_me
2024-10-30 05:21:19,389 - DEBUG - This Updater is already initialized.
2024-10-30 05:21:19,389 - DEBUG - Entering: send_video
2024-10-30 05:21:19,399 - DEBUG - send_request_headers.started request=<Request [b'POST']>
2024-10-30 05:21:19,400 - DEBUG - send_request_headers.complete
2024-10-30 05:21:19,400 - DEBUG - send_request_body.started request=<Request [b'POST']>
2024-10-30 05:21:20,431 - DEBUG - send_request_body.complete
2024-10-30 05:21:20,431 - DEBUG - receive_response_headers.started request=<Request [b'POST']>
2024-10-30 05:21:20,826 - DEBUG - receive_response_headers.complete return_value=(b'HTTP/1.1', 200, b'OK', [(b'Server', b'nginx/1.18.0'), (b'Date', b'Wed, 30 Oct 2024 10:21:20 GMT'), (b'Content-Type', b'application/json'), (b'Content-Length', b'1213'), (b'Connection', b'keep-alive'), (b'Strict-Transport-Security', b'max-age=31536000; includeSubDomains; preload'), (b'Access-Control-Allow-Origin', b'*'), (b'Access-Control-Allow-Methods', b'GET, POST, OPTIONS'), (b'Access-Control-Expose-Headers', b'Content-Length,Content-Type,Date,Server,Connection')])
2024-10-30 05:21:20,827 - INFO - HTTP Request: POST https://api.telegram.org/bot7867694458:AAEFLZjWPyd1p640mHENnBt479WRYfSavWg/sendPhoto "HTTP/1.1 200 OK"
2024-10-30 05:21:20,827 - DEBUG - receive_response_body.started request=<Request [b'POST']>
2024-10-30 05:21:20,828 - DEBUG - receive_response_body.complete
2024-10-30 05:21:20,828 - DEBUG - response_closed.started
2024-10-30 05:21:20,828 - DEBUG - response_closed.complete
2024-10-30 05:21:20,830 - DEBUG - Message(caption='From r/wifebutt: Fresh morning Wifebutt\nUpvotes: 3,128', channel_chat_created=False, chat=Chat(id=-1002490380283, title='Reddit_Pic_Stream', type=<ChatType.CHANNEL>), date=datetime.datetime(2024, 10, 30, 10, 21, 20, tzinfo=<UTC>), delete_chat_photo=False, group_chat_created=False, message_id=232, photo=(PhotoSize(file_id='AgACAgEAAyEGAASUcC_7AAOZZyH6uPME2ny7Ln2nX6zcZxEOxyoAAketMRsZEBFFtveidIwWN04BAAMCAANzAAM2BA', file_size=1506, file_unique_id='AQADR60xGxkQEUV4', height=90, width=67), PhotoSize(file_id='AgACAgEAAyEGAASUcC_7AAOZZyH6uPME2ny7Ln2nX6zcZxEOxyoAAketMRsZEBFFtveidIwWN04BAAMCAANtAAM2BA', file_size=23685, file_unique_id='AQADR60xGxkQEUVy', height=320, width=240), PhotoSize(file_id='AgACAgEAAyEGAASUcC_7AAOZZyH6uPME2ny7Ln2nX6zcZxEOxyoAAketMRsZEBFFtveidIwWN04BAAMCAAN4AAM2BA', file_size=120875, file_unique_id='AQADR60xGxkQEUV9', height=800, width=600), PhotoSize(file_id='AgACAgEAAyEGAASUcC_7AAOZZyH6uPME2ny7Ln2nX6zcZxEOxyoAAketMRsZEBFFtveidIwWN04BAAMCAAN5AAM2BA', file_size=286149, file_unique_id='AQADR60xGxkQEUV-', height=1280, width=960), PhotoSize(file_id='AgACAgEAAyEGAASUcC_7AAOZZyH6uPME2ny7Ln2nX6zcZxEOxyoAAketMRsZEBFFtveidIwWN04BAAMCAAN3AAM2BA', file_size=958648, file_unique_id='AQADR60xGxkQEUV8', height=2560, width=1920)), sender_chat=Chat(id=-1002490380283, title='Reddit_Pic_Stream', type=<ChatType.CHANNEL>), supergroup_chat_created=False)
2024-10-30 05:21:20,831 - DEBUG - Exiting: send_photo
2024-10-30 05:21:20,831 - DEBUG - close.started
2024-10-30 05:21:20,831 - DEBUG - close.complete
2024-10-30 05:21:20,831 - DEBUG - close.started
2024-10-30 05:21:20,832 - DEBUG - close.complete
2024-10-30 05:21:20,832 - DEBUG - This Bot is already shut down. Returning.
2024-10-30 05:21:20,832 - DEBUG - Shut down of Updater complete
2024-10-30 05:21:20,832 - INFO - Successfully sent photo to Telegram
2024-10-30 05:21:20,835 - ERROR - Error processing subreddit wifebutt: (sqlite3.OperationalError) attempt to write a readonly database
[SQL: INSERT INTO sent_post (post_id, subreddit_name, sent_at) VALUES (?, ?, ?)]
[parameters: ('1ge2oko', 'wifebutt', '2024-10-30 10:21:20.835081')]
(Background on this error at: https://sqlalche.me/e/20/e3q8)
2024-10-30 05:21:20,837 - ERROR - Job "send_to_telegram (trigger: interval[0:01:00], next run at: 2024-10-30 05:22:16 CDT)" raised an exception
Traceback (most recent call last):
  File "/Users/joewilson/PythonProjects/Snoogram/venv/lib/python3.12/site-packages/sqlalchemy/engine/base.py", line 1967, in _exec_single_context
    self.dialect.do_execute(
  File "/Users/joewilson/PythonProjects/Snoogram/venv/lib/python3.12/site-packages/sqlalchemy/engine/default.py", line 941, in do_execute
    cursor.execute(statement, parameters)
sqlite3.OperationalError: attempt to write a readonly database

The above exception was the direct cause of the following exception:

Traceback (most recent call last):
  File "/Users/joewilson/PythonProjects/Snoogram/venv/lib/python3.12/site-packages/apscheduler/executors/base.py", line 125, in run_job
    retval = job.func(*job.args, **job.kwargs)
             ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/Users/joewilson/PythonProjects/Snoogram/backend/app.py", line 265, in send_to_telegram
    # Update last_check in Cosmos DB
                ^^^^^^^^^^^^^^^^^^^^^
  File "/Users/joewilson/PythonProjects/Snoogram/backend/db_operations.py", line 100, in add_sent_post
  File "/Users/joewilson/PythonProjects/Snoogram/venv/lib/python3.12/site-packages/sqlalchemy/orm/scoping.py", line 597, in commit
    return self._proxied.commit()
           ^^^^^^^^^^^^^^^^^^^^^^
  File "/Users/joewilson/PythonProjects/Snoogram/venv/lib/python3.12/site-packages/sqlalchemy/orm/session.py", line 2028, in commit
    trans.commit(_to_root=True)
  File "<string>", line 2, in commit
  File "/Users/joewilson/PythonProjects/Snoogram/venv/lib/python3.12/site-packages/sqlalchemy/orm/state_changes.py", line 139, in _go
    ret_value = fn(self, *arg, **kw)
                ^^^^^^^^^^^^^^^^^^^^
  File "/Users/joewilson/PythonProjects/Snoogram/venv/lib/python3.12/site-packages/sqlalchemy/orm/session.py", line 1313, in commit
    self._prepare_impl()
  File "<string>", line 2, in _prepare_impl
  File "/Users/joewilson/PythonProjects/Snoogram/venv/lib/python3.12/site-packages/sqlalchemy/orm/state_changes.py", line 139, in _go
    ret_value = fn(self, *arg, **kw)
                ^^^^^^^^^^^^^^^^^^^^
  File "/Users/joewilson/PythonProjects/Snoogram/venv/lib/python3.12/site-packages/sqlalchemy/orm/session.py", line 1288, in _prepare_impl
    self.session.flush()
  File "/Users/joewilson/PythonProjects/Snoogram/venv/lib/python3.12/site-packages/sqlalchemy/orm/session.py", line 4352, in flush
    self._flush(objects)
  File "/Users/joewilson/PythonProjects/Snoogram/venv/lib/python3.12/site-packages/sqlalchemy/orm/session.py", line 4487, in _flush
    with util.safe_reraise():
  File "/Users/joewilson/PythonProjects/Snoogram/venv/lib/python3.12/site-packages/sqlalchemy/util/langhelpers.py", line 146, in __exit__
    raise exc_value.with_traceback(exc_tb)
  File "/Users/joewilson/PythonProjects/Snoogram/venv/lib/python3.12/site-packages/sqlalchemy/orm/session.py", line 4448, in _flush
    flush_context.execute()
  File "/Users/joewilson/PythonProjects/Snoogram/venv/lib/python3.12/site-packages/sqlalchemy/orm/unitofwork.py", line 466, in execute
    rec.execute(self)
  File "/Users/joewilson/PythonProjects/Snoogram/venv/lib/python3.12/site-packages/sqlalchemy/orm/unitofwork.py", line 642, in execute
    util.preloaded.orm_persistence.save_obj(
  File "/Users/joewilson/PythonProjects/Snoogram/venv/lib/python3.12/site-packages/sqlalchemy/orm/persistence.py", line 93, in save_obj
    _emit_insert_statements(
  File "/Users/joewilson/PythonProjects/Snoogram/venv/lib/python3.12/site-packages/sqlalchemy/orm/persistence.py", line 1233, in _emit_insert_statements
    result = connection.execute(
             ^^^^^^^^^^^^^^^^^^^
  File "/Users/joewilson/PythonProjects/Snoogram/venv/lib/python3.12/site-packages/sqlalchemy/engine/base.py", line 1418, in execute
    return meth(
           ^^^^^
  File "/Users/joewilson/PythonProjects/Snoogram/venv/lib/python3.12/site-packages/sqlalchemy/sql/elements.py", line 515, in _execute_on_connection
    return connection._execute_clauseelement(
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/Users/joewilson/PythonProjects/Snoogram/venv/lib/python3.12/site-packages/sqlalchemy/engine/base.py", line 1640, in _execute_clauseelement
    ret = self._execute_context(
          ^^^^^^^^^^^^^^^^^^^^^^
  File "/Users/joewilson/PythonProjects/Snoogram/venv/lib/python3.12/site-packages/sqlalchemy/engine/base.py", line 1846, in _execute_context
    return self._exec_single_context(
           ^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/Users/joewilson/PythonProjects/Snoogram/venv/lib/python3.12/site-packages/sqlalchemy/engine/base.py", line 1986, in _exec_single_context
    self._handle_dbapi_exception(
  File "/Users/joewilson/PythonProjects/Snoogram/venv/lib/python3.12/site-packages/sqlalchemy/engine/base.py", line 2355, in _handle_dbapi_exception
    raise sqlalchemy_exception.with_traceback(exc_info[2]) from e
  File "/Users/joewilson/PythonProjects/Snoogram/venv/lib/python3.12/site-packages/sqlalchemy/engine/base.py", line 1967, in _exec_single_context
    self.dialect.do_execute(
  File "/Users/joewilson/PythonProjects/Snoogram/venv/lib/python3.12/site-packages/sqlalchemy/engine/default.py", line 941, in do_execute
    cursor.execute(statement, parameters)
sqlalchemy.exc.OperationalError: (sqlite3.OperationalError) attempt to write a readonly database
[SQL: INSERT INTO sent_post (post_id, subreddit_name, sent_at) VALUES (?, ?, ?)]
[parameters: ('1ge2oko', 'wifebutt', '2024-10-30 10:21:20.835081')]
(Background on this error at: https://sqlalche.me/e/20/e3q8)
2024-10-30 05:21:39,412 - DEBUG - send_request_body.failed exception=WriteError(ClosedResourceError())
2024-10-30 05:21:39,415 - DEBUG - response_closed.started
2024-10-30 05:21:39,415 - DEBUG - response_closed.complete
2024-10-30 05:21:39,416 - DEBUG - This Application is already shut down. Returning.
2024-10-30 05:21:39,416 - ERROR - Failed to send video to Telegram: httpx.WriteError: 
2024-10-30 05:21:39,418 - ERROR - Error sending video post 1gelyz1: httpx.WriteError: 
2024-10-30 05:21:39,418 - INFO - Checking post: 1gejrnl - Score: 2581 - URL: https://v3.redgifs.com/watch/graydefensivepika
2024-10-30 05:21:39,426 - INFO - Request URL: 'https://cosmossnoogram-centralus.documents.azure.com:443/dbs/ToDoList/colls/sent_posts/docs/'
Request method: 'POST'
Request headers:
    'Cache-Control': 'no-cache'
    'x-ms-version': 'REDACTED'
    'x-ms-documentdb-query-iscontinuationexpected': 'REDACTED'
    'x-ms-consistency-level': 'REDACTED'
    'x-ms-documentdb-isquery': 'REDACTED'
    'Content-Type': 'application/query+json'
    'x-ms-session-token': 'REDACTED'
    'x-ms-documentdb-query-enablecrosspartition': 'REDACTED'
    'x-ms-date': 'REDACTED'
    'authorization': 'REDACTED'
    'Accept': 'application/json'
    'x-ms-cosmos-correlated-activityid': 'REDACTED'
    'Content-Length': '107'
    'User-Agent': 'azsdk-python-cosmos/4.5.1 Python/3.12.4 (macOS-15.0.1-arm64-arm-64bit)'
A body is sent with the request
2024-10-30 05:21:39,467 - DEBUG - https://cosmossnoogram-centralus.documents.azure.com:443 "POST /dbs/ToDoList/colls/sent_posts/docs/ HTTP/11" 200 None
2024-10-30 05:21:39,467 - INFO - Response status: 200
Response headers:
    'Cache-Control': 'no-store, no-cache'
    'Pragma': 'no-cache'
    'Transfer-Encoding': 'chunked'
    'Content-Type': 'application/json'
    'Server': 'Microsoft-HTTPAPI/2.0'
    'Strict-Transport-Security': 'REDACTED'
    'x-ms-activity-id': 'REDACTED'
    'x-ms-last-state-change-utc': 'REDACTED'
    'x-ms-resource-quota': 'REDACTED'
    'x-ms-resource-usage': 'REDACTED'
    'x-ms-schemaversion': 'REDACTED'
    'lsn': 'REDACTED'
    'x-ms-item-count': 'REDACTED'
    'x-ms-request-charge': 'REDACTED'
    'x-ms-alt-content-path': 'REDACTED'
    'x-ms-content-path': 'REDACTED'
    'x-ms-quorum-acked-lsn': 'REDACTED'
    'x-ms-current-write-quorum': 'REDACTED'
    'x-ms-current-replica-set-size': 'REDACTED'
    'x-ms-documentdb-partitionkeyrangeid': 'REDACTED'
    'x-ms-xp-role': 'REDACTED'
    'x-ms-cosmos-query-execution-info': 'REDACTED'
    'x-ms-global-Committed-lsn': 'REDACTED'
    'x-ms-number-of-read-regions': 'REDACTED'
    'x-ms-transport-request-id': 'REDACTED'
    'x-ms-cosmos-llsn': 'REDACTED'
    'x-ms-cosmos-quorum-acked-llsn': 'REDACTED'
    'x-ms-session-token': 'REDACTED'
    'x-ms-request-duration-ms': 'REDACTED'
    'x-ms-serviceversion': 'REDACTED'
    'x-ms-cosmos-is-partition-key-delete-pending': 'REDACTED'
    'x-ms-cosmos-physical-partition-id': 'REDACTED'
    'x-ms-cosmos-internal-partition-id': 'REDACTED'
    'x-ms-gatewayversion': 'REDACTED'
    'Date': 'Wed, 30 Oct 2024 10:21:38 GMT'
2024-10-30 05:21:39,467 - INFO - Post 1gejrnl is a duplicate, skipping
2024-10-30 05:21:39,468 - INFO - Checking post: 1gelw33 - Score: 2309 - URL: https://www.redgifs.com/watch/drydarkgraysable
2024-10-30 05:21:39,468 - INFO - Post 1gelw33 is a duplicate, skipping
2024-10-30 05:21:39,468 - INFO - Checking post: 1gevvp0 - Score: 1191 - URL: https://www.redgifs.com/watch/medicalplumhen
2024-10-30 05:21:39,468 - INFO - Post 1gevvp0 is a duplicate, skipping
2024-10-30 05:21:39,468 - INFO - Checking post: 1gesoj7 - Score: 754 - URL: https://www.redgifs.com/watch/lightgreytrickydragonfly
2024-10-30 05:21:39,469 - INFO - Post 1gesoj7 is a duplicate, skipping
2024-10-30 05:21:39,469 - INFO - Checking post: 1geuuqp - Score: 444 - URL: https://www.redgifs.com/watch/cheerfulbeigebagworm
2024-10-30 05:21:39,469 - INFO - Post 1geuuqp is a duplicate, skipping
2024-10-30 05:21:39,469 - INFO - Checking post: 1geakrb - Score: 395 - URL: https://www.redgifs.com/watch/illinformedthickgalapagoshawk
2024-10-30 05:21:39,469 - INFO - Post 1geakrb is a duplicate, skipping
2024-10-30 05:21:39,469 - INFO - Checking post: 1gerubz - Score: 360 - URL: https://v3.redgifs.com/watch/trickysquarepseudodynerusquadrisectus
2024-10-30 05:21:39,469 - INFO - Post 1gerubz is a duplicate, skipping
2024-10-30 05:21:39,469 - INFO - Checking post: 1getxhl - Score: 341 - URL: https://www.redgifs.com/watch/purpledemandingboaconstrictor
2024-10-30 05:21:39,470 - INFO - Post 1getxhl is a duplicate, skipping
2024-10-30 05:21:39,470 - INFO - Checking post: 1ge9gol - Score: 278 - URL: https://v3.redgifs.com/watch/circulardeeppinkamericanbulldog
2024-10-30 05:21:39,470 - INFO - Request URL: 'https://cosmossnoogram-centralus.documents.azure.com:443/dbs/ToDoList/colls/sent_posts/docs/'
Request method: 'POST'
Request headers:
    'Cache-Control': 'no-cache'
    'x-ms-version': 'REDACTED'
    'x-ms-documentdb-query-iscontinuationexpected': 'REDACTED'
    'x-ms-consistency-level': 'REDACTED'
    'x-ms-documentdb-isquery': 'REDACTED'
    'Content-Type': 'application/query+json'
    'x-ms-session-token': 'REDACTED'
    'x-ms-documentdb-query-enablecrosspartition': 'REDACTED'
    'x-ms-date': 'REDACTED'
    'authorization': 'REDACTED'
    'Accept': 'application/json'
    'x-ms-cosmos-correlated-activityid': 'REDACTED'
    'Content-Length': '107'
    'User-Agent': 'azsdk-python-cosmos/4.5.1 Python/3.12.4 (macOS-15.0.1-arm64-arm-64bit)'
A body is sent with the request
2024-10-30 05:21:39,498 - DEBUG - https://cosmossnoogram-centralus.documents.azure.com:443 "POST /dbs/ToDoList/colls/sent_posts/docs/ HTTP/11" 200 None
2024-10-30 05:21:39,499 - INFO - Response status: 200
Response headers:
    'Cache-Control': 'no-store, no-cache'
    'Pragma': 'no-cache'
    'Transfer-Encoding': 'chunked'
    'Content-Type': 'application/json'
    'Server': 'Microsoft-HTTPAPI/2.0'
    'Strict-Transport-Security': 'REDACTED'
    'x-ms-activity-id': 'REDACTED'
    'x-ms-last-state-change-utc': 'REDACTED'
    'x-ms-resource-quota': 'REDACTED'
    'x-ms-resource-usage': 'REDACTED'
    'x-ms-schemaversion': 'REDACTED'
    'lsn': 'REDACTED'
    'x-ms-item-count': 'REDACTED'
    'x-ms-request-charge': 'REDACTED'
    'x-ms-alt-content-path': 'REDACTED'
    'x-ms-content-path': 'REDACTED'
    'x-ms-quorum-acked-lsn': 'REDACTED'
    'x-ms-current-write-quorum': 'REDACTED'
    'x-ms-current-replica-set-size': 'REDACTED'
    'x-ms-documentdb-partitionkeyrangeid': 'REDACTED'
    'x-ms-xp-role': 'REDACTED'
    'x-ms-cosmos-query-execution-info': 'REDACTED'
    'x-ms-global-Committed-lsn': 'REDACTED'
    'x-ms-number-of-read-regions': 'REDACTED'
    'x-ms-transport-request-id': 'REDACTED'
    'x-ms-cosmos-llsn': 'REDACTED'
    'x-ms-cosmos-quorum-acked-llsn': 'REDACTED'
    'x-ms-session-token': 'REDACTED'
    'x-ms-request-duration-ms': 'REDACTED'
    'x-ms-serviceversion': 'REDACTED'
    'x-ms-cosmos-is-partition-key-delete-pending': 'REDACTED'
    'x-ms-cosmos-physical-partition-id': 'REDACTED'
    'x-ms-cosmos-internal-partition-id': 'REDACTED'
    'x-ms-gatewayversion': 'REDACTED'
    'Date': 'Wed, 30 Oct 2024 10:21:38 GMT'
2024-10-30 05:21:39,499 - INFO - Found video post: 1ge9gol
2024-10-30 05:21:39,499 - DEBUG - Starting new HTTPS connection (1): api.redgifs.com:443
2024-10-30 05:21:39,602 - DEBUG - https://api.redgifs.com:443 "GET /v2/gifs/circulardeeppinkamericanbulldog HTTP/11" 200 None
2024-10-30 05:21:39,608 - DEBUG - Starting new HTTPS connection (1): files.redgifs.com:443
2024-10-30 05:21:39,684 - DEBUG - https://files.redgifs.com:443 "GET /CircularDeeppinkAmericanbulldog.mp4 HTTP/11" 200 61415883
2024-10-30 05:21:41,371 - INFO - Successfully downloaded media to downloads/videos/1ge9gol_20241030_052139_fff8ab71.mp4
2024-10-30 05:21:41,372 - DEBUG - Using selector: KqueueSelector
2024-10-30 05:21:41,372 - INFO - Attempting to send video to Telegram - Path: downloads/videos/1ge9gol_20241030_052139_fff8ab71.mp4
2024-10-30 05:21:41,373 - DEBUG - load_ssl_context verify=True cert=None trust_env=True http2=False
2024-10-30 05:21:41,373 - DEBUG - load_verify_locations cafile='/Users/joewilson/PythonProjects/Snoogram/venv/lib/python3.12/site-packages/certifi/cacert.pem'
2024-10-30 05:21:41,382 - DEBUG - load_ssl_context verify=True cert=None trust_env=True http2=False
2024-10-30 05:21:41,382 - DEBUG - load_verify_locations cafile='/Users/joewilson/PythonProjects/Snoogram/venv/lib/python3.12/site-packages/certifi/cacert.pem'
2024-10-30 05:21:41,390 - DEBUG - Entering: get_me
2024-10-30 05:21:41,390 - DEBUG - connect_tcp.started host='api.telegram.org' port=443 local_address=None timeout=5.0 socket_options=None
2024-10-30 05:21:41,515 - DEBUG - connect_tcp.complete return_value=<httpcore._backends.anyio.AnyIOStream object at 0x108cec470>
2024-10-30 05:21:41,515 - DEBUG - start_tls.started ssl_context=<ssl.SSLContext object at 0x108f3e7d0> server_hostname='api.telegram.org' timeout=5.0
2024-10-30 05:21:41,649 - DEBUG - start_tls.complete return_value=<httpcore._backends.anyio.AnyIOStream object at 0x108cecb90>
2024-10-30 05:21:41,650 - DEBUG - send_request_headers.started request=<Request [b'POST']>
2024-10-30 05:21:41,651 - DEBUG - send_request_headers.complete
2024-10-30 05:21:41,651 - DEBUG - send_request_body.started request=<Request [b'POST']>
2024-10-30 05:21:41,651 - DEBUG - send_request_body.complete
2024-10-30 05:21:41,651 - DEBUG - receive_response_headers.started request=<Request [b'POST']>
2024-10-30 05:21:41,779 - DEBUG - receive_response_headers.complete return_value=(b'HTTP/1.1', 200, b'OK', [(b'Server', b'nginx/1.18.0'), (b'Date', b'Wed, 30 Oct 2024 10:21:41 GMT'), (b'Content-Type', b'application/json'), (b'Content-Length', b'254'), (b'Connection', b'keep-alive'), (b'Strict-Transport-Security', b'max-age=31536000; includeSubDomains; preload'), (b'Access-Control-Allow-Origin', b'*'), (b'Access-Control-Allow-Methods', b'GET, POST, OPTIONS'), (b'Access-Control-Expose-Headers', b'Content-Length,Content-Type,Date,Server,Connection')])
2024-10-30 05:21:41,779 - INFO - HTTP Request: POST https://api.telegram.org/bot7867694458:AAEFLZjWPyd1p640mHENnBt479WRYfSavWg/getMe "HTTP/1.1 200 OK"
2024-10-30 05:21:41,780 - DEBUG - receive_response_body.started request=<Request [b'POST']>
2024-10-30 05:21:41,780 - DEBUG - receive_response_body.complete
2024-10-30 05:21:41,780 - DEBUG - response_closed.started
2024-10-30 05:21:41,780 - DEBUG - response_closed.complete
2024-10-30 05:21:41,781 - DEBUG - User(api_kwargs={'can_connect_to_business': False, 'has_main_web_app': False}, can_join_groups=True, can_read_all_group_messages=False, first_name='RedditBot', id=7867694458, is_bot=True, supports_inline_queries=False, username='RedditImage_bot')
2024-10-30 05:21:41,781 - DEBUG - Exiting: get_me
2024-10-30 05:21:41,781 - DEBUG - This Bot is already initialized.
2024-10-30 05:21:41,782 - DEBUG - Entering: send_video
2024-10-30 05:21:41,813 - DEBUG - send_request_headers.started request=<Request [b'POST']>
2024-10-30 05:21:41,813 - DEBUG - send_request_headers.complete
2024-10-30 05:21:41,813 - DEBUG - send_request_body.started request=<Request [b'POST']>
2024-10-30 05:21:46,001 - DEBUG - send_request_body.complete
2024-10-30 05:21:46,001 - DEBUG - receive_response_headers.started request=<Request [b'POST']>
2024-10-30 05:21:46,002 - DEBUG - receive_response_headers.complete return_value=(b'HTTP/1.1', 413, b'Request Entity Too Large', [(b'Server', b'nginx/1.18.0'), (b'Date', b'Wed, 30 Oct 2024 10:21:41 GMT'), (b'Content-Type', b'application/json'), (b'Content-Length', b'70'), (b'Connection', b'close'), (b'Strict-Transport-Security', b'max-age=31536000; includeSubDomains; preload'), (b'Access-Control-Allow-Origin', b'*'), (b'Access-Control-Expose-Headers', b'Content-Length,Content-Type,Date,Server,Connection')])
2024-10-30 05:21:46,002 - INFO - HTTP Request: POST https://api.telegram.org/bot7867694458:AAEFLZjWPyd1p640mHENnBt479WRYfSavWg/sendVideo "HTTP/1.1 413 Request Entity Too Large"
2024-10-30 05:21:46,002 - DEBUG - receive_response_body.started request=<Request [b'POST']>
2024-10-30 05:21:46,002 - DEBUG - receive_response_body.complete
2024-10-30 05:21:46,002 - DEBUG - response_closed.started
2024-10-30 05:21:46,002 - DEBUG - response_closed.complete
2024-10-30 05:21:46,003 - DEBUG - This Bot is already shut down. Returning.
2024-10-30 05:21:46,003 - DEBUG - Shut down of Updater complete
2024-10-30 05:21:46,003 - ERROR - Failed to send video to Telegram: Request Entity Too Large (413)
2024-10-30 05:21:46,003 - ERROR - Error sending video post 1ge9gol: Request Entity Too Large (413)
2024-10-30 05:21:46,003 - INFO - Checking post: 1ge98kx - Score: 253 - URL: https://www.redgifs.com/watch/frontspecificspittlebug
2024-10-30 05:21:46,004 - INFO - Post 1ge98kx is a duplicate, skipping
2024-10-30 05:21:46,004 - INFO - Checking post: 1geqscs - Score: 242 - URL: https://www.redgifs.com/watch/previousweequeensnake
2024-10-30 05:21:46,004 - INFO - Request URL: 'https://cosmossnoogram-centralus.documents.azure.com:443/dbs/ToDoList/colls/sent_posts/docs/'
Request method: 'POST'
Request headers:
    'Cache-Control': 'no-cache'
    'x-ms-version': 'REDACTED'
    'x-ms-documentdb-query-iscontinuationexpected': 'REDACTED'
    'x-ms-consistency-level': 'REDACTED'
    'x-ms-documentdb-isquery': 'REDACTED'
    'Content-Type': 'application/query+json'
    'x-ms-session-token': 'REDACTED'
    'x-ms-documentdb-query-enablecrosspartition': 'REDACTED'
    'x-ms-date': 'REDACTED'
    'authorization': 'REDACTED'
    'Accept': 'application/json'
    'x-ms-cosmos-correlated-activityid': 'REDACTED'
    'Content-Length': '107'
    'User-Agent': 'azsdk-python-cosmos/4.5.1 Python/3.12.4 (macOS-15.0.1-arm64-arm-64bit)'
A body is sent with the request
2024-10-30 05:21:46,127 - DEBUG - https://cosmossnoogram-centralus.documents.azure.com:443 "POST /dbs/ToDoList/colls/sent_posts/docs/ HTTP/11" 200 None
2024-10-30 05:21:46,128 - INFO - Response status: 200
Response headers:
    'Cache-Control': 'no-store, no-cache'
    'Pragma': 'no-cache'
    'Transfer-Encoding': 'chunked'
    'Content-Type': 'application/json'
    'Server': 'Microsoft-HTTPAPI/2.0'
    'Strict-Transport-Security': 'REDACTED'
    'x-ms-activity-id': 'REDACTED'
    'x-ms-last-state-change-utc': 'REDACTED'
    'x-ms-resource-quota': 'REDACTED'
    'x-ms-resource-usage': 'REDACTED'
    'x-ms-schemaversion': 'REDACTED'
    'lsn': 'REDACTED'
    'x-ms-item-count': 'REDACTED'
    'x-ms-request-charge': 'REDACTED'
    'x-ms-alt-content-path': 'REDACTED'
    'x-ms-content-path': 'REDACTED'
    'x-ms-documentdb-partitionkeyrangeid': 'REDACTED'
    'x-ms-xp-role': 'REDACTED'
    'x-ms-cosmos-query-execution-info': 'REDACTED'
    'x-ms-global-Committed-lsn': 'REDACTED'
    'x-ms-number-of-read-regions': 'REDACTED'
    'x-ms-transport-request-id': 'REDACTED'
    'x-ms-cosmos-llsn': 'REDACTED'
    'x-ms-session-token': 'REDACTED'
    'x-ms-request-duration-ms': 'REDACTED'
    'x-ms-serviceversion': 'REDACTED'
    'x-ms-cosmos-is-partition-key-delete-pending': 'REDACTED'
    'x-ms-cosmos-physical-partition-id': 'REDACTED'
    'x-ms-cosmos-internal-partition-id': 'REDACTED'
    'x-ms-gatewayversion': 'REDACTED'
    'Date': 'Wed, 30 Oct 2024 10:21:45 GMT'
2024-10-30 05:21:46,129 - INFO - Found video post: 1geqscs
2024-10-30 05:21:46,131 - DEBUG - Starting new HTTPS connection (1): api.redgifs.com:443
2024-10-30 05:21:46,223 - DEBUG - https://api.redgifs.com:443 "GET /v2/gifs/previousweequeensnake HTTP/11" 200 None
2024-10-30 05:21:46,229 - DEBUG - Starting new HTTPS connection (1): files.redgifs.com:443
2024-10-30 05:21:46,496 - DEBUG - https://files.redgifs.com:443 "GET /PreviousWeeQueensnake.mp4 HTTP/11" 200 50070206
2024-10-30 05:21:47,489 - INFO - Successfully downloaded media to downloads/videos/1geqscs_20241030_052146_2fd81a4e.mp4
2024-10-30 05:21:47,493 - DEBUG - Using selector: KqueueSelector
2024-10-30 05:21:47,493 - INFO - Attempting to send video to Telegram - Path: downloads/videos/1geqscs_20241030_052146_2fd81a4e.mp4
2024-10-30 05:21:47,493 - DEBUG - load_ssl_context verify=True cert=None trust_env=True http2=False
2024-10-30 05:21:47,494 - DEBUG - load_verify_locations cafile='/Users/joewilson/PythonProjects/Snoogram/venv/lib/python3.12/site-packages/certifi/cacert.pem'
2024-10-30 05:21:47,503 - DEBUG - load_ssl_context verify=True cert=None trust_env=True http2=False
2024-10-30 05:21:47,503 - DEBUG - load_verify_locations cafile='/Users/joewilson/PythonProjects/Snoogram/venv/lib/python3.12/site-packages/certifi/cacert.pem'
2024-10-30 05:21:47,510 - DEBUG - Entering: get_me
2024-10-30 05:21:47,511 - DEBUG - connect_tcp.started host='api.telegram.org' port=443 local_address=None timeout=5.0 socket_options=None
2024-10-30 05:21:47,635 - DEBUG - connect_tcp.complete return_value=<httpcore._backends.anyio.AnyIOStream object at 0x108cee3c0>
2024-10-30 05:21:47,636 - DEBUG - start_tls.started ssl_context=<ssl.SSLContext object at 0x108acb8d0> server_hostname='api.telegram.org' timeout=5.0
2024-10-30 05:21:47,768 - DEBUG - start_tls.complete return_value=<httpcore._backends.anyio.AnyIOStream object at 0x108ced520>
2024-10-30 05:21:47,769 - DEBUG - send_request_headers.started request=<Request [b'POST']>
2024-10-30 05:21:47,770 - DEBUG - send_request_headers.complete
2024-10-30 05:21:47,770 - DEBUG - send_request_body.started request=<Request [b'POST']>
2024-10-30 05:21:47,770 - DEBUG - send_request_body.complete
2024-10-30 05:21:47,770 - DEBUG - receive_response_headers.started request=<Request [b'POST']>
2024-10-30 05:21:47,944 - DEBUG - receive_response_headers.complete return_value=(b'HTTP/1.1', 200, b'OK', [(b'Server', b'nginx/1.18.0'), (b'Date', b'Wed, 30 Oct 2024 10:21:47 GMT'), (b'Content-Type', b'application/json'), (b'Content-Length', b'254'), (b'Connection', b'keep-alive'), (b'Strict-Transport-Security', b'max-age=31536000; includeSubDomains; preload'), (b'Access-Control-Allow-Origin', b'*'), (b'Access-Control-Allow-Methods', b'GET, POST, OPTIONS'), (b'Access-Control-Expose-Headers', b'Content-Length,Content-Type,Date,Server,Connection')])
2024-10-30 05:21:47,945 - INFO - HTTP Request: POST https://api.telegram.org/bot7867694458:AAEFLZjWPyd1p640mHENnBt479WRYfSavWg/getMe "HTTP/1.1 200 OK"
2024-10-30 05:21:47,946 - DEBUG - receive_response_body.started request=<Request [b'POST']>
2024-10-30 05:21:47,946 - DEBUG - receive_response_body.complete
2024-10-30 05:21:47,947 - DEBUG - response_closed.started
2024-10-30 05:21:47,947 - DEBUG - response_closed.complete
2024-10-30 05:21:47,947 - DEBUG - User(api_kwargs={'can_connect_to_business': False, 'has_main_web_app': False}, can_join_groups=True, can_read_all_group_messages=False, first_name='RedditBot', id=7867694458, is_bot=True, supports_inline_queries=False, username='RedditImage_bot')
2024-10-30 05:21:47,947 - DEBUG - Exiting: get_me
2024-10-30 05:21:47,947 - DEBUG - This Bot is already initialized.
2024-10-30 05:21:47,948 - DEBUG - Entering: send_video
2024-10-30 05:21:47,969 - DEBUG - send_request_headers.started request=<Request [b'POST']>
2024-10-30 05:21:47,970 - DEBUG - send_request_headers.complete
2024-10-30 05:21:47,970 - DEBUG - send_request_body.started request=<Request [b'POST']>
2024-10-30 05:21:51,389 - DEBUG - send_request_body.complete
2024-10-30 05:21:51,389 - DEBUG - receive_response_headers.started request=<Request [b'POST']>
2024-10-30 05:21:54,020 - DEBUG - receive_response_headers.complete return_value=(b'HTTP/1.1', 200, b'OK', [(b'Server', b'nginx/1.18.0'), (b'Date', b'Wed, 30 Oct 2024 10:21:53 GMT'), (b'Content-Type', b'application/json'), (b'Content-Length', b'600'), (b'Connection', b'keep-alive'), (b'Strict-Transport-Security', b'max-age=31536000; includeSubDomains; preload'), (b'Access-Control-Allow-Origin', b'*'), (b'Access-Control-Allow-Methods', b'GET, POST, OPTIONS'), (b'Access-Control-Expose-Headers', b'Content-Length,Content-Type,Date,Server,Connection')])
2024-10-30 05:21:54,021 - INFO - HTTP Request: POST https://api.telegram.org/bot7867694458:AAEFLZjWPyd1p640mHENnBt479WRYfSavWg/sendVideo "HTTP/1.1 200 OK"
2024-10-30 05:21:54,021 - DEBUG - receive_response_body.started request=<Request [b'POST']>
2024-10-30 05:21:54,021 - DEBUG - receive_response_body.complete
2024-10-30 05:21:54,021 - DEBUG - response_closed.started
2024-10-30 05:21:54,021 - DEBUG - response_closed.complete
2024-10-30 05:21:54,022 - DEBUG - Message(caption='From r/girlsfinishingthejob: I love when he covers my titties with his hot cum ðŸ¥°\nUpvotes: 242', channel_chat_created=False, chat=Chat(id=-1002490380283, title='Reddit_Pic_Stream', type=<ChatType.CHANNEL>), date=datetime.datetime(2024, 10, 30, 10, 21, 53, tzinfo=<UTC>), delete_chat_photo=False, group_chat_created=False, message_id=233, sender_chat=Chat(id=-1002490380283, title='Reddit_Pic_Stream', type=<ChatType.CHANNEL>), supergroup_chat_created=False, video=Video(duration=0, file_id='BAACAgEAAyEGAASUcC_7AAPpZyIIwSb2MEqwD56uhkeMafLjCwwAArEEAAIZEBFFOkJL2DrJitg2BA', file_name='1geqscs_20241030_052146_2fd81a4e.mp4', file_size=50070206, file_unique_id='AgADsQQAAhkQEUU', height=320, mime_type='video/mp4', width=320))
2024-10-30 05:21:54,023 - DEBUG - Exiting: send_video
2024-10-30 05:21:54,023 - DEBUG - close.started
2024-10-30 05:21:54,023 - DEBUG - close.complete
2024-10-30 05:21:54,023 - DEBUG - This Bot is already shut down. Returning.
2024-10-30 05:21:54,023 - DEBUG - Shut down of Updater complete
2024-10-30 05:21:54,023 - INFO - Successfully sent video to Telegram
2024-10-30 05:21:54,026 - ERROR - Error processing subreddit girlsfinishingthejob: (sqlite3.OperationalError) attempt to write a readonly database
[SQL: INSERT INTO sent_post (post_id, subreddit_name, sent_at) VALUES (?, ?, ?)]
[parameters: ('1geqscs', 'girlsfinishingthejob', '2024-10-30 10:21:54.025984')]
(Background on this error at: https://sqlalche.me/e/20/e3q8)
2024-10-30 05:21:54,028 - ERROR - Job "send_to_telegram (trigger: interval[0:01:00], next run at: 2024-10-30 05:22:16 CDT)" raised an exception
Traceback (most recent call last):
  File "/Users/joewilson/PythonProjects/Snoogram/venv/lib/python3.12/site-packages/sqlalchemy/engine/base.py", line 1967, in _exec_single_context
    self.dialect.do_execute(
  File "/Users/joewilson/PythonProjects/Snoogram/venv/lib/python3.12/site-packages/sqlalchemy/engine/default.py", line 941, in do_execute
    cursor.execute(statement, parameters)
sqlite3.OperationalError: attempt to write a readonly database

The above exception was the direct cause of the following exception:

Traceback (most recent call last):
  File "/Users/joewilson/PythonProjects/Snoogram/venv/lib/python3.12/site-packages/apscheduler/executors/base.py", line 125, in run_job
    retval = job.func(*job.args, **job.kwargs)
             ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/Users/joewilson/PythonProjects/Snoogram/backend/app.py", line 265, in send_to_telegram
    # Update last_check in Cosmos DB
                ^^^^^^^^^^^^^^^^^^^^^
  File "/Users/joewilson/PythonProjects/Snoogram/backend/db_operations.py", line 100, in add_sent_post
  File "/Users/joewilson/PythonProjects/Snoogram/venv/lib/python3.12/site-packages/sqlalchemy/orm/scoping.py", line 597, in commit
    return self._proxied.commit()
           ^^^^^^^^^^^^^^^^^^^^^^
  File "/Users/joewilson/PythonProjects/Snoogram/venv/lib/python3.12/site-packages/sqlalchemy/orm/session.py", line 2028, in commit
    trans.commit(_to_root=True)
  File "<string>", line 2, in commit
  File "/Users/joewilson/PythonProjects/Snoogram/venv/lib/python3.12/site-packages/sqlalchemy/orm/state_changes.py", line 139, in _go
    ret_value = fn(self, *arg, **kw)
                ^^^^^^^^^^^^^^^^^^^^
  File "/Users/joewilson/PythonProjects/Snoogram/venv/lib/python3.12/site-packages/sqlalchemy/orm/session.py", line 1313, in commit
    self._prepare_impl()
  File "<string>", line 2, in _prepare_impl
  File "/Users/joewilson/PythonProjects/Snoogram/venv/lib/python3.12/site-packages/sqlalchemy/orm/state_changes.py", line 139, in _go
    ret_value = fn(self, *arg, **kw)
                ^^^^^^^^^^^^^^^^^^^^
  File "/Users/joewilson/PythonProjects/Snoogram/venv/lib/python3.12/site-packages/sqlalchemy/orm/session.py", line 1288, in _prepare_impl
    self.session.flush()
  File "/Users/joewilson/PythonProjects/Snoogram/venv/lib/python3.12/site-packages/sqlalchemy/orm/session.py", line 4352, in flush
    self._flush(objects)
  File "/Users/joewilson/PythonProjects/Snoogram/venv/lib/python3.12/site-packages/sqlalchemy/orm/session.py", line 4487, in _flush
    with util.safe_reraise():
  File "/Users/joewilson/PythonProjects/Snoogram/venv/lib/python3.12/site-packages/sqlalchemy/util/langhelpers.py", line 146, in __exit__
    raise exc_value.with_traceback(exc_tb)
  File "/Users/joewilson/PythonProjects/Snoogram/venv/lib/python3.12/site-packages/sqlalchemy/orm/session.py", line 4448, in _flush
    flush_context.execute()
  File "/Users/joewilson/PythonProjects/Snoogram/venv/lib/python3.12/site-packages/sqlalchemy/orm/unitofwork.py", line 466, in execute
    rec.execute(self)
  File "/Users/joewilson/PythonProjects/Snoogram/venv/lib/python3.12/site-packages/sqlalchemy/orm/unitofwork.py", line 642, in execute
    util.preloaded.orm_persistence.save_obj(
  File "/Users/joewilson/PythonProjects/Snoogram/venv/lib/python3.12/site-packages/sqlalchemy/orm/persistence.py", line 93, in save_obj
    _emit_insert_statements(
  File "/Users/joewilson/PythonProjects/Snoogram/venv/lib/python3.12/site-packages/sqlalchemy/orm/persistence.py", line 1233, in _emit_insert_statements
    result = connection.execute(
             ^^^^^^^^^^^^^^^^^^^
  File "/Users/joewilson/PythonProjects/Snoogram/venv/lib/python3.12/site-packages/sqlalchemy/engine/base.py", line 1418, in execute
    return meth(
           ^^^^^
  File "/Users/joewilson/PythonProjects/Snoogram/venv/lib/python3.12/site-packages/sqlalchemy/sql/elements.py", line 515, in _execute_on_connection
    return connection._execute_clauseelement(
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/Users/joewilson/PythonProjects/Snoogram/venv/lib/python3.12/site-packages/sqlalchemy/engine/base.py", line 1640, in _execute_clauseelement
    ret = self._execute_context(
          ^^^^^^^^^^^^^^^^^^^^^^
  File "/Users/joewilson/PythonProjects/Snoogram/venv/lib/python3.12/site-packages/sqlalchemy/engine/base.py", line 1846, in _execute_context
    return self._exec_single_context(
           ^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/Users/joewilson/PythonProjects/Snoogram/venv/lib/python3.12/site-packages/sqlalchemy/engine/base.py", line 1986, in _exec_single_context
    self._handle_dbapi_exception(
  File "/Users/joewilson/PythonProjects/Snoogram/venv/lib/python3.12/site-packages/sqlalchemy/engine/base.py", line 2355, in _handle_dbapi_exception
    raise sqlalchemy_exception.with_traceback(exc_info[2]) from e
  File "/Users/joewilson/PythonProjects/Snoogram/venv/lib/python3.12/site-packages/sqlalchemy/engine/base.py", line 1967, in _exec_single_context
    self.dialect.do_execute(
  File "/Users/joewilson/PythonProjects/Snoogram/venv/lib/python3.12/site-packages/sqlalchemy/engine/default.py", line 941, in do_execute
    cursor.execute(statement, parameters)
sqlalchemy.exc.OperationalError: (sqlite3.OperationalError) attempt to write a readonly database
[SQL: INSERT INTO sent_post (post_id, subreddit_name, sent_at) VALUES (?, ?, ?)]
[parameters: ('1geqscs', 'girlsfinishingthejob', '2024-10-30 10:21:54.025984')]
(Background on this error at: https://sqlalche.me/e/20/e3q8)
2024-10-30 05:22:16,976 - DEBUG - Looking for jobs to run
2024-10-30 05:22:16,979 - DEBUG - Next wakeup is due at 2024-10-30 05:23:16.969826-05:00 (in 59.990494 seconds)
2024-10-30 05:22:16,979 - INFO - Running job "send_to_telegram (trigger: interval[0:01:00], next run at: 2024-10-30 05:23:16 CDT)" (scheduled at 2024-10-30 05:22:16.969826-05:00)
2024-10-30 05:22:16,979 - INFO - Running job "send_to_telegram (trigger: interval[0:01:00], next run at: 2024-10-30 05:23:16 CDT)" (scheduled at 2024-10-30 05:22:16.970029-05:00)
2024-10-30 05:22:16,980 - INFO - Processing subreddit: girlsfinishingthejob
2024-10-30 05:22:16,980 - INFO - Processing subreddit: wifebutt
2024-10-30 05:22:16,981 - INFO - Fetching top posts of the day
2024-10-30 05:22:16,981 - INFO - Fetching top posts of the month
2024-10-30 05:22:16,982 - DEBUG - Fetching: GET https://oauth.reddit.com/r/girlsfinishingthejob/top at 1730283736.982594
2024-10-30 05:22:16,982 - DEBUG - Fetching: GET https://oauth.reddit.com/r/wifebutt/top at 1730283736.9828532
2024-10-30 05:22:16,983 - DEBUG - Data: None
2024-10-30 05:22:16,983 - DEBUG - Data: None
2024-10-30 05:22:16,983 - DEBUG - Params: {'limit': 50, 'raw_json': 1, 't': 'day'}
2024-10-30 05:22:16,983 - DEBUG - Params: {'limit': 50, 'raw_json': 1, 't': 'month'}
2024-10-30 05:22:17,269 - DEBUG - https://oauth.reddit.com:443 "GET /r/girlsfinishingthejob/top?t=day&limit=50&raw_json=1 HTTP/11" 200 24088
2024-10-30 05:22:17,302 - DEBUG - Response: 200 (24088 bytes) (rst-0:rem-148.0:used-2 ratelimit) at 1730283737.302253
2024-10-30 05:22:17,381 - INFO - Checking post: 1gelyz1 - Score: 7095 - URL: https://www.redgifs.com/watch/uttersvelteamphibian
2024-10-30 05:22:17,385 - INFO - Request URL: 'https://cosmossnoogram-centralus.documents.azure.com:443/dbs/ToDoList/colls/sent_posts/docs/'
Request method: 'POST'
Request headers:
    'Cache-Control': 'no-cache'
    'x-ms-version': 'REDACTED'
    'x-ms-documentdb-query-iscontinuationexpected': 'REDACTED'
    'x-ms-consistency-level': 'REDACTED'
    'x-ms-documentdb-isquery': 'REDACTED'
    'Content-Type': 'application/query+json'
    'x-ms-session-token': 'REDACTED'
    'x-ms-documentdb-query-enablecrosspartition': 'REDACTED'
    'x-ms-date': 'REDACTED'
    'authorization': 'REDACTED'
    'Accept': 'application/json'
    'x-ms-cosmos-correlated-activityid': 'REDACTED'
    'Content-Length': '107'
    'User-Agent': 'azsdk-python-cosmos/4.5.1 Python/3.12.4 (macOS-15.0.1-arm64-arm-64bit)'
A body is sent with the request
2024-10-30 05:22:17,418 - DEBUG - https://cosmossnoogram-centralus.documents.azure.com:443 "POST /dbs/ToDoList/colls/sent_posts/docs/ HTTP/11" 200 None
2024-10-30 05:22:17,418 - INFO - Response status: 200
Response headers:
    'Cache-Control': 'no-store, no-cache'
    'Pragma': 'no-cache'
    'Transfer-Encoding': 'chunked'
    'Content-Type': 'application/json'
    'Server': 'Microsoft-HTTPAPI/2.0'
    'Strict-Transport-Security': 'REDACTED'
    'x-ms-activity-id': 'REDACTED'
    'x-ms-last-state-change-utc': 'REDACTED'
    'x-ms-resource-quota': 'REDACTED'
    'x-ms-resource-usage': 'REDACTED'
    'x-ms-schemaversion': 'REDACTED'
    'lsn': 'REDACTED'
    'x-ms-item-count': 'REDACTED'
    'x-ms-request-charge': 'REDACTED'
    'x-ms-alt-content-path': 'REDACTED'
    'x-ms-content-path': 'REDACTED'
    'x-ms-documentdb-partitionkeyrangeid': 'REDACTED'
    'x-ms-xp-role': 'REDACTED'
    'x-ms-cosmos-query-execution-info': 'REDACTED'
    'x-ms-global-Committed-lsn': 'REDACTED'
    'x-ms-number-of-read-regions': 'REDACTED'
    'x-ms-transport-request-id': 'REDACTED'
    'x-ms-cosmos-llsn': 'REDACTED'
    'x-ms-session-token': 'REDACTED'
    'x-ms-request-duration-ms': 'REDACTED'
    'x-ms-serviceversion': 'REDACTED'
    'x-ms-cosmos-is-partition-key-delete-pending': 'REDACTED'
    'x-ms-cosmos-physical-partition-id': 'REDACTED'
    'x-ms-cosmos-internal-partition-id': 'REDACTED'
    'x-ms-gatewayversion': 'REDACTED'
    'Date': 'Wed, 30 Oct 2024 10:22:16 GMT'
2024-10-30 05:22:17,418 - INFO - Found video post: 1gelyz1
2024-10-30 05:22:17,419 - DEBUG - Starting new HTTPS connection (1): api.redgifs.com:443
2024-10-30 05:22:17,520 - DEBUG - https://api.redgifs.com:443 "GET /v2/gifs/uttersvelteamphibian HTTP/11" 200 None
2024-10-30 05:22:17,522 - DEBUG - Starting new HTTPS connection (1): files.redgifs.com:443
2024-10-30 05:22:17,595 - DEBUG - https://files.redgifs.com:443 "GET /UtterSvelteAmphibian.mp4 HTTP/11" 200 42980012
2024-10-30 05:22:17,877 - DEBUG - https://oauth.reddit.com:443 "GET /r/wifebutt/top?t=month&limit=50&raw_json=1 HTTP/11" 200 49291
2024-10-30 05:22:17,902 - DEBUG - Response: 200 (49291 bytes) (rst-0:rem-149.0:used-1 ratelimit) at 1730283737.902743
2024-10-30 05:22:17,908 - INFO - Checking post: 1g9w053 - Score: 5357 - URL: https://www.reddit.com/gallery/1g9w053
2024-10-30 05:22:17,909 - INFO - Request URL: 'https://cosmossnoogram-centralus.documents.azure.com:443/dbs/ToDoList/colls/sent_posts/docs/'
Request method: 'POST'
Request headers:
    'Cache-Control': 'no-cache'
    'x-ms-version': 'REDACTED'
    'x-ms-documentdb-query-iscontinuationexpected': 'REDACTED'
    'x-ms-consistency-level': 'REDACTED'
    'x-ms-documentdb-isquery': 'REDACTED'
    'Content-Type': 'application/query+json'
    'x-ms-session-token': 'REDACTED'
    'x-ms-documentdb-query-enablecrosspartition': 'REDACTED'
    'x-ms-date': 'REDACTED'
    'authorization': 'REDACTED'
    'Accept': 'application/json'
    'x-ms-cosmos-correlated-activityid': 'REDACTED'
    'Content-Length': '107'
    'User-Agent': 'azsdk-python-cosmos/4.5.1 Python/3.12.4 (macOS-15.0.1-arm64-arm-64bit)'
A body is sent with the request
2024-10-30 05:22:17,944 - DEBUG - https://cosmossnoogram-centralus.documents.azure.com:443 "POST /dbs/ToDoList/colls/sent_posts/docs/ HTTP/11" 200 None
2024-10-30 05:22:17,945 - INFO - Response status: 200
Response headers:
    'Cache-Control': 'no-store, no-cache'
    'Pragma': 'no-cache'
    'Transfer-Encoding': 'chunked'
    'Content-Type': 'application/json'
    'Server': 'Microsoft-HTTPAPI/2.0'
    'Strict-Transport-Security': 'REDACTED'
    'x-ms-activity-id': 'REDACTED'
    'x-ms-last-state-change-utc': 'REDACTED'
    'x-ms-resource-quota': 'REDACTED'
    'x-ms-resource-usage': 'REDACTED'
    'x-ms-schemaversion': 'REDACTED'
    'lsn': 'REDACTED'
    'x-ms-item-count': 'REDACTED'
    'x-ms-request-charge': 'REDACTED'
    'x-ms-alt-content-path': 'REDACTED'
    'x-ms-content-path': 'REDACTED'
    'x-ms-quorum-acked-lsn': 'REDACTED'
    'x-ms-current-write-quorum': 'REDACTED'
    'x-ms-current-replica-set-size': 'REDACTED'
    'x-ms-documentdb-partitionkeyrangeid': 'REDACTED'
    'x-ms-xp-role': 'REDACTED'
    'x-ms-cosmos-query-execution-info': 'REDACTED'
    'x-ms-global-Committed-lsn': 'REDACTED'
    'x-ms-number-of-read-regions': 'REDACTED'
    'x-ms-transport-request-id': 'REDACTED'
    'x-ms-cosmos-llsn': 'REDACTED'
    'x-ms-cosmos-quorum-acked-llsn': 'REDACTED'
    'x-ms-session-token': 'REDACTED'
    'x-ms-request-duration-ms': 'REDACTED'
    'x-ms-serviceversion': 'REDACTED'
    'x-ms-cosmos-is-partition-key-delete-pending': 'REDACTED'
    'x-ms-cosmos-physical-partition-id': 'REDACTED'
    'x-ms-cosmos-internal-partition-id': 'REDACTED'
    'x-ms-gatewayversion': 'REDACTED'
    'Date': 'Wed, 30 Oct 2024 10:22:17 GMT'
2024-10-30 05:22:17,945 - INFO - Post 1g9w053 is not an image or video post, skipping
2024-10-30 05:22:17,945 - INFO - Checking post: 1fv4cfc - Score: 4575 - URL: https://www.reddit.com/gallery/1fv4cfc
2024-10-30 05:22:17,945 - INFO - Request URL: 'https://cosmossnoogram-centralus.documents.azure.com:443/dbs/ToDoList/colls/sent_posts/docs/'
Request method: 'POST'
Request headers:
    'Cache-Control': 'no-cache'
    'x-ms-version': 'REDACTED'
    'x-ms-documentdb-query-iscontinuationexpected': 'REDACTED'
    'x-ms-consistency-level': 'REDACTED'
    'x-ms-documentdb-isquery': 'REDACTED'
    'Content-Type': 'application/query+json'
    'x-ms-session-token': 'REDACTED'
    'x-ms-documentdb-query-enablecrosspartition': 'REDACTED'
    'x-ms-date': 'REDACTED'
    'authorization': 'REDACTED'
    'Accept': 'application/json'
    'x-ms-cosmos-correlated-activityid': 'REDACTED'
    'Content-Length': '107'
    'User-Agent': 'azsdk-python-cosmos/4.5.1 Python/3.12.4 (macOS-15.0.1-arm64-arm-64bit)'
A body is sent with the request
2024-10-30 05:22:17,981 - DEBUG - https://cosmossnoogram-centralus.documents.azure.com:443 "POST /dbs/ToDoList/colls/sent_posts/docs/ HTTP/11" 200 None
2024-10-30 05:22:17,982 - INFO - Response status: 200
Response headers:
    'Cache-Control': 'no-store, no-cache'
    'Pragma': 'no-cache'
    'Transfer-Encoding': 'chunked'
    'Content-Type': 'application/json'
    'Server': 'Microsoft-HTTPAPI/2.0'
    'Strict-Transport-Security': 'REDACTED'
    'x-ms-activity-id': 'REDACTED'
    'x-ms-last-state-change-utc': 'REDACTED'
    'x-ms-resource-quota': 'REDACTED'
    'x-ms-resource-usage': 'REDACTED'
    'x-ms-schemaversion': 'REDACTED'
    'lsn': 'REDACTED'
    'x-ms-item-count': 'REDACTED'
    'x-ms-request-charge': 'REDACTED'
    'x-ms-alt-content-path': 'REDACTED'
    'x-ms-content-path': 'REDACTED'
    'x-ms-documentdb-partitionkeyrangeid': 'REDACTED'
    'x-ms-xp-role': 'REDACTED'
    'x-ms-cosmos-query-execution-info': 'REDACTED'
    'x-ms-global-Committed-lsn': 'REDACTED'
    'x-ms-number-of-read-regions': 'REDACTED'
    'x-ms-transport-request-id': 'REDACTED'
    'x-ms-cosmos-llsn': 'REDACTED'
    'x-ms-session-token': 'REDACTED'
    'x-ms-request-duration-ms': 'REDACTED'
    'x-ms-serviceversion': 'REDACTED'
    'x-ms-cosmos-is-partition-key-delete-pending': 'REDACTED'
    'x-ms-cosmos-physical-partition-id': 'REDACTED'
    'x-ms-cosmos-internal-partition-id': 'REDACTED'
    'x-ms-gatewayversion': 'REDACTED'
    'Date': 'Wed, 30 Oct 2024 10:22:17 GMT'
2024-10-30 05:22:17,982 - INFO - Post 1fv4cfc is not an image or video post, skipping
2024-10-30 05:22:17,982 - INFO - Checking post: 1ganrp0 - Score: 4201 - URL: https://i.redd.it/ezatz8645lwd1.jpeg
2024-10-30 05:22:17,983 - INFO - Request URL: 'https://cosmossnoogram-centralus.documents.azure.com:443/dbs/ToDoList/colls/sent_posts/docs/'
Request method: 'POST'
Request headers:
    'Cache-Control': 'no-cache'
    'x-ms-version': 'REDACTED'
    'x-ms-documentdb-query-iscontinuationexpected': 'REDACTED'
    'x-ms-consistency-level': 'REDACTED'
    'x-ms-documentdb-isquery': 'REDACTED'
    'Content-Type': 'application/query+json'
    'x-ms-session-token': 'REDACTED'
    'x-ms-documentdb-query-enablecrosspartition': 'REDACTED'
    'x-ms-date': 'REDACTED'
    'authorization': 'REDACTED'
    'Accept': 'application/json'
    'x-ms-cosmos-correlated-activityid': 'REDACTED'
    'Content-Length': '107'
    'User-Agent': 'azsdk-python-cosmos/4.5.1 Python/3.12.4 (macOS-15.0.1-arm64-arm-64bit)'
A body is sent with the request
2024-10-30 05:22:18,034 - DEBUG - https://cosmossnoogram-centralus.documents.azure.com:443 "POST /dbs/ToDoList/colls/sent_posts/docs/ HTTP/11" 200 None
2024-10-30 05:22:18,036 - INFO - Response status: 200
Response headers:
    'Cache-Control': 'no-store, no-cache'
    'Pragma': 'no-cache'
    'Transfer-Encoding': 'chunked'
    'Content-Type': 'application/json'
    'Server': 'Microsoft-HTTPAPI/2.0'
    'Strict-Transport-Security': 'REDACTED'
    'x-ms-activity-id': 'REDACTED'
    'x-ms-last-state-change-utc': 'REDACTED'
    'x-ms-resource-quota': 'REDACTED'
    'x-ms-resource-usage': 'REDACTED'
    'x-ms-schemaversion': 'REDACTED'
    'lsn': 'REDACTED'
    'x-ms-item-count': 'REDACTED'
    'x-ms-request-charge': 'REDACTED'
    'x-ms-alt-content-path': 'REDACTED'
    'x-ms-content-path': 'REDACTED'
    'x-ms-quorum-acked-lsn': 'REDACTED'
    'x-ms-current-write-quorum': 'REDACTED'
    'x-ms-current-replica-set-size': 'REDACTED'
    'x-ms-documentdb-partitionkeyrangeid': 'REDACTED'
    'x-ms-xp-role': 'REDACTED'
    'x-ms-cosmos-query-execution-info': 'REDACTED'
    'x-ms-global-Committed-lsn': 'REDACTED'
    'x-ms-number-of-read-regions': 'REDACTED'
    'x-ms-transport-request-id': 'REDACTED'
    'x-ms-cosmos-llsn': 'REDACTED'
    'x-ms-cosmos-quorum-acked-llsn': 'REDACTED'
    'x-ms-session-token': 'REDACTED'
    'x-ms-request-duration-ms': 'REDACTED'
    'x-ms-serviceversion': 'REDACTED'
    'x-ms-cosmos-is-partition-key-delete-pending': 'REDACTED'
    'x-ms-cosmos-physical-partition-id': 'REDACTED'
    'x-ms-cosmos-internal-partition-id': 'REDACTED'
    'x-ms-gatewayversion': 'REDACTED'
    'Date': 'Wed, 30 Oct 2024 10:22:17 GMT'
2024-10-30 05:22:18,036 - INFO - Post 1ganrp0 is a duplicate, skipping
2024-10-30 05:22:18,036 - INFO - Checking post: 1gdrcjt - Score: 4071 - URL: https://www.redgifs.com/watch/unrealisticdefinitebarebirdbat
2024-10-30 05:22:18,038 - INFO - Post 1gdrcjt is a duplicate, skipping
2024-10-30 05:22:18,038 - INFO - Checking post: 1g30sx1 - Score: 3964 - URL: https://www.redgifs.com/watch/hardwarlikesunbittern
2024-10-30 05:22:18,039 - INFO - Post 1g30sx1 is a duplicate, skipping
2024-10-30 05:22:18,039 - INFO - Checking post: 1fs7839 - Score: 3857 - URL: https://www.reddit.com/gallery/1fs7839
2024-10-30 05:22:18,040 - INFO - Request URL: 'https://cosmossnoogram-centralus.documents.azure.com:443/dbs/ToDoList/colls/sent_posts/docs/'
Request method: 'POST'
Request headers:
    'Cache-Control': 'no-cache'
    'x-ms-version': 'REDACTED'
    'x-ms-documentdb-query-iscontinuationexpected': 'REDACTED'
    'x-ms-consistency-level': 'REDACTED'
    'x-ms-documentdb-isquery': 'REDACTED'
    'Content-Type': 'application/query+json'
    'x-ms-session-token': 'REDACTED'
    'x-ms-documentdb-query-enablecrosspartition': 'REDACTED'
    'x-ms-date': 'REDACTED'
    'authorization': 'REDACTED'
    'Accept': 'application/json'
    'x-ms-cosmos-correlated-activityid': 'REDACTED'
    'Content-Length': '107'
    'User-Agent': 'azsdk-python-cosmos/4.5.1 Python/3.12.4 (macOS-15.0.1-arm64-arm-64bit)'
A body is sent with the request
2024-10-30 05:22:18,087 - DEBUG - https://cosmossnoogram-centralus.documents.azure.com:443 "POST /dbs/ToDoList/colls/sent_posts/docs/ HTTP/11" 200 None
2024-10-30 05:22:18,087 - INFO - Response status: 200
Response headers:
    'Cache-Control': 'no-store, no-cache'
    'Pragma': 'no-cache'
    'Transfer-Encoding': 'chunked'
    'Content-Type': 'application/json'
    'Server': 'Microsoft-HTTPAPI/2.0'
    'Strict-Transport-Security': 'REDACTED'
    'x-ms-activity-id': 'REDACTED'
    'x-ms-last-state-change-utc': 'REDACTED'
    'x-ms-resource-quota': 'REDACTED'
    'x-ms-resource-usage': 'REDACTED'
    'x-ms-schemaversion': 'REDACTED'
    'lsn': 'REDACTED'
    'x-ms-item-count': 'REDACTED'
    'x-ms-request-charge': 'REDACTED'
    'x-ms-alt-content-path': 'REDACTED'
    'x-ms-content-path': 'REDACTED'
    'x-ms-documentdb-partitionkeyrangeid': 'REDACTED'
    'x-ms-xp-role': 'REDACTED'
    'x-ms-cosmos-query-execution-info': 'REDACTED'
    'x-ms-global-Committed-lsn': 'REDACTED'
    'x-ms-number-of-read-regions': 'REDACTED'
    'x-ms-transport-request-id': 'REDACTED'
    'x-ms-cosmos-llsn': 'REDACTED'
    'x-ms-session-token': 'REDACTED'
    'x-ms-request-duration-ms': 'REDACTED'
    'x-ms-serviceversion': 'REDACTED'
    'x-ms-cosmos-is-partition-key-delete-pending': 'REDACTED'
    'x-ms-cosmos-physical-partition-id': 'REDACTED'
    'x-ms-cosmos-internal-partition-id': 'REDACTED'
    'x-ms-gatewayversion': 'REDACTED'
    'Date': 'Wed, 30 Oct 2024 10:22:17 GMT'
2024-10-30 05:22:18,087 - INFO - Post 1fs7839 is not an image or video post, skipping
2024-10-30 05:22:18,087 - INFO - Checking post: 1g2rse9 - Score: 3763 - URL: https://i.redd.it/gzxs1aeshjud1.png
2024-10-30 05:22:18,088 - INFO - Post 1g2rse9 is a duplicate, skipping
2024-10-30 05:22:18,088 - INFO - Checking post: 1ge9loz - Score: 3726 - URL: https://www.redgifs.com/watch/deadlygregariouswoodchuck
2024-10-30 05:22:18,088 - INFO - Post 1ge9loz is a duplicate, skipping
2024-10-30 05:22:18,088 - INFO - Checking post: 1g0e966 - Score: 3631 - URL: https://www.reddit.com/gallery/1g0e966
2024-10-30 05:22:18,089 - INFO - Request URL: 'https://cosmossnoogram-centralus.documents.azure.com:443/dbs/ToDoList/colls/sent_posts/docs/'
Request method: 'POST'
Request headers:
    'Cache-Control': 'no-cache'
    'x-ms-version': 'REDACTED'
    'x-ms-documentdb-query-iscontinuationexpected': 'REDACTED'
    'x-ms-consistency-level': 'REDACTED'
    'x-ms-documentdb-isquery': 'REDACTED'
    'Content-Type': 'application/query+json'
    'x-ms-session-token': 'REDACTED'
    'x-ms-documentdb-query-enablecrosspartition': 'REDACTED'
    'x-ms-date': 'REDACTED'
    'authorization': 'REDACTED'
    'Accept': 'application/json'
    'x-ms-cosmos-correlated-activityid': 'REDACTED'
    'Content-Length': '107'
    'User-Agent': 'azsdk-python-cosmos/4.5.1 Python/3.12.4 (macOS-15.0.1-arm64-arm-64bit)'
A body is sent with the request
2024-10-30 05:22:18,121 - DEBUG - https://cosmossnoogram-centralus.documents.azure.com:443 "POST /dbs/ToDoList/colls/sent_posts/docs/ HTTP/11" 200 None
2024-10-30 05:22:18,122 - INFO - Response status: 200
Response headers:
    'Cache-Control': 'no-store, no-cache'
    'Pragma': 'no-cache'
    'Transfer-Encoding': 'chunked'
    'Content-Type': 'application/json'
    'Server': 'Microsoft-HTTPAPI/2.0'
    'Strict-Transport-Security': 'REDACTED'
    'x-ms-activity-id': 'REDACTED'
    'x-ms-last-state-change-utc': 'REDACTED'
    'x-ms-resource-quota': 'REDACTED'
    'x-ms-resource-usage': 'REDACTED'
    'x-ms-schemaversion': 'REDACTED'
    'lsn': 'REDACTED'
    'x-ms-item-count': 'REDACTED'
    'x-ms-request-charge': 'REDACTED'
    'x-ms-alt-content-path': 'REDACTED'
    'x-ms-content-path': 'REDACTED'
    'x-ms-documentdb-partitionkeyrangeid': 'REDACTED'
    'x-ms-xp-role': 'REDACTED'
    'x-ms-cosmos-query-execution-info': 'REDACTED'
    'x-ms-global-Committed-lsn': 'REDACTED'
    'x-ms-number-of-read-regions': 'REDACTED'
    'x-ms-transport-request-id': 'REDACTED'
    'x-ms-cosmos-llsn': 'REDACTED'
    'x-ms-session-token': 'REDACTED'
    'x-ms-request-duration-ms': 'REDACTED'
    'x-ms-serviceversion': 'REDACTED'
    'x-ms-cosmos-is-partition-key-delete-pending': 'REDACTED'
    'x-ms-cosmos-physical-partition-id': 'REDACTED'
    'x-ms-cosmos-internal-partition-id': 'REDACTED'
    'x-ms-gatewayversion': 'REDACTED'
    'Date': 'Wed, 30 Oct 2024 10:22:17 GMT'
2024-10-30 05:22:18,122 - INFO - Post 1g0e966 is not an image or video post, skipping
2024-10-30 05:22:18,122 - INFO - Checking post: 1gckgcy - Score: 3398 - URL: https://i.redd.it/njd0mbyjl3xd1.jpeg
2024-10-30 05:22:18,122 - INFO - Post 1gckgcy is a duplicate, skipping
2024-10-30 05:22:18,122 - INFO - Checking post: 1fznoil - Score: 3332 - URL: https://i.redd.it/eruk3694dptd1.jpeg
2024-10-30 05:22:18,123 - INFO - Post 1fznoil is a duplicate, skipping
2024-10-30 05:22:18,123 - INFO - Checking post: 1g3dsj7 - Score: 3183 - URL: https://i.redd.it/cg9oigznmpud1.jpeg
2024-10-30 05:22:18,123 - INFO - Post 1g3dsj7 is a duplicate, skipping
2024-10-30 05:22:18,123 - INFO - Checking post: 1g4dx9i - Score: 3135 - URL: https://i.redd.it/5kv3c8f3lyud1.jpeg
2024-10-30 05:22:18,124 - INFO - Request URL: 'https://cosmossnoogram-centralus.documents.azure.com:443/dbs/ToDoList/colls/sent_posts/docs/'
Request method: 'POST'
Request headers:
    'Cache-Control': 'no-cache'
    'x-ms-version': 'REDACTED'
    'x-ms-documentdb-query-iscontinuationexpected': 'REDACTED'
    'x-ms-consistency-level': 'REDACTED'
    'x-ms-documentdb-isquery': 'REDACTED'
    'Content-Type': 'application/query+json'
    'x-ms-session-token': 'REDACTED'
    'x-ms-documentdb-query-enablecrosspartition': 'REDACTED'
    'x-ms-date': 'REDACTED'
    'authorization': 'REDACTED'
    'Accept': 'application/json'
    'x-ms-cosmos-correlated-activityid': 'REDACTED'
    'Content-Length': '107'
    'User-Agent': 'azsdk-python-cosmos/4.5.1 Python/3.12.4 (macOS-15.0.1-arm64-arm-64bit)'
A body is sent with the request
2024-10-30 05:22:18,162 - DEBUG - https://cosmossnoogram-centralus.documents.azure.com:443 "POST /dbs/ToDoList/colls/sent_posts/docs/ HTTP/11" 200 None
2024-10-30 05:22:18,162 - INFO - Response status: 200
Response headers:
    'Cache-Control': 'no-store, no-cache'
    'Pragma': 'no-cache'
    'Transfer-Encoding': 'chunked'
    'Content-Type': 'application/json'
    'Server': 'Microsoft-HTTPAPI/2.0'
    'Strict-Transport-Security': 'REDACTED'
    'x-ms-activity-id': 'REDACTED'
    'x-ms-last-state-change-utc': 'REDACTED'
    'x-ms-resource-quota': 'REDACTED'
    'x-ms-resource-usage': 'REDACTED'
    'x-ms-schemaversion': 'REDACTED'
    'lsn': 'REDACTED'
    'x-ms-item-count': 'REDACTED'
    'x-ms-request-charge': 'REDACTED'
    'x-ms-alt-content-path': 'REDACTED'
    'x-ms-content-path': 'REDACTED'
    'x-ms-documentdb-partitionkeyrangeid': 'REDACTED'
    'x-ms-xp-role': 'REDACTED'
    'x-ms-cosmos-query-execution-info': 'REDACTED'
    'x-ms-global-Committed-lsn': 'REDACTED'
    'x-ms-number-of-read-regions': 'REDACTED'
    'x-ms-transport-request-id': 'REDACTED'
    'x-ms-cosmos-llsn': 'REDACTED'
    'x-ms-session-token': 'REDACTED'
    'x-ms-request-duration-ms': 'REDACTED'
    'x-ms-serviceversion': 'REDACTED'
    'x-ms-cosmos-is-partition-key-delete-pending': 'REDACTED'
    'x-ms-cosmos-physical-partition-id': 'REDACTED'
    'x-ms-cosmos-internal-partition-id': 'REDACTED'
    'x-ms-gatewayversion': 'REDACTED'
    'Date': 'Wed, 30 Oct 2024 10:22:17 GMT'
2024-10-30 05:22:18,162 - INFO - Post 1g4dx9i is a duplicate, skipping
2024-10-30 05:22:18,162 - INFO - Checking post: 1ge2oko - Score: 3133 - URL: https://i.redd.it/3vk9ocmf6ixd1.jpeg
2024-10-30 05:22:18,163 - INFO - Request URL: 'https://cosmossnoogram-centralus.documents.azure.com:443/dbs/ToDoList/colls/sent_posts/docs/'
Request method: 'POST'
Request headers:
    'Cache-Control': 'no-cache'
    'x-ms-version': 'REDACTED'
    'x-ms-documentdb-query-iscontinuationexpected': 'REDACTED'
    'x-ms-consistency-level': 'REDACTED'
    'x-ms-documentdb-isquery': 'REDACTED'
    'Content-Type': 'application/query+json'
    'x-ms-session-token': 'REDACTED'
    'x-ms-documentdb-query-enablecrosspartition': 'REDACTED'
    'x-ms-date': 'REDACTED'
    'authorization': 'REDACTED'
    'Accept': 'application/json'
    'x-ms-cosmos-correlated-activityid': 'REDACTED'
    'Content-Length': '107'
    'User-Agent': 'azsdk-python-cosmos/4.5.1 Python/3.12.4 (macOS-15.0.1-arm64-arm-64bit)'
A body is sent with the request
2024-10-30 05:22:18,202 - DEBUG - https://cosmossnoogram-centralus.documents.azure.com:443 "POST /dbs/ToDoList/colls/sent_posts/docs/ HTTP/11" 200 None
2024-10-30 05:22:18,203 - INFO - Response status: 200
Response headers:
    'Cache-Control': 'no-store, no-cache'
    'Pragma': 'no-cache'
    'Transfer-Encoding': 'chunked'
    'Content-Type': 'application/json'
    'Server': 'Microsoft-HTTPAPI/2.0'
    'Strict-Transport-Security': 'REDACTED'
    'x-ms-activity-id': 'REDACTED'
    'x-ms-last-state-change-utc': 'REDACTED'
    'x-ms-resource-quota': 'REDACTED'
    'x-ms-resource-usage': 'REDACTED'
    'x-ms-schemaversion': 'REDACTED'
    'lsn': 'REDACTED'
    'x-ms-item-count': 'REDACTED'
    'x-ms-request-charge': 'REDACTED'
    'x-ms-alt-content-path': 'REDACTED'
    'x-ms-content-path': 'REDACTED'
    'x-ms-documentdb-partitionkeyrangeid': 'REDACTED'
    'x-ms-xp-role': 'REDACTED'
    'x-ms-cosmos-query-execution-info': 'REDACTED'
    'x-ms-global-Committed-lsn': 'REDACTED'
    'x-ms-number-of-read-regions': 'REDACTED'
    'x-ms-transport-request-id': 'REDACTED'
    'x-ms-cosmos-llsn': 'REDACTED'
    'x-ms-session-token': 'REDACTED'
    'x-ms-request-duration-ms': 'REDACTED'
    'x-ms-serviceversion': 'REDACTED'
    'x-ms-cosmos-is-partition-key-delete-pending': 'REDACTED'
    'x-ms-cosmos-physical-partition-id': 'REDACTED'
    'x-ms-cosmos-internal-partition-id': 'REDACTED'
    'x-ms-gatewayversion': 'REDACTED'
    'Date': 'Wed, 30 Oct 2024 10:22:17 GMT'
2024-10-30 05:22:18,203 - INFO - Found image post: 1ge2oko with URL: https://i.redd.it/3vk9ocmf6ixd1.jpeg
2024-10-30 05:22:18,204 - DEBUG - Starting new HTTPS connection (1): i.redd.it:443
2024-10-30 05:22:18,328 - DEBUG - https://i.redd.it:443 "GET /3vk9ocmf6ixd1.jpeg HTTP/11" 200 2942027
2024-10-30 05:22:18,567 - INFO - Successfully downloaded media to downloads/pics/1ge2oko_20241030_052218_c0dedffe.jpeg
2024-10-30 05:22:18,571 - DEBUG - Using selector: KqueueSelector
2024-10-30 05:22:18,571 - INFO - Attempting to send photo to Telegram - Path: downloads/pics/1ge2oko_20241030_052218_c0dedffe.jpeg
2024-10-30 05:22:18,572 - DEBUG - load_ssl_context verify=True cert=None trust_env=True http2=False
2024-10-30 05:22:18,573 - DEBUG - load_verify_locations cafile='/Users/joewilson/PythonProjects/Snoogram/venv/lib/python3.12/site-packages/certifi/cacert.pem'
2024-10-30 05:22:18,582 - DEBUG - load_ssl_context verify=True cert=None trust_env=True http2=False
2024-10-30 05:22:18,582 - DEBUG - load_verify_locations cafile='/Users/joewilson/PythonProjects/Snoogram/venv/lib/python3.12/site-packages/certifi/cacert.pem'
2024-10-30 05:22:18,591 - DEBUG - Entering: get_me
2024-10-30 05:22:18,592 - DEBUG - connect_tcp.started host='api.telegram.org' port=443 local_address=None timeout=5.0 socket_options=None
2024-10-30 05:22:18,770 - DEBUG - connect_tcp.complete return_value=<httpcore._backends.anyio.AnyIOStream object at 0x108a620f0>
2024-10-30 05:22:18,771 - DEBUG - start_tls.started ssl_context=<ssl.SSLContext object at 0x108cf7850> server_hostname='api.telegram.org' timeout=5.0
2024-10-30 05:22:18,796 - INFO - Successfully downloaded media to downloads/videos/1gelyz1_20241030_052217_ba5c8ead.mp4
2024-10-30 05:22:18,798 - DEBUG - Using selector: KqueueSelector
2024-10-30 05:22:18,798 - INFO - Attempting to send video to Telegram - Path: downloads/videos/1gelyz1_20241030_052217_ba5c8ead.mp4
2024-10-30 05:22:18,798 - DEBUG - Entering: get_me
2024-10-30 05:22:18,798 - DEBUG - connect_tcp.started host='api.telegram.org' port=443 local_address=None timeout=5.0 socket_options=None
2024-10-30 05:22:18,910 - DEBUG - start_tls.complete return_value=<httpcore._backends.anyio.AnyIOStream object at 0x108a62720>
2024-10-30 05:22:18,910 - DEBUG - send_request_headers.started request=<Request [b'POST']>
2024-10-30 05:22:18,910 - DEBUG - send_request_headers.complete
2024-10-30 05:22:18,911 - DEBUG - send_request_body.started request=<Request [b'POST']>
2024-10-30 05:22:18,911 - DEBUG - send_request_body.complete
2024-10-30 05:22:18,911 - DEBUG - receive_response_headers.started request=<Request [b'POST']>
2024-10-30 05:22:18,923 - DEBUG - connect_tcp.complete return_value=<httpcore._backends.anyio.AnyIOStream object at 0x108a62ba0>
2024-10-30 05:22:18,923 - DEBUG - start_tls.started ssl_context=<ssl.SSLContext object at 0x108cf7850> server_hostname='api.telegram.org' timeout=5.0
2024-10-30 05:22:19,030 - DEBUG - receive_response_headers.complete return_value=(b'HTTP/1.1', 200, b'OK', [(b'Server', b'nginx/1.18.0'), (b'Date', b'Wed, 30 Oct 2024 10:22:18 GMT'), (b'Content-Type', b'application/json'), (b'Content-Length', b'254'), (b'Connection', b'keep-alive'), (b'Strict-Transport-Security', b'max-age=31536000; includeSubDomains; preload'), (b'Access-Control-Allow-Origin', b'*'), (b'Access-Control-Allow-Methods', b'GET, POST, OPTIONS'), (b'Access-Control-Expose-Headers', b'Content-Length,Content-Type,Date,Server,Connection')])
2024-10-30 05:22:19,030 - INFO - HTTP Request: POST https://api.telegram.org/bot7867694458:AAEFLZjWPyd1p640mHENnBt479WRYfSavWg/getMe "HTTP/1.1 200 OK"
2024-10-30 05:22:19,031 - DEBUG - receive_response_body.started request=<Request [b'POST']>
2024-10-30 05:22:19,031 - DEBUG - receive_response_body.complete
2024-10-30 05:22:19,031 - DEBUG - response_closed.started
2024-10-30 05:22:19,031 - DEBUG - response_closed.complete
2024-10-30 05:22:19,031 - DEBUG - User(api_kwargs={'can_connect_to_business': False, 'has_main_web_app': False}, can_join_groups=True, can_read_all_group_messages=False, first_name='RedditBot', id=7867694458, is_bot=True, supports_inline_queries=False, username='RedditImage_bot')
2024-10-30 05:22:19,031 - DEBUG - Exiting: get_me
2024-10-30 05:22:19,031 - DEBUG - This Bot is already initialized.
2024-10-30 05:22:19,031 - DEBUG - Entering: send_photo
2024-10-30 05:22:19,032 - DEBUG - send_request_headers.started request=<Request [b'POST']>
2024-10-30 05:22:19,033 - DEBUG - send_request_headers.complete
2024-10-30 05:22:19,033 - DEBUG - send_request_body.started request=<Request [b'POST']>
2024-10-30 05:22:19,059 - DEBUG - start_tls.complete return_value=<httpcore._backends.anyio.AnyIOStream object at 0x108a61310>
2024-10-30 05:22:19,059 - DEBUG - send_request_headers.started request=<Request [b'POST']>
2024-10-30 05:22:19,060 - DEBUG - send_request_headers.complete
2024-10-30 05:22:19,060 - DEBUG - send_request_body.started request=<Request [b'POST']>
2024-10-30 05:22:19,060 - DEBUG - send_request_body.complete
2024-10-30 05:22:19,060 - DEBUG - receive_response_headers.started request=<Request [b'POST']>
2024-10-30 05:22:19,180 - DEBUG - receive_response_headers.complete return_value=(b'HTTP/1.1', 200, b'OK', [(b'Server', b'nginx/1.18.0'), (b'Date', b'Wed, 30 Oct 2024 10:22:19 GMT'), (b'Content-Type', b'application/json'), (b'Content-Length', b'254'), (b'Connection', b'keep-alive'), (b'Strict-Transport-Security', b'max-age=31536000; includeSubDomains; preload'), (b'Access-Control-Allow-Origin', b'*'), (b'Access-Control-Allow-Methods', b'GET, POST, OPTIONS'), (b'Access-Control-Expose-Headers', b'Content-Length,Content-Type,Date,Server,Connection')])
2024-10-30 05:22:19,180 - INFO - HTTP Request: POST https://api.telegram.org/bot7867694458:AAEFLZjWPyd1p640mHENnBt479WRYfSavWg/getMe "HTTP/1.1 200 OK"
2024-10-30 05:22:19,180 - DEBUG - receive_response_body.started request=<Request [b'POST']>
2024-10-30 05:22:19,180 - DEBUG - receive_response_body.complete
2024-10-30 05:22:19,180 - DEBUG - response_closed.started
2024-10-30 05:22:19,181 - DEBUG - response_closed.complete
2024-10-30 05:22:19,181 - DEBUG - User(api_kwargs={'can_connect_to_business': False, 'has_main_web_app': False}, can_join_groups=True, can_read_all_group_messages=False, first_name='RedditBot', id=7867694458, is_bot=True, supports_inline_queries=False, username='RedditImage_bot')
2024-10-30 05:22:19,181 - DEBUG - Exiting: get_me
2024-10-30 05:22:19,181 - DEBUG - This Updater is already initialized.
2024-10-30 05:22:19,181 - DEBUG - Entering: send_video
2024-10-30 05:22:19,188 - DEBUG - send_request_headers.started request=<Request [b'POST']>
2024-10-30 05:22:19,188 - DEBUG - send_request_headers.complete
2024-10-30 05:22:19,188 - DEBUG - send_request_body.started request=<Request [b'POST']>
2024-10-30 05:22:19,920 - DEBUG - send_request_body.complete
2024-10-30 05:22:19,920 - DEBUG - receive_response_headers.started request=<Request [b'POST']>
2024-10-30 05:22:20,389 - DEBUG - receive_response_headers.complete return_value=(b'HTTP/1.1', 200, b'OK', [(b'Server', b'nginx/1.18.0'), (b'Date', b'Wed, 30 Oct 2024 10:22:20 GMT'), (b'Content-Type', b'application/json'), (b'Content-Length', b'1213'), (b'Connection', b'keep-alive'), (b'Strict-Transport-Security', b'max-age=31536000; includeSubDomains; preload'), (b'Access-Control-Allow-Origin', b'*'), (b'Access-Control-Allow-Methods', b'GET, POST, OPTIONS'), (b'Access-Control-Expose-Headers', b'Content-Length,Content-Type,Date,Server,Connection')])
2024-10-30 05:22:20,390 - INFO - HTTP Request: POST https://api.telegram.org/bot7867694458:AAEFLZjWPyd1p640mHENnBt479WRYfSavWg/sendPhoto "HTTP/1.1 200 OK"
2024-10-30 05:22:20,390 - DEBUG - receive_response_body.started request=<Request [b'POST']>
2024-10-30 05:22:20,390 - DEBUG - receive_response_body.complete
2024-10-30 05:22:20,390 - DEBUG - response_closed.started
2024-10-30 05:22:20,390 - DEBUG - response_closed.complete
2024-10-30 05:22:20,391 - DEBUG - Message(caption='From r/wifebutt: Fresh morning Wifebutt\nUpvotes: 3,133', channel_chat_created=False, chat=Chat(id=-1002490380283, title='Reddit_Pic_Stream', type=<ChatType.CHANNEL>), date=datetime.datetime(2024, 10, 30, 10, 22, 20, tzinfo=<UTC>), delete_chat_photo=False, group_chat_created=False, message_id=235, photo=(PhotoSize(file_id='AgACAgEAAyEGAASUcC_7AAOZZyH6uPME2ny7Ln2nX6zcZxEOxyoAAketMRsZEBFFtveidIwWN04BAAMCAANzAAM2BA', file_size=1506, file_unique_id='AQADR60xGxkQEUV4', height=90, width=67), PhotoSize(file_id='AgACAgEAAyEGAASUcC_7AAOZZyH6uPME2ny7Ln2nX6zcZxEOxyoAAketMRsZEBFFtveidIwWN04BAAMCAANtAAM2BA', file_size=23685, file_unique_id='AQADR60xGxkQEUVy', height=320, width=240), PhotoSize(file_id='AgACAgEAAyEGAASUcC_7AAOZZyH6uPME2ny7Ln2nX6zcZxEOxyoAAketMRsZEBFFtveidIwWN04BAAMCAAN4AAM2BA', file_size=120875, file_unique_id='AQADR60xGxkQEUV9', height=800, width=600), PhotoSize(file_id='AgACAgEAAyEGAASUcC_7AAOZZyH6uPME2ny7Ln2nX6zcZxEOxyoAAketMRsZEBFFtveidIwWN04BAAMCAAN5AAM2BA', file_size=286149, file_unique_id='AQADR60xGxkQEUV-', height=1280, width=960), PhotoSize(file_id='AgACAgEAAyEGAASUcC_7AAOZZyH6uPME2ny7Ln2nX6zcZxEOxyoAAketMRsZEBFFtveidIwWN04BAAMCAAN3AAM2BA', file_size=958648, file_unique_id='AQADR60xGxkQEUV8', height=2560, width=1920)), sender_chat=Chat(id=-1002490380283, title='Reddit_Pic_Stream', type=<ChatType.CHANNEL>), supergroup_chat_created=False)
2024-10-30 05:22:20,391 - DEBUG - Exiting: send_photo
2024-10-30 05:22:20,392 - DEBUG - close.started
2024-10-30 05:22:20,392 - DEBUG - close.complete
2024-10-30 05:22:20,392 - DEBUG - close.started
2024-10-30 05:22:20,392 - DEBUG - close.complete
2024-10-30 05:22:20,392 - DEBUG - This Bot is already shut down. Returning.
2024-10-30 05:22:20,392 - DEBUG - Shut down of Updater complete
2024-10-30 05:22:20,392 - INFO - Successfully sent photo to Telegram
2024-10-30 05:22:20,394 - ERROR - Error processing subreddit wifebutt: (sqlite3.OperationalError) attempt to write a readonly database
[SQL: INSERT INTO sent_post (post_id, subreddit_name, sent_at) VALUES (?, ?, ?)]
[parameters: ('1ge2oko', 'wifebutt', '2024-10-30 10:22:20.393900')]
(Background on this error at: https://sqlalche.me/e/20/e3q8)
2024-10-30 05:22:20,396 - ERROR - Job "send_to_telegram (trigger: interval[0:01:00], next run at: 2024-10-30 05:23:16 CDT)" raised an exception
Traceback (most recent call last):
  File "/Users/joewilson/PythonProjects/Snoogram/venv/lib/python3.12/site-packages/sqlalchemy/engine/base.py", line 1967, in _exec_single_context
    self.dialect.do_execute(
  File "/Users/joewilson/PythonProjects/Snoogram/venv/lib/python3.12/site-packages/sqlalchemy/engine/default.py", line 941, in do_execute
    cursor.execute(statement, parameters)
sqlite3.OperationalError: attempt to write a readonly database

The above exception was the direct cause of the following exception:

Traceback (most recent call last):
  File "/Users/joewilson/PythonProjects/Snoogram/venv/lib/python3.12/site-packages/apscheduler/executors/base.py", line 125, in run_job
    retval = job.func(*job.args, **job.kwargs)
             ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/Users/joewilson/PythonProjects/Snoogram/backend/app.py", line 265, in send_to_telegram
    # Update last_check in Cosmos DB
                ^^^^^^^^^^^^^^^^^^^^^
  File "/Users/joewilson/PythonProjects/Snoogram/backend/db_operations.py", line 100, in add_sent_post
  File "/Users/joewilson/PythonProjects/Snoogram/venv/lib/python3.12/site-packages/sqlalchemy/orm/scoping.py", line 597, in commit
    return self._proxied.commit()
           ^^^^^^^^^^^^^^^^^^^^^^
  File "/Users/joewilson/PythonProjects/Snoogram/venv/lib/python3.12/site-packages/sqlalchemy/orm/session.py", line 2028, in commit
    trans.commit(_to_root=True)
  File "<string>", line 2, in commit
  File "/Users/joewilson/PythonProjects/Snoogram/venv/lib/python3.12/site-packages/sqlalchemy/orm/state_changes.py", line 139, in _go
    ret_value = fn(self, *arg, **kw)
                ^^^^^^^^^^^^^^^^^^^^
  File "/Users/joewilson/PythonProjects/Snoogram/venv/lib/python3.12/site-packages/sqlalchemy/orm/session.py", line 1313, in commit
    self._prepare_impl()
  File "<string>", line 2, in _prepare_impl
  File "/Users/joewilson/PythonProjects/Snoogram/venv/lib/python3.12/site-packages/sqlalchemy/orm/state_changes.py", line 139, in _go
    ret_value = fn(self, *arg, **kw)
                ^^^^^^^^^^^^^^^^^^^^
  File "/Users/joewilson/PythonProjects/Snoogram/venv/lib/python3.12/site-packages/sqlalchemy/orm/session.py", line 1288, in _prepare_impl
    self.session.flush()
  File "/Users/joewilson/PythonProjects/Snoogram/venv/lib/python3.12/site-packages/sqlalchemy/orm/session.py", line 4352, in flush
    self._flush(objects)
  File "/Users/joewilson/PythonProjects/Snoogram/venv/lib/python3.12/site-packages/sqlalchemy/orm/session.py", line 4487, in _flush
    with util.safe_reraise():
  File "/Users/joewilson/PythonProjects/Snoogram/venv/lib/python3.12/site-packages/sqlalchemy/util/langhelpers.py", line 146, in __exit__
    raise exc_value.with_traceback(exc_tb)
  File "/Users/joewilson/PythonProjects/Snoogram/venv/lib/python3.12/site-packages/sqlalchemy/orm/session.py", line 4448, in _flush
    flush_context.execute()
  File "/Users/joewilson/PythonProjects/Snoogram/venv/lib/python3.12/site-packages/sqlalchemy/orm/unitofwork.py", line 466, in execute
    rec.execute(self)
  File "/Users/joewilson/PythonProjects/Snoogram/venv/lib/python3.12/site-packages/sqlalchemy/orm/unitofwork.py", line 642, in execute
    util.preloaded.orm_persistence.save_obj(
  File "/Users/joewilson/PythonProjects/Snoogram/venv/lib/python3.12/site-packages/sqlalchemy/orm/persistence.py", line 93, in save_obj
    _emit_insert_statements(
  File "/Users/joewilson/PythonProjects/Snoogram/venv/lib/python3.12/site-packages/sqlalchemy/orm/persistence.py", line 1233, in _emit_insert_statements
    result = connection.execute(
             ^^^^^^^^^^^^^^^^^^^
  File "/Users/joewilson/PythonProjects/Snoogram/venv/lib/python3.12/site-packages/sqlalchemy/engine/base.py", line 1418, in execute
    return meth(
           ^^^^^
  File "/Users/joewilson/PythonProjects/Snoogram/venv/lib/python3.12/site-packages/sqlalchemy/sql/elements.py", line 515, in _execute_on_connection
    return connection._execute_clauseelement(
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/Users/joewilson/PythonProjects/Snoogram/venv/lib/python3.12/site-packages/sqlalchemy/engine/base.py", line 1640, in _execute_clauseelement
    ret = self._execute_context(
          ^^^^^^^^^^^^^^^^^^^^^^
  File "/Users/joewilson/PythonProjects/Snoogram/venv/lib/python3.12/site-packages/sqlalchemy/engine/base.py", line 1846, in _execute_context
    return self._exec_single_context(
           ^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/Users/joewilson/PythonProjects/Snoogram/venv/lib/python3.12/site-packages/sqlalchemy/engine/base.py", line 1986, in _exec_single_context
    self._handle_dbapi_exception(
  File "/Users/joewilson/PythonProjects/Snoogram/venv/lib/python3.12/site-packages/sqlalchemy/engine/base.py", line 2355, in _handle_dbapi_exception
    raise sqlalchemy_exception.with_traceback(exc_info[2]) from e
  File "/Users/joewilson/PythonProjects/Snoogram/venv/lib/python3.12/site-packages/sqlalchemy/engine/base.py", line 1967, in _exec_single_context
    self.dialect.do_execute(
  File "/Users/joewilson/PythonProjects/Snoogram/venv/lib/python3.12/site-packages/sqlalchemy/engine/default.py", line 941, in do_execute
    cursor.execute(statement, parameters)
sqlalchemy.exc.OperationalError: (sqlite3.OperationalError) attempt to write a readonly database
[SQL: INSERT INTO sent_post (post_id, subreddit_name, sent_at) VALUES (?, ?, ?)]
[parameters: ('1ge2oko', 'wifebutt', '2024-10-30 10:22:20.393900')]
(Background on this error at: https://sqlalche.me/e/20/e3q8)
2024-10-30 05:22:39,200 - DEBUG - send_request_body.failed exception=WriteError(ClosedResourceError())
2024-10-30 05:22:39,201 - DEBUG - response_closed.started
2024-10-30 05:22:39,202 - DEBUG - response_closed.complete
2024-10-30 05:22:39,202 - DEBUG - This Application is already shut down. Returning.
2024-10-30 05:22:39,202 - ERROR - Failed to send video to Telegram: httpx.WriteError: 
2024-10-30 05:22:39,204 - ERROR - Error sending video post 1gelyz1: httpx.WriteError: 
2024-10-30 05:22:39,204 - INFO - Checking post: 1gejrnl - Score: 2586 - URL: https://v3.redgifs.com/watch/graydefensivepika
2024-10-30 05:22:39,209 - INFO - Request URL: 'https://cosmossnoogram-centralus.documents.azure.com:443/dbs/ToDoList/colls/sent_posts/docs/'
Request method: 'POST'
Request headers:
    'Cache-Control': 'no-cache'
    'x-ms-version': 'REDACTED'
    'x-ms-documentdb-query-iscontinuationexpected': 'REDACTED'
    'x-ms-consistency-level': 'REDACTED'
    'x-ms-documentdb-isquery': 'REDACTED'
    'Content-Type': 'application/query+json'
    'x-ms-session-token': 'REDACTED'
    'x-ms-documentdb-query-enablecrosspartition': 'REDACTED'
    'x-ms-date': 'REDACTED'
    'authorization': 'REDACTED'
    'Accept': 'application/json'
    'x-ms-cosmos-correlated-activityid': 'REDACTED'
    'Content-Length': '107'
    'User-Agent': 'azsdk-python-cosmos/4.5.1 Python/3.12.4 (macOS-15.0.1-arm64-arm-64bit)'
A body is sent with the request
2024-10-30 05:22:39,242 - DEBUG - https://cosmossnoogram-centralus.documents.azure.com:443 "POST /dbs/ToDoList/colls/sent_posts/docs/ HTTP/11" 200 None
2024-10-30 05:22:39,242 - INFO - Response status: 200
Response headers:
    'Cache-Control': 'no-store, no-cache'
    'Pragma': 'no-cache'
    'Transfer-Encoding': 'chunked'
    'Content-Type': 'application/json'
    'Server': 'Microsoft-HTTPAPI/2.0'
    'Strict-Transport-Security': 'REDACTED'
    'x-ms-activity-id': 'REDACTED'
    'x-ms-last-state-change-utc': 'REDACTED'
    'x-ms-resource-quota': 'REDACTED'
    'x-ms-resource-usage': 'REDACTED'
    'x-ms-schemaversion': 'REDACTED'
    'lsn': 'REDACTED'
    'x-ms-item-count': 'REDACTED'
    'x-ms-request-charge': 'REDACTED'
    'x-ms-alt-content-path': 'REDACTED'
    'x-ms-content-path': 'REDACTED'
    'x-ms-documentdb-partitionkeyrangeid': 'REDACTED'
    'x-ms-xp-role': 'REDACTED'
    'x-ms-cosmos-query-execution-info': 'REDACTED'
    'x-ms-global-Committed-lsn': 'REDACTED'
    'x-ms-number-of-read-regions': 'REDACTED'
    'x-ms-transport-request-id': 'REDACTED'
    'x-ms-cosmos-llsn': 'REDACTED'
    'x-ms-session-token': 'REDACTED'
    'x-ms-request-duration-ms': 'REDACTED'
    'x-ms-serviceversion': 'REDACTED'
    'x-ms-cosmos-is-partition-key-delete-pending': 'REDACTED'
    'x-ms-cosmos-physical-partition-id': 'REDACTED'
    'x-ms-cosmos-internal-partition-id': 'REDACTED'
    'x-ms-gatewayversion': 'REDACTED'
    'Date': 'Wed, 30 Oct 2024 10:22:38 GMT'
2024-10-30 05:22:39,242 - INFO - Post 1gejrnl is a duplicate, skipping
2024-10-30 05:22:39,242 - INFO - Checking post: 1gelw33 - Score: 2303 - URL: https://www.redgifs.com/watch/drydarkgraysable
2024-10-30 05:22:39,242 - INFO - Post 1gelw33 is a duplicate, skipping
2024-10-30 05:22:39,243 - INFO - Checking post: 1gevvp0 - Score: 1197 - URL: https://www.redgifs.com/watch/medicalplumhen
2024-10-30 05:22:39,243 - INFO - Post 1gevvp0 is a duplicate, skipping
2024-10-30 05:22:39,243 - INFO - Checking post: 1gesoj7 - Score: 748 - URL: https://www.redgifs.com/watch/lightgreytrickydragonfly
2024-10-30 05:22:39,243 - INFO - Post 1gesoj7 is a duplicate, skipping
2024-10-30 05:22:39,243 - INFO - Checking post: 1geuuqp - Score: 441 - URL: https://www.redgifs.com/watch/cheerfulbeigebagworm
2024-10-30 05:22:39,243 - INFO - Post 1geuuqp is a duplicate, skipping
2024-10-30 05:22:39,243 - INFO - Checking post: 1geakrb - Score: 398 - URL: https://www.redgifs.com/watch/illinformedthickgalapagoshawk
2024-10-30 05:22:39,244 - INFO - Post 1geakrb is a duplicate, skipping
2024-10-30 05:22:39,244 - INFO - Checking post: 1gerubz - Score: 363 - URL: https://v3.redgifs.com/watch/trickysquarepseudodynerusquadrisectus
2024-10-30 05:22:39,244 - INFO - Post 1gerubz is a duplicate, skipping
2024-10-30 05:22:39,244 - INFO - Checking post: 1getxhl - Score: 339 - URL: https://www.redgifs.com/watch/purpledemandingboaconstrictor
2024-10-30 05:22:39,244 - INFO - Post 1getxhl is a duplicate, skipping
2024-10-30 05:22:39,244 - INFO - Checking post: 1ge9gol - Score: 278 - URL: https://v3.redgifs.com/watch/circulardeeppinkamericanbulldog
2024-10-30 05:22:39,244 - INFO - Request URL: 'https://cosmossnoogram-centralus.documents.azure.com:443/dbs/ToDoList/colls/sent_posts/docs/'
Request method: 'POST'
Request headers:
    'Cache-Control': 'no-cache'
    'x-ms-version': 'REDACTED'
    'x-ms-documentdb-query-iscontinuationexpected': 'REDACTED'
    'x-ms-consistency-level': 'REDACTED'
    'x-ms-documentdb-isquery': 'REDACTED'
    'Content-Type': 'application/query+json'
    'x-ms-session-token': 'REDACTED'
    'x-ms-documentdb-query-enablecrosspartition': 'REDACTED'
    'x-ms-date': 'REDACTED'
    'authorization': 'REDACTED'
    'Accept': 'application/json'
    'x-ms-cosmos-correlated-activityid': 'REDACTED'
    'Content-Length': '107'
    'User-Agent': 'azsdk-python-cosmos/4.5.1 Python/3.12.4 (macOS-15.0.1-arm64-arm-64bit)'
A body is sent with the request
2024-10-30 05:22:39,276 - DEBUG - https://cosmossnoogram-centralus.documents.azure.com:443 "POST /dbs/ToDoList/colls/sent_posts/docs/ HTTP/11" 200 None
2024-10-30 05:22:39,277 - INFO - Response status: 200
Response headers:
    'Cache-Control': 'no-store, no-cache'
    'Pragma': 'no-cache'
    'Transfer-Encoding': 'chunked'
    'Content-Type': 'application/json'
    'Server': 'Microsoft-HTTPAPI/2.0'
    'Strict-Transport-Security': 'REDACTED'
    'x-ms-activity-id': 'REDACTED'
    'x-ms-last-state-change-utc': 'REDACTED'
    'x-ms-resource-quota': 'REDACTED'
    'x-ms-resource-usage': 'REDACTED'
    'x-ms-schemaversion': 'REDACTED'
    'lsn': 'REDACTED'
    'x-ms-item-count': 'REDACTED'
    'x-ms-request-charge': 'REDACTED'
    'x-ms-alt-content-path': 'REDACTED'
    'x-ms-content-path': 'REDACTED'
    'x-ms-documentdb-partitionkeyrangeid': 'REDACTED'
    'x-ms-xp-role': 'REDACTED'
    'x-ms-cosmos-query-execution-info': 'REDACTED'
    'x-ms-global-Committed-lsn': 'REDACTED'
    'x-ms-number-of-read-regions': 'REDACTED'
    'x-ms-transport-request-id': 'REDACTED'
    'x-ms-cosmos-llsn': 'REDACTED'
    'x-ms-session-token': 'REDACTED'
    'x-ms-request-duration-ms': 'REDACTED'
    'x-ms-serviceversion': 'REDACTED'
    'x-ms-cosmos-is-partition-key-delete-pending': 'REDACTED'
    'x-ms-cosmos-physical-partition-id': 'REDACTED'
    'x-ms-cosmos-internal-partition-id': 'REDACTED'
    'x-ms-gatewayversion': 'REDACTED'
    'Date': 'Wed, 30 Oct 2024 10:22:38 GMT'
2024-10-30 05:22:39,277 - INFO - Found video post: 1ge9gol
2024-10-30 05:22:39,278 - DEBUG - Starting new HTTPS connection (1): api.redgifs.com:443
2024-10-30 05:22:39,406 - DEBUG - https://api.redgifs.com:443 "GET /v2/gifs/circulardeeppinkamericanbulldog HTTP/11" 200 None
2024-10-30 05:22:39,412 - DEBUG - Starting new HTTPS connection (1): files.redgifs.com:443
2024-10-30 05:22:39,492 - DEBUG - https://files.redgifs.com:443 "GET /CircularDeeppinkAmericanbulldog.mp4 HTTP/11" 200 61415883
2024-10-30 05:22:40,693 - INFO - Successfully downloaded media to downloads/videos/1ge9gol_20241030_052239_fff8ab71.mp4
2024-10-30 05:22:40,694 - DEBUG - Using selector: KqueueSelector
2024-10-30 05:22:40,695 - INFO - Attempting to send video to Telegram - Path: downloads/videos/1ge9gol_20241030_052239_fff8ab71.mp4
2024-10-30 05:22:40,695 - DEBUG - load_ssl_context verify=True cert=None trust_env=True http2=False
2024-10-30 05:22:40,695 - DEBUG - load_verify_locations cafile='/Users/joewilson/PythonProjects/Snoogram/venv/lib/python3.12/site-packages/certifi/cacert.pem'
2024-10-30 05:22:40,703 - DEBUG - load_ssl_context verify=True cert=None trust_env=True http2=False
2024-10-30 05:22:40,704 - DEBUG - load_verify_locations cafile='/Users/joewilson/PythonProjects/Snoogram/venv/lib/python3.12/site-packages/certifi/cacert.pem'
2024-10-30 05:22:40,711 - DEBUG - Entering: get_me
2024-10-30 05:22:40,711 - DEBUG - connect_tcp.started host='api.telegram.org' port=443 local_address=None timeout=5.0 socket_options=None
2024-10-30 05:22:40,839 - DEBUG - connect_tcp.complete return_value=<httpcore._backends.anyio.AnyIOStream object at 0x108d7bb90>
2024-10-30 05:22:40,839 - DEBUG - start_tls.started ssl_context=<ssl.SSLContext object at 0x108afe7d0> server_hostname='api.telegram.org' timeout=5.0
2024-10-30 05:22:40,972 - DEBUG - start_tls.complete return_value=<httpcore._backends.anyio.AnyIOStream object at 0x108d7b080>
2024-10-30 05:22:40,973 - DEBUG - send_request_headers.started request=<Request [b'POST']>
2024-10-30 05:22:40,973 - DEBUG - send_request_headers.complete
2024-10-30 05:22:40,973 - DEBUG - send_request_body.started request=<Request [b'POST']>
2024-10-30 05:22:40,973 - DEBUG - send_request_body.complete
2024-10-30 05:22:40,973 - DEBUG - receive_response_headers.started request=<Request [b'POST']>
2024-10-30 05:22:41,104 - DEBUG - receive_response_headers.complete return_value=(b'HTTP/1.1', 200, b'OK', [(b'Server', b'nginx/1.18.0'), (b'Date', b'Wed, 30 Oct 2024 10:22:41 GMT'), (b'Content-Type', b'application/json'), (b'Content-Length', b'254'), (b'Connection', b'keep-alive'), (b'Strict-Transport-Security', b'max-age=31536000; includeSubDomains; preload'), (b'Access-Control-Allow-Origin', b'*'), (b'Access-Control-Allow-Methods', b'GET, POST, OPTIONS'), (b'Access-Control-Expose-Headers', b'Content-Length,Content-Type,Date,Server,Connection')])
2024-10-30 05:22:41,105 - INFO - HTTP Request: POST https://api.telegram.org/bot7867694458:AAEFLZjWPyd1p640mHENnBt479WRYfSavWg/getMe "HTTP/1.1 200 OK"
2024-10-30 05:22:41,105 - DEBUG - receive_response_body.started request=<Request [b'POST']>
2024-10-30 05:22:41,105 - DEBUG - receive_response_body.complete
2024-10-30 05:22:41,105 - DEBUG - response_closed.started
2024-10-30 05:22:41,106 - DEBUG - response_closed.complete
2024-10-30 05:22:41,106 - DEBUG - User(api_kwargs={'can_connect_to_business': False, 'has_main_web_app': False}, can_join_groups=True, can_read_all_group_messages=False, first_name='RedditBot', id=7867694458, is_bot=True, supports_inline_queries=False, username='RedditImage_bot')
2024-10-30 05:22:41,106 - DEBUG - Exiting: get_me
2024-10-30 05:22:41,107 - DEBUG - This Bot is already initialized.
2024-10-30 05:22:41,107 - DEBUG - Entering: send_video
2024-10-30 05:22:41,128 - DEBUG - send_request_headers.started request=<Request [b'POST']>
2024-10-30 05:22:41,128 - DEBUG - send_request_headers.complete
2024-10-30 05:22:41,129 - DEBUG - send_request_body.started request=<Request [b'POST']>
2024-10-30 05:22:45,393 - DEBUG - send_request_body.complete
2024-10-30 05:22:45,393 - DEBUG - receive_response_headers.started request=<Request [b'POST']>
2024-10-30 05:22:45,394 - DEBUG - receive_response_headers.complete return_value=(b'HTTP/1.1', 413, b'Request Entity Too Large', [(b'Server', b'nginx/1.18.0'), (b'Date', b'Wed, 30 Oct 2024 10:22:41 GMT'), (b'Content-Type', b'application/json'), (b'Content-Length', b'70'), (b'Connection', b'close'), (b'Strict-Transport-Security', b'max-age=31536000; includeSubDomains; preload'), (b'Access-Control-Allow-Origin', b'*'), (b'Access-Control-Expose-Headers', b'Content-Length,Content-Type,Date,Server,Connection')])
2024-10-30 05:22:45,394 - INFO - HTTP Request: POST https://api.telegram.org/bot7867694458:AAEFLZjWPyd1p640mHENnBt479WRYfSavWg/sendVideo "HTTP/1.1 413 Request Entity Too Large"
2024-10-30 05:22:45,394 - DEBUG - receive_response_body.started request=<Request [b'POST']>
2024-10-30 05:22:45,394 - DEBUG - receive_response_body.complete
2024-10-30 05:22:45,395 - DEBUG - response_closed.started
2024-10-30 05:22:45,395 - DEBUG - response_closed.complete
2024-10-30 05:22:45,395 - DEBUG - This Bot is already shut down. Returning.
2024-10-30 05:22:45,395 - DEBUG - Shut down of Updater complete
2024-10-30 05:22:45,395 - ERROR - Failed to send video to Telegram: Request Entity Too Large (413)
2024-10-30 05:22:45,396 - ERROR - Error sending video post 1ge9gol: Request Entity Too Large (413)
2024-10-30 05:22:45,396 - INFO - Checking post: 1ge98kx - Score: 259 - URL: https://www.redgifs.com/watch/frontspecificspittlebug
2024-10-30 05:22:45,398 - INFO - Post 1ge98kx is a duplicate, skipping
2024-10-30 05:22:45,398 - INFO - Checking post: 1geqscs - Score: 239 - URL: https://www.redgifs.com/watch/previousweequeensnake
2024-10-30 05:22:45,399 - INFO - Request URL: 'https://cosmossnoogram-centralus.documents.azure.com:443/dbs/ToDoList/colls/sent_posts/docs/'
Request method: 'POST'
Request headers:
    'Cache-Control': 'no-cache'
    'x-ms-version': 'REDACTED'
    'x-ms-documentdb-query-iscontinuationexpected': 'REDACTED'
    'x-ms-consistency-level': 'REDACTED'
    'x-ms-documentdb-isquery': 'REDACTED'
    'Content-Type': 'application/query+json'
    'x-ms-session-token': 'REDACTED'
    'x-ms-documentdb-query-enablecrosspartition': 'REDACTED'
    'x-ms-date': 'REDACTED'
    'authorization': 'REDACTED'
    'Accept': 'application/json'
    'x-ms-cosmos-correlated-activityid': 'REDACTED'
    'Content-Length': '107'
    'User-Agent': 'azsdk-python-cosmos/4.5.1 Python/3.12.4 (macOS-15.0.1-arm64-arm-64bit)'
A body is sent with the request
2024-10-30 05:22:45,477 - DEBUG - https://cosmossnoogram-centralus.documents.azure.com:443 "POST /dbs/ToDoList/colls/sent_posts/docs/ HTTP/11" 200 None
2024-10-30 05:22:45,478 - INFO - Response status: 200
Response headers:
    'Cache-Control': 'no-store, no-cache'
    'Pragma': 'no-cache'
    'Transfer-Encoding': 'chunked'
    'Content-Type': 'application/json'
    'Server': 'Microsoft-HTTPAPI/2.0'
    'Strict-Transport-Security': 'REDACTED'
    'x-ms-activity-id': 'REDACTED'
    'x-ms-last-state-change-utc': 'REDACTED'
    'x-ms-resource-quota': 'REDACTED'
    'x-ms-resource-usage': 'REDACTED'
    'x-ms-schemaversion': 'REDACTED'
    'lsn': 'REDACTED'
    'x-ms-item-count': 'REDACTED'
    'x-ms-request-charge': 'REDACTED'
    'x-ms-alt-content-path': 'REDACTED'
    'x-ms-content-path': 'REDACTED'
    'x-ms-documentdb-partitionkeyrangeid': 'REDACTED'
    'x-ms-xp-role': 'REDACTED'
    'x-ms-cosmos-query-execution-info': 'REDACTED'
    'x-ms-global-Committed-lsn': 'REDACTED'
    'x-ms-number-of-read-regions': 'REDACTED'
    'x-ms-transport-request-id': 'REDACTED'
    'x-ms-cosmos-llsn': 'REDACTED'
    'x-ms-session-token': 'REDACTED'
    'x-ms-request-duration-ms': 'REDACTED'
    'x-ms-serviceversion': 'REDACTED'
    'x-ms-cosmos-is-partition-key-delete-pending': 'REDACTED'
    'x-ms-cosmos-physical-partition-id': 'REDACTED'
    'x-ms-cosmos-internal-partition-id': 'REDACTED'
    'x-ms-gatewayversion': 'REDACTED'
    'Date': 'Wed, 30 Oct 2024 10:22:44 GMT'
2024-10-30 05:22:45,478 - INFO - Found video post: 1geqscs
2024-10-30 05:22:45,478 - DEBUG - Starting new HTTPS connection (1): api.redgifs.com:443
2024-10-30 05:22:45,585 - DEBUG - https://api.redgifs.com:443 "GET /v2/gifs/previousweequeensnake HTTP/11" 200 None
2024-10-30 05:22:45,589 - DEBUG - Starting new HTTPS connection (1): files.redgifs.com:443
2024-10-30 05:22:45,676 - DEBUG - https://files.redgifs.com:443 "GET /PreviousWeeQueensnake.mp4 HTTP/11" 200 50070206
2024-10-30 05:22:46,753 - INFO - Successfully downloaded media to downloads/videos/1geqscs_20241030_052245_2fd81a4e.mp4
2024-10-30 05:22:46,755 - DEBUG - Using selector: KqueueSelector
2024-10-30 05:22:46,755 - INFO - Attempting to send video to Telegram - Path: downloads/videos/1geqscs_20241030_052245_2fd81a4e.mp4
2024-10-30 05:22:46,755 - DEBUG - load_ssl_context verify=True cert=None trust_env=True http2=False
2024-10-30 05:22:46,756 - DEBUG - load_verify_locations cafile='/Users/joewilson/PythonProjects/Snoogram/venv/lib/python3.12/site-packages/certifi/cacert.pem'
2024-10-30 05:22:46,764 - DEBUG - load_ssl_context verify=True cert=None trust_env=True http2=False
2024-10-30 05:22:46,764 - DEBUG - load_verify_locations cafile='/Users/joewilson/PythonProjects/Snoogram/venv/lib/python3.12/site-packages/certifi/cacert.pem'
2024-10-30 05:22:46,771 - DEBUG - Entering: get_me
2024-10-30 05:22:46,772 - DEBUG - connect_tcp.started host='api.telegram.org' port=443 local_address=None timeout=5.0 socket_options=None
2024-10-30 05:22:46,897 - DEBUG - connect_tcp.complete return_value=<httpcore._backends.anyio.AnyIOStream object at 0x108a5fcb0>
2024-10-30 05:22:46,897 - DEBUG - start_tls.started ssl_context=<ssl.SSLContext object at 0x108e80fd0> server_hostname='api.telegram.org' timeout=5.0
2024-10-30 05:22:47,031 - DEBUG - start_tls.complete return_value=<httpcore._backends.anyio.AnyIOStream object at 0x108a5d4f0>
2024-10-30 05:22:47,031 - DEBUG - send_request_headers.started request=<Request [b'POST']>
2024-10-30 05:22:47,031 - DEBUG - send_request_headers.complete
2024-10-30 05:22:47,031 - DEBUG - send_request_body.started request=<Request [b'POST']>
2024-10-30 05:22:47,031 - DEBUG - send_request_body.complete
2024-10-30 05:22:47,031 - DEBUG - receive_response_headers.started request=<Request [b'POST']>
2024-10-30 05:22:47,154 - DEBUG - receive_response_headers.complete return_value=(b'HTTP/1.1', 200, b'OK', [(b'Server', b'nginx/1.18.0'), (b'Date', b'Wed, 30 Oct 2024 10:22:47 GMT'), (b'Content-Type', b'application/json'), (b'Content-Length', b'254'), (b'Connection', b'keep-alive'), (b'Strict-Transport-Security', b'max-age=31536000; includeSubDomains; preload'), (b'Access-Control-Allow-Origin', b'*'), (b'Access-Control-Allow-Methods', b'GET, POST, OPTIONS'), (b'Access-Control-Expose-Headers', b'Content-Length,Content-Type,Date,Server,Connection')])
2024-10-30 05:22:47,155 - INFO - HTTP Request: POST https://api.telegram.org/bot7867694458:AAEFLZjWPyd1p640mHENnBt479WRYfSavWg/getMe "HTTP/1.1 200 OK"
2024-10-30 05:22:47,155 - DEBUG - receive_response_body.started request=<Request [b'POST']>
2024-10-30 05:22:47,155 - DEBUG - receive_response_body.complete
2024-10-30 05:22:47,155 - DEBUG - response_closed.started
2024-10-30 05:22:47,155 - DEBUG - response_closed.complete
2024-10-30 05:22:47,155 - DEBUG - User(api_kwargs={'can_connect_to_business': False, 'has_main_web_app': False}, can_join_groups=True, can_read_all_group_messages=False, first_name='RedditBot', id=7867694458, is_bot=True, supports_inline_queries=False, username='RedditImage_bot')
2024-10-30 05:22:47,155 - DEBUG - Exiting: get_me
2024-10-30 05:22:47,155 - DEBUG - This Bot is already initialized.
2024-10-30 05:22:47,155 - DEBUG - Entering: send_video
2024-10-30 05:22:47,171 - DEBUG - send_request_headers.started request=<Request [b'POST']>
2024-10-30 05:22:47,171 - DEBUG - send_request_headers.complete
2024-10-30 05:22:47,171 - DEBUG - send_request_body.started request=<Request [b'POST']>
2024-10-30 05:22:50,662 - DEBUG - send_request_body.complete
2024-10-30 05:22:50,663 - DEBUG - receive_response_headers.started request=<Request [b'POST']>
2024-10-30 05:22:53,727 - DEBUG - receive_response_headers.complete return_value=(b'HTTP/1.1', 200, b'OK', [(b'Server', b'nginx/1.18.0'), (b'Date', b'Wed, 30 Oct 2024 10:22:53 GMT'), (b'Content-Type', b'application/json'), (b'Content-Length', b'600'), (b'Connection', b'keep-alive'), (b'Strict-Transport-Security', b'max-age=31536000; includeSubDomains; preload'), (b'Access-Control-Allow-Origin', b'*'), (b'Access-Control-Allow-Methods', b'GET, POST, OPTIONS'), (b'Access-Control-Expose-Headers', b'Content-Length,Content-Type,Date,Server,Connection')])
2024-10-30 05:22:53,729 - INFO - HTTP Request: POST https://api.telegram.org/bot7867694458:AAEFLZjWPyd1p640mHENnBt479WRYfSavWg/sendVideo "HTTP/1.1 200 OK"
2024-10-30 05:22:53,729 - DEBUG - receive_response_body.started request=<Request [b'POST']>
2024-10-30 05:22:53,730 - DEBUG - receive_response_body.complete
2024-10-30 05:22:53,730 - DEBUG - response_closed.started
2024-10-30 05:22:53,730 - DEBUG - response_closed.complete
2024-10-30 05:22:53,732 - DEBUG - Message(caption='From r/girlsfinishingthejob: I love when he covers my titties with his hot cum ðŸ¥°\nUpvotes: 239', channel_chat_created=False, chat=Chat(id=-1002490380283, title='Reddit_Pic_Stream', type=<ChatType.CHANNEL>), date=datetime.datetime(2024, 10, 30, 10, 22, 53, tzinfo=<UTC>), delete_chat_photo=False, group_chat_created=False, message_id=236, sender_chat=Chat(id=-1002490380283, title='Reddit_Pic_Stream', type=<ChatType.CHANNEL>), supergroup_chat_created=False, video=Video(duration=0, file_id='BAACAgEAAyEGAASUcC_7AAPsZyII_ccaYRgYxlAEWKZqWOhvg8EAArMEAAIZEBFFDpd1sv0RAuw2BA', file_name='1geqscs_20241030_052245_2fd81a4e.mp4', file_size=50070206, file_unique_id='AgADswQAAhkQEUU', height=320, mime_type='video/mp4', width=320))
2024-10-30 05:22:53,732 - DEBUG - Exiting: send_video
2024-10-30 05:22:53,733 - DEBUG - close.started
2024-10-30 05:22:53,733 - DEBUG - close.complete
2024-10-30 05:22:53,733 - DEBUG - This Bot is already shut down. Returning.
2024-10-30 05:22:53,733 - DEBUG - Shut down of Updater complete
2024-10-30 05:22:53,734 - INFO - Successfully sent video to Telegram
2024-10-30 05:22:53,737 - ERROR - Error processing subreddit girlsfinishingthejob: (sqlite3.OperationalError) attempt to write a readonly database
[SQL: INSERT INTO sent_post (post_id, subreddit_name, sent_at) VALUES (?, ?, ?)]
[parameters: ('1geqscs', 'girlsfinishingthejob', '2024-10-30 10:22:53.736342')]
(Background on this error at: https://sqlalche.me/e/20/e3q8)
2024-10-30 05:22:53,740 - ERROR - Job "send_to_telegram (trigger: interval[0:01:00], next run at: 2024-10-30 05:23:16 CDT)" raised an exception
Traceback (most recent call last):
  File "/Users/joewilson/PythonProjects/Snoogram/venv/lib/python3.12/site-packages/sqlalchemy/engine/base.py", line 1967, in _exec_single_context
    self.dialect.do_execute(
  File "/Users/joewilson/PythonProjects/Snoogram/venv/lib/python3.12/site-packages/sqlalchemy/engine/default.py", line 941, in do_execute
    cursor.execute(statement, parameters)
sqlite3.OperationalError: attempt to write a readonly database

The above exception was the direct cause of the following exception:

Traceback (most recent call last):
  File "/Users/joewilson/PythonProjects/Snoogram/venv/lib/python3.12/site-packages/apscheduler/executors/base.py", line 125, in run_job
    retval = job.func(*job.args, **job.kwargs)
             ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/Users/joewilson/PythonProjects/Snoogram/backend/app.py", line 265, in send_to_telegram
    # Update last_check in Cosmos DB
                ^^^^^^^^^^^^^^^^^^^^^
  File "/Users/joewilson/PythonProjects/Snoogram/backend/db_operations.py", line 100, in add_sent_post
  File "/Users/joewilson/PythonProjects/Snoogram/venv/lib/python3.12/site-packages/sqlalchemy/orm/scoping.py", line 597, in commit
    return self._proxied.commit()
           ^^^^^^^^^^^^^^^^^^^^^^
  File "/Users/joewilson/PythonProjects/Snoogram/venv/lib/python3.12/site-packages/sqlalchemy/orm/session.py", line 2028, in commit
    trans.commit(_to_root=True)
  File "<string>", line 2, in commit
  File "/Users/joewilson/PythonProjects/Snoogram/venv/lib/python3.12/site-packages/sqlalchemy/orm/state_changes.py", line 139, in _go
    ret_value = fn(self, *arg, **kw)
                ^^^^^^^^^^^^^^^^^^^^
  File "/Users/joewilson/PythonProjects/Snoogram/venv/lib/python3.12/site-packages/sqlalchemy/orm/session.py", line 1313, in commit
    self._prepare_impl()
  File "<string>", line 2, in _prepare_impl
  File "/Users/joewilson/PythonProjects/Snoogram/venv/lib/python3.12/site-packages/sqlalchemy/orm/state_changes.py", line 139, in _go
    ret_value = fn(self, *arg, **kw)
                ^^^^^^^^^^^^^^^^^^^^
  File "/Users/joewilson/PythonProjects/Snoogram/venv/lib/python3.12/site-packages/sqlalchemy/orm/session.py", line 1288, in _prepare_impl
    self.session.flush()
  File "/Users/joewilson/PythonProjects/Snoogram/venv/lib/python3.12/site-packages/sqlalchemy/orm/session.py", line 4352, in flush
    self._flush(objects)
  File "/Users/joewilson/PythonProjects/Snoogram/venv/lib/python3.12/site-packages/sqlalchemy/orm/session.py", line 4487, in _flush
    with util.safe_reraise():
  File "/Users/joewilson/PythonProjects/Snoogram/venv/lib/python3.12/site-packages/sqlalchemy/util/langhelpers.py", line 146, in __exit__
    raise exc_value.with_traceback(exc_tb)
  File "/Users/joewilson/PythonProjects/Snoogram/venv/lib/python3.12/site-packages/sqlalchemy/orm/session.py", line 4448, in _flush
    flush_context.execute()
  File "/Users/joewilson/PythonProjects/Snoogram/venv/lib/python3.12/site-packages/sqlalchemy/orm/unitofwork.py", line 466, in execute
    rec.execute(self)
  File "/Users/joewilson/PythonProjects/Snoogram/venv/lib/python3.12/site-packages/sqlalchemy/orm/unitofwork.py", line 642, in execute
    util.preloaded.orm_persistence.save_obj(
  File "/Users/joewilson/PythonProjects/Snoogram/venv/lib/python3.12/site-packages/sqlalchemy/orm/persistence.py", line 93, in save_obj
    _emit_insert_statements(
  File "/Users/joewilson/PythonProjects/Snoogram/venv/lib/python3.12/site-packages/sqlalchemy/orm/persistence.py", line 1233, in _emit_insert_statements
    result = connection.execute(
             ^^^^^^^^^^^^^^^^^^^
  File "/Users/joewilson/PythonProjects/Snoogram/venv/lib/python3.12/site-packages/sqlalchemy/engine/base.py", line 1418, in execute
    return meth(
           ^^^^^
  File "/Users/joewilson/PythonProjects/Snoogram/venv/lib/python3.12/site-packages/sqlalchemy/sql/elements.py", line 515, in _execute_on_connection
    return connection._execute_clauseelement(
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/Users/joewilson/PythonProjects/Snoogram/venv/lib/python3.12/site-packages/sqlalchemy/engine/base.py", line 1640, in _execute_clauseelement
    ret = self._execute_context(
          ^^^^^^^^^^^^^^^^^^^^^^
  File "/Users/joewilson/PythonProjects/Snoogram/venv/lib/python3.12/site-packages/sqlalchemy/engine/base.py", line 1846, in _execute_context
    return self._exec_single_context(
           ^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/Users/joewilson/PythonProjects/Snoogram/venv/lib/python3.12/site-packages/sqlalchemy/engine/base.py", line 1986, in _exec_single_context
    self._handle_dbapi_exception(
  File "/Users/joewilson/PythonProjects/Snoogram/venv/lib/python3.12/site-packages/sqlalchemy/engine/base.py", line 2355, in _handle_dbapi_exception
    raise sqlalchemy_exception.with_traceback(exc_info[2]) from e
  File "/Users/joewilson/PythonProjects/Snoogram/venv/lib/python3.12/site-packages/sqlalchemy/engine/base.py", line 1967, in _exec_single_context
    self.dialect.do_execute(
  File "/Users/joewilson/PythonProjects/Snoogram/venv/lib/python3.12/site-packages/sqlalchemy/engine/default.py", line 941, in do_execute
    cursor.execute(statement, parameters)
sqlalchemy.exc.OperationalError: (sqlite3.OperationalError) attempt to write a readonly database
[SQL: INSERT INTO sent_post (post_id, subreddit_name, sent_at) VALUES (?, ?, ?)]
[parameters: ('1geqscs', 'girlsfinishingthejob', '2024-10-30 10:22:53.736342')]
(Background on this error at: https://sqlalche.me/e/20/e3q8)
2024-10-30 05:23:16,976 - DEBUG - Looking for jobs to run
2024-10-30 05:23:16,978 - DEBUG - Next wakeup is due at 2024-10-30 05:24:16.969826-05:00 (in 59.991136 seconds)
2024-10-30 05:23:16,978 - INFO - Running job "send_to_telegram (trigger: interval[0:01:00], next run at: 2024-10-30 05:24:16 CDT)" (scheduled at 2024-10-30 05:23:16.969826-05:00)
2024-10-30 05:23:16,979 - INFO - Running job "send_to_telegram (trigger: interval[0:01:00], next run at: 2024-10-30 05:24:16 CDT)" (scheduled at 2024-10-30 05:23:16.970029-05:00)
2024-10-30 05:23:16,980 - INFO - Processing subreddit: girlsfinishingthejob
2024-10-30 05:23:16,980 - INFO - Processing subreddit: wifebutt
2024-10-30 05:23:16,980 - INFO - Fetching top posts of the day
2024-10-30 05:23:16,980 - INFO - Fetching top posts of the month
2024-10-30 05:23:16,982 - DEBUG - Fetching: GET https://oauth.reddit.com/r/girlsfinishingthejob/top at 1730283796.982053
2024-10-30 05:23:16,982 - DEBUG - Fetching: GET https://oauth.reddit.com/r/wifebutt/top at 1730283796.982316
2024-10-30 05:23:16,982 - DEBUG - Data: None
2024-10-30 05:23:16,982 - DEBUG - Data: None
2024-10-30 05:23:16,982 - DEBUG - Params: {'limit': 50, 'raw_json': 1, 't': 'day'}
2024-10-30 05:23:16,982 - DEBUG - Params: {'limit': 50, 'raw_json': 1, 't': 'month'}
2024-10-30 05:23:17,346 - DEBUG - https://oauth.reddit.com:443 "GET /r/girlsfinishingthejob/top?t=day&limit=50&raw_json=1 HTTP/11" 200 24210
2024-10-30 05:23:17,350 - DEBUG - Response: 200 (24210 bytes) (rst-0:rem-148.0:used-2 ratelimit) at 1730283797.350197
2024-10-30 05:23:17,431 - INFO - Checking post: 1gelyz1 - Score: 7096 - URL: https://www.redgifs.com/watch/uttersvelteamphibian
2024-10-30 05:23:17,435 - INFO - Request URL: 'https://cosmossnoogram-centralus.documents.azure.com:443/dbs/ToDoList/colls/sent_posts/docs/'
Request method: 'POST'
Request headers:
    'Cache-Control': 'no-cache'
    'x-ms-version': 'REDACTED'
    'x-ms-documentdb-query-iscontinuationexpected': 'REDACTED'
    'x-ms-consistency-level': 'REDACTED'
    'x-ms-documentdb-isquery': 'REDACTED'
    'Content-Type': 'application/query+json'
    'x-ms-session-token': 'REDACTED'
    'x-ms-documentdb-query-enablecrosspartition': 'REDACTED'
    'x-ms-date': 'REDACTED'
    'authorization': 'REDACTED'
    'Accept': 'application/json'
    'x-ms-cosmos-correlated-activityid': 'REDACTED'
    'Content-Length': '107'
    'User-Agent': 'azsdk-python-cosmos/4.5.1 Python/3.12.4 (macOS-15.0.1-arm64-arm-64bit)'
A body is sent with the request
2024-10-30 05:23:17,471 - DEBUG - https://cosmossnoogram-centralus.documents.azure.com:443 "POST /dbs/ToDoList/colls/sent_posts/docs/ HTTP/11" 200 None
2024-10-30 05:23:17,472 - INFO - Response status: 200
Response headers:
    'Cache-Control': 'no-store, no-cache'
    'Pragma': 'no-cache'
    'Transfer-Encoding': 'chunked'
    'Content-Type': 'application/json'
    'Server': 'Microsoft-HTTPAPI/2.0'
    'Strict-Transport-Security': 'REDACTED'
    'x-ms-activity-id': 'REDACTED'
    'x-ms-last-state-change-utc': 'REDACTED'
    'x-ms-resource-quota': 'REDACTED'
    'x-ms-resource-usage': 'REDACTED'
    'x-ms-schemaversion': 'REDACTED'
    'lsn': 'REDACTED'
    'x-ms-item-count': 'REDACTED'
    'x-ms-request-charge': 'REDACTED'
    'x-ms-alt-content-path': 'REDACTED'
    'x-ms-content-path': 'REDACTED'
    'x-ms-quorum-acked-lsn': 'REDACTED'
    'x-ms-current-write-quorum': 'REDACTED'
    'x-ms-current-replica-set-size': 'REDACTED'
    'x-ms-documentdb-partitionkeyrangeid': 'REDACTED'
    'x-ms-xp-role': 'REDACTED'
    'x-ms-cosmos-query-execution-info': 'REDACTED'
    'x-ms-global-Committed-lsn': 'REDACTED'
    'x-ms-number-of-read-regions': 'REDACTED'
    'x-ms-transport-request-id': 'REDACTED'
    'x-ms-cosmos-llsn': 'REDACTED'
    'x-ms-cosmos-quorum-acked-llsn': 'REDACTED'
    'x-ms-session-token': 'REDACTED'
    'x-ms-request-duration-ms': 'REDACTED'
    'x-ms-serviceversion': 'REDACTED'
    'x-ms-cosmos-is-partition-key-delete-pending': 'REDACTED'
    'x-ms-cosmos-physical-partition-id': 'REDACTED'
    'x-ms-cosmos-internal-partition-id': 'REDACTED'
    'x-ms-gatewayversion': 'REDACTED'
    'Date': 'Wed, 30 Oct 2024 10:23:16 GMT'
2024-10-30 05:23:17,472 - INFO - Found video post: 1gelyz1
2024-10-30 05:23:17,472 - DEBUG - Starting new HTTPS connection (1): api.redgifs.com:443
2024-10-30 05:23:17,566 - DEBUG - https://api.redgifs.com:443 "GET /v2/gifs/uttersvelteamphibian HTTP/11" 200 None
2024-10-30 05:23:17,568 - DEBUG - Starting new HTTPS connection (1): files.redgifs.com:443
2024-10-30 05:23:17,642 - DEBUG - https://files.redgifs.com:443 "GET /UtterSvelteAmphibian.mp4 HTTP/11" 200 42980012
2024-10-30 05:23:17,829 - DEBUG - https://oauth.reddit.com:443 "GET /r/wifebutt/top?t=month&limit=50&raw_json=1 HTTP/11" 200 49263
2024-10-30 05:23:17,861 - DEBUG - Response: 200 (49263 bytes) (rst-0:rem-149.0:used-1 ratelimit) at 1730283797.8615072
2024-10-30 05:23:17,868 - INFO - Checking post: 1g9w053 - Score: 5356 - URL: https://www.reddit.com/gallery/1g9w053
2024-10-30 05:23:17,870 - INFO - Request URL: 'https://cosmossnoogram-centralus.documents.azure.com:443/dbs/ToDoList/colls/sent_posts/docs/'
Request method: 'POST'
Request headers:
    'Cache-Control': 'no-cache'
    'x-ms-version': 'REDACTED'
    'x-ms-documentdb-query-iscontinuationexpected': 'REDACTED'
    'x-ms-consistency-level': 'REDACTED'
    'x-ms-documentdb-isquery': 'REDACTED'
    'Content-Type': 'application/query+json'
    'x-ms-session-token': 'REDACTED'
    'x-ms-documentdb-query-enablecrosspartition': 'REDACTED'
    'x-ms-date': 'REDACTED'
    'authorization': 'REDACTED'
    'Accept': 'application/json'
    'x-ms-cosmos-correlated-activityid': 'REDACTED'
    'Content-Length': '107'
    'User-Agent': 'azsdk-python-cosmos/4.5.1 Python/3.12.4 (macOS-15.0.1-arm64-arm-64bit)'
A body is sent with the request
2024-10-30 05:23:17,917 - DEBUG - https://cosmossnoogram-centralus.documents.azure.com:443 "POST /dbs/ToDoList/colls/sent_posts/docs/ HTTP/11" 200 None
2024-10-30 05:23:17,918 - INFO - Response status: 200
Response headers:
    'Cache-Control': 'no-store, no-cache'
    'Pragma': 'no-cache'
    'Transfer-Encoding': 'chunked'
    'Content-Type': 'application/json'
    'Server': 'Microsoft-HTTPAPI/2.0'
    'Strict-Transport-Security': 'REDACTED'
    'x-ms-activity-id': 'REDACTED'
    'x-ms-last-state-change-utc': 'REDACTED'
    'x-ms-resource-quota': 'REDACTED'
    'x-ms-resource-usage': 'REDACTED'
    'x-ms-schemaversion': 'REDACTED'
    'lsn': 'REDACTED'
    'x-ms-item-count': 'REDACTED'
    'x-ms-request-charge': 'REDACTED'
    'x-ms-alt-content-path': 'REDACTED'
    'x-ms-content-path': 'REDACTED'
    'x-ms-quorum-acked-lsn': 'REDACTED'
    'x-ms-current-write-quorum': 'REDACTED'
    'x-ms-current-replica-set-size': 'REDACTED'
    'x-ms-documentdb-partitionkeyrangeid': 'REDACTED'
    'x-ms-xp-role': 'REDACTED'
    'x-ms-cosmos-query-execution-info': 'REDACTED'
    'x-ms-global-Committed-lsn': 'REDACTED'
    'x-ms-number-of-read-regions': 'REDACTED'
    'x-ms-transport-request-id': 'REDACTED'
    'x-ms-cosmos-llsn': 'REDACTED'
    'x-ms-cosmos-quorum-acked-llsn': 'REDACTED'
    'x-ms-session-token': 'REDACTED'
    'x-ms-request-duration-ms': 'REDACTED'
    'x-ms-serviceversion': 'REDACTED'
    'x-ms-cosmos-is-partition-key-delete-pending': 'REDACTED'
    'x-ms-cosmos-physical-partition-id': 'REDACTED'
    'x-ms-cosmos-internal-partition-id': 'REDACTED'
    'x-ms-gatewayversion': 'REDACTED'
    'Date': 'Wed, 30 Oct 2024 10:23:17 GMT'
2024-10-30 05:23:17,918 - INFO - Post 1g9w053 is not an image or video post, skipping
2024-10-30 05:23:17,918 - INFO - Checking post: 1fv4cfc - Score: 4584 - URL: https://www.reddit.com/gallery/1fv4cfc
2024-10-30 05:23:17,919 - INFO - Request URL: 'https://cosmossnoogram-centralus.documents.azure.com:443/dbs/ToDoList/colls/sent_posts/docs/'
Request method: 'POST'
Request headers:
    'Cache-Control': 'no-cache'
    'x-ms-version': 'REDACTED'
    'x-ms-documentdb-query-iscontinuationexpected': 'REDACTED'
    'x-ms-consistency-level': 'REDACTED'
    'x-ms-documentdb-isquery': 'REDACTED'
    'Content-Type': 'application/query+json'
    'x-ms-session-token': 'REDACTED'
    'x-ms-documentdb-query-enablecrosspartition': 'REDACTED'
    'x-ms-date': 'REDACTED'
    'authorization': 'REDACTED'
    'Accept': 'application/json'
    'x-ms-cosmos-correlated-activityid': 'REDACTED'
    'Content-Length': '107'
    'User-Agent': 'azsdk-python-cosmos/4.5.1 Python/3.12.4 (macOS-15.0.1-arm64-arm-64bit)'
A body is sent with the request
2024-10-30 05:23:17,976 - DEBUG - https://cosmossnoogram-centralus.documents.azure.com:443 "POST /dbs/ToDoList/colls/sent_posts/docs/ HTTP/11" 200 None
2024-10-30 05:23:17,977 - INFO - Response status: 200
Response headers:
    'Cache-Control': 'no-store, no-cache'
    'Pragma': 'no-cache'
    'Transfer-Encoding': 'chunked'
    'Content-Type': 'application/json'
    'Server': 'Microsoft-HTTPAPI/2.0'
    'Strict-Transport-Security': 'REDACTED'
    'x-ms-activity-id': 'REDACTED'
    'x-ms-last-state-change-utc': 'REDACTED'
    'x-ms-resource-quota': 'REDACTED'
    'x-ms-resource-usage': 'REDACTED'
    'x-ms-schemaversion': 'REDACTED'
    'lsn': 'REDACTED'
    'x-ms-item-count': 'REDACTED'
    'x-ms-request-charge': 'REDACTED'
    'x-ms-alt-content-path': 'REDACTED'
    'x-ms-content-path': 'REDACTED'
    'x-ms-documentdb-partitionkeyrangeid': 'REDACTED'
    'x-ms-xp-role': 'REDACTED'
    'x-ms-cosmos-query-execution-info': 'REDACTED'
    'x-ms-global-Committed-lsn': 'REDACTED'
    'x-ms-number-of-read-regions': 'REDACTED'
    'x-ms-transport-request-id': 'REDACTED'
    'x-ms-cosmos-llsn': 'REDACTED'
    'x-ms-session-token': 'REDACTED'
    'x-ms-request-duration-ms': 'REDACTED'
    'x-ms-serviceversion': 'REDACTED'
    'x-ms-cosmos-is-partition-key-delete-pending': 'REDACTED'
    'x-ms-cosmos-physical-partition-id': 'REDACTED'
    'x-ms-cosmos-internal-partition-id': 'REDACTED'
    'x-ms-gatewayversion': 'REDACTED'
    'Date': 'Wed, 30 Oct 2024 10:23:17 GMT'
2024-10-30 05:23:17,977 - INFO - Post 1fv4cfc is not an image or video post, skipping
2024-10-30 05:23:17,978 - INFO - Checking post: 1ganrp0 - Score: 4211 - URL: https://i.redd.it/ezatz8645lwd1.jpeg
2024-10-30 05:23:17,979 - INFO - Request URL: 'https://cosmossnoogram-centralus.documents.azure.com:443/dbs/ToDoList/colls/sent_posts/docs/'
Request method: 'POST'
Request headers:
    'Cache-Control': 'no-cache'
    'x-ms-version': 'REDACTED'
    'x-ms-documentdb-query-iscontinuationexpected': 'REDACTED'
    'x-ms-consistency-level': 'REDACTED'
    'x-ms-documentdb-isquery': 'REDACTED'
    'Content-Type': 'application/query+json'
    'x-ms-session-token': 'REDACTED'
    'x-ms-documentdb-query-enablecrosspartition': 'REDACTED'
    'x-ms-date': 'REDACTED'
    'authorization': 'REDACTED'
    'Accept': 'application/json'
    'x-ms-cosmos-correlated-activityid': 'REDACTED'
    'Content-Length': '107'
    'User-Agent': 'azsdk-python-cosmos/4.5.1 Python/3.12.4 (macOS-15.0.1-arm64-arm-64bit)'
A body is sent with the request
2024-10-30 05:23:18,019 - DEBUG - https://cosmossnoogram-centralus.documents.azure.com:443 "POST /dbs/ToDoList/colls/sent_posts/docs/ HTTP/11" 200 None
2024-10-30 05:23:18,020 - INFO - Response status: 200
Response headers:
    'Cache-Control': 'no-store, no-cache'
    'Pragma': 'no-cache'
    'Transfer-Encoding': 'chunked'
    'Content-Type': 'application/json'
    'Server': 'Microsoft-HTTPAPI/2.0'
    'Strict-Transport-Security': 'REDACTED'
    'x-ms-activity-id': 'REDACTED'
    'x-ms-last-state-change-utc': 'REDACTED'
    'x-ms-resource-quota': 'REDACTED'
    'x-ms-resource-usage': 'REDACTED'
    'x-ms-schemaversion': 'REDACTED'
    'lsn': 'REDACTED'
    'x-ms-item-count': 'REDACTED'
    'x-ms-request-charge': 'REDACTED'
    'x-ms-alt-content-path': 'REDACTED'
    'x-ms-content-path': 'REDACTED'
    'x-ms-documentdb-partitionkeyrangeid': 'REDACTED'
    'x-ms-xp-role': 'REDACTED'
    'x-ms-cosmos-query-execution-info': 'REDACTED'
    'x-ms-global-Committed-lsn': 'REDACTED'
    'x-ms-number-of-read-regions': 'REDACTED'
    'x-ms-transport-request-id': 'REDACTED'
    'x-ms-cosmos-llsn': 'REDACTED'
    'x-ms-session-token': 'REDACTED'
    'x-ms-request-duration-ms': 'REDACTED'
    'x-ms-serviceversion': 'REDACTED'
    'x-ms-cosmos-is-partition-key-delete-pending': 'REDACTED'
    'x-ms-cosmos-physical-partition-id': 'REDACTED'
    'x-ms-cosmos-internal-partition-id': 'REDACTED'
    'x-ms-gatewayversion': 'REDACTED'
    'Date': 'Wed, 30 Oct 2024 10:23:17 GMT'
2024-10-30 05:23:18,020 - INFO - Post 1ganrp0 is a duplicate, skipping
2024-10-30 05:23:18,020 - INFO - Checking post: 1gdrcjt - Score: 4055 - URL: https://www.redgifs.com/watch/unrealisticdefinitebarebirdbat
2024-10-30 05:23:18,020 - INFO - Post 1gdrcjt is a duplicate, skipping
2024-10-30 05:23:18,020 - INFO - Checking post: 1g30sx1 - Score: 3958 - URL: https://www.redgifs.com/watch/hardwarlikesunbittern
2024-10-30 05:23:18,021 - INFO - Post 1g30sx1 is a duplicate, skipping
2024-10-30 05:23:18,021 - INFO - Checking post: 1fs7839 - Score: 3853 - URL: https://www.reddit.com/gallery/1fs7839
2024-10-30 05:23:18,022 - INFO - Request URL: 'https://cosmossnoogram-centralus.documents.azure.com:443/dbs/ToDoList/colls/sent_posts/docs/'
Request method: 'POST'
Request headers:
    'Cache-Control': 'no-cache'
    'x-ms-version': 'REDACTED'
    'x-ms-documentdb-query-iscontinuationexpected': 'REDACTED'
    'x-ms-consistency-level': 'REDACTED'
    'x-ms-documentdb-isquery': 'REDACTED'
    'Content-Type': 'application/query+json'
    'x-ms-session-token': 'REDACTED'
    'x-ms-documentdb-query-enablecrosspartition': 'REDACTED'
    'x-ms-date': 'REDACTED'
    'authorization': 'REDACTED'
    'Accept': 'application/json'
    'x-ms-cosmos-correlated-activityid': 'REDACTED'
    'Content-Length': '107'
    'User-Agent': 'azsdk-python-cosmos/4.5.1 Python/3.12.4 (macOS-15.0.1-arm64-arm-64bit)'
A body is sent with the request
2024-10-30 05:23:18,076 - DEBUG - https://cosmossnoogram-centralus.documents.azure.com:443 "POST /dbs/ToDoList/colls/sent_posts/docs/ HTTP/11" 200 None
2024-10-30 05:23:18,077 - INFO - Response status: 200
Response headers:
    'Cache-Control': 'no-store, no-cache'
    'Pragma': 'no-cache'
    'Transfer-Encoding': 'chunked'
    'Content-Type': 'application/json'
    'Server': 'Microsoft-HTTPAPI/2.0'
    'Strict-Transport-Security': 'REDACTED'
    'x-ms-activity-id': 'REDACTED'
    'x-ms-last-state-change-utc': 'REDACTED'
    'x-ms-resource-quota': 'REDACTED'
    'x-ms-resource-usage': 'REDACTED'
    'x-ms-schemaversion': 'REDACTED'
    'lsn': 'REDACTED'
    'x-ms-item-count': 'REDACTED'
    'x-ms-request-charge': 'REDACTED'
    'x-ms-alt-content-path': 'REDACTED'
    'x-ms-content-path': 'REDACTED'
    'x-ms-documentdb-partitionkeyrangeid': 'REDACTED'
    'x-ms-xp-role': 'REDACTED'
    'x-ms-cosmos-query-execution-info': 'REDACTED'
    'x-ms-global-Committed-lsn': 'REDACTED'
    'x-ms-number-of-read-regions': 'REDACTED'
    'x-ms-transport-request-id': 'REDACTED'
    'x-ms-cosmos-llsn': 'REDACTED'
    'x-ms-session-token': 'REDACTED'
    'x-ms-request-duration-ms': 'REDACTED'
    'x-ms-serviceversion': 'REDACTED'
    'x-ms-cosmos-is-partition-key-delete-pending': 'REDACTED'
    'x-ms-cosmos-physical-partition-id': 'REDACTED'
    'x-ms-cosmos-internal-partition-id': 'REDACTED'
    'x-ms-gatewayversion': 'REDACTED'
    'Date': 'Wed, 30 Oct 2024 10:23:17 GMT'
2024-10-30 05:23:18,077 - INFO - Post 1fs7839 is not an image or video post, skipping
2024-10-30 05:23:18,077 - INFO - Checking post: 1g2rse9 - Score: 3764 - URL: https://i.redd.it/gzxs1aeshjud1.png
2024-10-30 05:23:18,078 - INFO - Post 1g2rse9 is a duplicate, skipping
2024-10-30 05:23:18,078 - INFO - Checking post: 1ge9loz - Score: 3732 - URL: https://www.redgifs.com/watch/deadlygregariouswoodchuck
2024-10-30 05:23:18,078 - INFO - Post 1ge9loz is a duplicate, skipping
2024-10-30 05:23:18,078 - INFO - Checking post: 1g0e966 - Score: 3638 - URL: https://www.reddit.com/gallery/1g0e966
2024-10-30 05:23:18,079 - INFO - Request URL: 'https://cosmossnoogram-centralus.documents.azure.com:443/dbs/ToDoList/colls/sent_posts/docs/'
Request method: 'POST'
Request headers:
    'Cache-Control': 'no-cache'
    'x-ms-version': 'REDACTED'
    'x-ms-documentdb-query-iscontinuationexpected': 'REDACTED'
    'x-ms-consistency-level': 'REDACTED'
    'x-ms-documentdb-isquery': 'REDACTED'
    'Content-Type': 'application/query+json'
    'x-ms-session-token': 'REDACTED'
    'x-ms-documentdb-query-enablecrosspartition': 'REDACTED'
    'x-ms-date': 'REDACTED'
    'authorization': 'REDACTED'
    'Accept': 'application/json'
    'x-ms-cosmos-correlated-activityid': 'REDACTED'
    'Content-Length': '107'
    'User-Agent': 'azsdk-python-cosmos/4.5.1 Python/3.12.4 (macOS-15.0.1-arm64-arm-64bit)'
A body is sent with the request
2024-10-30 05:23:18,136 - DEBUG - https://cosmossnoogram-centralus.documents.azure.com:443 "POST /dbs/ToDoList/colls/sent_posts/docs/ HTTP/11" 200 None
2024-10-30 05:23:18,136 - INFO - Response status: 200
Response headers:
    'Cache-Control': 'no-store, no-cache'
    'Pragma': 'no-cache'
    'Transfer-Encoding': 'chunked'
    'Content-Type': 'application/json'
    'Server': 'Microsoft-HTTPAPI/2.0'
    'Strict-Transport-Security': 'REDACTED'
    'x-ms-activity-id': 'REDACTED'
    'x-ms-last-state-change-utc': 'REDACTED'
    'x-ms-resource-quota': 'REDACTED'
    'x-ms-resource-usage': 'REDACTED'
    'x-ms-schemaversion': 'REDACTED'
    'lsn': 'REDACTED'
    'x-ms-item-count': 'REDACTED'
    'x-ms-request-charge': 'REDACTED'
    'x-ms-alt-content-path': 'REDACTED'
    'x-ms-content-path': 'REDACTED'
    'x-ms-documentdb-partitionkeyrangeid': 'REDACTED'
    'x-ms-xp-role': 'REDACTED'
    'x-ms-cosmos-query-execution-info': 'REDACTED'
    'x-ms-global-Committed-lsn': 'REDACTED'
    'x-ms-number-of-read-regions': 'REDACTED'
    'x-ms-transport-request-id': 'REDACTED'
    'x-ms-cosmos-llsn': 'REDACTED'
    'x-ms-session-token': 'REDACTED'
    'x-ms-request-duration-ms': 'REDACTED'
    'x-ms-serviceversion': 'REDACTED'
    'x-ms-cosmos-is-partition-key-delete-pending': 'REDACTED'
    'x-ms-cosmos-physical-partition-id': 'REDACTED'
    'x-ms-cosmos-internal-partition-id': 'REDACTED'
    'x-ms-gatewayversion': 'REDACTED'
    'Date': 'Wed, 30 Oct 2024 10:23:17 GMT'
2024-10-30 05:23:18,136 - INFO - Post 1g0e966 is not an image or video post, skipping
2024-10-30 05:23:18,136 - INFO - Checking post: 1gckgcy - Score: 3397 - URL: https://i.redd.it/njd0mbyjl3xd1.jpeg
2024-10-30 05:23:18,137 - INFO - Post 1gckgcy is a duplicate, skipping
2024-10-30 05:23:18,137 - INFO - Checking post: 1fznoil - Score: 3337 - URL: https://i.redd.it/eruk3694dptd1.jpeg
2024-10-30 05:23:18,137 - INFO - Post 1fznoil is a duplicate, skipping
2024-10-30 05:23:18,137 - INFO - Checking post: 1g3dsj7 - Score: 3177 - URL: https://i.redd.it/cg9oigznmpud1.jpeg
2024-10-30 05:23:18,137 - INFO - Post 1g3dsj7 is a duplicate, skipping
2024-10-30 05:23:18,137 - INFO - Checking post: 1g4dx9i - Score: 3138 - URL: https://i.redd.it/5kv3c8f3lyud1.jpeg
2024-10-30 05:23:18,138 - INFO - Request URL: 'https://cosmossnoogram-centralus.documents.azure.com:443/dbs/ToDoList/colls/sent_posts/docs/'
Request method: 'POST'
Request headers:
    'Cache-Control': 'no-cache'
    'x-ms-version': 'REDACTED'
    'x-ms-documentdb-query-iscontinuationexpected': 'REDACTED'
    'x-ms-consistency-level': 'REDACTED'
    'x-ms-documentdb-isquery': 'REDACTED'
    'Content-Type': 'application/query+json'
    'x-ms-session-token': 'REDACTED'
    'x-ms-documentdb-query-enablecrosspartition': 'REDACTED'
    'x-ms-date': 'REDACTED'
    'authorization': 'REDACTED'
    'Accept': 'application/json'
    'x-ms-cosmos-correlated-activityid': 'REDACTED'
    'Content-Length': '107'
    'User-Agent': 'azsdk-python-cosmos/4.5.1 Python/3.12.4 (macOS-15.0.1-arm64-arm-64bit)'
A body is sent with the request
2024-10-30 05:23:18,193 - DEBUG - https://cosmossnoogram-centralus.documents.azure.com:443 "POST /dbs/ToDoList/colls/sent_posts/docs/ HTTP/11" 200 None
2024-10-30 05:23:18,193 - INFO - Response status: 200
Response headers:
    'Cache-Control': 'no-store, no-cache'
    'Pragma': 'no-cache'
    'Transfer-Encoding': 'chunked'
    'Content-Type': 'application/json'
    'Server': 'Microsoft-HTTPAPI/2.0'
    'Strict-Transport-Security': 'REDACTED'
    'x-ms-activity-id': 'REDACTED'
    'x-ms-last-state-change-utc': 'REDACTED'
    'x-ms-resource-quota': 'REDACTED'
    'x-ms-resource-usage': 'REDACTED'
    'x-ms-schemaversion': 'REDACTED'
    'lsn': 'REDACTED'
    'x-ms-item-count': 'REDACTED'
    'x-ms-request-charge': 'REDACTED'
    'x-ms-alt-content-path': 'REDACTED'
    'x-ms-content-path': 'REDACTED'
    'x-ms-quorum-acked-lsn': 'REDACTED'
    'x-ms-current-write-quorum': 'REDACTED'
    'x-ms-current-replica-set-size': 'REDACTED'
    'x-ms-documentdb-partitionkeyrangeid': 'REDACTED'
    'x-ms-xp-role': 'REDACTED'
    'x-ms-cosmos-query-execution-info': 'REDACTED'
    'x-ms-global-Committed-lsn': 'REDACTED'
    'x-ms-number-of-read-regions': 'REDACTED'
    'x-ms-transport-request-id': 'REDACTED'
    'x-ms-cosmos-llsn': 'REDACTED'
    'x-ms-cosmos-quorum-acked-llsn': 'REDACTED'
    'x-ms-session-token': 'REDACTED'
    'x-ms-request-duration-ms': 'REDACTED'
    'x-ms-serviceversion': 'REDACTED'
    'x-ms-cosmos-is-partition-key-delete-pending': 'REDACTED'
    'x-ms-cosmos-physical-partition-id': 'REDACTED'
    'x-ms-cosmos-internal-partition-id': 'REDACTED'
    'x-ms-gatewayversion': 'REDACTED'
    'Date': 'Wed, 30 Oct 2024 10:23:17 GMT'
2024-10-30 05:23:18,193 - INFO - Post 1g4dx9i is a duplicate, skipping
2024-10-30 05:23:18,193 - INFO - Checking post: 1ge2oko - Score: 3133 - URL: https://i.redd.it/3vk9ocmf6ixd1.jpeg
2024-10-30 05:23:18,193 - INFO - Request URL: 'https://cosmossnoogram-centralus.documents.azure.com:443/dbs/ToDoList/colls/sent_posts/docs/'
Request method: 'POST'
Request headers:
    'Cache-Control': 'no-cache'
    'x-ms-version': 'REDACTED'
    'x-ms-documentdb-query-iscontinuationexpected': 'REDACTED'
    'x-ms-consistency-level': 'REDACTED'
    'x-ms-documentdb-isquery': 'REDACTED'
    'Content-Type': 'application/query+json'
    'x-ms-session-token': 'REDACTED'
    'x-ms-documentdb-query-enablecrosspartition': 'REDACTED'
    'x-ms-date': 'REDACTED'
    'authorization': 'REDACTED'
    'Accept': 'application/json'
    'x-ms-cosmos-correlated-activityid': 'REDACTED'
    'Content-Length': '107'
    'User-Agent': 'azsdk-python-cosmos/4.5.1 Python/3.12.4 (macOS-15.0.1-arm64-arm-64bit)'
A body is sent with the request
2024-10-30 05:23:18,233 - DEBUG - https://cosmossnoogram-centralus.documents.azure.com:443 "POST /dbs/ToDoList/colls/sent_posts/docs/ HTTP/11" 200 None
2024-10-30 05:23:18,233 - INFO - Response status: 200
Response headers:
    'Cache-Control': 'no-store, no-cache'
    'Pragma': 'no-cache'
    'Transfer-Encoding': 'chunked'
    'Content-Type': 'application/json'
    'Server': 'Microsoft-HTTPAPI/2.0'
    'Strict-Transport-Security': 'REDACTED'
    'x-ms-activity-id': 'REDACTED'
    'x-ms-last-state-change-utc': 'REDACTED'
    'x-ms-resource-quota': 'REDACTED'
    'x-ms-resource-usage': 'REDACTED'
    'x-ms-schemaversion': 'REDACTED'
    'lsn': 'REDACTED'
    'x-ms-item-count': 'REDACTED'
    'x-ms-request-charge': 'REDACTED'
    'x-ms-alt-content-path': 'REDACTED'
    'x-ms-content-path': 'REDACTED'
    'x-ms-documentdb-partitionkeyrangeid': 'REDACTED'
    'x-ms-xp-role': 'REDACTED'
    'x-ms-cosmos-query-execution-info': 'REDACTED'
    'x-ms-global-Committed-lsn': 'REDACTED'
    'x-ms-number-of-read-regions': 'REDACTED'
    'x-ms-transport-request-id': 'REDACTED'
    'x-ms-cosmos-llsn': 'REDACTED'
    'x-ms-session-token': 'REDACTED'
    'x-ms-request-duration-ms': 'REDACTED'
    'x-ms-serviceversion': 'REDACTED'
    'x-ms-cosmos-is-partition-key-delete-pending': 'REDACTED'
    'x-ms-cosmos-physical-partition-id': 'REDACTED'
    'x-ms-cosmos-internal-partition-id': 'REDACTED'
    'x-ms-gatewayversion': 'REDACTED'
    'Date': 'Wed, 30 Oct 2024 10:23:17 GMT'
2024-10-30 05:23:18,233 - INFO - Found image post: 1ge2oko with URL: https://i.redd.it/3vk9ocmf6ixd1.jpeg
2024-10-30 05:23:18,234 - DEBUG - Starting new HTTPS connection (1): i.redd.it:443
2024-10-30 05:23:18,353 - DEBUG - https://i.redd.it:443 "GET /3vk9ocmf6ixd1.jpeg HTTP/11" 200 2942027
2024-10-30 05:23:18,524 - INFO - Successfully downloaded media to downloads/videos/1gelyz1_20241030_052317_ba5c8ead.mp4
2024-10-30 05:23:18,526 - DEBUG - Using selector: KqueueSelector
2024-10-30 05:23:18,526 - INFO - Attempting to send video to Telegram - Path: downloads/videos/1gelyz1_20241030_052317_ba5c8ead.mp4
2024-10-30 05:23:18,527 - DEBUG - load_ssl_context verify=True cert=None trust_env=True http2=False
2024-10-30 05:23:18,527 - DEBUG - load_verify_locations cafile='/Users/joewilson/PythonProjects/Snoogram/venv/lib/python3.12/site-packages/certifi/cacert.pem'
2024-10-30 05:23:18,536 - DEBUG - load_ssl_context verify=True cert=None trust_env=True http2=False
2024-10-30 05:23:18,536 - DEBUG - load_verify_locations cafile='/Users/joewilson/PythonProjects/Snoogram/venv/lib/python3.12/site-packages/certifi/cacert.pem'
2024-10-30 05:23:18,544 - DEBUG - Entering: get_me
2024-10-30 05:23:18,545 - DEBUG - connect_tcp.started host='api.telegram.org' port=443 local_address=None timeout=5.0 socket_options=None
2024-10-30 05:23:18,625 - INFO - Successfully downloaded media to downloads/pics/1ge2oko_20241030_052318_c0dedffe.jpeg
2024-10-30 05:23:18,626 - DEBUG - Using selector: KqueueSelector
2024-10-30 05:23:18,626 - INFO - Attempting to send photo to Telegram - Path: downloads/pics/1ge2oko_20241030_052318_c0dedffe.jpeg
2024-10-30 05:23:18,627 - DEBUG - Entering: get_me
2024-10-30 05:23:18,627 - DEBUG - connect_tcp.started host='api.telegram.org' port=443 local_address=None timeout=5.0 socket_options=None
2024-10-30 05:23:18,670 - DEBUG - connect_tcp.complete return_value=<httpcore._backends.anyio.AnyIOStream object at 0x108cec260>
2024-10-30 05:23:18,670 - DEBUG - start_tls.started ssl_context=<ssl.SSLContext object at 0x108ee4bd0> server_hostname='api.telegram.org' timeout=5.0
2024-10-30 05:23:18,752 - DEBUG - connect_tcp.complete return_value=<httpcore._backends.anyio.AnyIOStream object at 0x108d79bb0>
2024-10-30 05:23:18,753 - DEBUG - start_tls.started ssl_context=<ssl.SSLContext object at 0x108ee4bd0> server_hostname='api.telegram.org' timeout=5.0
2024-10-30 05:23:18,803 - DEBUG - start_tls.complete return_value=<httpcore._backends.anyio.AnyIOStream object at 0x108f34260>
2024-10-30 05:23:18,804 - DEBUG - send_request_headers.started request=<Request [b'POST']>
2024-10-30 05:23:18,805 - DEBUG - send_request_headers.complete
2024-10-30 05:23:18,805 - DEBUG - send_request_body.started request=<Request [b'POST']>
2024-10-30 05:23:18,805 - DEBUG - send_request_body.complete
2024-10-30 05:23:18,805 - DEBUG - receive_response_headers.started request=<Request [b'POST']>
2024-10-30 05:23:18,888 - DEBUG - start_tls.complete return_value=<httpcore._backends.anyio.AnyIOStream object at 0x108eada90>
2024-10-30 05:23:18,889 - DEBUG - send_request_headers.started request=<Request [b'POST']>
2024-10-30 05:23:18,889 - DEBUG - send_request_headers.complete
2024-10-30 05:23:18,890 - DEBUG - send_request_body.started request=<Request [b'POST']>
2024-10-30 05:23:18,890 - DEBUG - send_request_body.complete
2024-10-30 05:23:18,890 - DEBUG - receive_response_headers.started request=<Request [b'POST']>
2024-10-30 05:23:18,922 - DEBUG - receive_response_headers.complete return_value=(b'HTTP/1.1', 200, b'OK', [(b'Server', b'nginx/1.18.0'), (b'Date', b'Wed, 30 Oct 2024 10:23:18 GMT'), (b'Content-Type', b'application/json'), (b'Content-Length', b'254'), (b'Connection', b'keep-alive'), (b'Strict-Transport-Security', b'max-age=31536000; includeSubDomains; preload'), (b'Access-Control-Allow-Origin', b'*'), (b'Access-Control-Allow-Methods', b'GET, POST, OPTIONS'), (b'Access-Control-Expose-Headers', b'Content-Length,Content-Type,Date,Server,Connection')])
2024-10-30 05:23:18,923 - INFO - HTTP Request: POST https://api.telegram.org/bot7867694458:AAEFLZjWPyd1p640mHENnBt479WRYfSavWg/getMe "HTTP/1.1 200 OK"
2024-10-30 05:23:18,923 - DEBUG - receive_response_body.started request=<Request [b'POST']>
2024-10-30 05:23:18,923 - DEBUG - receive_response_body.complete
2024-10-30 05:23:18,923 - DEBUG - response_closed.started
2024-10-30 05:23:18,923 - DEBUG - response_closed.complete
2024-10-30 05:23:18,923 - DEBUG - User(api_kwargs={'can_connect_to_business': False, 'has_main_web_app': False}, can_join_groups=True, can_read_all_group_messages=False, first_name='RedditBot', id=7867694458, is_bot=True, supports_inline_queries=False, username='RedditImage_bot')
2024-10-30 05:23:18,923 - DEBUG - Exiting: get_me
2024-10-30 05:23:18,923 - DEBUG - This Bot is already initialized.
2024-10-30 05:23:18,924 - DEBUG - Entering: send_video
2024-10-30 05:23:18,934 - DEBUG - send_request_headers.started request=<Request [b'POST']>
2024-10-30 05:23:18,935 - DEBUG - send_request_headers.complete
2024-10-30 05:23:18,935 - DEBUG - send_request_body.started request=<Request [b'POST']>
2024-10-30 05:23:19,012 - DEBUG - receive_response_headers.complete return_value=(b'HTTP/1.1', 200, b'OK', [(b'Server', b'nginx/1.18.0'), (b'Date', b'Wed, 30 Oct 2024 10:23:18 GMT'), (b'Content-Type', b'application/json'), (b'Content-Length', b'254'), (b'Connection', b'keep-alive'), (b'Strict-Transport-Security', b'max-age=31536000; includeSubDomains; preload'), (b'Access-Control-Allow-Origin', b'*'), (b'Access-Control-Allow-Methods', b'GET, POST, OPTIONS'), (b'Access-Control-Expose-Headers', b'Content-Length,Content-Type,Date,Server,Connection')])
2024-10-30 05:23:19,012 - INFO - HTTP Request: POST https://api.telegram.org/bot7867694458:AAEFLZjWPyd1p640mHENnBt479WRYfSavWg/getMe "HTTP/1.1 200 OK"
2024-10-30 05:23:19,012 - DEBUG - receive_response_body.started request=<Request [b'POST']>
2024-10-30 05:23:19,012 - DEBUG - receive_response_body.complete
2024-10-30 05:23:19,012 - DEBUG - response_closed.started
2024-10-30 05:23:19,012 - DEBUG - response_closed.complete
2024-10-30 05:23:19,012 - DEBUG - User(api_kwargs={'can_connect_to_business': False, 'has_main_web_app': False}, can_join_groups=True, can_read_all_group_messages=False, first_name='RedditBot', id=7867694458, is_bot=True, supports_inline_queries=False, username='RedditImage_bot')
2024-10-30 05:23:19,013 - DEBUG - Exiting: get_me
2024-10-30 05:23:19,013 - DEBUG - This Updater is already initialized.
2024-10-30 05:23:19,013 - DEBUG - Entering: send_photo
2024-10-30 05:23:19,013 - DEBUG - send_request_headers.started request=<Request [b'POST']>
2024-10-30 05:23:19,014 - DEBUG - send_request_headers.complete
2024-10-30 05:23:19,014 - DEBUG - send_request_body.started request=<Request [b'POST']>
2024-10-30 05:23:20,233 - DEBUG - send_request_body.complete
2024-10-30 05:23:20,233 - DEBUG - receive_response_headers.started request=<Request [b'POST']>
2024-10-30 05:23:20,903 - DEBUG - receive_response_headers.complete return_value=(b'HTTP/1.1', 200, b'OK', [(b'Server', b'nginx/1.18.0'), (b'Date', b'Wed, 30 Oct 2024 10:23:20 GMT'), (b'Content-Type', b'application/json'), (b'Content-Length', b'1213'), (b'Connection', b'keep-alive'), (b'Strict-Transport-Security', b'max-age=31536000; includeSubDomains; preload'), (b'Access-Control-Allow-Origin', b'*'), (b'Access-Control-Allow-Methods', b'GET, POST, OPTIONS'), (b'Access-Control-Expose-Headers', b'Content-Length,Content-Type,Date,Server,Connection')])
2024-10-30 05:23:20,903 - INFO - HTTP Request: POST https://api.telegram.org/bot7867694458:AAEFLZjWPyd1p640mHENnBt479WRYfSavWg/sendPhoto "HTTP/1.1 200 OK"
2024-10-30 05:23:20,904 - DEBUG - receive_response_body.started request=<Request [b'POST']>
2024-10-30 05:23:20,904 - DEBUG - receive_response_body.complete
2024-10-30 05:23:20,904 - DEBUG - response_closed.started
2024-10-30 05:23:20,904 - DEBUG - response_closed.complete
2024-10-30 05:23:20,905 - DEBUG - Message(caption='From r/wifebutt: Fresh morning Wifebutt\nUpvotes: 3,133', channel_chat_created=False, chat=Chat(id=-1002490380283, title='Reddit_Pic_Stream', type=<ChatType.CHANNEL>), date=datetime.datetime(2024, 10, 30, 10, 23, 20, tzinfo=<UTC>), delete_chat_photo=False, group_chat_created=False, message_id=237, photo=(PhotoSize(file_id='AgACAgEAAyEGAASUcC_7AAOZZyH6uPME2ny7Ln2nX6zcZxEOxyoAAketMRsZEBFFtveidIwWN04BAAMCAANzAAM2BA', file_size=1506, file_unique_id='AQADR60xGxkQEUV4', height=90, width=67), PhotoSize(file_id='AgACAgEAAyEGAASUcC_7AAOZZyH6uPME2ny7Ln2nX6zcZxEOxyoAAketMRsZEBFFtveidIwWN04BAAMCAANtAAM2BA', file_size=23685, file_unique_id='AQADR60xGxkQEUVy', height=320, width=240), PhotoSize(file_id='AgACAgEAAyEGAASUcC_7AAOZZyH6uPME2ny7Ln2nX6zcZxEOxyoAAketMRsZEBFFtveidIwWN04BAAMCAAN4AAM2BA', file_size=120875, file_unique_id='AQADR60xGxkQEUV9', height=800, width=600), PhotoSize(file_id='AgACAgEAAyEGAASUcC_7AAOZZyH6uPME2ny7Ln2nX6zcZxEOxyoAAketMRsZEBFFtveidIwWN04BAAMCAAN5AAM2BA', file_size=286149, file_unique_id='AQADR60xGxkQEUV-', height=1280, width=960), PhotoSize(file_id='AgACAgEAAyEGAASUcC_7AAOZZyH6uPME2ny7Ln2nX6zcZxEOxyoAAketMRsZEBFFtveidIwWN04BAAMCAAN3AAM2BA', file_size=958648, file_unique_id='AQADR60xGxkQEUV8', height=2560, width=1920)), sender_chat=Chat(id=-1002490380283, title='Reddit_Pic_Stream', type=<ChatType.CHANNEL>), supergroup_chat_created=False)
2024-10-30 05:23:20,906 - DEBUG - Exiting: send_photo
2024-10-30 05:23:20,907 - DEBUG - close.started
2024-10-30 05:23:20,907 - DEBUG - close.complete
2024-10-30 05:23:20,907 - DEBUG - close.started
2024-10-30 05:23:20,907 - DEBUG - close.complete
2024-10-30 05:23:20,908 - DEBUG - This Bot is already shut down. Returning.
2024-10-30 05:23:20,908 - DEBUG - Shut down of Updater complete
2024-10-30 05:23:20,908 - INFO - Successfully sent photo to Telegram
2024-10-30 05:23:20,911 - ERROR - Error processing subreddit wifebutt: (sqlite3.OperationalError) attempt to write a readonly database
[SQL: INSERT INTO sent_post (post_id, subreddit_name, sent_at) VALUES (?, ?, ?)]
[parameters: ('1ge2oko', 'wifebutt', '2024-10-30 10:23:20.910326')]
(Background on this error at: https://sqlalche.me/e/20/e3q8)
2024-10-30 05:23:20,912 - ERROR - Job "send_to_telegram (trigger: interval[0:01:00], next run at: 2024-10-30 05:24:16 CDT)" raised an exception
Traceback (most recent call last):
  File "/Users/joewilson/PythonProjects/Snoogram/venv/lib/python3.12/site-packages/sqlalchemy/engine/base.py", line 1967, in _exec_single_context
    self.dialect.do_execute(
  File "/Users/joewilson/PythonProjects/Snoogram/venv/lib/python3.12/site-packages/sqlalchemy/engine/default.py", line 941, in do_execute
    cursor.execute(statement, parameters)
sqlite3.OperationalError: attempt to write a readonly database

The above exception was the direct cause of the following exception:

Traceback (most recent call last):
  File "/Users/joewilson/PythonProjects/Snoogram/venv/lib/python3.12/site-packages/apscheduler/executors/base.py", line 125, in run_job
    retval = job.func(*job.args, **job.kwargs)
             ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/Users/joewilson/PythonProjects/Snoogram/backend/app.py", line 265, in send_to_telegram
    # Update last_check in Cosmos DB
                ^^^^^^^^^^^^^^^^^^^^^
  File "/Users/joewilson/PythonProjects/Snoogram/backend/db_operations.py", line 100, in add_sent_post
  File "/Users/joewilson/PythonProjects/Snoogram/venv/lib/python3.12/site-packages/sqlalchemy/orm/scoping.py", line 597, in commit
    return self._proxied.commit()
           ^^^^^^^^^^^^^^^^^^^^^^
  File "/Users/joewilson/PythonProjects/Snoogram/venv/lib/python3.12/site-packages/sqlalchemy/orm/session.py", line 2028, in commit
    trans.commit(_to_root=True)
  File "<string>", line 2, in commit
  File "/Users/joewilson/PythonProjects/Snoogram/venv/lib/python3.12/site-packages/sqlalchemy/orm/state_changes.py", line 139, in _go
    ret_value = fn(self, *arg, **kw)
                ^^^^^^^^^^^^^^^^^^^^
  File "/Users/joewilson/PythonProjects/Snoogram/venv/lib/python3.12/site-packages/sqlalchemy/orm/session.py", line 1313, in commit
    self._prepare_impl()
  File "<string>", line 2, in _prepare_impl
  File "/Users/joewilson/PythonProjects/Snoogram/venv/lib/python3.12/site-packages/sqlalchemy/orm/state_changes.py", line 139, in _go
    ret_value = fn(self, *arg, **kw)
                ^^^^^^^^^^^^^^^^^^^^
  File "/Users/joewilson/PythonProjects/Snoogram/venv/lib/python3.12/site-packages/sqlalchemy/orm/session.py", line 1288, in _prepare_impl
    self.session.flush()
  File "/Users/joewilson/PythonProjects/Snoogram/venv/lib/python3.12/site-packages/sqlalchemy/orm/session.py", line 4352, in flush
    self._flush(objects)
  File "/Users/joewilson/PythonProjects/Snoogram/venv/lib/python3.12/site-packages/sqlalchemy/orm/session.py", line 4487, in _flush
    with util.safe_reraise():
  File "/Users/joewilson/PythonProjects/Snoogram/venv/lib/python3.12/site-packages/sqlalchemy/util/langhelpers.py", line 146, in __exit__
    raise exc_value.with_traceback(exc_tb)
  File "/Users/joewilson/PythonProjects/Snoogram/venv/lib/python3.12/site-packages/sqlalchemy/orm/session.py", line 4448, in _flush
    flush_context.execute()
  File "/Users/joewilson/PythonProjects/Snoogram/venv/lib/python3.12/site-packages/sqlalchemy/orm/unitofwork.py", line 466, in execute
    rec.execute(self)
  File "/Users/joewilson/PythonProjects/Snoogram/venv/lib/python3.12/site-packages/sqlalchemy/orm/unitofwork.py", line 642, in execute
    util.preloaded.orm_persistence.save_obj(
  File "/Users/joewilson/PythonProjects/Snoogram/venv/lib/python3.12/site-packages/sqlalchemy/orm/persistence.py", line 93, in save_obj
    _emit_insert_statements(
  File "/Users/joewilson/PythonProjects/Snoogram/venv/lib/python3.12/site-packages/sqlalchemy/orm/persistence.py", line 1233, in _emit_insert_statements
    result = connection.execute(
             ^^^^^^^^^^^^^^^^^^^
  File "/Users/joewilson/PythonProjects/Snoogram/venv/lib/python3.12/site-packages/sqlalchemy/engine/base.py", line 1418, in execute
    return meth(
           ^^^^^
  File "/Users/joewilson/PythonProjects/Snoogram/venv/lib/python3.12/site-packages/sqlalchemy/sql/elements.py", line 515, in _execute_on_connection
    return connection._execute_clauseelement(
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/Users/joewilson/PythonProjects/Snoogram/venv/lib/python3.12/site-packages/sqlalchemy/engine/base.py", line 1640, in _execute_clauseelement
    ret = self._execute_context(
          ^^^^^^^^^^^^^^^^^^^^^^
  File "/Users/joewilson/PythonProjects/Snoogram/venv/lib/python3.12/site-packages/sqlalchemy/engine/base.py", line 1846, in _execute_context
    return self._exec_single_context(
           ^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/Users/joewilson/PythonProjects/Snoogram/venv/lib/python3.12/site-packages/sqlalchemy/engine/base.py", line 1986, in _exec_single_context
    self._handle_dbapi_exception(
  File "/Users/joewilson/PythonProjects/Snoogram/venv/lib/python3.12/site-packages/sqlalchemy/engine/base.py", line 2355, in _handle_dbapi_exception
    raise sqlalchemy_exception.with_traceback(exc_info[2]) from e
  File "/Users/joewilson/PythonProjects/Snoogram/venv/lib/python3.12/site-packages/sqlalchemy/engine/base.py", line 1967, in _exec_single_context
    self.dialect.do_execute(
  File "/Users/joewilson/PythonProjects/Snoogram/venv/lib/python3.12/site-packages/sqlalchemy/engine/default.py", line 941, in do_execute
    cursor.execute(statement, parameters)
sqlalchemy.exc.OperationalError: (sqlite3.OperationalError) attempt to write a readonly database
[SQL: INSERT INTO sent_post (post_id, subreddit_name, sent_at) VALUES (?, ?, ?)]
[parameters: ('1ge2oko', 'wifebutt', '2024-10-30 10:23:20.910326')]
(Background on this error at: https://sqlalche.me/e/20/e3q8)
2024-10-30 05:23:38,944 - DEBUG - send_request_body.failed exception=WriteError(ClosedResourceError())
2024-10-30 05:23:38,945 - DEBUG - response_closed.started
2024-10-30 05:23:38,945 - DEBUG - response_closed.complete
2024-10-30 05:23:38,946 - DEBUG - This Application is already shut down. Returning.
2024-10-30 05:23:38,946 - ERROR - Failed to send video to Telegram: httpx.WriteError: 
2024-10-30 05:23:38,948 - ERROR - Error sending video post 1gelyz1: httpx.WriteError: 
2024-10-30 05:23:38,948 - INFO - Checking post: 1gejrnl - Score: 2584 - URL: https://v3.redgifs.com/watch/graydefensivepika
2024-10-30 05:23:38,953 - INFO - Request URL: 'https://cosmossnoogram-centralus.documents.azure.com:443/dbs/ToDoList/colls/sent_posts/docs/'
Request method: 'POST'
Request headers:
    'Cache-Control': 'no-cache'
    'x-ms-version': 'REDACTED'
    'x-ms-documentdb-query-iscontinuationexpected': 'REDACTED'
    'x-ms-consistency-level': 'REDACTED'
    'x-ms-documentdb-isquery': 'REDACTED'
    'Content-Type': 'application/query+json'
    'x-ms-session-token': 'REDACTED'
    'x-ms-documentdb-query-enablecrosspartition': 'REDACTED'
    'x-ms-date': 'REDACTED'
    'authorization': 'REDACTED'
    'Accept': 'application/json'
    'x-ms-cosmos-correlated-activityid': 'REDACTED'
    'Content-Length': '107'
    'User-Agent': 'azsdk-python-cosmos/4.5.1 Python/3.12.4 (macOS-15.0.1-arm64-arm-64bit)'
A body is sent with the request
2024-10-30 05:23:38,984 - DEBUG - https://cosmossnoogram-centralus.documents.azure.com:443 "POST /dbs/ToDoList/colls/sent_posts/docs/ HTTP/11" 200 None
2024-10-30 05:23:38,984 - INFO - Response status: 200
Response headers:
    'Cache-Control': 'no-store, no-cache'
    'Pragma': 'no-cache'
    'Transfer-Encoding': 'chunked'
    'Content-Type': 'application/json'
    'Server': 'Microsoft-HTTPAPI/2.0'
    'Strict-Transport-Security': 'REDACTED'
    'x-ms-activity-id': 'REDACTED'
    'x-ms-last-state-change-utc': 'REDACTED'
    'x-ms-resource-quota': 'REDACTED'
    'x-ms-resource-usage': 'REDACTED'
    'x-ms-schemaversion': 'REDACTED'
    'lsn': 'REDACTED'
    'x-ms-item-count': 'REDACTED'
    'x-ms-request-charge': 'REDACTED'
    'x-ms-alt-content-path': 'REDACTED'
    'x-ms-content-path': 'REDACTED'
    'x-ms-documentdb-partitionkeyrangeid': 'REDACTED'
    'x-ms-xp-role': 'REDACTED'
    'x-ms-cosmos-query-execution-info': 'REDACTED'
    'x-ms-global-Committed-lsn': 'REDACTED'
    'x-ms-number-of-read-regions': 'REDACTED'
    'x-ms-transport-request-id': 'REDACTED'
    'x-ms-cosmos-llsn': 'REDACTED'
    'x-ms-session-token': 'REDACTED'
    'x-ms-request-duration-ms': 'REDACTED'
    'x-ms-serviceversion': 'REDACTED'
    'x-ms-cosmos-is-partition-key-delete-pending': 'REDACTED'
    'x-ms-cosmos-physical-partition-id': 'REDACTED'
    'x-ms-cosmos-internal-partition-id': 'REDACTED'
    'x-ms-gatewayversion': 'REDACTED'
    'Date': 'Wed, 30 Oct 2024 10:23:38 GMT'
2024-10-30 05:23:38,984 - INFO - Post 1gejrnl is a duplicate, skipping
2024-10-30 05:23:38,985 - INFO - Checking post: 1gelw33 - Score: 2312 - URL: https://www.redgifs.com/watch/drydarkgraysable
2024-10-30 05:23:38,985 - INFO - Post 1gelw33 is a duplicate, skipping
2024-10-30 05:23:38,985 - INFO - Checking post: 1gevvp0 - Score: 1191 - URL: https://www.redgifs.com/watch/medicalplumhen
2024-10-30 05:23:38,985 - INFO - Post 1gevvp0 is a duplicate, skipping
2024-10-30 05:23:38,985 - INFO - Checking post: 1gesoj7 - Score: 751 - URL: https://www.redgifs.com/watch/lightgreytrickydragonfly
2024-10-30 05:23:38,986 - INFO - Post 1gesoj7 is a duplicate, skipping
2024-10-30 05:23:38,986 - INFO - Checking post: 1geuuqp - Score: 436 - URL: https://www.redgifs.com/watch/cheerfulbeigebagworm
2024-10-30 05:23:38,986 - INFO - Post 1geuuqp is a duplicate, skipping
2024-10-30 05:23:38,986 - INFO - Checking post: 1geakrb - Score: 401 - URL: https://www.redgifs.com/watch/illinformedthickgalapagoshawk
2024-10-30 05:23:38,986 - INFO - Post 1geakrb is a duplicate, skipping
2024-10-30 05:23:38,986 - INFO - Checking post: 1gerubz - Score: 363 - URL: https://v3.redgifs.com/watch/trickysquarepseudodynerusquadrisectus
2024-10-30 05:23:38,986 - INFO - Post 1gerubz is a duplicate, skipping
2024-10-30 05:23:38,986 - INFO - Checking post: 1getxhl - Score: 338 - URL: https://www.redgifs.com/watch/purpledemandingboaconstrictor
2024-10-30 05:23:38,987 - INFO - Post 1getxhl is a duplicate, skipping
2024-10-30 05:23:38,987 - INFO - Checking post: 1ge9gol - Score: 277 - URL: https://v3.redgifs.com/watch/circulardeeppinkamericanbulldog
2024-10-30 05:23:38,987 - INFO - Request URL: 'https://cosmossnoogram-centralus.documents.azure.com:443/dbs/ToDoList/colls/sent_posts/docs/'
Request method: 'POST'
Request headers:
    'Cache-Control': 'no-cache'
    'x-ms-version': 'REDACTED'
    'x-ms-documentdb-query-iscontinuationexpected': 'REDACTED'
    'x-ms-consistency-level': 'REDACTED'
    'x-ms-documentdb-isquery': 'REDACTED'
    'Content-Type': 'application/query+json'
    'x-ms-session-token': 'REDACTED'
    'x-ms-documentdb-query-enablecrosspartition': 'REDACTED'
    'x-ms-date': 'REDACTED'
    'authorization': 'REDACTED'
    'Accept': 'application/json'
    'x-ms-cosmos-correlated-activityid': 'REDACTED'
    'Content-Length': '107'
    'User-Agent': 'azsdk-python-cosmos/4.5.1 Python/3.12.4 (macOS-15.0.1-arm64-arm-64bit)'
A body is sent with the request
2024-10-30 05:23:39,018 - DEBUG - https://cosmossnoogram-centralus.documents.azure.com:443 "POST /dbs/ToDoList/colls/sent_posts/docs/ HTTP/11" 200 None
2024-10-30 05:23:39,018 - INFO - Response status: 200
Response headers:
    'Cache-Control': 'no-store, no-cache'
    'Pragma': 'no-cache'
    'Transfer-Encoding': 'chunked'
    'Content-Type': 'application/json'
    'Server': 'Microsoft-HTTPAPI/2.0'
    'Strict-Transport-Security': 'REDACTED'
    'x-ms-activity-id': 'REDACTED'
    'x-ms-last-state-change-utc': 'REDACTED'
    'x-ms-resource-quota': 'REDACTED'
    'x-ms-resource-usage': 'REDACTED'
    'x-ms-schemaversion': 'REDACTED'
    'lsn': 'REDACTED'
    'x-ms-item-count': 'REDACTED'
    'x-ms-request-charge': 'REDACTED'
    'x-ms-alt-content-path': 'REDACTED'
    'x-ms-content-path': 'REDACTED'
    'x-ms-documentdb-partitionkeyrangeid': 'REDACTED'
    'x-ms-xp-role': 'REDACTED'
    'x-ms-cosmos-query-execution-info': 'REDACTED'
    'x-ms-global-Committed-lsn': 'REDACTED'
    'x-ms-number-of-read-regions': 'REDACTED'
    'x-ms-transport-request-id': 'REDACTED'
    'x-ms-cosmos-llsn': 'REDACTED'
    'x-ms-session-token': 'REDACTED'
    'x-ms-request-duration-ms': 'REDACTED'
    'x-ms-serviceversion': 'REDACTED'
    'x-ms-cosmos-is-partition-key-delete-pending': 'REDACTED'
    'x-ms-cosmos-physical-partition-id': 'REDACTED'
    'x-ms-cosmos-internal-partition-id': 'REDACTED'
    'x-ms-gatewayversion': 'REDACTED'
    'Date': 'Wed, 30 Oct 2024 10:23:38 GMT'
2024-10-30 05:23:39,018 - INFO - Found video post: 1ge9gol
2024-10-30 05:23:39,019 - DEBUG - Starting new HTTPS connection (1): api.redgifs.com:443
2024-10-30 05:23:39,206 - DEBUG - https://api.redgifs.com:443 "GET /v2/gifs/circulardeeppinkamericanbulldog HTTP/11" 200 None
2024-10-30 05:23:39,210 - DEBUG - Starting new HTTPS connection (1): files.redgifs.com:443
2024-10-30 05:23:39,348 - DEBUG - https://files.redgifs.com:443 "GET /CircularDeeppinkAmericanbulldog.mp4 HTTP/11" 200 61415883
2024-10-30 05:23:41,308 - INFO - Successfully downloaded media to downloads/videos/1ge9gol_20241030_052339_fff8ab71.mp4
2024-10-30 05:23:41,310 - DEBUG - Using selector: KqueueSelector
2024-10-30 05:23:41,311 - INFO - Attempting to send video to Telegram - Path: downloads/videos/1ge9gol_20241030_052339_fff8ab71.mp4
2024-10-30 05:23:41,312 - DEBUG - load_ssl_context verify=True cert=None trust_env=True http2=False
2024-10-30 05:23:41,312 - DEBUG - load_verify_locations cafile='/Users/joewilson/PythonProjects/Snoogram/venv/lib/python3.12/site-packages/certifi/cacert.pem'
2024-10-30 05:23:41,320 - DEBUG - load_ssl_context verify=True cert=None trust_env=True http2=False
2024-10-30 05:23:41,320 - DEBUG - load_verify_locations cafile='/Users/joewilson/PythonProjects/Snoogram/venv/lib/python3.12/site-packages/certifi/cacert.pem'
2024-10-30 05:23:41,326 - DEBUG - Entering: get_me
2024-10-30 05:23:41,326 - DEBUG - connect_tcp.started host='api.telegram.org' port=443 local_address=None timeout=5.0 socket_options=None
2024-10-30 05:23:41,448 - DEBUG - connect_tcp.complete return_value=<httpcore._backends.anyio.AnyIOStream object at 0x108d9cb00>
2024-10-30 05:23:41,448 - DEBUG - start_tls.started ssl_context=<ssl.SSLContext object at 0x108f314d0> server_hostname='api.telegram.org' timeout=5.0
2024-10-30 05:23:41,587 - DEBUG - start_tls.complete return_value=<httpcore._backends.anyio.AnyIOStream object at 0x108d9de50>
2024-10-30 05:23:41,587 - DEBUG - send_request_headers.started request=<Request [b'POST']>
2024-10-30 05:23:41,588 - DEBUG - send_request_headers.complete
2024-10-30 05:23:41,588 - DEBUG - send_request_body.started request=<Request [b'POST']>
2024-10-30 05:23:41,588 - DEBUG - send_request_body.complete
2024-10-30 05:23:41,588 - DEBUG - receive_response_headers.started request=<Request [b'POST']>
2024-10-30 05:23:41,701 - DEBUG - receive_response_headers.complete return_value=(b'HTTP/1.1', 200, b'OK', [(b'Server', b'nginx/1.18.0'), (b'Date', b'Wed, 30 Oct 2024 10:23:41 GMT'), (b'Content-Type', b'application/json'), (b'Content-Length', b'254'), (b'Connection', b'keep-alive'), (b'Strict-Transport-Security', b'max-age=31536000; includeSubDomains; preload'), (b'Access-Control-Allow-Origin', b'*'), (b'Access-Control-Allow-Methods', b'GET, POST, OPTIONS'), (b'Access-Control-Expose-Headers', b'Content-Length,Content-Type,Date,Server,Connection')])
2024-10-30 05:23:41,702 - INFO - HTTP Request: POST https://api.telegram.org/bot7867694458:AAEFLZjWPyd1p640mHENnBt479WRYfSavWg/getMe "HTTP/1.1 200 OK"
2024-10-30 05:23:41,702 - DEBUG - receive_response_body.started request=<Request [b'POST']>
2024-10-30 05:23:41,702 - DEBUG - receive_response_body.complete
2024-10-30 05:23:41,702 - DEBUG - response_closed.started
2024-10-30 05:23:41,702 - DEBUG - response_closed.complete
2024-10-30 05:23:41,703 - DEBUG - User(api_kwargs={'can_connect_to_business': False, 'has_main_web_app': False}, can_join_groups=True, can_read_all_group_messages=False, first_name='RedditBot', id=7867694458, is_bot=True, supports_inline_queries=False, username='RedditImage_bot')
2024-10-30 05:23:41,704 - DEBUG - Exiting: get_me
2024-10-30 05:23:41,704 - DEBUG - This Bot is already initialized.
2024-10-30 05:23:41,704 - DEBUG - Entering: send_video
2024-10-30 05:23:41,731 - DEBUG - send_request_headers.started request=<Request [b'POST']>
2024-10-30 05:23:41,732 - DEBUG - send_request_headers.complete
2024-10-30 05:23:41,732 - DEBUG - send_request_body.started request=<Request [b'POST']>
2024-10-30 05:23:46,098 - DEBUG - send_request_body.complete
2024-10-30 05:23:46,098 - DEBUG - receive_response_headers.started request=<Request [b'POST']>
2024-10-30 05:23:46,099 - DEBUG - receive_response_headers.complete return_value=(b'HTTP/1.1', 413, b'Request Entity Too Large', [(b'Server', b'nginx/1.18.0'), (b'Date', b'Wed, 30 Oct 2024 10:23:41 GMT'), (b'Content-Type', b'application/json'), (b'Content-Length', b'70'), (b'Connection', b'close'), (b'Strict-Transport-Security', b'max-age=31536000; includeSubDomains; preload'), (b'Access-Control-Allow-Origin', b'*'), (b'Access-Control-Expose-Headers', b'Content-Length,Content-Type,Date,Server,Connection')])
2024-10-30 05:23:46,100 - INFO - HTTP Request: POST https://api.telegram.org/bot7867694458:AAEFLZjWPyd1p640mHENnBt479WRYfSavWg/sendVideo "HTTP/1.1 413 Request Entity Too Large"
2024-10-30 05:23:46,100 - DEBUG - receive_response_body.started request=<Request [b'POST']>
2024-10-30 05:23:46,100 - DEBUG - receive_response_body.complete
2024-10-30 05:23:46,100 - DEBUG - response_closed.started
2024-10-30 05:23:46,101 - DEBUG - response_closed.complete
2024-10-30 05:23:46,101 - DEBUG - This Bot is already shut down. Returning.
2024-10-30 05:23:46,101 - DEBUG - Shut down of Updater complete
2024-10-30 05:23:46,101 - ERROR - Failed to send video to Telegram: Request Entity Too Large (413)
2024-10-30 05:23:46,102 - ERROR - Error sending video post 1ge9gol: Request Entity Too Large (413)
2024-10-30 05:23:46,102 - INFO - Checking post: 1ge98kx - Score: 254 - URL: https://www.redgifs.com/watch/frontspecificspittlebug
2024-10-30 05:23:46,106 - INFO - Post 1ge98kx is a duplicate, skipping
2024-10-30 05:23:46,107 - INFO - Checking post: 1geqscs - Score: 242 - URL: https://www.redgifs.com/watch/previousweequeensnake
2024-10-30 05:23:46,108 - INFO - Request URL: 'https://cosmossnoogram-centralus.documents.azure.com:443/dbs/ToDoList/colls/sent_posts/docs/'
Request method: 'POST'
Request headers:
    'Cache-Control': 'no-cache'
    'x-ms-version': 'REDACTED'
    'x-ms-documentdb-query-iscontinuationexpected': 'REDACTED'
    'x-ms-consistency-level': 'REDACTED'
    'x-ms-documentdb-isquery': 'REDACTED'
    'Content-Type': 'application/query+json'
    'x-ms-session-token': 'REDACTED'
    'x-ms-documentdb-query-enablecrosspartition': 'REDACTED'
    'x-ms-date': 'REDACTED'
    'authorization': 'REDACTED'
    'Accept': 'application/json'
    'x-ms-cosmos-correlated-activityid': 'REDACTED'
    'Content-Length': '107'
    'User-Agent': 'azsdk-python-cosmos/4.5.1 Python/3.12.4 (macOS-15.0.1-arm64-arm-64bit)'
A body is sent with the request
2024-10-30 05:23:46,169 - DEBUG - https://cosmossnoogram-centralus.documents.azure.com:443 "POST /dbs/ToDoList/colls/sent_posts/docs/ HTTP/11" 200 None
2024-10-30 05:23:46,170 - INFO - Response status: 200
Response headers:
    'Cache-Control': 'no-store, no-cache'
    'Pragma': 'no-cache'
    'Transfer-Encoding': 'chunked'
    'Content-Type': 'application/json'
    'Server': 'Microsoft-HTTPAPI/2.0'
    'Strict-Transport-Security': 'REDACTED'
    'x-ms-activity-id': 'REDACTED'
    'x-ms-last-state-change-utc': 'REDACTED'
    'x-ms-resource-quota': 'REDACTED'
    'x-ms-resource-usage': 'REDACTED'
    'x-ms-schemaversion': 'REDACTED'
    'lsn': 'REDACTED'
    'x-ms-item-count': 'REDACTED'
    'x-ms-request-charge': 'REDACTED'
    'x-ms-alt-content-path': 'REDACTED'
    'x-ms-content-path': 'REDACTED'
    'x-ms-documentdb-partitionkeyrangeid': 'REDACTED'
    'x-ms-xp-role': 'REDACTED'
    'x-ms-cosmos-query-execution-info': 'REDACTED'
    'x-ms-global-Committed-lsn': 'REDACTED'
    'x-ms-number-of-read-regions': 'REDACTED'
    'x-ms-transport-request-id': 'REDACTED'
    'x-ms-cosmos-llsn': 'REDACTED'
    'x-ms-session-token': 'REDACTED'
    'x-ms-request-duration-ms': 'REDACTED'
    'x-ms-serviceversion': 'REDACTED'
    'x-ms-cosmos-is-partition-key-delete-pending': 'REDACTED'
    'x-ms-cosmos-physical-partition-id': 'REDACTED'
    'x-ms-cosmos-internal-partition-id': 'REDACTED'
    'x-ms-gatewayversion': 'REDACTED'
    'Date': 'Wed, 30 Oct 2024 10:23:45 GMT'
2024-10-30 05:23:46,170 - INFO - Found video post: 1geqscs
2024-10-30 05:23:46,171 - DEBUG - Starting new HTTPS connection (1): api.redgifs.com:443
2024-10-30 05:23:46,273 - DEBUG - https://api.redgifs.com:443 "GET /v2/gifs/previousweequeensnake HTTP/11" 200 None
2024-10-30 05:23:46,278 - DEBUG - Starting new HTTPS connection (1): files.redgifs.com:443
2024-10-30 05:23:46,348 - DEBUG - https://files.redgifs.com:443 "GET /PreviousWeeQueensnake.mp4 HTTP/11" 200 50070206
2024-10-30 05:23:47,932 - INFO - Successfully downloaded media to downloads/videos/1geqscs_20241030_052346_2fd81a4e.mp4
2024-10-30 05:23:47,933 - DEBUG - Using selector: KqueueSelector
2024-10-30 05:23:47,934 - INFO - Attempting to send video to Telegram - Path: downloads/videos/1geqscs_20241030_052346_2fd81a4e.mp4
2024-10-30 05:23:47,934 - DEBUG - load_ssl_context verify=True cert=None trust_env=True http2=False
2024-10-30 05:23:47,935 - DEBUG - load_verify_locations cafile='/Users/joewilson/PythonProjects/Snoogram/venv/lib/python3.12/site-packages/certifi/cacert.pem'
2024-10-30 05:23:47,944 - DEBUG - load_ssl_context verify=True cert=None trust_env=True http2=False
2024-10-30 05:23:47,944 - DEBUG - load_verify_locations cafile='/Users/joewilson/PythonProjects/Snoogram/venv/lib/python3.12/site-packages/certifi/cacert.pem'
2024-10-30 05:23:47,952 - DEBUG - Entering: get_me
2024-10-30 05:23:47,952 - DEBUG - connect_tcp.started host='api.telegram.org' port=443 local_address=None timeout=5.0 socket_options=None
2024-10-30 05:23:48,077 - DEBUG - connect_tcp.complete return_value=<httpcore._backends.anyio.AnyIOStream object at 0x108a61c70>
2024-10-30 05:23:48,077 - DEBUG - start_tls.started ssl_context=<ssl.SSLContext object at 0x108e572d0> server_hostname='api.telegram.org' timeout=5.0
2024-10-30 05:23:48,212 - DEBUG - start_tls.complete return_value=<httpcore._backends.anyio.AnyIOStream object at 0x108cec6b0>
2024-10-30 05:23:48,213 - DEBUG - send_request_headers.started request=<Request [b'POST']>
2024-10-30 05:23:48,213 - DEBUG - send_request_headers.complete
2024-10-30 05:23:48,214 - DEBUG - send_request_body.started request=<Request [b'POST']>
2024-10-30 05:23:48,214 - DEBUG - send_request_body.complete
2024-10-30 05:23:48,214 - DEBUG - receive_response_headers.started request=<Request [b'POST']>
2024-10-30 05:23:48,331 - DEBUG - receive_response_headers.complete return_value=(b'HTTP/1.1', 200, b'OK', [(b'Server', b'nginx/1.18.0'), (b'Date', b'Wed, 30 Oct 2024 10:23:48 GMT'), (b'Content-Type', b'application/json'), (b'Content-Length', b'254'), (b'Connection', b'keep-alive'), (b'Strict-Transport-Security', b'max-age=31536000; includeSubDomains; preload'), (b'Access-Control-Allow-Origin', b'*'), (b'Access-Control-Allow-Methods', b'GET, POST, OPTIONS'), (b'Access-Control-Expose-Headers', b'Content-Length,Content-Type,Date,Server,Connection')])
2024-10-30 05:23:48,332 - INFO - HTTP Request: POST https://api.telegram.org/bot7867694458:AAEFLZjWPyd1p640mHENnBt479WRYfSavWg/getMe "HTTP/1.1 200 OK"
2024-10-30 05:23:48,332 - DEBUG - receive_response_body.started request=<Request [b'POST']>
2024-10-30 05:23:48,332 - DEBUG - receive_response_body.complete
2024-10-30 05:23:48,333 - DEBUG - response_closed.started
2024-10-30 05:23:48,333 - DEBUG - response_closed.complete
2024-10-30 05:23:48,333 - DEBUG - User(api_kwargs={'can_connect_to_business': False, 'has_main_web_app': False}, can_join_groups=True, can_read_all_group_messages=False, first_name='RedditBot', id=7867694458, is_bot=True, supports_inline_queries=False, username='RedditImage_bot')
2024-10-30 05:23:48,333 - DEBUG - Exiting: get_me
2024-10-30 05:23:48,334 - DEBUG - This Bot is already initialized.
2024-10-30 05:23:48,334 - DEBUG - Entering: send_video
2024-10-30 05:23:48,353 - DEBUG - send_request_headers.started request=<Request [b'POST']>
2024-10-30 05:23:48,354 - DEBUG - send_request_headers.complete
2024-10-30 05:23:48,354 - DEBUG - send_request_body.started request=<Request [b'POST']>
2024-10-30 05:23:51,938 - DEBUG - send_request_body.complete
2024-10-30 05:23:51,939 - DEBUG - receive_response_headers.started request=<Request [b'POST']>
2024-10-30 05:23:54,548 - DEBUG - receive_response_headers.complete return_value=(b'HTTP/1.1', 200, b'OK', [(b'Server', b'nginx/1.18.0'), (b'Date', b'Wed, 30 Oct 2024 10:23:54 GMT'), (b'Content-Type', b'application/json'), (b'Content-Length', b'601'), (b'Connection', b'keep-alive'), (b'Strict-Transport-Security', b'max-age=31536000; includeSubDomains; preload'), (b'Access-Control-Allow-Origin', b'*'), (b'Access-Control-Allow-Methods', b'GET, POST, OPTIONS'), (b'Access-Control-Expose-Headers', b'Content-Length,Content-Type,Date,Server,Connection')])
2024-10-30 05:23:54,550 - INFO - HTTP Request: POST https://api.telegram.org/bot7867694458:AAEFLZjWPyd1p640mHENnBt479WRYfSavWg/sendVideo "HTTP/1.1 200 OK"
2024-10-30 05:23:54,551 - DEBUG - receive_response_body.started request=<Request [b'POST']>
2024-10-30 05:23:54,551 - DEBUG - receive_response_body.complete
2024-10-30 05:23:54,552 - DEBUG - response_closed.started
2024-10-30 05:23:54,552 - DEBUG - response_closed.complete
2024-10-30 05:23:54,554 - DEBUG - Message(caption='From r/girlsfinishingthejob: I love when he covers my titties with his hot cum ðŸ¥°\nUpvotes: 242', channel_chat_created=False, chat=Chat(id=-1002490380283, title='Reddit_Pic_Stream', type=<ChatType.CHANNEL>), date=datetime.datetime(2024, 10, 30, 10, 23, 54, tzinfo=<UTC>), delete_chat_photo=False, group_chat_created=False, message_id=238, sender_chat=Chat(id=-1002490380283, title='Reddit_Pic_Stream', type=<ChatType.CHANNEL>), supergroup_chat_created=False, video=Video(duration=0, file_id='BAACAgEAAyEGAASUcC_7AAPuZyIJOmM2KCvSnPild5MAAZ7v8vEWAAK0BAACGRARRa7x-GtmJ3mYNgQ', file_name='1geqscs_20241030_052346_2fd81a4e.mp4', file_size=50070206, file_unique_id='AgADtAQAAhkQEUU', height=320, mime_type='video/mp4', width=320))
2024-10-30 05:23:54,554 - DEBUG - Exiting: send_video
2024-10-30 05:23:54,555 - DEBUG - close.started
2024-10-30 05:23:54,555 - DEBUG - close.complete
2024-10-30 05:23:54,555 - DEBUG - This Bot is already shut down. Returning.
2024-10-30 05:23:54,555 - DEBUG - Shut down of Updater complete
2024-10-30 05:23:54,555 - INFO - Successfully sent video to Telegram
2024-10-30 05:23:54,560 - ERROR - Error processing subreddit girlsfinishingthejob: (sqlite3.OperationalError) attempt to write a readonly database
[SQL: INSERT INTO sent_post (post_id, subreddit_name, sent_at) VALUES (?, ?, ?)]
[parameters: ('1geqscs', 'girlsfinishingthejob', '2024-10-30 10:23:54.559341')]
(Background on this error at: https://sqlalche.me/e/20/e3q8)
2024-10-30 05:23:54,562 - ERROR - Job "send_to_telegram (trigger: interval[0:01:00], next run at: 2024-10-30 05:24:16 CDT)" raised an exception
Traceback (most recent call last):
  File "/Users/joewilson/PythonProjects/Snoogram/venv/lib/python3.12/site-packages/sqlalchemy/engine/base.py", line 1967, in _exec_single_context
    self.dialect.do_execute(
  File "/Users/joewilson/PythonProjects/Snoogram/venv/lib/python3.12/site-packages/sqlalchemy/engine/default.py", line 941, in do_execute
    cursor.execute(statement, parameters)
sqlite3.OperationalError: attempt to write a readonly database

The above exception was the direct cause of the following exception:

Traceback (most recent call last):
  File "/Users/joewilson/PythonProjects/Snoogram/venv/lib/python3.12/site-packages/apscheduler/executors/base.py", line 125, in run_job
    retval = job.func(*job.args, **job.kwargs)
             ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/Users/joewilson/PythonProjects/Snoogram/backend/app.py", line 265, in send_to_telegram
    # Update last_check in Cosmos DB
                ^^^^^^^^^^^^^^^^^^^^^
  File "/Users/joewilson/PythonProjects/Snoogram/backend/db_operations.py", line 100, in add_sent_post
  File "/Users/joewilson/PythonProjects/Snoogram/venv/lib/python3.12/site-packages/sqlalchemy/orm/scoping.py", line 597, in commit
    return self._proxied.commit()
           ^^^^^^^^^^^^^^^^^^^^^^
  File "/Users/joewilson/PythonProjects/Snoogram/venv/lib/python3.12/site-packages/sqlalchemy/orm/session.py", line 2028, in commit
    trans.commit(_to_root=True)
  File "<string>", line 2, in commit
  File "/Users/joewilson/PythonProjects/Snoogram/venv/lib/python3.12/site-packages/sqlalchemy/orm/state_changes.py", line 139, in _go
    ret_value = fn(self, *arg, **kw)
                ^^^^^^^^^^^^^^^^^^^^
  File "/Users/joewilson/PythonProjects/Snoogram/venv/lib/python3.12/site-packages/sqlalchemy/orm/session.py", line 1313, in commit
    self._prepare_impl()
  File "<string>", line 2, in _prepare_impl
  File "/Users/joewilson/PythonProjects/Snoogram/venv/lib/python3.12/site-packages/sqlalchemy/orm/state_changes.py", line 139, in _go
    ret_value = fn(self, *arg, **kw)
                ^^^^^^^^^^^^^^^^^^^^
  File "/Users/joewilson/PythonProjects/Snoogram/venv/lib/python3.12/site-packages/sqlalchemy/orm/session.py", line 1288, in _prepare_impl
    self.session.flush()
  File "/Users/joewilson/PythonProjects/Snoogram/venv/lib/python3.12/site-packages/sqlalchemy/orm/session.py", line 4352, in flush
    self._flush(objects)
  File "/Users/joewilson/PythonProjects/Snoogram/venv/lib/python3.12/site-packages/sqlalchemy/orm/session.py", line 4487, in _flush
    with util.safe_reraise():
  File "/Users/joewilson/PythonProjects/Snoogram/venv/lib/python3.12/site-packages/sqlalchemy/util/langhelpers.py", line 146, in __exit__
    raise exc_value.with_traceback(exc_tb)
  File "/Users/joewilson/PythonProjects/Snoogram/venv/lib/python3.12/site-packages/sqlalchemy/orm/session.py", line 4448, in _flush
    flush_context.execute()
  File "/Users/joewilson/PythonProjects/Snoogram/venv/lib/python3.12/site-packages/sqlalchemy/orm/unitofwork.py", line 466, in execute
    rec.execute(self)
  File "/Users/joewilson/PythonProjects/Snoogram/venv/lib/python3.12/site-packages/sqlalchemy/orm/unitofwork.py", line 642, in execute
    util.preloaded.orm_persistence.save_obj(
  File "/Users/joewilson/PythonProjects/Snoogram/venv/lib/python3.12/site-packages/sqlalchemy/orm/persistence.py", line 93, in save_obj
    _emit_insert_statements(
  File "/Users/joewilson/PythonProjects/Snoogram/venv/lib/python3.12/site-packages/sqlalchemy/orm/persistence.py", line 1233, in _emit_insert_statements
    result = connection.execute(
             ^^^^^^^^^^^^^^^^^^^
  File "/Users/joewilson/PythonProjects/Snoogram/venv/lib/python3.12/site-packages/sqlalchemy/engine/base.py", line 1418, in execute
    return meth(
           ^^^^^
  File "/Users/joewilson/PythonProjects/Snoogram/venv/lib/python3.12/site-packages/sqlalchemy/sql/elements.py", line 515, in _execute_on_connection
    return connection._execute_clauseelement(
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/Users/joewilson/PythonProjects/Snoogram/venv/lib/python3.12/site-packages/sqlalchemy/engine/base.py", line 1640, in _execute_clauseelement
    ret = self._execute_context(
          ^^^^^^^^^^^^^^^^^^^^^^
  File "/Users/joewilson/PythonProjects/Snoogram/venv/lib/python3.12/site-packages/sqlalchemy/engine/base.py", line 1846, in _execute_context
    return self._exec_single_context(
           ^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/Users/joewilson/PythonProjects/Snoogram/venv/lib/python3.12/site-packages/sqlalchemy/engine/base.py", line 1986, in _exec_single_context
    self._handle_dbapi_exception(
  File "/Users/joewilson/PythonProjects/Snoogram/venv/lib/python3.12/site-packages/sqlalchemy/engine/base.py", line 2355, in _handle_dbapi_exception
    raise sqlalchemy_exception.with_traceback(exc_info[2]) from e
  File "/Users/joewilson/PythonProjects/Snoogram/venv/lib/python3.12/site-packages/sqlalchemy/engine/base.py", line 1967, in _exec_single_context
    self.dialect.do_execute(
  File "/Users/joewilson/PythonProjects/Snoogram/venv/lib/python3.12/site-packages/sqlalchemy/engine/default.py", line 941, in do_execute
    cursor.execute(statement, parameters)
sqlalchemy.exc.OperationalError: (sqlite3.OperationalError) attempt to write a readonly database
[SQL: INSERT INTO sent_post (post_id, subreddit_name, sent_at) VALUES (?, ?, ?)]
[parameters: ('1geqscs', 'girlsfinishingthejob', '2024-10-30 10:23:54.559341')]
(Background on this error at: https://sqlalche.me/e/20/e3q8)
2024-10-30 05:24:16,975 - DEBUG - Looking for jobs to run
2024-10-30 05:24:16,978 - DEBUG - Next wakeup is due at 2024-10-30 05:25:16.969826-05:00 (in 59.991550 seconds)
2024-10-30 05:24:16,978 - INFO - Running job "send_to_telegram (trigger: interval[0:01:00], next run at: 2024-10-30 05:25:16 CDT)" (scheduled at 2024-10-30 05:24:16.969826-05:00)
2024-10-30 05:24:16,978 - INFO - Running job "send_to_telegram (trigger: interval[0:01:00], next run at: 2024-10-30 05:25:16 CDT)" (scheduled at 2024-10-30 05:24:16.970029-05:00)
2024-10-30 05:24:16,979 - INFO - Processing subreddit: girlsfinishingthejob
2024-10-30 05:24:16,979 - INFO - Processing subreddit: wifebutt
2024-10-30 05:24:16,979 - INFO - Fetching top posts of the day
2024-10-30 05:24:16,980 - INFO - Fetching top posts of the month
2024-10-30 05:24:16,981 - DEBUG - Fetching: GET https://oauth.reddit.com/r/girlsfinishingthejob/top at 1730283856.9813051
2024-10-30 05:24:16,981 - DEBUG - Fetching: GET https://oauth.reddit.com/r/wifebutt/top at 1730283856.981558
2024-10-30 05:24:16,981 - DEBUG - Data: None
2024-10-30 05:24:16,981 - DEBUG - Data: None
2024-10-30 05:24:16,982 - DEBUG - Params: {'limit': 50, 'raw_json': 1, 't': 'day'}
2024-10-30 05:24:16,982 - DEBUG - Params: {'limit': 50, 'raw_json': 1, 't': 'month'}
2024-10-30 05:24:17,317 - DEBUG - https://oauth.reddit.com:443 "GET /r/girlsfinishingthejob/top?t=day&limit=50&raw_json=1 HTTP/11" 200 24115
2024-10-30 05:24:17,323 - DEBUG - Response: 200 (24115 bytes) (rst-0:rem-148.0:used-2 ratelimit) at 1730283857.323807
2024-10-30 05:24:17,398 - INFO - Checking post: 1gelyz1 - Score: 7099 - URL: https://www.redgifs.com/watch/uttersvelteamphibian
2024-10-30 05:24:17,402 - INFO - Request URL: 'https://cosmossnoogram-centralus.documents.azure.com:443/dbs/ToDoList/colls/sent_posts/docs/'
Request method: 'POST'
Request headers:
    'Cache-Control': 'no-cache'
    'x-ms-version': 'REDACTED'
    'x-ms-documentdb-query-iscontinuationexpected': 'REDACTED'
    'x-ms-consistency-level': 'REDACTED'
    'x-ms-documentdb-isquery': 'REDACTED'
    'Content-Type': 'application/query+json'
    'x-ms-session-token': 'REDACTED'
    'x-ms-documentdb-query-enablecrosspartition': 'REDACTED'
    'x-ms-date': 'REDACTED'
    'authorization': 'REDACTED'
    'Accept': 'application/json'
    'x-ms-cosmos-correlated-activityid': 'REDACTED'
    'Content-Length': '107'
    'User-Agent': 'azsdk-python-cosmos/4.5.1 Python/3.12.4 (macOS-15.0.1-arm64-arm-64bit)'
A body is sent with the request
2024-10-30 05:24:17,432 - DEBUG - https://cosmossnoogram-centralus.documents.azure.com:443 "POST /dbs/ToDoList/colls/sent_posts/docs/ HTTP/11" 200 None
2024-10-30 05:24:17,433 - INFO - Response status: 200
Response headers:
    'Cache-Control': 'no-store, no-cache'
    'Pragma': 'no-cache'
    'Transfer-Encoding': 'chunked'
    'Content-Type': 'application/json'
    'Server': 'Microsoft-HTTPAPI/2.0'
    'Strict-Transport-Security': 'REDACTED'
    'x-ms-activity-id': 'REDACTED'
    'x-ms-last-state-change-utc': 'REDACTED'
    'x-ms-resource-quota': 'REDACTED'
    'x-ms-resource-usage': 'REDACTED'
    'x-ms-schemaversion': 'REDACTED'
    'lsn': 'REDACTED'
    'x-ms-item-count': 'REDACTED'
    'x-ms-request-charge': 'REDACTED'
    'x-ms-alt-content-path': 'REDACTED'
    'x-ms-content-path': 'REDACTED'
    'x-ms-documentdb-partitionkeyrangeid': 'REDACTED'
    'x-ms-xp-role': 'REDACTED'
    'x-ms-cosmos-query-execution-info': 'REDACTED'
    'x-ms-global-Committed-lsn': 'REDACTED'
    'x-ms-number-of-read-regions': 'REDACTED'
    'x-ms-transport-request-id': 'REDACTED'
    'x-ms-cosmos-llsn': 'REDACTED'
    'x-ms-session-token': 'REDACTED'
    'x-ms-request-duration-ms': 'REDACTED'
    'x-ms-serviceversion': 'REDACTED'
    'x-ms-cosmos-is-partition-key-delete-pending': 'REDACTED'
    'x-ms-cosmos-physical-partition-id': 'REDACTED'
    'x-ms-cosmos-internal-partition-id': 'REDACTED'
    'x-ms-gatewayversion': 'REDACTED'
    'Date': 'Wed, 30 Oct 2024 10:24:16 GMT'
2024-10-30 05:24:17,433 - INFO - Found video post: 1gelyz1
2024-10-30 05:24:17,433 - DEBUG - Starting new HTTPS connection (1): api.redgifs.com:443
2024-10-30 05:24:17,530 - DEBUG - https://api.redgifs.com:443 "GET /v2/gifs/uttersvelteamphibian HTTP/11" 200 None
2024-10-30 05:24:17,532 - DEBUG - Starting new HTTPS connection (1): files.redgifs.com:443
2024-10-30 05:24:17,596 - DEBUG - https://files.redgifs.com:443 "GET /UtterSvelteAmphibian.mp4 HTTP/11" 200 42980012
2024-10-30 05:24:18,130 - DEBUG - https://oauth.reddit.com:443 "GET /r/wifebutt/top?t=month&limit=50&raw_json=1 HTTP/11" 200 49220
2024-10-30 05:24:18,158 - DEBUG - Response: 200 (49220 bytes) (rst-0:rem-149.0:used-1 ratelimit) at 1730283858.158925
2024-10-30 05:24:18,163 - INFO - Checking post: 1g9w053 - Score: 5351 - URL: https://www.reddit.com/gallery/1g9w053
2024-10-30 05:24:18,163 - INFO - Request URL: 'https://cosmossnoogram-centralus.documents.azure.com:443/dbs/ToDoList/colls/sent_posts/docs/'
Request method: 'POST'
Request headers:
    'Cache-Control': 'no-cache'
    'x-ms-version': 'REDACTED'
    'x-ms-documentdb-query-iscontinuationexpected': 'REDACTED'
    'x-ms-consistency-level': 'REDACTED'
    'x-ms-documentdb-isquery': 'REDACTED'
    'Content-Type': 'application/query+json'
    'x-ms-session-token': 'REDACTED'
    'x-ms-documentdb-query-enablecrosspartition': 'REDACTED'
    'x-ms-date': 'REDACTED'
    'authorization': 'REDACTED'
    'Accept': 'application/json'
    'x-ms-cosmos-correlated-activityid': 'REDACTED'
    'Content-Length': '107'
    'User-Agent': 'azsdk-python-cosmos/4.5.1 Python/3.12.4 (macOS-15.0.1-arm64-arm-64bit)'
A body is sent with the request
2024-10-30 05:24:18,213 - DEBUG - https://cosmossnoogram-centralus.documents.azure.com:443 "POST /dbs/ToDoList/colls/sent_posts/docs/ HTTP/11" 200 None
2024-10-30 05:24:18,213 - INFO - Response status: 200
Response headers:
    'Cache-Control': 'no-store, no-cache'
    'Pragma': 'no-cache'
    'Transfer-Encoding': 'chunked'
    'Content-Type': 'application/json'
    'Server': 'Microsoft-HTTPAPI/2.0'
    'Strict-Transport-Security': 'REDACTED'
    'x-ms-activity-id': 'REDACTED'
    'x-ms-last-state-change-utc': 'REDACTED'
    'x-ms-resource-quota': 'REDACTED'
    'x-ms-resource-usage': 'REDACTED'
    'x-ms-schemaversion': 'REDACTED'
    'lsn': 'REDACTED'
    'x-ms-item-count': 'REDACTED'
    'x-ms-request-charge': 'REDACTED'
    'x-ms-alt-content-path': 'REDACTED'
    'x-ms-content-path': 'REDACTED'
    'x-ms-documentdb-partitionkeyrangeid': 'REDACTED'
    'x-ms-xp-role': 'REDACTED'
    'x-ms-cosmos-query-execution-info': 'REDACTED'
    'x-ms-global-Committed-lsn': 'REDACTED'
    'x-ms-number-of-read-regions': 'REDACTED'
    'x-ms-transport-request-id': 'REDACTED'
    'x-ms-cosmos-llsn': 'REDACTED'
    'x-ms-session-token': 'REDACTED'
    'x-ms-request-duration-ms': 'REDACTED'
    'x-ms-serviceversion': 'REDACTED'
    'x-ms-cosmos-is-partition-key-delete-pending': 'REDACTED'
    'x-ms-cosmos-physical-partition-id': 'REDACTED'
    'x-ms-cosmos-internal-partition-id': 'REDACTED'
    'x-ms-gatewayversion': 'REDACTED'
    'Date': 'Wed, 30 Oct 2024 10:24:17 GMT'
2024-10-30 05:24:18,213 - INFO - Post 1g9w053 is not an image or video post, skipping
2024-10-30 05:24:18,213 - INFO - Checking post: 1fv4cfc - Score: 4577 - URL: https://www.reddit.com/gallery/1fv4cfc
2024-10-30 05:24:18,214 - INFO - Request URL: 'https://cosmossnoogram-centralus.documents.azure.com:443/dbs/ToDoList/colls/sent_posts/docs/'
Request method: 'POST'
Request headers:
    'Cache-Control': 'no-cache'
    'x-ms-version': 'REDACTED'
    'x-ms-documentdb-query-iscontinuationexpected': 'REDACTED'
    'x-ms-consistency-level': 'REDACTED'
    'x-ms-documentdb-isquery': 'REDACTED'
    'Content-Type': 'application/query+json'
    'x-ms-session-token': 'REDACTED'
    'x-ms-documentdb-query-enablecrosspartition': 'REDACTED'
    'x-ms-date': 'REDACTED'
    'authorization': 'REDACTED'
    'Accept': 'application/json'
    'x-ms-cosmos-correlated-activityid': 'REDACTED'
    'Content-Length': '107'
    'User-Agent': 'azsdk-python-cosmos/4.5.1 Python/3.12.4 (macOS-15.0.1-arm64-arm-64bit)'
A body is sent with the request
2024-10-30 05:24:18,267 - DEBUG - https://cosmossnoogram-centralus.documents.azure.com:443 "POST /dbs/ToDoList/colls/sent_posts/docs/ HTTP/11" 200 None
2024-10-30 05:24:18,267 - INFO - Response status: 200
Response headers:
    'Cache-Control': 'no-store, no-cache'
    'Pragma': 'no-cache'
    'Transfer-Encoding': 'chunked'
    'Content-Type': 'application/json'
    'Server': 'Microsoft-HTTPAPI/2.0'
    'Strict-Transport-Security': 'REDACTED'
    'x-ms-activity-id': 'REDACTED'
    'x-ms-last-state-change-utc': 'REDACTED'
    'x-ms-resource-quota': 'REDACTED'
    'x-ms-resource-usage': 'REDACTED'
    'x-ms-schemaversion': 'REDACTED'
    'lsn': 'REDACTED'
    'x-ms-item-count': 'REDACTED'
    'x-ms-request-charge': 'REDACTED'
    'x-ms-alt-content-path': 'REDACTED'
    'x-ms-content-path': 'REDACTED'
    'x-ms-documentdb-partitionkeyrangeid': 'REDACTED'
    'x-ms-xp-role': 'REDACTED'
    'x-ms-cosmos-query-execution-info': 'REDACTED'
    'x-ms-global-Committed-lsn': 'REDACTED'
    'x-ms-number-of-read-regions': 'REDACTED'
    'x-ms-transport-request-id': 'REDACTED'
    'x-ms-cosmos-llsn': 'REDACTED'
    'x-ms-session-token': 'REDACTED'
    'x-ms-request-duration-ms': 'REDACTED'
    'x-ms-serviceversion': 'REDACTED'
    'x-ms-cosmos-is-partition-key-delete-pending': 'REDACTED'
    'x-ms-cosmos-physical-partition-id': 'REDACTED'
    'x-ms-cosmos-internal-partition-id': 'REDACTED'
    'x-ms-gatewayversion': 'REDACTED'
    'Date': 'Wed, 30 Oct 2024 10:24:17 GMT'
2024-10-30 05:24:18,267 - INFO - Post 1fv4cfc is not an image or video post, skipping
2024-10-30 05:24:18,267 - INFO - Checking post: 1ganrp0 - Score: 4202 - URL: https://i.redd.it/ezatz8645lwd1.jpeg
2024-10-30 05:24:18,268 - INFO - Request URL: 'https://cosmossnoogram-centralus.documents.azure.com:443/dbs/ToDoList/colls/sent_posts/docs/'
Request method: 'POST'
Request headers:
    'Cache-Control': 'no-cache'
    'x-ms-version': 'REDACTED'
    'x-ms-documentdb-query-iscontinuationexpected': 'REDACTED'
    'x-ms-consistency-level': 'REDACTED'
    'x-ms-documentdb-isquery': 'REDACTED'
    'Content-Type': 'application/query+json'
    'x-ms-session-token': 'REDACTED'
    'x-ms-documentdb-query-enablecrosspartition': 'REDACTED'
    'x-ms-date': 'REDACTED'
    'authorization': 'REDACTED'
    'Accept': 'application/json'
    'x-ms-cosmos-correlated-activityid': 'REDACTED'
    'Content-Length': '107'
    'User-Agent': 'azsdk-python-cosmos/4.5.1 Python/3.12.4 (macOS-15.0.1-arm64-arm-64bit)'
A body is sent with the request
2024-10-30 05:24:18,309 - DEBUG - https://cosmossnoogram-centralus.documents.azure.com:443 "POST /dbs/ToDoList/colls/sent_posts/docs/ HTTP/11" 200 None
2024-10-30 05:24:18,309 - INFO - Response status: 200
Response headers:
    'Cache-Control': 'no-store, no-cache'
    'Pragma': 'no-cache'
    'Transfer-Encoding': 'chunked'
    'Content-Type': 'application/json'
    'Server': 'Microsoft-HTTPAPI/2.0'
    'Strict-Transport-Security': 'REDACTED'
    'x-ms-activity-id': 'REDACTED'
    'x-ms-last-state-change-utc': 'REDACTED'
    'x-ms-resource-quota': 'REDACTED'
    'x-ms-resource-usage': 'REDACTED'
    'x-ms-schemaversion': 'REDACTED'
    'lsn': 'REDACTED'
    'x-ms-item-count': 'REDACTED'
    'x-ms-request-charge': 'REDACTED'
    'x-ms-alt-content-path': 'REDACTED'
    'x-ms-content-path': 'REDACTED'
    'x-ms-documentdb-partitionkeyrangeid': 'REDACTED'
    'x-ms-xp-role': 'REDACTED'
    'x-ms-cosmos-query-execution-info': 'REDACTED'
    'x-ms-global-Committed-lsn': 'REDACTED'
    'x-ms-number-of-read-regions': 'REDACTED'
    'x-ms-transport-request-id': 'REDACTED'
    'x-ms-cosmos-llsn': 'REDACTED'
    'x-ms-session-token': 'REDACTED'
    'x-ms-request-duration-ms': 'REDACTED'
    'x-ms-serviceversion': 'REDACTED'
    'x-ms-cosmos-is-partition-key-delete-pending': 'REDACTED'
    'x-ms-cosmos-physical-partition-id': 'REDACTED'
    'x-ms-cosmos-internal-partition-id': 'REDACTED'
    'x-ms-gatewayversion': 'REDACTED'
    'Date': 'Wed, 30 Oct 2024 10:24:17 GMT'
2024-10-30 05:24:18,309 - INFO - Post 1ganrp0 is a duplicate, skipping
2024-10-30 05:24:18,309 - INFO - Checking post: 1gdrcjt - Score: 4064 - URL: https://www.redgifs.com/watch/unrealisticdefinitebarebirdbat
2024-10-30 05:24:18,310 - INFO - Post 1gdrcjt is a duplicate, skipping
2024-10-30 05:24:18,310 - INFO - Checking post: 1g30sx1 - Score: 3958 - URL: https://www.redgifs.com/watch/hardwarlikesunbittern
2024-10-30 05:24:18,310 - INFO - Post 1g30sx1 is a duplicate, skipping
2024-10-30 05:24:18,310 - INFO - Checking post: 1fs7839 - Score: 3856 - URL: https://www.reddit.com/gallery/1fs7839
2024-10-30 05:24:18,311 - INFO - Request URL: 'https://cosmossnoogram-centralus.documents.azure.com:443/dbs/ToDoList/colls/sent_posts/docs/'
Request method: 'POST'
Request headers:
    'Cache-Control': 'no-cache'
    'x-ms-version': 'REDACTED'
    'x-ms-documentdb-query-iscontinuationexpected': 'REDACTED'
    'x-ms-consistency-level': 'REDACTED'
    'x-ms-documentdb-isquery': 'REDACTED'
    'Content-Type': 'application/query+json'
    'x-ms-session-token': 'REDACTED'
    'x-ms-documentdb-query-enablecrosspartition': 'REDACTED'
    'x-ms-date': 'REDACTED'
    'authorization': 'REDACTED'
    'Accept': 'application/json'
    'x-ms-cosmos-correlated-activityid': 'REDACTED'
    'Content-Length': '107'
    'User-Agent': 'azsdk-python-cosmos/4.5.1 Python/3.12.4 (macOS-15.0.1-arm64-arm-64bit)'
A body is sent with the request
2024-10-30 05:24:18,348 - DEBUG - https://cosmossnoogram-centralus.documents.azure.com:443 "POST /dbs/ToDoList/colls/sent_posts/docs/ HTTP/11" 200 None
2024-10-30 05:24:18,348 - INFO - Response status: 200
Response headers:
    'Cache-Control': 'no-store, no-cache'
    'Pragma': 'no-cache'
    'Transfer-Encoding': 'chunked'
    'Content-Type': 'application/json'
    'Server': 'Microsoft-HTTPAPI/2.0'
    'Strict-Transport-Security': 'REDACTED'
    'x-ms-activity-id': 'REDACTED'
    'x-ms-last-state-change-utc': 'REDACTED'
    'x-ms-resource-quota': 'REDACTED'
    'x-ms-resource-usage': 'REDACTED'
    'x-ms-schemaversion': 'REDACTED'
    'lsn': 'REDACTED'
    'x-ms-item-count': 'REDACTED'
    'x-ms-request-charge': 'REDACTED'
    'x-ms-alt-content-path': 'REDACTED'
    'x-ms-content-path': 'REDACTED'
    'x-ms-documentdb-partitionkeyrangeid': 'REDACTED'
    'x-ms-xp-role': 'REDACTED'
    'x-ms-cosmos-query-execution-info': 'REDACTED'
    'x-ms-global-Committed-lsn': 'REDACTED'
    'x-ms-number-of-read-regions': 'REDACTED'
    'x-ms-transport-request-id': 'REDACTED'
    'x-ms-cosmos-llsn': 'REDACTED'
    'x-ms-session-token': 'REDACTED'
    'x-ms-request-duration-ms': 'REDACTED'
    'x-ms-serviceversion': 'REDACTED'
    'x-ms-cosmos-is-partition-key-delete-pending': 'REDACTED'
    'x-ms-cosmos-physical-partition-id': 'REDACTED'
    'x-ms-cosmos-internal-partition-id': 'REDACTED'
    'x-ms-gatewayversion': 'REDACTED'
    'Date': 'Wed, 30 Oct 2024 10:24:17 GMT'
2024-10-30 05:24:18,348 - INFO - Post 1fs7839 is not an image or video post, skipping
2024-10-30 05:24:18,348 - INFO - Checking post: 1g2rse9 - Score: 3762 - URL: https://i.redd.it/gzxs1aeshjud1.png
2024-10-30 05:24:18,348 - INFO - Post 1g2rse9 is a duplicate, skipping
2024-10-30 05:24:18,348 - INFO - Checking post: 1ge9loz - Score: 3723 - URL: https://www.redgifs.com/watch/deadlygregariouswoodchuck
2024-10-30 05:24:18,349 - INFO - Post 1ge9loz is a duplicate, skipping
2024-10-30 05:24:18,349 - INFO - Checking post: 1g0e966 - Score: 3639 - URL: https://www.reddit.com/gallery/1g0e966
2024-10-30 05:24:18,349 - INFO - Request URL: 'https://cosmossnoogram-centralus.documents.azure.com:443/dbs/ToDoList/colls/sent_posts/docs/'
Request method: 'POST'
Request headers:
    'Cache-Control': 'no-cache'
    'x-ms-version': 'REDACTED'
    'x-ms-documentdb-query-iscontinuationexpected': 'REDACTED'
    'x-ms-consistency-level': 'REDACTED'
    'x-ms-documentdb-isquery': 'REDACTED'
    'Content-Type': 'application/query+json'
    'x-ms-session-token': 'REDACTED'
    'x-ms-documentdb-query-enablecrosspartition': 'REDACTED'
    'x-ms-date': 'REDACTED'
    'authorization': 'REDACTED'
    'Accept': 'application/json'
    'x-ms-cosmos-correlated-activityid': 'REDACTED'
    'Content-Length': '107'
    'User-Agent': 'azsdk-python-cosmos/4.5.1 Python/3.12.4 (macOS-15.0.1-arm64-arm-64bit)'
A body is sent with the request
2024-10-30 05:24:18,391 - DEBUG - https://cosmossnoogram-centralus.documents.azure.com:443 "POST /dbs/ToDoList/colls/sent_posts/docs/ HTTP/11" 200 None
2024-10-30 05:24:18,391 - INFO - Response status: 200
Response headers:
    'Cache-Control': 'no-store, no-cache'
    'Pragma': 'no-cache'
    'Transfer-Encoding': 'chunked'
    'Content-Type': 'application/json'
    'Server': 'Microsoft-HTTPAPI/2.0'
    'Strict-Transport-Security': 'REDACTED'
    'x-ms-activity-id': 'REDACTED'
    'x-ms-last-state-change-utc': 'REDACTED'
    'x-ms-resource-quota': 'REDACTED'
    'x-ms-resource-usage': 'REDACTED'
    'x-ms-schemaversion': 'REDACTED'
    'lsn': 'REDACTED'
    'x-ms-item-count': 'REDACTED'
    'x-ms-request-charge': 'REDACTED'
    'x-ms-alt-content-path': 'REDACTED'
    'x-ms-content-path': 'REDACTED'
    'x-ms-documentdb-partitionkeyrangeid': 'REDACTED'
    'x-ms-xp-role': 'REDACTED'
    'x-ms-cosmos-query-execution-info': 'REDACTED'
    'x-ms-global-Committed-lsn': 'REDACTED'
    'x-ms-number-of-read-regions': 'REDACTED'
    'x-ms-transport-request-id': 'REDACTED'
    'x-ms-cosmos-llsn': 'REDACTED'
    'x-ms-session-token': 'REDACTED'
    'x-ms-request-duration-ms': 'REDACTED'
    'x-ms-serviceversion': 'REDACTED'
    'x-ms-cosmos-is-partition-key-delete-pending': 'REDACTED'
    'x-ms-cosmos-physical-partition-id': 'REDACTED'
    'x-ms-cosmos-internal-partition-id': 'REDACTED'
    'x-ms-gatewayversion': 'REDACTED'
    'Date': 'Wed, 30 Oct 2024 10:24:17 GMT'
2024-10-30 05:24:18,391 - INFO - Post 1g0e966 is not an image or video post, skipping
2024-10-30 05:24:18,391 - INFO - Checking post: 1gckgcy - Score: 3394 - URL: https://i.redd.it/njd0mbyjl3xd1.jpeg
2024-10-30 05:24:18,391 - INFO - Post 1gckgcy is a duplicate, skipping
2024-10-30 05:24:18,391 - INFO - Checking post: 1fznoil - Score: 3335 - URL: https://i.redd.it/eruk3694dptd1.jpeg
2024-10-30 05:24:18,391 - INFO - Post 1fznoil is a duplicate, skipping
2024-10-30 05:24:18,392 - INFO - Checking post: 1g3dsj7 - Score: 3185 - URL: https://i.redd.it/cg9oigznmpud1.jpeg
2024-10-30 05:24:18,392 - INFO - Post 1g3dsj7 is a duplicate, skipping
2024-10-30 05:24:18,392 - INFO - Checking post: 1g4dx9i - Score: 3140 - URL: https://i.redd.it/5kv3c8f3lyud1.jpeg
2024-10-30 05:24:18,392 - INFO - Request URL: 'https://cosmossnoogram-centralus.documents.azure.com:443/dbs/ToDoList/colls/sent_posts/docs/'
Request method: 'POST'
Request headers:
    'Cache-Control': 'no-cache'
    'x-ms-version': 'REDACTED'
    'x-ms-documentdb-query-iscontinuationexpected': 'REDACTED'
    'x-ms-consistency-level': 'REDACTED'
    'x-ms-documentdb-isquery': 'REDACTED'
    'Content-Type': 'application/query+json'
    'x-ms-session-token': 'REDACTED'
    'x-ms-documentdb-query-enablecrosspartition': 'REDACTED'
    'x-ms-date': 'REDACTED'
    'authorization': 'REDACTED'
    'Accept': 'application/json'
    'x-ms-cosmos-correlated-activityid': 'REDACTED'
    'Content-Length': '107'
    'User-Agent': 'azsdk-python-cosmos/4.5.1 Python/3.12.4 (macOS-15.0.1-arm64-arm-64bit)'
A body is sent with the request
2024-10-30 05:24:18,428 - DEBUG - https://cosmossnoogram-centralus.documents.azure.com:443 "POST /dbs/ToDoList/colls/sent_posts/docs/ HTTP/11" 200 None
2024-10-30 05:24:18,429 - INFO - Response status: 200
Response headers:
    'Cache-Control': 'no-store, no-cache'
    'Pragma': 'no-cache'
    'Transfer-Encoding': 'chunked'
    'Content-Type': 'application/json'
    'Server': 'Microsoft-HTTPAPI/2.0'
    'Strict-Transport-Security': 'REDACTED'
    'x-ms-activity-id': 'REDACTED'
    'x-ms-last-state-change-utc': 'REDACTED'
    'x-ms-resource-quota': 'REDACTED'
    'x-ms-resource-usage': 'REDACTED'
    'x-ms-schemaversion': 'REDACTED'
    'lsn': 'REDACTED'
    'x-ms-item-count': 'REDACTED'
    'x-ms-request-charge': 'REDACTED'
    'x-ms-alt-content-path': 'REDACTED'
    'x-ms-content-path': 'REDACTED'
    'x-ms-documentdb-partitionkeyrangeid': 'REDACTED'
    'x-ms-xp-role': 'REDACTED'
    'x-ms-cosmos-query-execution-info': 'REDACTED'
    'x-ms-global-Committed-lsn': 'REDACTED'
    'x-ms-number-of-read-regions': 'REDACTED'
    'x-ms-transport-request-id': 'REDACTED'
    'x-ms-cosmos-llsn': 'REDACTED'
    'x-ms-session-token': 'REDACTED'
    'x-ms-request-duration-ms': 'REDACTED'
    'x-ms-serviceversion': 'REDACTED'
    'x-ms-cosmos-is-partition-key-delete-pending': 'REDACTED'
    'x-ms-cosmos-physical-partition-id': 'REDACTED'
    'x-ms-cosmos-internal-partition-id': 'REDACTED'
    'x-ms-gatewayversion': 'REDACTED'
    'Date': 'Wed, 30 Oct 2024 10:24:17 GMT'
2024-10-30 05:24:18,429 - INFO - Post 1g4dx9i is a duplicate, skipping
2024-10-30 05:24:18,430 - INFO - Checking post: 1ge2oko - Score: 3132 - URL: https://i.redd.it/3vk9ocmf6ixd1.jpeg
2024-10-30 05:24:18,431 - INFO - Request URL: 'https://cosmossnoogram-centralus.documents.azure.com:443/dbs/ToDoList/colls/sent_posts/docs/'
Request method: 'POST'
Request headers:
    'Cache-Control': 'no-cache'
    'x-ms-version': 'REDACTED'
    'x-ms-documentdb-query-iscontinuationexpected': 'REDACTED'
    'x-ms-consistency-level': 'REDACTED'
    'x-ms-documentdb-isquery': 'REDACTED'
    'Content-Type': 'application/query+json'
    'x-ms-session-token': 'REDACTED'
    'x-ms-documentdb-query-enablecrosspartition': 'REDACTED'
    'x-ms-date': 'REDACTED'
    'authorization': 'REDACTED'
    'Accept': 'application/json'
    'x-ms-cosmos-correlated-activityid': 'REDACTED'
    'Content-Length': '107'
    'User-Agent': 'azsdk-python-cosmos/4.5.1 Python/3.12.4 (macOS-15.0.1-arm64-arm-64bit)'
A body is sent with the request
2024-10-30 05:24:18,482 - DEBUG - https://cosmossnoogram-centralus.documents.azure.com:443 "POST /dbs/ToDoList/colls/sent_posts/docs/ HTTP/11" 200 None
2024-10-30 05:24:18,483 - INFO - Response status: 200
Response headers:
    'Cache-Control': 'no-store, no-cache'
    'Pragma': 'no-cache'
    'Transfer-Encoding': 'chunked'
    'Content-Type': 'application/json'
    'Server': 'Microsoft-HTTPAPI/2.0'
    'Strict-Transport-Security': 'REDACTED'
    'x-ms-activity-id': 'REDACTED'
    'x-ms-last-state-change-utc': 'REDACTED'
    'x-ms-resource-quota': 'REDACTED'
    'x-ms-resource-usage': 'REDACTED'
    'x-ms-schemaversion': 'REDACTED'
    'lsn': 'REDACTED'
    'x-ms-item-count': 'REDACTED'
    'x-ms-request-charge': 'REDACTED'
    'x-ms-alt-content-path': 'REDACTED'
    'x-ms-content-path': 'REDACTED'
    'x-ms-documentdb-partitionkeyrangeid': 'REDACTED'
    'x-ms-xp-role': 'REDACTED'
    'x-ms-cosmos-query-execution-info': 'REDACTED'
    'x-ms-global-Committed-lsn': 'REDACTED'
    'x-ms-number-of-read-regions': 'REDACTED'
    'x-ms-transport-request-id': 'REDACTED'
    'x-ms-cosmos-llsn': 'REDACTED'
    'x-ms-session-token': 'REDACTED'
    'x-ms-request-duration-ms': 'REDACTED'
    'x-ms-serviceversion': 'REDACTED'
    'x-ms-cosmos-is-partition-key-delete-pending': 'REDACTED'
    'x-ms-cosmos-physical-partition-id': 'REDACTED'
    'x-ms-cosmos-internal-partition-id': 'REDACTED'
    'x-ms-gatewayversion': 'REDACTED'
    'Date': 'Wed, 30 Oct 2024 10:24:17 GMT'
2024-10-30 05:24:18,484 - INFO - Found image post: 1ge2oko with URL: https://i.redd.it/3vk9ocmf6ixd1.jpeg
2024-10-30 05:24:18,487 - DEBUG - Starting new HTTPS connection (1): i.redd.it:443
2024-10-30 05:24:18,662 - DEBUG - https://i.redd.it:443 "GET /3vk9ocmf6ixd1.jpeg HTTP/11" 200 2942027
2024-10-30 05:24:18,870 - INFO - Successfully downloaded media to downloads/videos/1gelyz1_20241030_052417_ba5c8ead.mp4
2024-10-30 05:24:18,872 - DEBUG - Using selector: KqueueSelector
2024-10-30 05:24:18,873 - INFO - Attempting to send video to Telegram - Path: downloads/videos/1gelyz1_20241030_052417_ba5c8ead.mp4
2024-10-30 05:24:18,874 - DEBUG - load_ssl_context verify=True cert=None trust_env=True http2=False
2024-10-30 05:24:18,874 - DEBUG - load_verify_locations cafile='/Users/joewilson/PythonProjects/Snoogram/venv/lib/python3.12/site-packages/certifi/cacert.pem'
2024-10-30 05:24:18,883 - DEBUG - load_ssl_context verify=True cert=None trust_env=True http2=False
2024-10-30 05:24:18,883 - DEBUG - load_verify_locations cafile='/Users/joewilson/PythonProjects/Snoogram/venv/lib/python3.12/site-packages/certifi/cacert.pem'
2024-10-30 05:24:18,892 - DEBUG - Entering: get_me
2024-10-30 05:24:18,893 - DEBUG - connect_tcp.started host='api.telegram.org' port=443 local_address=None timeout=5.0 socket_options=None
2024-10-30 05:24:18,925 - INFO - Successfully downloaded media to downloads/pics/1ge2oko_20241030_052418_c0dedffe.jpeg
2024-10-30 05:24:18,926 - DEBUG - Using selector: KqueueSelector
2024-10-30 05:24:18,926 - INFO - Attempting to send photo to Telegram - Path: downloads/pics/1ge2oko_20241030_052418_c0dedffe.jpeg
2024-10-30 05:24:18,927 - DEBUG - Entering: get_me
2024-10-30 05:24:18,927 - DEBUG - connect_tcp.started host='api.telegram.org' port=443 local_address=None timeout=5.0 socket_options=None
2024-10-30 05:24:19,025 - DEBUG - connect_tcp.complete return_value=<httpcore._backends.anyio.AnyIOStream object at 0x108f37650>
2024-10-30 05:24:19,026 - DEBUG - start_tls.started ssl_context=<ssl.SSLContext object at 0x108afcad0> server_hostname='api.telegram.org' timeout=5.0
2024-10-30 05:24:19,051 - DEBUG - connect_tcp.complete return_value=<httpcore._backends.anyio.AnyIOStream object at 0x108d9e600>
2024-10-30 05:24:19,051 - DEBUG - start_tls.started ssl_context=<ssl.SSLContext object at 0x108afcad0> server_hostname='api.telegram.org' timeout=5.0
2024-10-30 05:24:19,163 - DEBUG - start_tls.complete return_value=<httpcore._backends.anyio.AnyIOStream object at 0x108dd1c10>
2024-10-30 05:24:19,163 - DEBUG - send_request_headers.started request=<Request [b'POST']>
2024-10-30 05:24:19,163 - DEBUG - send_request_headers.complete
2024-10-30 05:24:19,164 - DEBUG - send_request_body.started request=<Request [b'POST']>
2024-10-30 05:24:19,164 - DEBUG - send_request_body.complete
2024-10-30 05:24:19,164 - DEBUG - receive_response_headers.started request=<Request [b'POST']>
2024-10-30 05:24:19,183 - DEBUG - start_tls.complete return_value=<httpcore._backends.anyio.AnyIOStream object at 0x108a5f350>
2024-10-30 05:24:19,184 - DEBUG - send_request_headers.started request=<Request [b'POST']>
2024-10-30 05:24:19,184 - DEBUG - send_request_headers.complete
2024-10-30 05:24:19,184 - DEBUG - send_request_body.started request=<Request [b'POST']>
2024-10-30 05:24:19,184 - DEBUG - send_request_body.complete
2024-10-30 05:24:19,184 - DEBUG - receive_response_headers.started request=<Request [b'POST']>
2024-10-30 05:24:19,279 - DEBUG - receive_response_headers.complete return_value=(b'HTTP/1.1', 200, b'OK', [(b'Server', b'nginx/1.18.0'), (b'Date', b'Wed, 30 Oct 2024 10:24:19 GMT'), (b'Content-Type', b'application/json'), (b'Content-Length', b'254'), (b'Connection', b'keep-alive'), (b'Strict-Transport-Security', b'max-age=31536000; includeSubDomains; preload'), (b'Access-Control-Allow-Origin', b'*'), (b'Access-Control-Allow-Methods', b'GET, POST, OPTIONS'), (b'Access-Control-Expose-Headers', b'Content-Length,Content-Type,Date,Server,Connection')])
2024-10-30 05:24:19,279 - INFO - HTTP Request: POST https://api.telegram.org/bot7867694458:AAEFLZjWPyd1p640mHENnBt479WRYfSavWg/getMe "HTTP/1.1 200 OK"
2024-10-30 05:24:19,279 - DEBUG - receive_response_body.started request=<Request [b'POST']>
2024-10-30 05:24:19,280 - DEBUG - receive_response_body.complete
2024-10-30 05:24:19,280 - DEBUG - response_closed.started
2024-10-30 05:24:19,280 - DEBUG - response_closed.complete
2024-10-30 05:24:19,280 - DEBUG - User(api_kwargs={'can_connect_to_business': False, 'has_main_web_app': False}, can_join_groups=True, can_read_all_group_messages=False, first_name='RedditBot', id=7867694458, is_bot=True, supports_inline_queries=False, username='RedditImage_bot')
2024-10-30 05:24:19,280 - DEBUG - Exiting: get_me
2024-10-30 05:24:19,280 - DEBUG - This Bot is already initialized.
2024-10-30 05:24:19,280 - DEBUG - Entering: send_video
2024-10-30 05:24:19,288 - DEBUG - send_request_headers.started request=<Request [b'POST']>
2024-10-30 05:24:19,289 - DEBUG - send_request_headers.complete
2024-10-30 05:24:19,289 - DEBUG - send_request_body.started request=<Request [b'POST']>
2024-10-30 05:24:19,315 - DEBUG - receive_response_headers.complete return_value=(b'HTTP/1.1', 200, b'OK', [(b'Server', b'nginx/1.18.0'), (b'Date', b'Wed, 30 Oct 2024 10:24:19 GMT'), (b'Content-Type', b'application/json'), (b'Content-Length', b'254'), (b'Connection', b'keep-alive'), (b'Strict-Transport-Security', b'max-age=31536000; includeSubDomains; preload'), (b'Access-Control-Allow-Origin', b'*'), (b'Access-Control-Allow-Methods', b'GET, POST, OPTIONS'), (b'Access-Control-Expose-Headers', b'Content-Length,Content-Type,Date,Server,Connection')])
2024-10-30 05:24:19,315 - INFO - HTTP Request: POST https://api.telegram.org/bot7867694458:AAEFLZjWPyd1p640mHENnBt479WRYfSavWg/getMe "HTTP/1.1 200 OK"
2024-10-30 05:24:19,315 - DEBUG - receive_response_body.started request=<Request [b'POST']>
2024-10-30 05:24:19,315 - DEBUG - receive_response_body.complete
2024-10-30 05:24:19,316 - DEBUG - response_closed.started
2024-10-30 05:24:19,316 - DEBUG - response_closed.complete
2024-10-30 05:24:19,316 - DEBUG - User(api_kwargs={'can_connect_to_business': False, 'has_main_web_app': False}, can_join_groups=True, can_read_all_group_messages=False, first_name='RedditBot', id=7867694458, is_bot=True, supports_inline_queries=False, username='RedditImage_bot')
2024-10-30 05:24:19,316 - DEBUG - Exiting: get_me
2024-10-30 05:24:19,316 - DEBUG - This Updater is already initialized.
2024-10-30 05:24:19,316 - DEBUG - Entering: send_photo
2024-10-30 05:24:19,318 - DEBUG - send_request_headers.started request=<Request [b'POST']>
2024-10-30 05:24:19,318 - DEBUG - send_request_headers.complete
2024-10-30 05:24:19,318 - DEBUG - send_request_body.started request=<Request [b'POST']>
2024-10-30 05:24:20,359 - DEBUG - send_request_body.complete
2024-10-30 05:24:20,359 - DEBUG - receive_response_headers.started request=<Request [b'POST']>
2024-10-30 05:24:20,962 - DEBUG - receive_response_headers.complete return_value=(b'HTTP/1.1', 200, b'OK', [(b'Server', b'nginx/1.18.0'), (b'Date', b'Wed, 30 Oct 2024 10:24:20 GMT'), (b'Content-Type', b'application/json'), (b'Content-Length', b'1213'), (b'Connection', b'keep-alive'), (b'Strict-Transport-Security', b'max-age=31536000; includeSubDomains; preload'), (b'Access-Control-Allow-Origin', b'*'), (b'Access-Control-Allow-Methods', b'GET, POST, OPTIONS'), (b'Access-Control-Expose-Headers', b'Content-Length,Content-Type,Date,Server,Connection')])
2024-10-30 05:24:20,963 - INFO - HTTP Request: POST https://api.telegram.org/bot7867694458:AAEFLZjWPyd1p640mHENnBt479WRYfSavWg/sendPhoto "HTTP/1.1 200 OK"
2024-10-30 05:24:20,963 - DEBUG - receive_response_body.started request=<Request [b'POST']>
2024-10-30 05:24:20,964 - DEBUG - receive_response_body.complete
2024-10-30 05:24:20,964 - DEBUG - response_closed.started
2024-10-30 05:24:20,964 - DEBUG - response_closed.complete
2024-10-30 05:24:20,966 - DEBUG - Message(caption='From r/wifebutt: Fresh morning Wifebutt\nUpvotes: 3,132', channel_chat_created=False, chat=Chat(id=-1002490380283, title='Reddit_Pic_Stream', type=<ChatType.CHANNEL>), date=datetime.datetime(2024, 10, 30, 10, 24, 20, tzinfo=<UTC>), delete_chat_photo=False, group_chat_created=False, message_id=239, photo=(PhotoSize(file_id='AgACAgEAAyEGAASUcC_7AAOZZyH6uPME2ny7Ln2nX6zcZxEOxyoAAketMRsZEBFFtveidIwWN04BAAMCAANzAAM2BA', file_size=1506, file_unique_id='AQADR60xGxkQEUV4', height=90, width=67), PhotoSize(file_id='AgACAgEAAyEGAASUcC_7AAOZZyH6uPME2ny7Ln2nX6zcZxEOxyoAAketMRsZEBFFtveidIwWN04BAAMCAANtAAM2BA', file_size=23685, file_unique_id='AQADR60xGxkQEUVy', height=320, width=240), PhotoSize(file_id='AgACAgEAAyEGAASUcC_7AAOZZyH6uPME2ny7Ln2nX6zcZxEOxyoAAketMRsZEBFFtveidIwWN04BAAMCAAN4AAM2BA', file_size=120875, file_unique_id='AQADR60xGxkQEUV9', height=800, width=600), PhotoSize(file_id='AgACAgEAAyEGAASUcC_7AAOZZyH6uPME2ny7Ln2nX6zcZxEOxyoAAketMRsZEBFFtveidIwWN04BAAMCAAN5AAM2BA', file_size=286149, file_unique_id='AQADR60xGxkQEUV-', height=1280, width=960), PhotoSize(file_id='AgACAgEAAyEGAASUcC_7AAOZZyH6uPME2ny7Ln2nX6zcZxEOxyoAAketMRsZEBFFtveidIwWN04BAAMCAAN3AAM2BA', file_size=958648, file_unique_id='AQADR60xGxkQEUV8', height=2560, width=1920)), sender_chat=Chat(id=-1002490380283, title='Reddit_Pic_Stream', type=<ChatType.CHANNEL>), supergroup_chat_created=False)
2024-10-30 05:24:20,966 - DEBUG - Exiting: send_photo
2024-10-30 05:24:20,967 - DEBUG - close.started
2024-10-30 05:24:20,967 - DEBUG - close.complete
2024-10-30 05:24:20,967 - DEBUG - close.started
2024-10-30 05:24:20,968 - DEBUG - close.complete
2024-10-30 05:24:20,968 - DEBUG - This Bot is already shut down. Returning.
2024-10-30 05:24:20,968 - DEBUG - Shut down of Updater complete
2024-10-30 05:24:20,968 - INFO - Successfully sent photo to Telegram
2024-10-30 05:24:20,972 - ERROR - Error processing subreddit wifebutt: (sqlite3.OperationalError) attempt to write a readonly database
[SQL: INSERT INTO sent_post (post_id, subreddit_name, sent_at) VALUES (?, ?, ?)]
[parameters: ('1ge2oko', 'wifebutt', '2024-10-30 10:24:20.971845')]
(Background on this error at: https://sqlalche.me/e/20/e3q8)
2024-10-30 05:24:20,975 - ERROR - Job "send_to_telegram (trigger: interval[0:01:00], next run at: 2024-10-30 05:25:16 CDT)" raised an exception
Traceback (most recent call last):
  File "/Users/joewilson/PythonProjects/Snoogram/venv/lib/python3.12/site-packages/sqlalchemy/engine/base.py", line 1967, in _exec_single_context
    self.dialect.do_execute(
  File "/Users/joewilson/PythonProjects/Snoogram/venv/lib/python3.12/site-packages/sqlalchemy/engine/default.py", line 941, in do_execute
    cursor.execute(statement, parameters)
sqlite3.OperationalError: attempt to write a readonly database

The above exception was the direct cause of the following exception:

Traceback (most recent call last):
  File "/Users/joewilson/PythonProjects/Snoogram/venv/lib/python3.12/site-packages/apscheduler/executors/base.py", line 125, in run_job
    retval = job.func(*job.args, **job.kwargs)
             ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/Users/joewilson/PythonProjects/Snoogram/backend/app.py", line 265, in send_to_telegram
    # Update last_check in Cosmos DB
                ^^^^^^^^^^^^^^^^^^^^^
  File "/Users/joewilson/PythonProjects/Snoogram/backend/db_operations.py", line 100, in add_sent_post
  File "/Users/joewilson/PythonProjects/Snoogram/venv/lib/python3.12/site-packages/sqlalchemy/orm/scoping.py", line 597, in commit
    return self._proxied.commit()
           ^^^^^^^^^^^^^^^^^^^^^^
  File "/Users/joewilson/PythonProjects/Snoogram/venv/lib/python3.12/site-packages/sqlalchemy/orm/session.py", line 2028, in commit
    trans.commit(_to_root=True)
  File "<string>", line 2, in commit
  File "/Users/joewilson/PythonProjects/Snoogram/venv/lib/python3.12/site-packages/sqlalchemy/orm/state_changes.py", line 139, in _go
    ret_value = fn(self, *arg, **kw)
                ^^^^^^^^^^^^^^^^^^^^
  File "/Users/joewilson/PythonProjects/Snoogram/venv/lib/python3.12/site-packages/sqlalchemy/orm/session.py", line 1313, in commit
    self._prepare_impl()
  File "<string>", line 2, in _prepare_impl
  File "/Users/joewilson/PythonProjects/Snoogram/venv/lib/python3.12/site-packages/sqlalchemy/orm/state_changes.py", line 139, in _go
    ret_value = fn(self, *arg, **kw)
                ^^^^^^^^^^^^^^^^^^^^
  File "/Users/joewilson/PythonProjects/Snoogram/venv/lib/python3.12/site-packages/sqlalchemy/orm/session.py", line 1288, in _prepare_impl
    self.session.flush()
  File "/Users/joewilson/PythonProjects/Snoogram/venv/lib/python3.12/site-packages/sqlalchemy/orm/session.py", line 4352, in flush
    self._flush(objects)
  File "/Users/joewilson/PythonProjects/Snoogram/venv/lib/python3.12/site-packages/sqlalchemy/orm/session.py", line 4487, in _flush
    with util.safe_reraise():
  File "/Users/joewilson/PythonProjects/Snoogram/venv/lib/python3.12/site-packages/sqlalchemy/util/langhelpers.py", line 146, in __exit__
    raise exc_value.with_traceback(exc_tb)
  File "/Users/joewilson/PythonProjects/Snoogram/venv/lib/python3.12/site-packages/sqlalchemy/orm/session.py", line 4448, in _flush
    flush_context.execute()
  File "/Users/joewilson/PythonProjects/Snoogram/venv/lib/python3.12/site-packages/sqlalchemy/orm/unitofwork.py", line 466, in execute
    rec.execute(self)
  File "/Users/joewilson/PythonProjects/Snoogram/venv/lib/python3.12/site-packages/sqlalchemy/orm/unitofwork.py", line 642, in execute
    util.preloaded.orm_persistence.save_obj(
  File "/Users/joewilson/PythonProjects/Snoogram/venv/lib/python3.12/site-packages/sqlalchemy/orm/persistence.py", line 93, in save_obj
    _emit_insert_statements(
  File "/Users/joewilson/PythonProjects/Snoogram/venv/lib/python3.12/site-packages/sqlalchemy/orm/persistence.py", line 1233, in _emit_insert_statements
    result = connection.execute(
             ^^^^^^^^^^^^^^^^^^^
  File "/Users/joewilson/PythonProjects/Snoogram/venv/lib/python3.12/site-packages/sqlalchemy/engine/base.py", line 1418, in execute
    return meth(
           ^^^^^
  File "/Users/joewilson/PythonProjects/Snoogram/venv/lib/python3.12/site-packages/sqlalchemy/sql/elements.py", line 515, in _execute_on_connection
    return connection._execute_clauseelement(
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/Users/joewilson/PythonProjects/Snoogram/venv/lib/python3.12/site-packages/sqlalchemy/engine/base.py", line 1640, in _execute_clauseelement
    ret = self._execute_context(
          ^^^^^^^^^^^^^^^^^^^^^^
  File "/Users/joewilson/PythonProjects/Snoogram/venv/lib/python3.12/site-packages/sqlalchemy/engine/base.py", line 1846, in _execute_context
    return self._exec_single_context(
           ^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/Users/joewilson/PythonProjects/Snoogram/venv/lib/python3.12/site-packages/sqlalchemy/engine/base.py", line 1986, in _exec_single_context
    self._handle_dbapi_exception(
  File "/Users/joewilson/PythonProjects/Snoogram/venv/lib/python3.12/site-packages/sqlalchemy/engine/base.py", line 2355, in _handle_dbapi_exception
    raise sqlalchemy_exception.with_traceback(exc_info[2]) from e
  File "/Users/joewilson/PythonProjects/Snoogram/venv/lib/python3.12/site-packages/sqlalchemy/engine/base.py", line 1967, in _exec_single_context
    self.dialect.do_execute(
  File "/Users/joewilson/PythonProjects/Snoogram/venv/lib/python3.12/site-packages/sqlalchemy/engine/default.py", line 941, in do_execute
    cursor.execute(statement, parameters)
sqlalchemy.exc.OperationalError: (sqlite3.OperationalError) attempt to write a readonly database
[SQL: INSERT INTO sent_post (post_id, subreddit_name, sent_at) VALUES (?, ?, ?)]
[parameters: ('1ge2oko', 'wifebutt', '2024-10-30 10:24:20.971845')]
(Background on this error at: https://sqlalche.me/e/20/e3q8)
2024-10-30 05:24:39,299 - DEBUG - send_request_body.failed exception=WriteError(ClosedResourceError())
2024-10-30 05:24:39,301 - DEBUG - response_closed.started
2024-10-30 05:24:39,301 - DEBUG - response_closed.complete
2024-10-30 05:24:39,302 - DEBUG - This Application is already shut down. Returning.
2024-10-30 05:24:39,302 - ERROR - Failed to send video to Telegram: httpx.WriteError: 
2024-10-30 05:24:39,304 - ERROR - Error sending video post 1gelyz1: httpx.WriteError: 
2024-10-30 05:24:39,304 - INFO - Checking post: 1gejrnl - Score: 2589 - URL: https://v3.redgifs.com/watch/graydefensivepika
2024-10-30 05:24:39,312 - INFO - Request URL: 'https://cosmossnoogram-centralus.documents.azure.com:443/dbs/ToDoList/colls/sent_posts/docs/'
Request method: 'POST'
Request headers:
    'Cache-Control': 'no-cache'
    'x-ms-version': 'REDACTED'
    'x-ms-documentdb-query-iscontinuationexpected': 'REDACTED'
    'x-ms-consistency-level': 'REDACTED'
    'x-ms-documentdb-isquery': 'REDACTED'
    'Content-Type': 'application/query+json'
    'x-ms-session-token': 'REDACTED'
    'x-ms-documentdb-query-enablecrosspartition': 'REDACTED'
    'x-ms-date': 'REDACTED'
    'authorization': 'REDACTED'
    'Accept': 'application/json'
    'x-ms-cosmos-correlated-activityid': 'REDACTED'
    'Content-Length': '107'
    'User-Agent': 'azsdk-python-cosmos/4.5.1 Python/3.12.4 (macOS-15.0.1-arm64-arm-64bit)'
A body is sent with the request
2024-10-30 05:24:39,345 - DEBUG - https://cosmossnoogram-centralus.documents.azure.com:443 "POST /dbs/ToDoList/colls/sent_posts/docs/ HTTP/11" 200 None
2024-10-30 05:24:39,345 - INFO - Response status: 200
Response headers:
    'Cache-Control': 'no-store, no-cache'
    'Pragma': 'no-cache'
    'Transfer-Encoding': 'chunked'
    'Content-Type': 'application/json'
    'Server': 'Microsoft-HTTPAPI/2.0'
    'Strict-Transport-Security': 'REDACTED'
    'x-ms-activity-id': 'REDACTED'
    'x-ms-last-state-change-utc': 'REDACTED'
    'x-ms-resource-quota': 'REDACTED'
    'x-ms-resource-usage': 'REDACTED'
    'x-ms-schemaversion': 'REDACTED'
    'lsn': 'REDACTED'
    'x-ms-item-count': 'REDACTED'
    'x-ms-request-charge': 'REDACTED'
    'x-ms-alt-content-path': 'REDACTED'
    'x-ms-content-path': 'REDACTED'
    'x-ms-quorum-acked-lsn': 'REDACTED'
    'x-ms-current-write-quorum': 'REDACTED'
    'x-ms-current-replica-set-size': 'REDACTED'
    'x-ms-documentdb-partitionkeyrangeid': 'REDACTED'
    'x-ms-xp-role': 'REDACTED'
    'x-ms-cosmos-query-execution-info': 'REDACTED'
    'x-ms-global-Committed-lsn': 'REDACTED'
    'x-ms-number-of-read-regions': 'REDACTED'
    'x-ms-transport-request-id': 'REDACTED'
    'x-ms-cosmos-llsn': 'REDACTED'
    'x-ms-cosmos-quorum-acked-llsn': 'REDACTED'
    'x-ms-session-token': 'REDACTED'
    'x-ms-request-duration-ms': 'REDACTED'
    'x-ms-serviceversion': 'REDACTED'
    'x-ms-cosmos-is-partition-key-delete-pending': 'REDACTED'
    'x-ms-cosmos-physical-partition-id': 'REDACTED'
    'x-ms-cosmos-internal-partition-id': 'REDACTED'
    'x-ms-gatewayversion': 'REDACTED'
    'Date': 'Wed, 30 Oct 2024 10:24:39 GMT'
2024-10-30 05:24:39,345 - INFO - Post 1gejrnl is a duplicate, skipping
2024-10-30 05:24:39,345 - INFO - Checking post: 1gelw33 - Score: 2303 - URL: https://www.redgifs.com/watch/drydarkgraysable
2024-10-30 05:24:39,346 - INFO - Post 1gelw33 is a duplicate, skipping
2024-10-30 05:24:39,346 - INFO - Checking post: 1gevvp0 - Score: 1192 - URL: https://www.redgifs.com/watch/medicalplumhen
2024-10-30 05:24:39,347 - INFO - Post 1gevvp0 is a duplicate, skipping
2024-10-30 05:24:39,347 - INFO - Checking post: 1gesoj7 - Score: 748 - URL: https://www.redgifs.com/watch/lightgreytrickydragonfly
2024-10-30 05:24:39,347 - INFO - Post 1gesoj7 is a duplicate, skipping
2024-10-30 05:24:39,347 - INFO - Checking post: 1geuuqp - Score: 438 - URL: https://www.redgifs.com/watch/cheerfulbeigebagworm
2024-10-30 05:24:39,347 - INFO - Post 1geuuqp is a duplicate, skipping
2024-10-30 05:24:39,347 - INFO - Checking post: 1geakrb - Score: 397 - URL: https://www.redgifs.com/watch/illinformedthickgalapagoshawk
2024-10-30 05:24:39,347 - INFO - Post 1geakrb is a duplicate, skipping
2024-10-30 05:24:39,347 - INFO - Checking post: 1gerubz - Score: 365 - URL: https://v3.redgifs.com/watch/trickysquarepseudodynerusquadrisectus
2024-10-30 05:24:39,348 - INFO - Post 1gerubz is a duplicate, skipping
2024-10-30 05:24:39,348 - INFO - Checking post: 1getxhl - Score: 339 - URL: https://www.redgifs.com/watch/purpledemandingboaconstrictor
2024-10-30 05:24:39,348 - INFO - Post 1getxhl is a duplicate, skipping
2024-10-30 05:24:39,348 - INFO - Checking post: 1ge9gol - Score: 280 - URL: https://v3.redgifs.com/watch/circulardeeppinkamericanbulldog
2024-10-30 05:24:39,348 - INFO - Request URL: 'https://cosmossnoogram-centralus.documents.azure.com:443/dbs/ToDoList/colls/sent_posts/docs/'
Request method: 'POST'
Request headers:
    'Cache-Control': 'no-cache'
    'x-ms-version': 'REDACTED'
    'x-ms-documentdb-query-iscontinuationexpected': 'REDACTED'
    'x-ms-consistency-level': 'REDACTED'
    'x-ms-documentdb-isquery': 'REDACTED'
    'Content-Type': 'application/query+json'
    'x-ms-session-token': 'REDACTED'
    'x-ms-documentdb-query-enablecrosspartition': 'REDACTED'
    'x-ms-date': 'REDACTED'
    'authorization': 'REDACTED'
    'Accept': 'application/json'
    'x-ms-cosmos-correlated-activityid': 'REDACTED'
    'Content-Length': '107'
    'User-Agent': 'azsdk-python-cosmos/4.5.1 Python/3.12.4 (macOS-15.0.1-arm64-arm-64bit)'
A body is sent with the request
2024-10-30 05:24:39,379 - DEBUG - https://cosmossnoogram-centralus.documents.azure.com:443 "POST /dbs/ToDoList/colls/sent_posts/docs/ HTTP/11" 200 None
2024-10-30 05:24:39,379 - INFO - Response status: 200
Response headers:
    'Cache-Control': 'no-store, no-cache'
    'Pragma': 'no-cache'
    'Transfer-Encoding': 'chunked'
    'Content-Type': 'application/json'
    'Server': 'Microsoft-HTTPAPI/2.0'
    'Strict-Transport-Security': 'REDACTED'
    'x-ms-activity-id': 'REDACTED'
    'x-ms-last-state-change-utc': 'REDACTED'
    'x-ms-resource-quota': 'REDACTED'
    'x-ms-resource-usage': 'REDACTED'
    'x-ms-schemaversion': 'REDACTED'
    'lsn': 'REDACTED'
    'x-ms-item-count': 'REDACTED'
    'x-ms-request-charge': 'REDACTED'
    'x-ms-alt-content-path': 'REDACTED'
    'x-ms-content-path': 'REDACTED'
    'x-ms-documentdb-partitionkeyrangeid': 'REDACTED'
    'x-ms-xp-role': 'REDACTED'
    'x-ms-cosmos-query-execution-info': 'REDACTED'
    'x-ms-global-Committed-lsn': 'REDACTED'
    'x-ms-number-of-read-regions': 'REDACTED'
    'x-ms-transport-request-id': 'REDACTED'
    'x-ms-cosmos-llsn': 'REDACTED'
    'x-ms-session-token': 'REDACTED'
    'x-ms-request-duration-ms': 'REDACTED'
    'x-ms-serviceversion': 'REDACTED'
    'x-ms-cosmos-is-partition-key-delete-pending': 'REDACTED'
    'x-ms-cosmos-physical-partition-id': 'REDACTED'
    'x-ms-cosmos-internal-partition-id': 'REDACTED'
    'x-ms-gatewayversion': 'REDACTED'
    'Date': 'Wed, 30 Oct 2024 10:24:39 GMT'
2024-10-30 05:24:39,379 - INFO - Found video post: 1ge9gol
2024-10-30 05:24:39,380 - DEBUG - Starting new HTTPS connection (1): api.redgifs.com:443
2024-10-30 05:24:39,483 - DEBUG - https://api.redgifs.com:443 "GET /v2/gifs/circulardeeppinkamericanbulldog HTTP/11" 200 None
2024-10-30 05:24:39,486 - DEBUG - Starting new HTTPS connection (1): files.redgifs.com:443
2024-10-30 05:24:39,553 - DEBUG - https://files.redgifs.com:443 "GET /CircularDeeppinkAmericanbulldog.mp4 HTTP/11" 200 61415883
2024-10-30 05:24:40,767 - INFO - Successfully downloaded media to downloads/videos/1ge9gol_20241030_052439_fff8ab71.mp4
2024-10-30 05:24:40,771 - DEBUG - Using selector: KqueueSelector
2024-10-30 05:24:40,771 - INFO - Attempting to send video to Telegram - Path: downloads/videos/1ge9gol_20241030_052439_fff8ab71.mp4
2024-10-30 05:24:40,772 - DEBUG - load_ssl_context verify=True cert=None trust_env=True http2=False
2024-10-30 05:24:40,772 - DEBUG - load_verify_locations cafile='/Users/joewilson/PythonProjects/Snoogram/venv/lib/python3.12/site-packages/certifi/cacert.pem'
2024-10-30 05:24:40,781 - DEBUG - load_ssl_context verify=True cert=None trust_env=True http2=False
2024-10-30 05:24:40,781 - DEBUG - load_verify_locations cafile='/Users/joewilson/PythonProjects/Snoogram/venv/lib/python3.12/site-packages/certifi/cacert.pem'
2024-10-30 05:24:40,788 - DEBUG - Entering: get_me
2024-10-30 05:24:40,789 - DEBUG - connect_tcp.started host='api.telegram.org' port=443 local_address=None timeout=5.0 socket_options=None
2024-10-30 05:24:40,913 - DEBUG - connect_tcp.complete return_value=<httpcore._backends.anyio.AnyIOStream object at 0x108eae270>
2024-10-30 05:24:40,914 - DEBUG - start_tls.started ssl_context=<ssl.SSLContext object at 0x1089bddd0> server_hostname='api.telegram.org' timeout=5.0
2024-10-30 05:24:41,050 - DEBUG - start_tls.complete return_value=<httpcore._backends.anyio.AnyIOStream object at 0x108ead940>
2024-10-30 05:24:41,051 - DEBUG - send_request_headers.started request=<Request [b'POST']>
2024-10-30 05:24:41,052 - DEBUG - send_request_headers.complete
2024-10-30 05:24:41,052 - DEBUG - send_request_body.started request=<Request [b'POST']>
2024-10-30 05:24:41,052 - DEBUG - send_request_body.complete
2024-10-30 05:24:41,053 - DEBUG - receive_response_headers.started request=<Request [b'POST']>
2024-10-30 05:24:41,172 - DEBUG - receive_response_headers.complete return_value=(b'HTTP/1.1', 200, b'OK', [(b'Server', b'nginx/1.18.0'), (b'Date', b'Wed, 30 Oct 2024 10:24:41 GMT'), (b'Content-Type', b'application/json'), (b'Content-Length', b'254'), (b'Connection', b'keep-alive'), (b'Strict-Transport-Security', b'max-age=31536000; includeSubDomains; preload'), (b'Access-Control-Allow-Origin', b'*'), (b'Access-Control-Allow-Methods', b'GET, POST, OPTIONS'), (b'Access-Control-Expose-Headers', b'Content-Length,Content-Type,Date,Server,Connection')])
2024-10-30 05:24:41,173 - INFO - HTTP Request: POST https://api.telegram.org/bot7867694458:AAEFLZjWPyd1p640mHENnBt479WRYfSavWg/getMe "HTTP/1.1 200 OK"
2024-10-30 05:24:41,173 - DEBUG - receive_response_body.started request=<Request [b'POST']>
2024-10-30 05:24:41,173 - DEBUG - receive_response_body.complete
2024-10-30 05:24:41,174 - DEBUG - response_closed.started
2024-10-30 05:24:41,174 - DEBUG - response_closed.complete
2024-10-30 05:24:41,174 - DEBUG - User(api_kwargs={'can_connect_to_business': False, 'has_main_web_app': False}, can_join_groups=True, can_read_all_group_messages=False, first_name='RedditBot', id=7867694458, is_bot=True, supports_inline_queries=False, username='RedditImage_bot')
2024-10-30 05:24:41,175 - DEBUG - Exiting: get_me
2024-10-30 05:24:41,175 - DEBUG - This Bot is already initialized.
2024-10-30 05:24:41,175 - DEBUG - Entering: send_video
2024-10-30 05:24:41,224 - DEBUG - send_request_headers.started request=<Request [b'POST']>
2024-10-30 05:24:41,224 - DEBUG - send_request_headers.complete
2024-10-30 05:24:41,224 - DEBUG - send_request_body.started request=<Request [b'POST']>
2024-10-30 05:24:44,700 - DEBUG - send_request_body.complete
2024-10-30 05:24:44,701 - DEBUG - receive_response_headers.started request=<Request [b'POST']>
2024-10-30 05:24:44,701 - DEBUG - receive_response_headers.complete return_value=(b'HTTP/1.1', 413, b'Request Entity Too Large', [(b'Server', b'nginx/1.18.0'), (b'Date', b'Wed, 30 Oct 2024 10:24:41 GMT'), (b'Content-Type', b'application/json'), (b'Content-Length', b'70'), (b'Connection', b'close'), (b'Strict-Transport-Security', b'max-age=31536000; includeSubDomains; preload'), (b'Access-Control-Allow-Origin', b'*'), (b'Access-Control-Expose-Headers', b'Content-Length,Content-Type,Date,Server,Connection')])
2024-10-30 05:24:44,702 - INFO - HTTP Request: POST https://api.telegram.org/bot7867694458:AAEFLZjWPyd1p640mHENnBt479WRYfSavWg/sendVideo "HTTP/1.1 413 Request Entity Too Large"
2024-10-30 05:24:44,702 - DEBUG - receive_response_body.started request=<Request [b'POST']>
2024-10-30 05:24:44,702 - DEBUG - receive_response_body.complete
2024-10-30 05:24:44,702 - DEBUG - response_closed.started
2024-10-30 05:24:44,702 - DEBUG - response_closed.complete
2024-10-30 05:24:44,703 - DEBUG - This Bot is already shut down. Returning.
2024-10-30 05:24:44,703 - DEBUG - Shut down of Updater complete
2024-10-30 05:24:44,703 - ERROR - Failed to send video to Telegram: Request Entity Too Large (413)
2024-10-30 05:24:44,703 - ERROR - Error sending video post 1ge9gol: Request Entity Too Large (413)
2024-10-30 05:24:44,703 - INFO - Checking post: 1ge98kx - Score: 256 - URL: https://www.redgifs.com/watch/frontspecificspittlebug
2024-10-30 05:24:44,704 - INFO - Post 1ge98kx is a duplicate, skipping
2024-10-30 05:24:44,704 - INFO - Checking post: 1geqscs - Score: 241 - URL: https://www.redgifs.com/watch/previousweequeensnake
2024-10-30 05:24:44,705 - INFO - Request URL: 'https://cosmossnoogram-centralus.documents.azure.com:443/dbs/ToDoList/colls/sent_posts/docs/'
Request method: 'POST'
Request headers:
    'Cache-Control': 'no-cache'
    'x-ms-version': 'REDACTED'
    'x-ms-documentdb-query-iscontinuationexpected': 'REDACTED'
    'x-ms-consistency-level': 'REDACTED'
    'x-ms-documentdb-isquery': 'REDACTED'
    'Content-Type': 'application/query+json'
    'x-ms-session-token': 'REDACTED'
    'x-ms-documentdb-query-enablecrosspartition': 'REDACTED'
    'x-ms-date': 'REDACTED'
    'authorization': 'REDACTED'
    'Accept': 'application/json'
    'x-ms-cosmos-correlated-activityid': 'REDACTED'
    'Content-Length': '107'
    'User-Agent': 'azsdk-python-cosmos/4.5.1 Python/3.12.4 (macOS-15.0.1-arm64-arm-64bit)'
A body is sent with the request
2024-10-30 05:24:44,773 - DEBUG - https://cosmossnoogram-centralus.documents.azure.com:443 "POST /dbs/ToDoList/colls/sent_posts/docs/ HTTP/11" 200 None
2024-10-30 05:24:44,773 - INFO - Response status: 200
Response headers:
    'Cache-Control': 'no-store, no-cache'
    'Pragma': 'no-cache'
    'Transfer-Encoding': 'chunked'
    'Content-Type': 'application/json'
    'Server': 'Microsoft-HTTPAPI/2.0'
    'Strict-Transport-Security': 'REDACTED'
    'x-ms-activity-id': 'REDACTED'
    'x-ms-last-state-change-utc': 'REDACTED'
    'x-ms-resource-quota': 'REDACTED'
    'x-ms-resource-usage': 'REDACTED'
    'x-ms-schemaversion': 'REDACTED'
    'lsn': 'REDACTED'
    'x-ms-item-count': 'REDACTED'
    'x-ms-request-charge': 'REDACTED'
    'x-ms-alt-content-path': 'REDACTED'
    'x-ms-content-path': 'REDACTED'
    'x-ms-documentdb-partitionkeyrangeid': 'REDACTED'
    'x-ms-xp-role': 'REDACTED'
    'x-ms-cosmos-query-execution-info': 'REDACTED'
    'x-ms-global-Committed-lsn': 'REDACTED'
    'x-ms-number-of-read-regions': 'REDACTED'
    'x-ms-transport-request-id': 'REDACTED'
    'x-ms-cosmos-llsn': 'REDACTED'
    'x-ms-session-token': 'REDACTED'
    'x-ms-request-duration-ms': 'REDACTED'
    'x-ms-serviceversion': 'REDACTED'
    'x-ms-cosmos-is-partition-key-delete-pending': 'REDACTED'
    'x-ms-cosmos-physical-partition-id': 'REDACTED'
    'x-ms-cosmos-internal-partition-id': 'REDACTED'
    'x-ms-gatewayversion': 'REDACTED'
    'Date': 'Wed, 30 Oct 2024 10:24:44 GMT'
2024-10-30 05:24:44,773 - INFO - Found video post: 1geqscs
2024-10-30 05:24:44,775 - DEBUG - Starting new HTTPS connection (1): api.redgifs.com:443
2024-10-30 05:24:44,881 - DEBUG - https://api.redgifs.com:443 "GET /v2/gifs/previousweequeensnake HTTP/11" 200 None
2024-10-30 05:24:44,885 - DEBUG - Starting new HTTPS connection (1): files.redgifs.com:443
2024-10-30 05:24:44,953 - DEBUG - https://files.redgifs.com:443 "GET /PreviousWeeQueensnake.mp4 HTTP/11" 200 50070206
2024-10-30 05:24:45,843 - INFO - Successfully downloaded media to downloads/videos/1geqscs_20241030_052444_2fd81a4e.mp4
2024-10-30 05:24:45,846 - DEBUG - Using selector: KqueueSelector
2024-10-30 05:24:45,847 - INFO - Attempting to send video to Telegram - Path: downloads/videos/1geqscs_20241030_052444_2fd81a4e.mp4
2024-10-30 05:24:45,847 - DEBUG - load_ssl_context verify=True cert=None trust_env=True http2=False
2024-10-30 05:24:45,848 - DEBUG - load_verify_locations cafile='/Users/joewilson/PythonProjects/Snoogram/venv/lib/python3.12/site-packages/certifi/cacert.pem'
2024-10-30 05:24:45,858 - DEBUG - load_ssl_context verify=True cert=None trust_env=True http2=False
2024-10-30 05:24:45,858 - DEBUG - load_verify_locations cafile='/Users/joewilson/PythonProjects/Snoogram/venv/lib/python3.12/site-packages/certifi/cacert.pem'
2024-10-30 05:24:45,865 - DEBUG - Entering: get_me
2024-10-30 05:24:45,866 - DEBUG - connect_tcp.started host='api.telegram.org' port=443 local_address=None timeout=5.0 socket_options=None
2024-10-30 05:24:45,988 - DEBUG - connect_tcp.complete return_value=<httpcore._backends.anyio.AnyIOStream object at 0x108ceca10>
2024-10-30 05:24:45,988 - DEBUG - start_tls.started ssl_context=<ssl.SSLContext object at 0x108e34ed0> server_hostname='api.telegram.org' timeout=5.0
2024-10-30 05:24:46,127 - DEBUG - start_tls.complete return_value=<httpcore._backends.anyio.AnyIOStream object at 0x108eaf5c0>
2024-10-30 05:24:46,127 - DEBUG - send_request_headers.started request=<Request [b'POST']>
2024-10-30 05:24:46,127 - DEBUG - send_request_headers.complete
2024-10-30 05:24:46,128 - DEBUG - send_request_body.started request=<Request [b'POST']>
2024-10-30 05:24:46,128 - DEBUG - send_request_body.complete
2024-10-30 05:24:46,128 - DEBUG - receive_response_headers.started request=<Request [b'POST']>
2024-10-30 05:24:46,241 - DEBUG - receive_response_headers.complete return_value=(b'HTTP/1.1', 200, b'OK', [(b'Server', b'nginx/1.18.0'), (b'Date', b'Wed, 30 Oct 2024 10:24:46 GMT'), (b'Content-Type', b'application/json'), (b'Content-Length', b'254'), (b'Connection', b'keep-alive'), (b'Strict-Transport-Security', b'max-age=31536000; includeSubDomains; preload'), (b'Access-Control-Allow-Origin', b'*'), (b'Access-Control-Allow-Methods', b'GET, POST, OPTIONS'), (b'Access-Control-Expose-Headers', b'Content-Length,Content-Type,Date,Server,Connection')])
2024-10-30 05:24:46,242 - INFO - HTTP Request: POST https://api.telegram.org/bot7867694458:AAEFLZjWPyd1p640mHENnBt479WRYfSavWg/getMe "HTTP/1.1 200 OK"
2024-10-30 05:24:46,242 - DEBUG - receive_response_body.started request=<Request [b'POST']>
2024-10-30 05:24:46,242 - DEBUG - receive_response_body.complete
2024-10-30 05:24:46,242 - DEBUG - response_closed.started
2024-10-30 05:24:46,242 - DEBUG - response_closed.complete
2024-10-30 05:24:46,242 - DEBUG - User(api_kwargs={'can_connect_to_business': False, 'has_main_web_app': False}, can_join_groups=True, can_read_all_group_messages=False, first_name='RedditBot', id=7867694458, is_bot=True, supports_inline_queries=False, username='RedditImage_bot')
2024-10-30 05:24:46,242 - DEBUG - Exiting: get_me
2024-10-30 05:24:46,242 - DEBUG - This Bot is already initialized.
2024-10-30 05:24:46,242 - DEBUG - Entering: send_video
2024-10-30 05:24:46,253 - DEBUG - send_request_headers.started request=<Request [b'POST']>
2024-10-30 05:24:46,254 - DEBUG - send_request_headers.complete
2024-10-30 05:24:46,254 - DEBUG - send_request_body.started request=<Request [b'POST']>
2024-10-30 05:24:49,563 - DEBUG - send_request_body.complete
2024-10-30 05:24:49,564 - DEBUG - receive_response_headers.started request=<Request [b'POST']>
2024-10-30 05:24:52,058 - DEBUG - receive_response_headers.complete return_value=(b'HTTP/1.1', 200, b'OK', [(b'Server', b'nginx/1.18.0'), (b'Date', b'Wed, 30 Oct 2024 10:24:52 GMT'), (b'Content-Type', b'application/json'), (b'Content-Length', b'600'), (b'Connection', b'keep-alive'), (b'Strict-Transport-Security', b'max-age=31536000; includeSubDomains; preload'), (b'Access-Control-Allow-Origin', b'*'), (b'Access-Control-Allow-Methods', b'GET, POST, OPTIONS'), (b'Access-Control-Expose-Headers', b'Content-Length,Content-Type,Date,Server,Connection')])
2024-10-30 05:24:52,060 - INFO - HTTP Request: POST https://api.telegram.org/bot7867694458:AAEFLZjWPyd1p640mHENnBt479WRYfSavWg/sendVideo "HTTP/1.1 200 OK"
2024-10-30 05:24:52,060 - DEBUG - receive_response_body.started request=<Request [b'POST']>
2024-10-30 05:24:52,060 - DEBUG - receive_response_body.complete
2024-10-30 05:24:52,061 - DEBUG - response_closed.started
2024-10-30 05:24:52,061 - DEBUG - response_closed.complete
2024-10-30 05:24:52,063 - DEBUG - Message(caption='From r/girlsfinishingthejob: I love when he covers my titties with his hot cum ðŸ¥°\nUpvotes: 241', channel_chat_created=False, chat=Chat(id=-1002490380283, title='Reddit_Pic_Stream', type=<ChatType.CHANNEL>), date=datetime.datetime(2024, 10, 30, 10, 24, 51, tzinfo=<UTC>), delete_chat_photo=False, group_chat_created=False, message_id=240, sender_chat=Chat(id=-1002490380283, title='Reddit_Pic_Stream', type=<ChatType.CHANNEL>), supergroup_chat_created=False, video=Video(duration=0, file_id='BAACAgEAAyEGAASUcC_7AAPwZyIJcxVv4QlSJ0fJiKAgRvk4WQ8AArUEAAIZEBFF7-Akuzs7afw2BA', file_name='1geqscs_20241030_052444_2fd81a4e.mp4', file_size=50070206, file_unique_id='AgADtQQAAhkQEUU', height=320, mime_type='video/mp4', width=320))
2024-10-30 05:24:52,063 - DEBUG - Exiting: send_video
2024-10-30 05:24:52,064 - DEBUG - close.started
2024-10-30 05:24:52,064 - DEBUG - close.complete
2024-10-30 05:24:52,064 - DEBUG - This Bot is already shut down. Returning.
2024-10-30 05:24:52,065 - DEBUG - Shut down of Updater complete
2024-10-30 05:24:52,065 - INFO - Successfully sent video to Telegram
2024-10-30 05:24:52,069 - ERROR - Error processing subreddit girlsfinishingthejob: (sqlite3.OperationalError) attempt to write a readonly database
[SQL: INSERT INTO sent_post (post_id, subreddit_name, sent_at) VALUES (?, ?, ?)]
[parameters: ('1geqscs', 'girlsfinishingthejob', '2024-10-30 10:24:52.067962')]
(Background on this error at: https://sqlalche.me/e/20/e3q8)
2024-10-30 05:24:52,071 - ERROR - Job "send_to_telegram (trigger: interval[0:01:00], next run at: 2024-10-30 05:25:16 CDT)" raised an exception
Traceback (most recent call last):
  File "/Users/joewilson/PythonProjects/Snoogram/venv/lib/python3.12/site-packages/sqlalchemy/engine/base.py", line 1967, in _exec_single_context
    self.dialect.do_execute(
  File "/Users/joewilson/PythonProjects/Snoogram/venv/lib/python3.12/site-packages/sqlalchemy/engine/default.py", line 941, in do_execute
    cursor.execute(statement, parameters)
sqlite3.OperationalError: attempt to write a readonly database

The above exception was the direct cause of the following exception:

Traceback (most recent call last):
  File "/Users/joewilson/PythonProjects/Snoogram/venv/lib/python3.12/site-packages/apscheduler/executors/base.py", line 125, in run_job
    retval = job.func(*job.args, **job.kwargs)
             ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/Users/joewilson/PythonProjects/Snoogram/backend/app.py", line 265, in send_to_telegram
    # Update last_check in Cosmos DB
                ^^^^^^^^^^^^^^^^^^^^^
  File "/Users/joewilson/PythonProjects/Snoogram/backend/db_operations.py", line 100, in add_sent_post
  File "/Users/joewilson/PythonProjects/Snoogram/venv/lib/python3.12/site-packages/sqlalchemy/orm/scoping.py", line 597, in commit
    return self._proxied.commit()
           ^^^^^^^^^^^^^^^^^^^^^^
  File "/Users/joewilson/PythonProjects/Snoogram/venv/lib/python3.12/site-packages/sqlalchemy/orm/session.py", line 2028, in commit
    trans.commit(_to_root=True)
  File "<string>", line 2, in commit
  File "/Users/joewilson/PythonProjects/Snoogram/venv/lib/python3.12/site-packages/sqlalchemy/orm/state_changes.py", line 139, in _go
    ret_value = fn(self, *arg, **kw)
                ^^^^^^^^^^^^^^^^^^^^
  File "/Users/joewilson/PythonProjects/Snoogram/venv/lib/python3.12/site-packages/sqlalchemy/orm/session.py", line 1313, in commit
    self._prepare_impl()
  File "<string>", line 2, in _prepare_impl
  File "/Users/joewilson/PythonProjects/Snoogram/venv/lib/python3.12/site-packages/sqlalchemy/orm/state_changes.py", line 139, in _go
    ret_value = fn(self, *arg, **kw)
                ^^^^^^^^^^^^^^^^^^^^
  File "/Users/joewilson/PythonProjects/Snoogram/venv/lib/python3.12/site-packages/sqlalchemy/orm/session.py", line 1288, in _prepare_impl
    self.session.flush()
  File "/Users/joewilson/PythonProjects/Snoogram/venv/lib/python3.12/site-packages/sqlalchemy/orm/session.py", line 4352, in flush
    self._flush(objects)
  File "/Users/joewilson/PythonProjects/Snoogram/venv/lib/python3.12/site-packages/sqlalchemy/orm/session.py", line 4487, in _flush
    with util.safe_reraise():
  File "/Users/joewilson/PythonProjects/Snoogram/venv/lib/python3.12/site-packages/sqlalchemy/util/langhelpers.py", line 146, in __exit__
    raise exc_value.with_traceback(exc_tb)
  File "/Users/joewilson/PythonProjects/Snoogram/venv/lib/python3.12/site-packages/sqlalchemy/orm/session.py", line 4448, in _flush
    flush_context.execute()
  File "/Users/joewilson/PythonProjects/Snoogram/venv/lib/python3.12/site-packages/sqlalchemy/orm/unitofwork.py", line 466, in execute
    rec.execute(self)
  File "/Users/joewilson/PythonProjects/Snoogram/venv/lib/python3.12/site-packages/sqlalchemy/orm/unitofwork.py", line 642, in execute
    util.preloaded.orm_persistence.save_obj(
  File "/Users/joewilson/PythonProjects/Snoogram/venv/lib/python3.12/site-packages/sqlalchemy/orm/persistence.py", line 93, in save_obj
    _emit_insert_statements(
  File "/Users/joewilson/PythonProjects/Snoogram/venv/lib/python3.12/site-packages/sqlalchemy/orm/persistence.py", line 1233, in _emit_insert_statements
    result = connection.execute(
             ^^^^^^^^^^^^^^^^^^^
  File "/Users/joewilson/PythonProjects/Snoogram/venv/lib/python3.12/site-packages/sqlalchemy/engine/base.py", line 1418, in execute
    return meth(
           ^^^^^
  File "/Users/joewilson/PythonProjects/Snoogram/venv/lib/python3.12/site-packages/sqlalchemy/sql/elements.py", line 515, in _execute_on_connection
    return connection._execute_clauseelement(
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/Users/joewilson/PythonProjects/Snoogram/venv/lib/python3.12/site-packages/sqlalchemy/engine/base.py", line 1640, in _execute_clauseelement
    ret = self._execute_context(
          ^^^^^^^^^^^^^^^^^^^^^^
  File "/Users/joewilson/PythonProjects/Snoogram/venv/lib/python3.12/site-packages/sqlalchemy/engine/base.py", line 1846, in _execute_context
    return self._exec_single_context(
           ^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/Users/joewilson/PythonProjects/Snoogram/venv/lib/python3.12/site-packages/sqlalchemy/engine/base.py", line 1986, in _exec_single_context
    self._handle_dbapi_exception(
  File "/Users/joewilson/PythonProjects/Snoogram/venv/lib/python3.12/site-packages/sqlalchemy/engine/base.py", line 2355, in _handle_dbapi_exception
    raise sqlalchemy_exception.with_traceback(exc_info[2]) from e
  File "/Users/joewilson/PythonProjects/Snoogram/venv/lib/python3.12/site-packages/sqlalchemy/engine/base.py", line 1967, in _exec_single_context
    self.dialect.do_execute(
  File "/Users/joewilson/PythonProjects/Snoogram/venv/lib/python3.12/site-packages/sqlalchemy/engine/default.py", line 941, in do_execute
    cursor.execute(statement, parameters)
sqlalchemy.exc.OperationalError: (sqlite3.OperationalError) attempt to write a readonly database
[SQL: INSERT INTO sent_post (post_id, subreddit_name, sent_at) VALUES (?, ?, ?)]
[parameters: ('1geqscs', 'girlsfinishingthejob', '2024-10-30 10:24:52.067962')]
(Background on this error at: https://sqlalche.me/e/20/e3q8)
2024-10-30 05:25:16,975 - DEBUG - Looking for jobs to run
2024-10-30 05:25:16,977 - DEBUG - Next wakeup is due at 2024-10-30 05:26:16.969826-05:00 (in 59.992142 seconds)
2024-10-30 05:25:16,977 - INFO - Running job "send_to_telegram (trigger: interval[0:01:00], next run at: 2024-10-30 05:26:16 CDT)" (scheduled at 2024-10-30 05:25:16.969826-05:00)
2024-10-30 05:25:16,977 - INFO - Running job "send_to_telegram (trigger: interval[0:01:00], next run at: 2024-10-30 05:26:16 CDT)" (scheduled at 2024-10-30 05:25:16.970029-05:00)
2024-10-30 05:25:16,978 - INFO - Processing subreddit: girlsfinishingthejob
2024-10-30 05:25:16,978 - INFO - Processing subreddit: wifebutt
2024-10-30 05:25:16,978 - INFO - Fetching top posts of the day
2024-10-30 05:25:16,978 - INFO - Fetching top posts of the month
2024-10-30 05:25:16,979 - DEBUG - Fetching: GET https://oauth.reddit.com/r/girlsfinishingthejob/top at 1730283916.979541
2024-10-30 05:25:16,979 - DEBUG - Fetching: GET https://oauth.reddit.com/r/wifebutt/top at 1730283916.97965
2024-10-30 05:25:16,979 - DEBUG - Data: None
2024-10-30 05:25:16,979 - DEBUG - Data: None
2024-10-30 05:25:16,979 - DEBUG - Params: {'limit': 50, 'raw_json': 1, 't': 'day'}
2024-10-30 05:25:16,979 - DEBUG - Params: {'limit': 50, 'raw_json': 1, 't': 'month'}
2024-10-30 05:25:17,276 - DEBUG - https://oauth.reddit.com:443 "GET /r/girlsfinishingthejob/top?t=day&limit=50&raw_json=1 HTTP/11" 200 24056
2024-10-30 05:25:17,279 - DEBUG - Response: 200 (24056 bytes) (rst-0:rem-148.0:used-2 ratelimit) at 1730283917.279526
2024-10-30 05:25:17,366 - INFO - Checking post: 1gelyz1 - Score: 7105 - URL: https://www.redgifs.com/watch/uttersvelteamphibian
2024-10-30 05:25:17,372 - INFO - Request URL: 'https://cosmossnoogram-centralus.documents.azure.com:443/dbs/ToDoList/colls/sent_posts/docs/'
Request method: 'POST'
Request headers:
    'Cache-Control': 'no-cache'
    'x-ms-version': 'REDACTED'
    'x-ms-documentdb-query-iscontinuationexpected': 'REDACTED'
    'x-ms-consistency-level': 'REDACTED'
    'x-ms-documentdb-isquery': 'REDACTED'
    'Content-Type': 'application/query+json'
    'x-ms-session-token': 'REDACTED'
    'x-ms-documentdb-query-enablecrosspartition': 'REDACTED'
    'x-ms-date': 'REDACTED'
    'authorization': 'REDACTED'
    'Accept': 'application/json'
    'x-ms-cosmos-correlated-activityid': 'REDACTED'
    'Content-Length': '107'
    'User-Agent': 'azsdk-python-cosmos/4.5.1 Python/3.12.4 (macOS-15.0.1-arm64-arm-64bit)'
A body is sent with the request
2024-10-30 05:25:17,404 - DEBUG - https://cosmossnoogram-centralus.documents.azure.com:443 "POST /dbs/ToDoList/colls/sent_posts/docs/ HTTP/11" 200 None
2024-10-30 05:25:17,404 - INFO - Response status: 200
Response headers:
    'Cache-Control': 'no-store, no-cache'
    'Pragma': 'no-cache'
    'Transfer-Encoding': 'chunked'
    'Content-Type': 'application/json'
    'Server': 'Microsoft-HTTPAPI/2.0'
    'Strict-Transport-Security': 'REDACTED'
    'x-ms-activity-id': 'REDACTED'
    'x-ms-last-state-change-utc': 'REDACTED'
    'x-ms-resource-quota': 'REDACTED'
    'x-ms-resource-usage': 'REDACTED'
    'x-ms-schemaversion': 'REDACTED'
    'lsn': 'REDACTED'
    'x-ms-item-count': 'REDACTED'
    'x-ms-request-charge': 'REDACTED'
    'x-ms-alt-content-path': 'REDACTED'
    'x-ms-content-path': 'REDACTED'
    'x-ms-quorum-acked-lsn': 'REDACTED'
    'x-ms-current-write-quorum': 'REDACTED'
    'x-ms-current-replica-set-size': 'REDACTED'
    'x-ms-documentdb-partitionkeyrangeid': 'REDACTED'
    'x-ms-xp-role': 'REDACTED'
    'x-ms-cosmos-query-execution-info': 'REDACTED'
    'x-ms-global-Committed-lsn': 'REDACTED'
    'x-ms-number-of-read-regions': 'REDACTED'
    'x-ms-transport-request-id': 'REDACTED'
    'x-ms-cosmos-llsn': 'REDACTED'
    'x-ms-cosmos-quorum-acked-llsn': 'REDACTED'
    'x-ms-session-token': 'REDACTED'
    'x-ms-request-duration-ms': 'REDACTED'
    'x-ms-serviceversion': 'REDACTED'
    'x-ms-cosmos-is-partition-key-delete-pending': 'REDACTED'
    'x-ms-cosmos-physical-partition-id': 'REDACTED'
    'x-ms-cosmos-internal-partition-id': 'REDACTED'
    'x-ms-gatewayversion': 'REDACTED'
    'Date': 'Wed, 30 Oct 2024 10:25:17 GMT'
2024-10-30 05:25:17,404 - INFO - Found video post: 1gelyz1
2024-10-30 05:25:17,405 - DEBUG - Starting new HTTPS connection (1): api.redgifs.com:443
2024-10-30 05:25:17,506 - DEBUG - https://api.redgifs.com:443 "GET /v2/gifs/uttersvelteamphibian HTTP/11" 200 None
2024-10-30 05:25:17,509 - DEBUG - Starting new HTTPS connection (1): files.redgifs.com:443
2024-10-30 05:25:17,575 - DEBUG - https://files.redgifs.com:443 "GET /UtterSvelteAmphibian.mp4 HTTP/11" 200 42980012
2024-10-30 05:25:17,771 - DEBUG - https://oauth.reddit.com:443 "GET /r/wifebutt/top?t=month&limit=50&raw_json=1 HTTP/11" 200 49230
2024-10-30 05:25:17,805 - DEBUG - Response: 200 (49230 bytes) (rst-0:rem-149.0:used-1 ratelimit) at 1730283917.805364
2024-10-30 05:25:17,811 - INFO - Checking post: 1g9w053 - Score: 5346 - URL: https://www.reddit.com/gallery/1g9w053
2024-10-30 05:25:17,813 - INFO - Request URL: 'https://cosmossnoogram-centralus.documents.azure.com:443/dbs/ToDoList/colls/sent_posts/docs/'
Request method: 'POST'
Request headers:
    'Cache-Control': 'no-cache'
    'x-ms-version': 'REDACTED'
    'x-ms-documentdb-query-iscontinuationexpected': 'REDACTED'
    'x-ms-consistency-level': 'REDACTED'
    'x-ms-documentdb-isquery': 'REDACTED'
    'Content-Type': 'application/query+json'
    'x-ms-session-token': 'REDACTED'
    'x-ms-documentdb-query-enablecrosspartition': 'REDACTED'
    'x-ms-date': 'REDACTED'
    'authorization': 'REDACTED'
    'Accept': 'application/json'
    'x-ms-cosmos-correlated-activityid': 'REDACTED'
    'Content-Length': '107'
    'User-Agent': 'azsdk-python-cosmos/4.5.1 Python/3.12.4 (macOS-15.0.1-arm64-arm-64bit)'
A body is sent with the request
2024-10-30 05:25:17,856 - DEBUG - https://cosmossnoogram-centralus.documents.azure.com:443 "POST /dbs/ToDoList/colls/sent_posts/docs/ HTTP/11" 200 None
2024-10-30 05:25:17,857 - INFO - Response status: 200
Response headers:
    'Cache-Control': 'no-store, no-cache'
    'Pragma': 'no-cache'
    'Transfer-Encoding': 'chunked'
    'Content-Type': 'application/json'
    'Server': 'Microsoft-HTTPAPI/2.0'
    'Strict-Transport-Security': 'REDACTED'
    'x-ms-activity-id': 'REDACTED'
    'x-ms-last-state-change-utc': 'REDACTED'
    'x-ms-resource-quota': 'REDACTED'
    'x-ms-resource-usage': 'REDACTED'
    'x-ms-schemaversion': 'REDACTED'
    'lsn': 'REDACTED'
    'x-ms-item-count': 'REDACTED'
    'x-ms-request-charge': 'REDACTED'
    'x-ms-alt-content-path': 'REDACTED'
    'x-ms-content-path': 'REDACTED'
    'x-ms-quorum-acked-lsn': 'REDACTED'
    'x-ms-current-write-quorum': 'REDACTED'
    'x-ms-current-replica-set-size': 'REDACTED'
    'x-ms-documentdb-partitionkeyrangeid': 'REDACTED'
    'x-ms-xp-role': 'REDACTED'
    'x-ms-cosmos-query-execution-info': 'REDACTED'
    'x-ms-global-Committed-lsn': 'REDACTED'
    'x-ms-number-of-read-regions': 'REDACTED'
    'x-ms-transport-request-id': 'REDACTED'
    'x-ms-cosmos-llsn': 'REDACTED'
    'x-ms-cosmos-quorum-acked-llsn': 'REDACTED'
    'x-ms-session-token': 'REDACTED'
    'x-ms-request-duration-ms': 'REDACTED'
    'x-ms-serviceversion': 'REDACTED'
    'x-ms-cosmos-is-partition-key-delete-pending': 'REDACTED'
    'x-ms-cosmos-physical-partition-id': 'REDACTED'
    'x-ms-cosmos-internal-partition-id': 'REDACTED'
    'x-ms-gatewayversion': 'REDACTED'
    'Date': 'Wed, 30 Oct 2024 10:25:17 GMT'
2024-10-30 05:25:17,857 - INFO - Post 1g9w053 is not an image or video post, skipping
2024-10-30 05:25:17,857 - INFO - Checking post: 1fv4cfc - Score: 4577 - URL: https://www.reddit.com/gallery/1fv4cfc
2024-10-30 05:25:17,858 - INFO - Request URL: 'https://cosmossnoogram-centralus.documents.azure.com:443/dbs/ToDoList/colls/sent_posts/docs/'
Request method: 'POST'
Request headers:
    'Cache-Control': 'no-cache'
    'x-ms-version': 'REDACTED'
    'x-ms-documentdb-query-iscontinuationexpected': 'REDACTED'
    'x-ms-consistency-level': 'REDACTED'
    'x-ms-documentdb-isquery': 'REDACTED'
    'Content-Type': 'application/query+json'
    'x-ms-session-token': 'REDACTED'
    'x-ms-documentdb-query-enablecrosspartition': 'REDACTED'
    'x-ms-date': 'REDACTED'
    'authorization': 'REDACTED'
    'Accept': 'application/json'
    'x-ms-cosmos-correlated-activityid': 'REDACTED'
    'Content-Length': '107'
    'User-Agent': 'azsdk-python-cosmos/4.5.1 Python/3.12.4 (macOS-15.0.1-arm64-arm-64bit)'
A body is sent with the request
2024-10-30 05:25:17,917 - DEBUG - https://cosmossnoogram-centralus.documents.azure.com:443 "POST /dbs/ToDoList/colls/sent_posts/docs/ HTTP/11" 200 None
2024-10-30 05:25:17,918 - INFO - Response status: 200
Response headers:
    'Cache-Control': 'no-store, no-cache'
    'Pragma': 'no-cache'
    'Transfer-Encoding': 'chunked'
    'Content-Type': 'application/json'
    'Server': 'Microsoft-HTTPAPI/2.0'
    'Strict-Transport-Security': 'REDACTED'
    'x-ms-activity-id': 'REDACTED'
    'x-ms-last-state-change-utc': 'REDACTED'
    'x-ms-resource-quota': 'REDACTED'
    'x-ms-resource-usage': 'REDACTED'
    'x-ms-schemaversion': 'REDACTED'
    'lsn': 'REDACTED'
    'x-ms-item-count': 'REDACTED'
    'x-ms-request-charge': 'REDACTED'
    'x-ms-alt-content-path': 'REDACTED'
    'x-ms-content-path': 'REDACTED'
    'x-ms-documentdb-partitionkeyrangeid': 'REDACTED'
    'x-ms-xp-role': 'REDACTED'
    'x-ms-cosmos-query-execution-info': 'REDACTED'
    'x-ms-global-Committed-lsn': 'REDACTED'
    'x-ms-number-of-read-regions': 'REDACTED'
    'x-ms-transport-request-id': 'REDACTED'
    'x-ms-cosmos-llsn': 'REDACTED'
    'x-ms-session-token': 'REDACTED'
    'x-ms-request-duration-ms': 'REDACTED'
    'x-ms-serviceversion': 'REDACTED'
    'x-ms-cosmos-is-partition-key-delete-pending': 'REDACTED'
    'x-ms-cosmos-physical-partition-id': 'REDACTED'
    'x-ms-cosmos-internal-partition-id': 'REDACTED'
    'x-ms-gatewayversion': 'REDACTED'
    'Date': 'Wed, 30 Oct 2024 10:25:17 GMT'
2024-10-30 05:25:17,918 - INFO - Post 1fv4cfc is not an image or video post, skipping
2024-10-30 05:25:17,918 - INFO - Checking post: 1ganrp0 - Score: 4209 - URL: https://i.redd.it/ezatz8645lwd1.jpeg
2024-10-30 05:25:17,919 - INFO - Request URL: 'https://cosmossnoogram-centralus.documents.azure.com:443/dbs/ToDoList/colls/sent_posts/docs/'
Request method: 'POST'
Request headers:
    'Cache-Control': 'no-cache'
    'x-ms-version': 'REDACTED'
    'x-ms-documentdb-query-iscontinuationexpected': 'REDACTED'
    'x-ms-consistency-level': 'REDACTED'
    'x-ms-documentdb-isquery': 'REDACTED'
    'Content-Type': 'application/query+json'
    'x-ms-session-token': 'REDACTED'
    'x-ms-documentdb-query-enablecrosspartition': 'REDACTED'
    'x-ms-date': 'REDACTED'
    'authorization': 'REDACTED'
    'Accept': 'application/json'
    'x-ms-cosmos-correlated-activityid': 'REDACTED'
    'Content-Length': '107'
    'User-Agent': 'azsdk-python-cosmos/4.5.1 Python/3.12.4 (macOS-15.0.1-arm64-arm-64bit)'
A body is sent with the request
2024-10-30 05:25:17,966 - DEBUG - https://cosmossnoogram-centralus.documents.azure.com:443 "POST /dbs/ToDoList/colls/sent_posts/docs/ HTTP/11" 200 None
2024-10-30 05:25:17,967 - INFO - Response status: 200
Response headers:
    'Cache-Control': 'no-store, no-cache'
    'Pragma': 'no-cache'
    'Transfer-Encoding': 'chunked'
    'Content-Type': 'application/json'
    'Server': 'Microsoft-HTTPAPI/2.0'
    'Strict-Transport-Security': 'REDACTED'
    'x-ms-activity-id': 'REDACTED'
    'x-ms-last-state-change-utc': 'REDACTED'
    'x-ms-resource-quota': 'REDACTED'
    'x-ms-resource-usage': 'REDACTED'
    'x-ms-schemaversion': 'REDACTED'
    'lsn': 'REDACTED'
    'x-ms-item-count': 'REDACTED'
    'x-ms-request-charge': 'REDACTED'
    'x-ms-alt-content-path': 'REDACTED'
    'x-ms-content-path': 'REDACTED'
    'x-ms-documentdb-partitionkeyrangeid': 'REDACTED'
    'x-ms-xp-role': 'REDACTED'
    'x-ms-cosmos-query-execution-info': 'REDACTED'
    'x-ms-global-Committed-lsn': 'REDACTED'
    'x-ms-number-of-read-regions': 'REDACTED'
    'x-ms-transport-request-id': 'REDACTED'
    'x-ms-cosmos-llsn': 'REDACTED'
    'x-ms-session-token': 'REDACTED'
    'x-ms-request-duration-ms': 'REDACTED'
    'x-ms-serviceversion': 'REDACTED'
    'x-ms-cosmos-is-partition-key-delete-pending': 'REDACTED'
    'x-ms-cosmos-physical-partition-id': 'REDACTED'
    'x-ms-cosmos-internal-partition-id': 'REDACTED'
    'x-ms-gatewayversion': 'REDACTED'
    'Date': 'Wed, 30 Oct 2024 10:25:17 GMT'
2024-10-30 05:25:17,967 - INFO - Post 1ganrp0 is a duplicate, skipping
2024-10-30 05:25:17,967 - INFO - Checking post: 1gdrcjt - Score: 4058 - URL: https://www.redgifs.com/watch/unrealisticdefinitebarebirdbat
2024-10-30 05:25:17,968 - INFO - Post 1gdrcjt is a duplicate, skipping
2024-10-30 05:25:17,968 - INFO - Checking post: 1g30sx1 - Score: 3962 - URL: https://www.redgifs.com/watch/hardwarlikesunbittern
2024-10-30 05:25:17,969 - INFO - Post 1g30sx1 is a duplicate, skipping
2024-10-30 05:25:17,969 - INFO - Checking post: 1fs7839 - Score: 3853 - URL: https://www.reddit.com/gallery/1fs7839
2024-10-30 05:25:17,969 - INFO - Request URL: 'https://cosmossnoogram-centralus.documents.azure.com:443/dbs/ToDoList/colls/sent_posts/docs/'
Request method: 'POST'
Request headers:
    'Cache-Control': 'no-cache'
    'x-ms-version': 'REDACTED'
    'x-ms-documentdb-query-iscontinuationexpected': 'REDACTED'
    'x-ms-consistency-level': 'REDACTED'
    'x-ms-documentdb-isquery': 'REDACTED'
    'Content-Type': 'application/query+json'
    'x-ms-session-token': 'REDACTED'
    'x-ms-documentdb-query-enablecrosspartition': 'REDACTED'
    'x-ms-date': 'REDACTED'
    'authorization': 'REDACTED'
    'Accept': 'application/json'
    'x-ms-cosmos-correlated-activityid': 'REDACTED'
    'Content-Length': '107'
    'User-Agent': 'azsdk-python-cosmos/4.5.1 Python/3.12.4 (macOS-15.0.1-arm64-arm-64bit)'
A body is sent with the request
2024-10-30 05:25:18,031 - DEBUG - https://cosmossnoogram-centralus.documents.azure.com:443 "POST /dbs/ToDoList/colls/sent_posts/docs/ HTTP/11" 200 None
2024-10-30 05:25:18,032 - INFO - Response status: 200
Response headers:
    'Cache-Control': 'no-store, no-cache'
    'Pragma': 'no-cache'
    'Transfer-Encoding': 'chunked'
    'Content-Type': 'application/json'
    'Server': 'Microsoft-HTTPAPI/2.0'
    'Strict-Transport-Security': 'REDACTED'
    'x-ms-activity-id': 'REDACTED'
    'x-ms-last-state-change-utc': 'REDACTED'
    'x-ms-resource-quota': 'REDACTED'
    'x-ms-resource-usage': 'REDACTED'
    'x-ms-schemaversion': 'REDACTED'
    'lsn': 'REDACTED'
    'x-ms-item-count': 'REDACTED'
    'x-ms-request-charge': 'REDACTED'
    'x-ms-alt-content-path': 'REDACTED'
    'x-ms-content-path': 'REDACTED'
    'x-ms-quorum-acked-lsn': 'REDACTED'
    'x-ms-current-write-quorum': 'REDACTED'
    'x-ms-current-replica-set-size': 'REDACTED'
    'x-ms-documentdb-partitionkeyrangeid': 'REDACTED'
    'x-ms-xp-role': 'REDACTED'
    'x-ms-cosmos-query-execution-info': 'REDACTED'
    'x-ms-global-Committed-lsn': 'REDACTED'
    'x-ms-number-of-read-regions': 'REDACTED'
    'x-ms-transport-request-id': 'REDACTED'
    'x-ms-cosmos-llsn': 'REDACTED'
    'x-ms-cosmos-quorum-acked-llsn': 'REDACTED'
    'x-ms-session-token': 'REDACTED'
    'x-ms-request-duration-ms': 'REDACTED'
    'x-ms-serviceversion': 'REDACTED'
    'x-ms-cosmos-is-partition-key-delete-pending': 'REDACTED'
    'x-ms-cosmos-physical-partition-id': 'REDACTED'
    'x-ms-cosmos-internal-partition-id': 'REDACTED'
    'x-ms-gatewayversion': 'REDACTED'
    'Date': 'Wed, 30 Oct 2024 10:25:17 GMT'
2024-10-30 05:25:18,032 - INFO - Post 1fs7839 is not an image or video post, skipping
2024-10-30 05:25:18,032 - INFO - Checking post: 1g2rse9 - Score: 3768 - URL: https://i.redd.it/gzxs1aeshjud1.png
2024-10-30 05:25:18,033 - INFO - Post 1g2rse9 is a duplicate, skipping
2024-10-30 05:25:18,033 - INFO - Checking post: 1ge9loz - Score: 3731 - URL: https://www.redgifs.com/watch/deadlygregariouswoodchuck
2024-10-30 05:25:18,033 - INFO - Post 1ge9loz is a duplicate, skipping
2024-10-30 05:25:18,033 - INFO - Checking post: 1g0e966 - Score: 3629 - URL: https://www.reddit.com/gallery/1g0e966
2024-10-30 05:25:18,034 - INFO - Request URL: 'https://cosmossnoogram-centralus.documents.azure.com:443/dbs/ToDoList/colls/sent_posts/docs/'
Request method: 'POST'
Request headers:
    'Cache-Control': 'no-cache'
    'x-ms-version': 'REDACTED'
    'x-ms-documentdb-query-iscontinuationexpected': 'REDACTED'
    'x-ms-consistency-level': 'REDACTED'
    'x-ms-documentdb-isquery': 'REDACTED'
    'Content-Type': 'application/query+json'
    'x-ms-session-token': 'REDACTED'
    'x-ms-documentdb-query-enablecrosspartition': 'REDACTED'
    'x-ms-date': 'REDACTED'
    'authorization': 'REDACTED'
    'Accept': 'application/json'
    'x-ms-cosmos-correlated-activityid': 'REDACTED'
    'Content-Length': '107'
    'User-Agent': 'azsdk-python-cosmos/4.5.1 Python/3.12.4 (macOS-15.0.1-arm64-arm-64bit)'
A body is sent with the request
2024-10-30 05:25:18,092 - DEBUG - https://cosmossnoogram-centralus.documents.azure.com:443 "POST /dbs/ToDoList/colls/sent_posts/docs/ HTTP/11" 200 None
2024-10-30 05:25:18,093 - INFO - Response status: 200
Response headers:
    'Cache-Control': 'no-store, no-cache'
    'Pragma': 'no-cache'
    'Transfer-Encoding': 'chunked'
    'Content-Type': 'application/json'
    'Server': 'Microsoft-HTTPAPI/2.0'
    'Strict-Transport-Security': 'REDACTED'
    'x-ms-activity-id': 'REDACTED'
    'x-ms-last-state-change-utc': 'REDACTED'
    'x-ms-resource-quota': 'REDACTED'
    'x-ms-resource-usage': 'REDACTED'
    'x-ms-schemaversion': 'REDACTED'
    'lsn': 'REDACTED'
    'x-ms-item-count': 'REDACTED'
    'x-ms-request-charge': 'REDACTED'
    'x-ms-alt-content-path': 'REDACTED'
    'x-ms-content-path': 'REDACTED'
    'x-ms-documentdb-partitionkeyrangeid': 'REDACTED'
    'x-ms-xp-role': 'REDACTED'
    'x-ms-cosmos-query-execution-info': 'REDACTED'
    'x-ms-global-Committed-lsn': 'REDACTED'
    'x-ms-number-of-read-regions': 'REDACTED'
    'x-ms-transport-request-id': 'REDACTED'
    'x-ms-cosmos-llsn': 'REDACTED'
    'x-ms-session-token': 'REDACTED'
    'x-ms-request-duration-ms': 'REDACTED'
    'x-ms-serviceversion': 'REDACTED'
    'x-ms-cosmos-is-partition-key-delete-pending': 'REDACTED'
    'x-ms-cosmos-physical-partition-id': 'REDACTED'
    'x-ms-cosmos-internal-partition-id': 'REDACTED'
    'x-ms-gatewayversion': 'REDACTED'
    'Date': 'Wed, 30 Oct 2024 10:25:17 GMT'
2024-10-30 05:25:18,093 - INFO - Post 1g0e966 is not an image or video post, skipping
2024-10-30 05:25:18,093 - INFO - Checking post: 1gckgcy - Score: 3400 - URL: https://i.redd.it/njd0mbyjl3xd1.jpeg
2024-10-30 05:25:18,094 - INFO - Post 1gckgcy is a duplicate, skipping
2024-10-30 05:25:18,094 - INFO - Checking post: 1fznoil - Score: 3333 - URL: https://i.redd.it/eruk3694dptd1.jpeg
2024-10-30 05:25:18,094 - INFO - Post 1fznoil is a duplicate, skipping
2024-10-30 05:25:18,094 - INFO - Checking post: 1g3dsj7 - Score: 3187 - URL: https://i.redd.it/cg9oigznmpud1.jpeg
2024-10-30 05:25:18,094 - INFO - Post 1g3dsj7 is a duplicate, skipping
2024-10-30 05:25:18,094 - INFO - Checking post: 1g4dx9i - Score: 3137 - URL: https://i.redd.it/5kv3c8f3lyud1.jpeg
2024-10-30 05:25:18,095 - INFO - Request URL: 'https://cosmossnoogram-centralus.documents.azure.com:443/dbs/ToDoList/colls/sent_posts/docs/'
Request method: 'POST'
Request headers:
    'Cache-Control': 'no-cache'
    'x-ms-version': 'REDACTED'
    'x-ms-documentdb-query-iscontinuationexpected': 'REDACTED'
    'x-ms-consistency-level': 'REDACTED'
    'x-ms-documentdb-isquery': 'REDACTED'
    'Content-Type': 'application/query+json'
    'x-ms-session-token': 'REDACTED'
    'x-ms-documentdb-query-enablecrosspartition': 'REDACTED'
    'x-ms-date': 'REDACTED'
    'authorization': 'REDACTED'
    'Accept': 'application/json'
    'x-ms-cosmos-correlated-activityid': 'REDACTED'
    'Content-Length': '107'
    'User-Agent': 'azsdk-python-cosmos/4.5.1 Python/3.12.4 (macOS-15.0.1-arm64-arm-64bit)'
A body is sent with the request
2024-10-30 05:25:18,153 - DEBUG - https://cosmossnoogram-centralus.documents.azure.com:443 "POST /dbs/ToDoList/colls/sent_posts/docs/ HTTP/11" 200 None
2024-10-30 05:25:18,154 - INFO - Response status: 200
Response headers:
    'Cache-Control': 'no-store, no-cache'
    'Pragma': 'no-cache'
    'Transfer-Encoding': 'chunked'
    'Content-Type': 'application/json'
    'Server': 'Microsoft-HTTPAPI/2.0'
    'Strict-Transport-Security': 'REDACTED'
    'x-ms-activity-id': 'REDACTED'
    'x-ms-last-state-change-utc': 'REDACTED'
    'x-ms-resource-quota': 'REDACTED'
    'x-ms-resource-usage': 'REDACTED'
    'x-ms-schemaversion': 'REDACTED'
    'lsn': 'REDACTED'
    'x-ms-item-count': 'REDACTED'
    'x-ms-request-charge': 'REDACTED'
    'x-ms-alt-content-path': 'REDACTED'
    'x-ms-content-path': 'REDACTED'
    'x-ms-documentdb-partitionkeyrangeid': 'REDACTED'
    'x-ms-xp-role': 'REDACTED'
    'x-ms-cosmos-query-execution-info': 'REDACTED'
    'x-ms-global-Committed-lsn': 'REDACTED'
    'x-ms-number-of-read-regions': 'REDACTED'
    'x-ms-transport-request-id': 'REDACTED'
    'x-ms-cosmos-llsn': 'REDACTED'
    'x-ms-session-token': 'REDACTED'
    'x-ms-request-duration-ms': 'REDACTED'
    'x-ms-serviceversion': 'REDACTED'
    'x-ms-cosmos-is-partition-key-delete-pending': 'REDACTED'
    'x-ms-cosmos-physical-partition-id': 'REDACTED'
    'x-ms-cosmos-internal-partition-id': 'REDACTED'
    'x-ms-gatewayversion': 'REDACTED'
    'Date': 'Wed, 30 Oct 2024 10:25:17 GMT'
2024-10-30 05:25:18,154 - INFO - Post 1g4dx9i is a duplicate, skipping
2024-10-30 05:25:18,154 - INFO - Checking post: 1ftaz41 - Score: 3134 - URL: https://i.redd.it/2meejva1g1sd1.jpeg
2024-10-30 05:25:18,155 - INFO - Request URL: 'https://cosmossnoogram-centralus.documents.azure.com:443/dbs/ToDoList/colls/sent_posts/docs/'
Request method: 'POST'
Request headers:
    'Cache-Control': 'no-cache'
    'x-ms-version': 'REDACTED'
    'x-ms-documentdb-query-iscontinuationexpected': 'REDACTED'
    'x-ms-consistency-level': 'REDACTED'
    'x-ms-documentdb-isquery': 'REDACTED'
    'Content-Type': 'application/query+json'
    'x-ms-session-token': 'REDACTED'
    'x-ms-documentdb-query-enablecrosspartition': 'REDACTED'
    'x-ms-date': 'REDACTED'
    'authorization': 'REDACTED'
    'Accept': 'application/json'
    'x-ms-cosmos-correlated-activityid': 'REDACTED'
    'Content-Length': '107'
    'User-Agent': 'azsdk-python-cosmos/4.5.1 Python/3.12.4 (macOS-15.0.1-arm64-arm-64bit)'
A body is sent with the request
2024-10-30 05:25:18,188 - DEBUG - https://cosmossnoogram-centralus.documents.azure.com:443 "POST /dbs/ToDoList/colls/sent_posts/docs/ HTTP/11" 200 None
2024-10-30 05:25:18,189 - INFO - Response status: 200
Response headers:
    'Cache-Control': 'no-store, no-cache'
    'Pragma': 'no-cache'
    'Transfer-Encoding': 'chunked'
    'Content-Type': 'application/json'
    'Server': 'Microsoft-HTTPAPI/2.0'
    'Strict-Transport-Security': 'REDACTED'
    'x-ms-activity-id': 'REDACTED'
    'x-ms-last-state-change-utc': 'REDACTED'
    'x-ms-resource-quota': 'REDACTED'
    'x-ms-resource-usage': 'REDACTED'
    'x-ms-schemaversion': 'REDACTED'
    'lsn': 'REDACTED'
    'x-ms-item-count': 'REDACTED'
    'x-ms-request-charge': 'REDACTED'
    'x-ms-alt-content-path': 'REDACTED'
    'x-ms-content-path': 'REDACTED'
    'x-ms-quorum-acked-lsn': 'REDACTED'
    'x-ms-current-write-quorum': 'REDACTED'
    'x-ms-current-replica-set-size': 'REDACTED'
    'x-ms-documentdb-partitionkeyrangeid': 'REDACTED'
    'x-ms-xp-role': 'REDACTED'
    'x-ms-cosmos-query-execution-info': 'REDACTED'
    'x-ms-global-Committed-lsn': 'REDACTED'
    'x-ms-number-of-read-regions': 'REDACTED'
    'x-ms-transport-request-id': 'REDACTED'
    'x-ms-cosmos-llsn': 'REDACTED'
    'x-ms-cosmos-quorum-acked-llsn': 'REDACTED'
    'x-ms-session-token': 'REDACTED'
    'x-ms-request-duration-ms': 'REDACTED'
    'x-ms-serviceversion': 'REDACTED'
    'x-ms-cosmos-is-partition-key-delete-pending': 'REDACTED'
    'x-ms-cosmos-physical-partition-id': 'REDACTED'
    'x-ms-cosmos-internal-partition-id': 'REDACTED'
    'x-ms-gatewayversion': 'REDACTED'
    'Date': 'Wed, 30 Oct 2024 10:25:17 GMT'
2024-10-30 05:25:18,189 - INFO - Found image post: 1ftaz41 with URL: https://i.redd.it/2meejva1g1sd1.jpeg
2024-10-30 05:25:18,190 - DEBUG - Starting new HTTPS connection (1): i.redd.it:443
2024-10-30 05:25:18,308 - DEBUG - https://i.redd.it:443 "GET /2meejva1g1sd1.jpeg HTTP/11" 200 1985406
2024-10-30 05:25:18,602 - INFO - Successfully downloaded media to downloads/pics/1ftaz41_20241030_052518_48b57fcf.jpeg
2024-10-30 05:25:18,604 - DEBUG - Using selector: KqueueSelector
2024-10-30 05:25:18,605 - INFO - Attempting to send photo to Telegram - Path: downloads/pics/1ftaz41_20241030_052518_48b57fcf.jpeg
2024-10-30 05:25:18,605 - DEBUG - load_ssl_context verify=True cert=None trust_env=True http2=False
2024-10-30 05:25:18,606 - DEBUG - load_verify_locations cafile='/Users/joewilson/PythonProjects/Snoogram/venv/lib/python3.12/site-packages/certifi/cacert.pem'
2024-10-30 05:25:18,616 - DEBUG - load_ssl_context verify=True cert=None trust_env=True http2=False
2024-10-30 05:25:18,616 - DEBUG - load_verify_locations cafile='/Users/joewilson/PythonProjects/Snoogram/venv/lib/python3.12/site-packages/certifi/cacert.pem'
2024-10-30 05:25:18,625 - DEBUG - Entering: get_me
2024-10-30 05:25:18,690 - DEBUG - connect_tcp.started host='api.telegram.org' port=443 local_address=None timeout=5.0 socket_options=None
2024-10-30 05:25:18,764 - INFO - Successfully downloaded media to downloads/videos/1gelyz1_20241030_052517_ba5c8ead.mp4
2024-10-30 05:25:18,766 - DEBUG - Using selector: KqueueSelector
2024-10-30 05:25:18,766 - INFO - Attempting to send video to Telegram - Path: downloads/videos/1gelyz1_20241030_052517_ba5c8ead.mp4
2024-10-30 05:25:18,766 - DEBUG - Entering: get_me
2024-10-30 05:25:18,766 - DEBUG - connect_tcp.started host='api.telegram.org' port=443 local_address=None timeout=5.0 socket_options=None
2024-10-30 05:25:18,815 - DEBUG - connect_tcp.complete return_value=<httpcore._backends.anyio.AnyIOStream object at 0x108a61850>
2024-10-30 05:25:18,815 - DEBUG - start_tls.started ssl_context=<ssl.SSLContext object at 0x10aa45d50> server_hostname='api.telegram.org' timeout=5.0
2024-10-30 05:25:18,884 - DEBUG - connect_tcp.complete return_value=<httpcore._backends.anyio.AnyIOStream object at 0x108f2acc0>
2024-10-30 05:25:18,885 - DEBUG - start_tls.started ssl_context=<ssl.SSLContext object at 0x10aa45d50> server_hostname='api.telegram.org' timeout=5.0
2024-10-30 05:25:18,949 - DEBUG - start_tls.complete return_value=<httpcore._backends.anyio.AnyIOStream object at 0x108f2ba10>
2024-10-30 05:25:18,950 - DEBUG - send_request_headers.started request=<Request [b'POST']>
2024-10-30 05:25:18,950 - DEBUG - send_request_headers.complete
2024-10-30 05:25:18,950 - DEBUG - send_request_body.started request=<Request [b'POST']>
2024-10-30 05:25:18,950 - DEBUG - send_request_body.complete
2024-10-30 05:25:18,950 - DEBUG - receive_response_headers.started request=<Request [b'POST']>
2024-10-30 05:25:19,015 - DEBUG - start_tls.complete return_value=<httpcore._backends.anyio.AnyIOStream object at 0x108dd2540>
2024-10-30 05:25:19,016 - DEBUG - send_request_headers.started request=<Request [b'POST']>
2024-10-30 05:25:19,016 - DEBUG - send_request_headers.complete
2024-10-30 05:25:19,016 - DEBUG - send_request_body.started request=<Request [b'POST']>
2024-10-30 05:25:19,016 - DEBUG - send_request_body.complete
2024-10-30 05:25:19,016 - DEBUG - receive_response_headers.started request=<Request [b'POST']>
2024-10-30 05:25:19,067 - DEBUG - receive_response_headers.complete return_value=(b'HTTP/1.1', 200, b'OK', [(b'Server', b'nginx/1.18.0'), (b'Date', b'Wed, 30 Oct 2024 10:25:19 GMT'), (b'Content-Type', b'application/json'), (b'Content-Length', b'254'), (b'Connection', b'keep-alive'), (b'Strict-Transport-Security', b'max-age=31536000; includeSubDomains; preload'), (b'Access-Control-Allow-Origin', b'*'), (b'Access-Control-Allow-Methods', b'GET, POST, OPTIONS'), (b'Access-Control-Expose-Headers', b'Content-Length,Content-Type,Date,Server,Connection')])
2024-10-30 05:25:19,068 - INFO - HTTP Request: POST https://api.telegram.org/bot7867694458:AAEFLZjWPyd1p640mHENnBt479WRYfSavWg/getMe "HTTP/1.1 200 OK"
2024-10-30 05:25:19,068 - DEBUG - receive_response_body.started request=<Request [b'POST']>
2024-10-30 05:25:19,068 - DEBUG - receive_response_body.complete
2024-10-30 05:25:19,068 - DEBUG - response_closed.started
2024-10-30 05:25:19,068 - DEBUG - response_closed.complete
2024-10-30 05:25:19,069 - DEBUG - User(api_kwargs={'can_connect_to_business': False, 'has_main_web_app': False}, can_join_groups=True, can_read_all_group_messages=False, first_name='RedditBot', id=7867694458, is_bot=True, supports_inline_queries=False, username='RedditImage_bot')
2024-10-30 05:25:19,069 - DEBUG - Exiting: get_me
2024-10-30 05:25:19,069 - DEBUG - This Bot is already initialized.
2024-10-30 05:25:19,069 - DEBUG - Entering: send_photo
2024-10-30 05:25:19,071 - DEBUG - send_request_headers.started request=<Request [b'POST']>
2024-10-30 05:25:19,071 - DEBUG - send_request_headers.complete
2024-10-30 05:25:19,071 - DEBUG - send_request_body.started request=<Request [b'POST']>
2024-10-30 05:25:19,145 - DEBUG - receive_response_headers.complete return_value=(b'HTTP/1.1', 200, b'OK', [(b'Server', b'nginx/1.18.0'), (b'Date', b'Wed, 30 Oct 2024 10:25:19 GMT'), (b'Content-Type', b'application/json'), (b'Content-Length', b'254'), (b'Connection', b'keep-alive'), (b'Strict-Transport-Security', b'max-age=31536000; includeSubDomains; preload'), (b'Access-Control-Allow-Origin', b'*'), (b'Access-Control-Allow-Methods', b'GET, POST, OPTIONS'), (b'Access-Control-Expose-Headers', b'Content-Length,Content-Type,Date,Server,Connection')])
2024-10-30 05:25:19,145 - INFO - HTTP Request: POST https://api.telegram.org/bot7867694458:AAEFLZjWPyd1p640mHENnBt479WRYfSavWg/getMe "HTTP/1.1 200 OK"
2024-10-30 05:25:19,145 - DEBUG - receive_response_body.started request=<Request [b'POST']>
2024-10-30 05:25:19,146 - DEBUG - receive_response_body.complete
2024-10-30 05:25:19,146 - DEBUG - response_closed.started
2024-10-30 05:25:19,146 - DEBUG - response_closed.complete
2024-10-30 05:25:19,146 - DEBUG - User(api_kwargs={'can_connect_to_business': False, 'has_main_web_app': False}, can_join_groups=True, can_read_all_group_messages=False, first_name='RedditBot', id=7867694458, is_bot=True, supports_inline_queries=False, username='RedditImage_bot')
2024-10-30 05:25:19,146 - DEBUG - Exiting: get_me
2024-10-30 05:25:19,146 - DEBUG - This Updater is already initialized.
2024-10-30 05:25:19,146 - DEBUG - Entering: send_video
2024-10-30 05:25:19,160 - DEBUG - send_request_headers.started request=<Request [b'POST']>
2024-10-30 05:25:19,160 - DEBUG - send_request_headers.complete
2024-10-30 05:25:19,160 - DEBUG - send_request_body.started request=<Request [b'POST']>
2024-10-30 05:25:19,808 - DEBUG - send_request_body.complete
2024-10-30 05:25:19,808 - DEBUG - receive_response_headers.started request=<Request [b'POST']>
2024-10-30 05:25:20,243 - DEBUG - receive_response_headers.complete return_value=(b'HTTP/1.1', 200, b'OK', [(b'Server', b'nginx/1.18.0'), (b'Date', b'Wed, 30 Oct 2024 10:25:20 GMT'), (b'Content-Type', b'application/json'), (b'Content-Length', b'1274'), (b'Connection', b'keep-alive'), (b'Strict-Transport-Security', b'max-age=31536000; includeSubDomains; preload'), (b'Access-Control-Allow-Origin', b'*'), (b'Access-Control-Allow-Methods', b'GET, POST, OPTIONS'), (b'Access-Control-Expose-Headers', b'Content-Length,Content-Type,Date,Server,Connection')])
2024-10-30 05:25:20,243 - INFO - HTTP Request: POST https://api.telegram.org/bot7867694458:AAEFLZjWPyd1p640mHENnBt479WRYfSavWg/sendPhoto "HTTP/1.1 200 OK"
2024-10-30 05:25:20,243 - DEBUG - receive_response_body.started request=<Request [b'POST']>
2024-10-30 05:25:20,243 - DEBUG - receive_response_body.complete
2024-10-30 05:25:20,243 - DEBUG - response_closed.started
2024-10-30 05:25:20,243 - DEBUG - response_closed.complete
2024-10-30 05:25:20,244 - DEBUG - Message(caption='From r/wifebutt: My freshly showered wifebutt getting laundry done before hubby gets homeâ¤ï¸\nUpvotes: 3,134', channel_chat_created=False, chat=Chat(id=-1002490380283, title='Reddit_Pic_Stream', type=<ChatType.CHANNEL>), date=datetime.datetime(2024, 10, 30, 10, 25, 20, tzinfo=<UTC>), delete_chat_photo=False, group_chat_created=False, message_id=241, photo=(PhotoSize(file_id='AgACAgEAAyEGAASUcC_7AAOVZyH6fIsDbmatiKqYBM-ekhjWV94AAkatMRsZEBFFVdgzLssswhoBAAMCAANzAAM2BA', file_size=1559, file_unique_id='AQADRq0xGxkQEUV4', height=90, width=58), PhotoSize(file_id='AgACAgEAAyEGAASUcC_7AAOVZyH6fIsDbmatiKqYBM-ekhjWV94AAkatMRsZEBFFVdgzLssswhoBAAMCAANtAAM2BA', file_size=20620, file_unique_id='AQADRq0xGxkQEUVy', height=320, width=206), PhotoSize(file_id='AgACAgEAAyEGAASUcC_7AAOVZyH6fIsDbmatiKqYBM-ekhjWV94AAkatMRsZEBFFVdgzLssswhoBAAMCAAN4AAM2BA', file_size=93007, file_unique_id='AQADRq0xGxkQEUV9', height=800, width=516), PhotoSize(file_id='AgACAgEAAyEGAASUcC_7AAOVZyH6fIsDbmatiKqYBM-ekhjWV94AAkatMRsZEBFFVdgzLssswhoBAAMCAAN5AAM2BA', file_size=202595, file_unique_id='AQADRq0xGxkQEUV-', height=1280, width=826), PhotoSize(file_id='AgACAgEAAyEGAASUcC_7AAOVZyH6fIsDbmatiKqYBM-ekhjWV94AAkatMRsZEBFFVdgzLssswhoBAAMCAAN3AAM2BA', file_size=633586, file_unique_id='AQADRq0xGxkQEUV8', height=2560, width=1653)), sender_chat=Chat(id=-1002490380283, title='Reddit_Pic_Stream', type=<ChatType.CHANNEL>), supergroup_chat_created=False)
2024-10-30 05:25:20,245 - DEBUG - Exiting: send_photo
2024-10-30 05:25:20,245 - DEBUG - close.started
2024-10-30 05:25:20,245 - DEBUG - close.complete
2024-10-30 05:25:20,245 - DEBUG - close.started
2024-10-30 05:25:20,245 - DEBUG - close.complete
2024-10-30 05:25:20,246 - DEBUG - This Bot is already shut down. Returning.
2024-10-30 05:25:20,246 - DEBUG - Shut down of Updater complete
2024-10-30 05:25:20,246 - INFO - Successfully sent photo to Telegram
2024-10-30 05:25:20,248 - ERROR - Error processing subreddit wifebutt: (sqlite3.OperationalError) attempt to write a readonly database
[SQL: INSERT INTO sent_post (post_id, subreddit_name, sent_at) VALUES (?, ?, ?)]
[parameters: ('1ftaz41', 'wifebutt', '2024-10-30 10:25:20.247559')]
(Background on this error at: https://sqlalche.me/e/20/e3q8)
2024-10-30 05:25:20,249 - ERROR - Job "send_to_telegram (trigger: interval[0:01:00], next run at: 2024-10-30 05:26:16 CDT)" raised an exception
Traceback (most recent call last):
  File "/Users/joewilson/PythonProjects/Snoogram/venv/lib/python3.12/site-packages/sqlalchemy/engine/base.py", line 1967, in _exec_single_context
    self.dialect.do_execute(
  File "/Users/joewilson/PythonProjects/Snoogram/venv/lib/python3.12/site-packages/sqlalchemy/engine/default.py", line 941, in do_execute
    cursor.execute(statement, parameters)
sqlite3.OperationalError: attempt to write a readonly database

The above exception was the direct cause of the following exception:

Traceback (most recent call last):
  File "/Users/joewilson/PythonProjects/Snoogram/venv/lib/python3.12/site-packages/apscheduler/executors/base.py", line 125, in run_job
    retval = job.func(*job.args, **job.kwargs)
             ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/Users/joewilson/PythonProjects/Snoogram/backend/app.py", line 265, in send_to_telegram
    # Update last_check in Cosmos DB
                ^^^^^^^^^^^^^^^^^^^^^
  File "/Users/joewilson/PythonProjects/Snoogram/backend/db_operations.py", line 100, in add_sent_post
  File "/Users/joewilson/PythonProjects/Snoogram/venv/lib/python3.12/site-packages/sqlalchemy/orm/scoping.py", line 597, in commit
    return self._proxied.commit()
           ^^^^^^^^^^^^^^^^^^^^^^
  File "/Users/joewilson/PythonProjects/Snoogram/venv/lib/python3.12/site-packages/sqlalchemy/orm/session.py", line 2028, in commit
    trans.commit(_to_root=True)
  File "<string>", line 2, in commit
  File "/Users/joewilson/PythonProjects/Snoogram/venv/lib/python3.12/site-packages/sqlalchemy/orm/state_changes.py", line 139, in _go
    ret_value = fn(self, *arg, **kw)
                ^^^^^^^^^^^^^^^^^^^^
  File "/Users/joewilson/PythonProjects/Snoogram/venv/lib/python3.12/site-packages/sqlalchemy/orm/session.py", line 1313, in commit
    self._prepare_impl()
  File "<string>", line 2, in _prepare_impl
  File "/Users/joewilson/PythonProjects/Snoogram/venv/lib/python3.12/site-packages/sqlalchemy/orm/state_changes.py", line 139, in _go
    ret_value = fn(self, *arg, **kw)
                ^^^^^^^^^^^^^^^^^^^^
  File "/Users/joewilson/PythonProjects/Snoogram/venv/lib/python3.12/site-packages/sqlalchemy/orm/session.py", line 1288, in _prepare_impl
    self.session.flush()
  File "/Users/joewilson/PythonProjects/Snoogram/venv/lib/python3.12/site-packages/sqlalchemy/orm/session.py", line 4352, in flush
    self._flush(objects)
  File "/Users/joewilson/PythonProjects/Snoogram/venv/lib/python3.12/site-packages/sqlalchemy/orm/session.py", line 4487, in _flush
    with util.safe_reraise():
  File "/Users/joewilson/PythonProjects/Snoogram/venv/lib/python3.12/site-packages/sqlalchemy/util/langhelpers.py", line 146, in __exit__
    raise exc_value.with_traceback(exc_tb)
  File "/Users/joewilson/PythonProjects/Snoogram/venv/lib/python3.12/site-packages/sqlalchemy/orm/session.py", line 4448, in _flush
    flush_context.execute()
  File "/Users/joewilson/PythonProjects/Snoogram/venv/lib/python3.12/site-packages/sqlalchemy/orm/unitofwork.py", line 466, in execute
    rec.execute(self)
  File "/Users/joewilson/PythonProjects/Snoogram/venv/lib/python3.12/site-packages/sqlalchemy/orm/unitofwork.py", line 642, in execute
    util.preloaded.orm_persistence.save_obj(
  File "/Users/joewilson/PythonProjects/Snoogram/venv/lib/python3.12/site-packages/sqlalchemy/orm/persistence.py", line 93, in save_obj
    _emit_insert_statements(
  File "/Users/joewilson/PythonProjects/Snoogram/venv/lib/python3.12/site-packages/sqlalchemy/orm/persistence.py", line 1233, in _emit_insert_statements
    result = connection.execute(
             ^^^^^^^^^^^^^^^^^^^
  File "/Users/joewilson/PythonProjects/Snoogram/venv/lib/python3.12/site-packages/sqlalchemy/engine/base.py", line 1418, in execute
    return meth(
           ^^^^^
  File "/Users/joewilson/PythonProjects/Snoogram/venv/lib/python3.12/site-packages/sqlalchemy/sql/elements.py", line 515, in _execute_on_connection
    return connection._execute_clauseelement(
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/Users/joewilson/PythonProjects/Snoogram/venv/lib/python3.12/site-packages/sqlalchemy/engine/base.py", line 1640, in _execute_clauseelement
    ret = self._execute_context(
          ^^^^^^^^^^^^^^^^^^^^^^
  File "/Users/joewilson/PythonProjects/Snoogram/venv/lib/python3.12/site-packages/sqlalchemy/engine/base.py", line 1846, in _execute_context
    return self._exec_single_context(
           ^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/Users/joewilson/PythonProjects/Snoogram/venv/lib/python3.12/site-packages/sqlalchemy/engine/base.py", line 1986, in _exec_single_context
    self._handle_dbapi_exception(
  File "/Users/joewilson/PythonProjects/Snoogram/venv/lib/python3.12/site-packages/sqlalchemy/engine/base.py", line 2355, in _handle_dbapi_exception
    raise sqlalchemy_exception.with_traceback(exc_info[2]) from e
  File "/Users/joewilson/PythonProjects/Snoogram/venv/lib/python3.12/site-packages/sqlalchemy/engine/base.py", line 1967, in _exec_single_context
    self.dialect.do_execute(
  File "/Users/joewilson/PythonProjects/Snoogram/venv/lib/python3.12/site-packages/sqlalchemy/engine/default.py", line 941, in do_execute
    cursor.execute(statement, parameters)
sqlalchemy.exc.OperationalError: (sqlite3.OperationalError) attempt to write a readonly database
[SQL: INSERT INTO sent_post (post_id, subreddit_name, sent_at) VALUES (?, ?, ?)]
[parameters: ('1ftaz41', 'wifebutt', '2024-10-30 10:25:20.247559')]
(Background on this error at: https://sqlalche.me/e/20/e3q8)
2024-10-30 05:25:39,168 - DEBUG - send_request_body.failed exception=WriteError(ClosedResourceError())
2024-10-30 05:25:39,170 - DEBUG - response_closed.started
2024-10-30 05:25:39,170 - DEBUG - response_closed.complete
2024-10-30 05:25:39,171 - DEBUG - This Application is already shut down. Returning.
2024-10-30 05:25:39,171 - ERROR - Failed to send video to Telegram: httpx.WriteError: 
2024-10-30 05:25:39,173 - ERROR - Error sending video post 1gelyz1: httpx.WriteError: 
2024-10-30 05:25:39,173 - INFO - Checking post: 1gejrnl - Score: 2581 - URL: https://v3.redgifs.com/watch/graydefensivepika
2024-10-30 05:25:39,179 - INFO - Request URL: 'https://cosmossnoogram-centralus.documents.azure.com:443/dbs/ToDoList/colls/sent_posts/docs/'
Request method: 'POST'
Request headers:
    'Cache-Control': 'no-cache'
    'x-ms-version': 'REDACTED'
    'x-ms-documentdb-query-iscontinuationexpected': 'REDACTED'
    'x-ms-consistency-level': 'REDACTED'
    'x-ms-documentdb-isquery': 'REDACTED'
    'Content-Type': 'application/query+json'
    'x-ms-session-token': 'REDACTED'
    'x-ms-documentdb-query-enablecrosspartition': 'REDACTED'
    'x-ms-date': 'REDACTED'
    'authorization': 'REDACTED'
    'Accept': 'application/json'
    'x-ms-cosmos-correlated-activityid': 'REDACTED'
    'Content-Length': '107'
    'User-Agent': 'azsdk-python-cosmos/4.5.1 Python/3.12.4 (macOS-15.0.1-arm64-arm-64bit)'
A body is sent with the request
2024-10-30 05:25:39,219 - DEBUG - https://cosmossnoogram-centralus.documents.azure.com:443 "POST /dbs/ToDoList/colls/sent_posts/docs/ HTTP/11" 200 None
2024-10-30 05:25:39,220 - INFO - Response status: 200
Response headers:
    'Cache-Control': 'no-store, no-cache'
    'Pragma': 'no-cache'
    'Transfer-Encoding': 'chunked'
    'Content-Type': 'application/json'
    'Server': 'Microsoft-HTTPAPI/2.0'
    'Strict-Transport-Security': 'REDACTED'
    'x-ms-activity-id': 'REDACTED'
    'x-ms-last-state-change-utc': 'REDACTED'
    'x-ms-resource-quota': 'REDACTED'
    'x-ms-resource-usage': 'REDACTED'
    'x-ms-schemaversion': 'REDACTED'
    'lsn': 'REDACTED'
    'x-ms-item-count': 'REDACTED'
    'x-ms-request-charge': 'REDACTED'
    'x-ms-alt-content-path': 'REDACTED'
    'x-ms-content-path': 'REDACTED'
    'x-ms-documentdb-partitionkeyrangeid': 'REDACTED'
    'x-ms-xp-role': 'REDACTED'
    'x-ms-cosmos-query-execution-info': 'REDACTED'
    'x-ms-global-Committed-lsn': 'REDACTED'
    'x-ms-number-of-read-regions': 'REDACTED'
    'x-ms-transport-request-id': 'REDACTED'
    'x-ms-cosmos-llsn': 'REDACTED'
    'x-ms-session-token': 'REDACTED'
    'x-ms-request-duration-ms': 'REDACTED'
    'x-ms-serviceversion': 'REDACTED'
    'x-ms-cosmos-is-partition-key-delete-pending': 'REDACTED'
    'x-ms-cosmos-physical-partition-id': 'REDACTED'
    'x-ms-cosmos-internal-partition-id': 'REDACTED'
    'x-ms-gatewayversion': 'REDACTED'
    'Date': 'Wed, 30 Oct 2024 10:25:38 GMT'
2024-10-30 05:25:39,220 - INFO - Post 1gejrnl is a duplicate, skipping
2024-10-30 05:25:39,220 - INFO - Checking post: 1gelw33 - Score: 2306 - URL: https://www.redgifs.com/watch/drydarkgraysable
2024-10-30 05:25:39,220 - INFO - Post 1gelw33 is a duplicate, skipping
2024-10-30 05:25:39,220 - INFO - Checking post: 1gevvp0 - Score: 1196 - URL: https://www.redgifs.com/watch/medicalplumhen
2024-10-30 05:25:39,221 - INFO - Post 1gevvp0 is a duplicate, skipping
2024-10-30 05:25:39,221 - INFO - Checking post: 1gesoj7 - Score: 755 - URL: https://www.redgifs.com/watch/lightgreytrickydragonfly
2024-10-30 05:25:39,221 - INFO - Post 1gesoj7 is a duplicate, skipping
2024-10-30 05:25:39,221 - INFO - Checking post: 1geuuqp - Score: 444 - URL: https://www.redgifs.com/watch/cheerfulbeigebagworm
2024-10-30 05:25:39,222 - INFO - Post 1geuuqp is a duplicate, skipping
2024-10-30 05:25:39,222 - INFO - Checking post: 1geakrb - Score: 390 - URL: https://www.redgifs.com/watch/illinformedthickgalapagoshawk
2024-10-30 05:25:39,222 - INFO - Post 1geakrb is a duplicate, skipping
2024-10-30 05:25:39,222 - INFO - Checking post: 1gerubz - Score: 366 - URL: https://v3.redgifs.com/watch/trickysquarepseudodynerusquadrisectus
2024-10-30 05:25:39,222 - INFO - Post 1gerubz is a duplicate, skipping
2024-10-30 05:25:39,222 - INFO - Checking post: 1getxhl - Score: 343 - URL: https://www.redgifs.com/watch/purpledemandingboaconstrictor
2024-10-30 05:25:39,222 - INFO - Post 1getxhl is a duplicate, skipping
2024-10-30 05:25:39,222 - INFO - Checking post: 1ge9gol - Score: 277 - URL: https://v3.redgifs.com/watch/circulardeeppinkamericanbulldog
2024-10-30 05:25:39,223 - INFO - Request URL: 'https://cosmossnoogram-centralus.documents.azure.com:443/dbs/ToDoList/colls/sent_posts/docs/'
Request method: 'POST'
Request headers:
    'Cache-Control': 'no-cache'
    'x-ms-version': 'REDACTED'
    'x-ms-documentdb-query-iscontinuationexpected': 'REDACTED'
    'x-ms-consistency-level': 'REDACTED'
    'x-ms-documentdb-isquery': 'REDACTED'
    'Content-Type': 'application/query+json'
    'x-ms-session-token': 'REDACTED'
    'x-ms-documentdb-query-enablecrosspartition': 'REDACTED'
    'x-ms-date': 'REDACTED'
    'authorization': 'REDACTED'
    'Accept': 'application/json'
    'x-ms-cosmos-correlated-activityid': 'REDACTED'
    'Content-Length': '107'
    'User-Agent': 'azsdk-python-cosmos/4.5.1 Python/3.12.4 (macOS-15.0.1-arm64-arm-64bit)'
A body is sent with the request
2024-10-30 05:25:39,254 - DEBUG - https://cosmossnoogram-centralus.documents.azure.com:443 "POST /dbs/ToDoList/colls/sent_posts/docs/ HTTP/11" 200 None
2024-10-30 05:25:39,254 - INFO - Response status: 200
Response headers:
    'Cache-Control': 'no-store, no-cache'
    'Pragma': 'no-cache'
    'Transfer-Encoding': 'chunked'
    'Content-Type': 'application/json'
    'Server': 'Microsoft-HTTPAPI/2.0'
    'Strict-Transport-Security': 'REDACTED'
    'x-ms-activity-id': 'REDACTED'
    'x-ms-last-state-change-utc': 'REDACTED'
    'x-ms-resource-quota': 'REDACTED'
    'x-ms-resource-usage': 'REDACTED'
    'x-ms-schemaversion': 'REDACTED'
    'lsn': 'REDACTED'
    'x-ms-item-count': 'REDACTED'
    'x-ms-request-charge': 'REDACTED'
    'x-ms-alt-content-path': 'REDACTED'
    'x-ms-content-path': 'REDACTED'
    'x-ms-documentdb-partitionkeyrangeid': 'REDACTED'
    'x-ms-xp-role': 'REDACTED'
    'x-ms-cosmos-query-execution-info': 'REDACTED'
    'x-ms-global-Committed-lsn': 'REDACTED'
    'x-ms-number-of-read-regions': 'REDACTED'
    'x-ms-transport-request-id': 'REDACTED'
    'x-ms-cosmos-llsn': 'REDACTED'
    'x-ms-session-token': 'REDACTED'
    'x-ms-request-duration-ms': 'REDACTED'
    'x-ms-serviceversion': 'REDACTED'
    'x-ms-cosmos-is-partition-key-delete-pending': 'REDACTED'
    'x-ms-cosmos-physical-partition-id': 'REDACTED'
    'x-ms-cosmos-internal-partition-id': 'REDACTED'
    'x-ms-gatewayversion': 'REDACTED'
    'Date': 'Wed, 30 Oct 2024 10:25:38 GMT'
2024-10-30 05:25:39,254 - INFO - Found video post: 1ge9gol
2024-10-30 05:25:39,255 - DEBUG - Starting new HTTPS connection (1): api.redgifs.com:443
2024-10-30 05:25:39,349 - DEBUG - https://api.redgifs.com:443 "GET /v2/gifs/circulardeeppinkamericanbulldog HTTP/11" 200 None
2024-10-30 05:25:39,351 - DEBUG - Starting new HTTPS connection (1): files.redgifs.com:443
2024-10-30 05:25:39,417 - DEBUG - https://files.redgifs.com:443 "GET /CircularDeeppinkAmericanbulldog.mp4 HTTP/11" 200 61415883
2024-10-30 05:25:40,789 - INFO - Successfully downloaded media to downloads/videos/1ge9gol_20241030_052539_fff8ab71.mp4
2024-10-30 05:25:40,790 - DEBUG - Using selector: KqueueSelector
2024-10-30 05:25:40,791 - INFO - Attempting to send video to Telegram - Path: downloads/videos/1ge9gol_20241030_052539_fff8ab71.mp4
2024-10-30 05:25:40,791 - DEBUG - load_ssl_context verify=True cert=None trust_env=True http2=False
2024-10-30 05:25:40,793 - DEBUG - load_verify_locations cafile='/Users/joewilson/PythonProjects/Snoogram/venv/lib/python3.12/site-packages/certifi/cacert.pem'
2024-10-30 05:25:40,800 - DEBUG - load_ssl_context verify=True cert=None trust_env=True http2=False
2024-10-30 05:25:40,800 - DEBUG - load_verify_locations cafile='/Users/joewilson/PythonProjects/Snoogram/venv/lib/python3.12/site-packages/certifi/cacert.pem'
2024-10-30 05:25:40,805 - DEBUG - Entering: get_me
2024-10-30 05:25:40,806 - DEBUG - connect_tcp.started host='api.telegram.org' port=443 local_address=None timeout=5.0 socket_options=None
2024-10-30 05:25:40,932 - DEBUG - connect_tcp.complete return_value=<httpcore._backends.anyio.AnyIOStream object at 0x108dd30b0>
2024-10-30 05:25:40,932 - DEBUG - start_tls.started ssl_context=<ssl.SSLContext object at 0x1089bddd0> server_hostname='api.telegram.org' timeout=5.0
2024-10-30 05:25:41,063 - DEBUG - start_tls.complete return_value=<httpcore._backends.anyio.AnyIOStream object at 0x108d9d010>
2024-10-30 05:25:41,064 - DEBUG - send_request_headers.started request=<Request [b'POST']>
2024-10-30 05:25:41,064 - DEBUG - send_request_headers.complete
2024-10-30 05:25:41,064 - DEBUG - send_request_body.started request=<Request [b'POST']>
2024-10-30 05:25:41,064 - DEBUG - send_request_body.complete
2024-10-30 05:25:41,064 - DEBUG - receive_response_headers.started request=<Request [b'POST']>
2024-10-30 05:25:41,180 - DEBUG - receive_response_headers.complete return_value=(b'HTTP/1.1', 200, b'OK', [(b'Server', b'nginx/1.18.0'), (b'Date', b'Wed, 30 Oct 2024 10:25:41 GMT'), (b'Content-Type', b'application/json'), (b'Content-Length', b'254'), (b'Connection', b'keep-alive'), (b'Strict-Transport-Security', b'max-age=31536000; includeSubDomains; preload'), (b'Access-Control-Allow-Origin', b'*'), (b'Access-Control-Allow-Methods', b'GET, POST, OPTIONS'), (b'Access-Control-Expose-Headers', b'Content-Length,Content-Type,Date,Server,Connection')])
2024-10-30 05:25:41,180 - INFO - HTTP Request: POST https://api.telegram.org/bot7867694458:AAEFLZjWPyd1p640mHENnBt479WRYfSavWg/getMe "HTTP/1.1 200 OK"
2024-10-30 05:25:41,180 - DEBUG - receive_response_body.started request=<Request [b'POST']>
2024-10-30 05:25:41,180 - DEBUG - receive_response_body.complete
2024-10-30 05:25:41,180 - DEBUG - response_closed.started
2024-10-30 05:25:41,180 - DEBUG - response_closed.complete
2024-10-30 05:25:41,181 - DEBUG - User(api_kwargs={'can_connect_to_business': False, 'has_main_web_app': False}, can_join_groups=True, can_read_all_group_messages=False, first_name='RedditBot', id=7867694458, is_bot=True, supports_inline_queries=False, username='RedditImage_bot')
2024-10-30 05:25:41,181 - DEBUG - Exiting: get_me
2024-10-30 05:25:41,181 - DEBUG - This Bot is already initialized.
2024-10-30 05:25:41,181 - DEBUG - Entering: send_video
2024-10-30 05:25:41,194 - DEBUG - send_request_headers.started request=<Request [b'POST']>
2024-10-30 05:25:41,194 - DEBUG - send_request_headers.complete
2024-10-30 05:25:41,194 - DEBUG - send_request_body.started request=<Request [b'POST']>
2024-10-30 05:25:45,645 - DEBUG - send_request_body.complete
2024-10-30 05:25:45,646 - DEBUG - receive_response_headers.started request=<Request [b'POST']>
2024-10-30 05:25:45,647 - DEBUG - receive_response_headers.complete return_value=(b'HTTP/1.1', 413, b'Request Entity Too Large', [(b'Server', b'nginx/1.18.0'), (b'Date', b'Wed, 30 Oct 2024 10:25:41 GMT'), (b'Content-Type', b'application/json'), (b'Content-Length', b'70'), (b'Connection', b'close'), (b'Strict-Transport-Security', b'max-age=31536000; includeSubDomains; preload'), (b'Access-Control-Allow-Origin', b'*'), (b'Access-Control-Expose-Headers', b'Content-Length,Content-Type,Date,Server,Connection')])
2024-10-30 05:25:45,647 - INFO - HTTP Request: POST https://api.telegram.org/bot7867694458:AAEFLZjWPyd1p640mHENnBt479WRYfSavWg/sendVideo "HTTP/1.1 413 Request Entity Too Large"
2024-10-30 05:25:45,647 - DEBUG - receive_response_body.started request=<Request [b'POST']>
2024-10-30 05:25:45,647 - DEBUG - receive_response_body.complete
2024-10-30 05:25:45,647 - DEBUG - response_closed.started
2024-10-30 05:25:45,647 - DEBUG - response_closed.complete
2024-10-30 05:25:45,647 - DEBUG - This Bot is already shut down. Returning.
2024-10-30 05:25:45,647 - DEBUG - Shut down of Updater complete
2024-10-30 05:25:45,647 - ERROR - Failed to send video to Telegram: Request Entity Too Large (413)
2024-10-30 05:25:45,648 - ERROR - Error sending video post 1ge9gol: Request Entity Too Large (413)
2024-10-30 05:25:45,648 - INFO - Checking post: 1ge98kx - Score: 256 - URL: https://www.redgifs.com/watch/frontspecificspittlebug
2024-10-30 05:25:45,649 - INFO - Post 1ge98kx is a duplicate, skipping
2024-10-30 05:25:45,649 - INFO - Checking post: 1geqscs - Score: 236 - URL: https://www.redgifs.com/watch/previousweequeensnake
2024-10-30 05:25:45,650 - INFO - Request URL: 'https://cosmossnoogram-centralus.documents.azure.com:443/dbs/ToDoList/colls/sent_posts/docs/'
Request method: 'POST'
Request headers:
    'Cache-Control': 'no-cache'
    'x-ms-version': 'REDACTED'
    'x-ms-documentdb-query-iscontinuationexpected': 'REDACTED'
    'x-ms-consistency-level': 'REDACTED'
    'x-ms-documentdb-isquery': 'REDACTED'
    'Content-Type': 'application/query+json'
    'x-ms-session-token': 'REDACTED'
    'x-ms-documentdb-query-enablecrosspartition': 'REDACTED'
    'x-ms-date': 'REDACTED'
    'authorization': 'REDACTED'
    'Accept': 'application/json'
    'x-ms-cosmos-correlated-activityid': 'REDACTED'
    'Content-Length': '107'
    'User-Agent': 'azsdk-python-cosmos/4.5.1 Python/3.12.4 (macOS-15.0.1-arm64-arm-64bit)'
A body is sent with the request
2024-10-30 05:25:45,695 - DEBUG - https://cosmossnoogram-centralus.documents.azure.com:443 "POST /dbs/ToDoList/colls/sent_posts/docs/ HTTP/11" 200 None
2024-10-30 05:25:45,695 - INFO - Response status: 200
Response headers:
    'Cache-Control': 'no-store, no-cache'
    'Pragma': 'no-cache'
    'Transfer-Encoding': 'chunked'
    'Content-Type': 'application/json'
    'Server': 'Microsoft-HTTPAPI/2.0'
    'Strict-Transport-Security': 'REDACTED'
    'x-ms-activity-id': 'REDACTED'
    'x-ms-last-state-change-utc': 'REDACTED'
    'x-ms-resource-quota': 'REDACTED'
    'x-ms-resource-usage': 'REDACTED'
    'x-ms-schemaversion': 'REDACTED'
    'lsn': 'REDACTED'
    'x-ms-item-count': 'REDACTED'
    'x-ms-request-charge': 'REDACTED'
    'x-ms-alt-content-path': 'REDACTED'
    'x-ms-content-path': 'REDACTED'
    'x-ms-quorum-acked-lsn': 'REDACTED'
    'x-ms-current-write-quorum': 'REDACTED'
    'x-ms-current-replica-set-size': 'REDACTED'
    'x-ms-documentdb-partitionkeyrangeid': 'REDACTED'
    'x-ms-xp-role': 'REDACTED'
    'x-ms-cosmos-query-execution-info': 'REDACTED'
    'x-ms-global-Committed-lsn': 'REDACTED'
    'x-ms-number-of-read-regions': 'REDACTED'
    'x-ms-transport-request-id': 'REDACTED'
    'x-ms-cosmos-llsn': 'REDACTED'
    'x-ms-cosmos-quorum-acked-llsn': 'REDACTED'
    'x-ms-session-token': 'REDACTED'
    'x-ms-request-duration-ms': 'REDACTED'
    'x-ms-serviceversion': 'REDACTED'
    'x-ms-cosmos-is-partition-key-delete-pending': 'REDACTED'
    'x-ms-cosmos-physical-partition-id': 'REDACTED'
    'x-ms-cosmos-internal-partition-id': 'REDACTED'
    'x-ms-gatewayversion': 'REDACTED'
    'Date': 'Wed, 30 Oct 2024 10:25:45 GMT'
2024-10-30 05:25:45,695 - INFO - Found video post: 1geqscs
2024-10-30 05:25:45,696 - DEBUG - Starting new HTTPS connection (1): api.redgifs.com:443
2024-10-30 05:25:45,793 - DEBUG - https://api.redgifs.com:443 "GET /v2/gifs/previousweequeensnake HTTP/11" 200 None
2024-10-30 05:25:45,796 - DEBUG - Starting new HTTPS connection (1): files.redgifs.com:443
2024-10-30 05:25:45,868 - DEBUG - https://files.redgifs.com:443 "GET /PreviousWeeQueensnake.mp4 HTTP/11" 200 50070206
2024-10-30 05:25:46,976 - INFO - Successfully downloaded media to downloads/videos/1geqscs_20241030_052545_2fd81a4e.mp4
2024-10-30 05:25:46,977 - DEBUG - Using selector: KqueueSelector
2024-10-30 05:25:46,977 - INFO - Attempting to send video to Telegram - Path: downloads/videos/1geqscs_20241030_052545_2fd81a4e.mp4
2024-10-30 05:25:46,977 - DEBUG - load_ssl_context verify=True cert=None trust_env=True http2=False
2024-10-30 05:25:46,977 - DEBUG - load_verify_locations cafile='/Users/joewilson/PythonProjects/Snoogram/venv/lib/python3.12/site-packages/certifi/cacert.pem'
2024-10-30 05:25:46,985 - DEBUG - load_ssl_context verify=True cert=None trust_env=True http2=False
2024-10-30 05:25:46,985 - DEBUG - load_verify_locations cafile='/Users/joewilson/PythonProjects/Snoogram/venv/lib/python3.12/site-packages/certifi/cacert.pem'
2024-10-30 05:25:46,991 - DEBUG - Entering: get_me
2024-10-30 05:25:46,991 - DEBUG - connect_tcp.started host='api.telegram.org' port=443 local_address=None timeout=5.0 socket_options=None
2024-10-30 05:25:47,111 - DEBUG - connect_tcp.complete return_value=<httpcore._backends.anyio.AnyIOStream object at 0x108a5c8f0>
2024-10-30 05:25:47,112 - DEBUG - start_tls.started ssl_context=<ssl.SSLContext object at 0x108ac8050> server_hostname='api.telegram.org' timeout=5.0
2024-10-30 05:25:47,249 - DEBUG - start_tls.complete return_value=<httpcore._backends.anyio.AnyIOStream object at 0x108d9f230>
2024-10-30 05:25:47,249 - DEBUG - send_request_headers.started request=<Request [b'POST']>
2024-10-30 05:25:47,249 - DEBUG - send_request_headers.complete
2024-10-30 05:25:47,250 - DEBUG - send_request_body.started request=<Request [b'POST']>
2024-10-30 05:25:47,250 - DEBUG - send_request_body.complete
2024-10-30 05:25:47,250 - DEBUG - receive_response_headers.started request=<Request [b'POST']>
2024-10-30 05:25:47,361 - DEBUG - receive_response_headers.complete return_value=(b'HTTP/1.1', 200, b'OK', [(b'Server', b'nginx/1.18.0'), (b'Date', b'Wed, 30 Oct 2024 10:25:47 GMT'), (b'Content-Type', b'application/json'), (b'Content-Length', b'254'), (b'Connection', b'keep-alive'), (b'Strict-Transport-Security', b'max-age=31536000; includeSubDomains; preload'), (b'Access-Control-Allow-Origin', b'*'), (b'Access-Control-Allow-Methods', b'GET, POST, OPTIONS'), (b'Access-Control-Expose-Headers', b'Content-Length,Content-Type,Date,Server,Connection')])
2024-10-30 05:25:47,361 - INFO - HTTP Request: POST https://api.telegram.org/bot7867694458:AAEFLZjWPyd1p640mHENnBt479WRYfSavWg/getMe "HTTP/1.1 200 OK"
2024-10-30 05:25:47,361 - DEBUG - receive_response_body.started request=<Request [b'POST']>
2024-10-30 05:25:47,361 - DEBUG - receive_response_body.complete
2024-10-30 05:25:47,361 - DEBUG - response_closed.started
2024-10-30 05:25:47,362 - DEBUG - response_closed.complete
2024-10-30 05:25:47,362 - DEBUG - User(api_kwargs={'can_connect_to_business': False, 'has_main_web_app': False}, can_join_groups=True, can_read_all_group_messages=False, first_name='RedditBot', id=7867694458, is_bot=True, supports_inline_queries=False, username='RedditImage_bot')
2024-10-30 05:25:47,362 - DEBUG - Exiting: get_me
2024-10-30 05:25:47,362 - DEBUG - This Bot is already initialized.
2024-10-30 05:25:47,362 - DEBUG - Entering: send_video
2024-10-30 05:25:47,388 - DEBUG - send_request_headers.started request=<Request [b'POST']>
2024-10-30 05:25:47,388 - DEBUG - send_request_headers.complete
2024-10-30 05:25:47,388 - DEBUG - send_request_body.started request=<Request [b'POST']>
2024-10-30 05:25:50,851 - DEBUG - send_request_body.complete
2024-10-30 05:25:50,851 - DEBUG - receive_response_headers.started request=<Request [b'POST']>
2024-10-30 05:25:54,052 - DEBUG - receive_response_headers.complete return_value=(b'HTTP/1.1', 200, b'OK', [(b'Server', b'nginx/1.18.0'), (b'Date', b'Wed, 30 Oct 2024 10:25:54 GMT'), (b'Content-Type', b'application/json'), (b'Content-Length', b'600'), (b'Connection', b'keep-alive'), (b'Strict-Transport-Security', b'max-age=31536000; includeSubDomains; preload'), (b'Access-Control-Allow-Origin', b'*'), (b'Access-Control-Allow-Methods', b'GET, POST, OPTIONS'), (b'Access-Control-Expose-Headers', b'Content-Length,Content-Type,Date,Server,Connection')])
2024-10-30 05:25:54,054 - INFO - HTTP Request: POST https://api.telegram.org/bot7867694458:AAEFLZjWPyd1p640mHENnBt479WRYfSavWg/sendVideo "HTTP/1.1 200 OK"
2024-10-30 05:25:54,054 - DEBUG - receive_response_body.started request=<Request [b'POST']>
2024-10-30 05:25:54,054 - DEBUG - receive_response_body.complete
2024-10-30 05:25:54,054 - DEBUG - response_closed.started
2024-10-30 05:25:54,055 - DEBUG - response_closed.complete
2024-10-30 05:25:54,056 - DEBUG - Message(caption='From r/girlsfinishingthejob: I love when he covers my titties with his hot cum ðŸ¥°\nUpvotes: 236', channel_chat_created=False, chat=Chat(id=-1002490380283, title='Reddit_Pic_Stream', type=<ChatType.CHANNEL>), date=datetime.datetime(2024, 10, 30, 10, 25, 53, tzinfo=<UTC>), delete_chat_photo=False, group_chat_created=False, message_id=242, sender_chat=Chat(id=-1002490380283, title='Reddit_Pic_Stream', type=<ChatType.CHANNEL>), supergroup_chat_created=False, video=Video(duration=0, file_id='BAACAgEAAyEGAASUcC_7AAPyZyIJsSmHZK5S1-7sF2Eevx4QaC4AArYEAAIZEBFFeqMDVCEVu1A2BA', file_name='1geqscs_20241030_052545_2fd81a4e.mp4', file_size=50070206, file_unique_id='AgADtgQAAhkQEUU', height=320, mime_type='video/mp4', width=320))
2024-10-30 05:25:54,057 - DEBUG - Exiting: send_video
2024-10-30 05:25:54,057 - DEBUG - close.started
2024-10-30 05:25:54,058 - DEBUG - close.complete
2024-10-30 05:25:54,058 - DEBUG - This Bot is already shut down. Returning.
2024-10-30 05:25:54,058 - DEBUG - Shut down of Updater complete
2024-10-30 05:25:54,058 - INFO - Successfully sent video to Telegram
2024-10-30 05:25:54,063 - ERROR - Error processing subreddit girlsfinishingthejob: (sqlite3.OperationalError) attempt to write a readonly database
[SQL: INSERT INTO sent_post (post_id, subreddit_name, sent_at) VALUES (?, ?, ?)]
[parameters: ('1geqscs', 'girlsfinishingthejob', '2024-10-30 10:25:54.062042')]
(Background on this error at: https://sqlalche.me/e/20/e3q8)
2024-10-30 05:25:54,065 - ERROR - Job "send_to_telegram (trigger: interval[0:01:00], next run at: 2024-10-30 05:26:16 CDT)" raised an exception
Traceback (most recent call last):
  File "/Users/joewilson/PythonProjects/Snoogram/venv/lib/python3.12/site-packages/sqlalchemy/engine/base.py", line 1967, in _exec_single_context
    self.dialect.do_execute(
  File "/Users/joewilson/PythonProjects/Snoogram/venv/lib/python3.12/site-packages/sqlalchemy/engine/default.py", line 941, in do_execute
    cursor.execute(statement, parameters)
sqlite3.OperationalError: attempt to write a readonly database

The above exception was the direct cause of the following exception:

Traceback (most recent call last):
  File "/Users/joewilson/PythonProjects/Snoogram/venv/lib/python3.12/site-packages/apscheduler/executors/base.py", line 125, in run_job
    retval = job.func(*job.args, **job.kwargs)
             ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/Users/joewilson/PythonProjects/Snoogram/backend/app.py", line 265, in send_to_telegram
    # Update last_check in Cosmos DB
                ^^^^^^^^^^^^^^^^^^^^^
  File "/Users/joewilson/PythonProjects/Snoogram/backend/db_operations.py", line 100, in add_sent_post
  File "/Users/joewilson/PythonProjects/Snoogram/venv/lib/python3.12/site-packages/sqlalchemy/orm/scoping.py", line 597, in commit
    return self._proxied.commit()
           ^^^^^^^^^^^^^^^^^^^^^^
  File "/Users/joewilson/PythonProjects/Snoogram/venv/lib/python3.12/site-packages/sqlalchemy/orm/session.py", line 2028, in commit
    trans.commit(_to_root=True)
  File "<string>", line 2, in commit
  File "/Users/joewilson/PythonProjects/Snoogram/venv/lib/python3.12/site-packages/sqlalchemy/orm/state_changes.py", line 139, in _go
    ret_value = fn(self, *arg, **kw)
                ^^^^^^^^^^^^^^^^^^^^
  File "/Users/joewilson/PythonProjects/Snoogram/venv/lib/python3.12/site-packages/sqlalchemy/orm/session.py", line 1313, in commit
    self._prepare_impl()
  File "<string>", line 2, in _prepare_impl
  File "/Users/joewilson/PythonProjects/Snoogram/venv/lib/python3.12/site-packages/sqlalchemy/orm/state_changes.py", line 139, in _go
    ret_value = fn(self, *arg, **kw)
                ^^^^^^^^^^^^^^^^^^^^
  File "/Users/joewilson/PythonProjects/Snoogram/venv/lib/python3.12/site-packages/sqlalchemy/orm/session.py", line 1288, in _prepare_impl
    self.session.flush()
  File "/Users/joewilson/PythonProjects/Snoogram/venv/lib/python3.12/site-packages/sqlalchemy/orm/session.py", line 4352, in flush
    self._flush(objects)
  File "/Users/joewilson/PythonProjects/Snoogram/venv/lib/python3.12/site-packages/sqlalchemy/orm/session.py", line 4487, in _flush
    with util.safe_reraise():
  File "/Users/joewilson/PythonProjects/Snoogram/venv/lib/python3.12/site-packages/sqlalchemy/util/langhelpers.py", line 146, in __exit__
    raise exc_value.with_traceback(exc_tb)
  File "/Users/joewilson/PythonProjects/Snoogram/venv/lib/python3.12/site-packages/sqlalchemy/orm/session.py", line 4448, in _flush
    flush_context.execute()
  File "/Users/joewilson/PythonProjects/Snoogram/venv/lib/python3.12/site-packages/sqlalchemy/orm/unitofwork.py", line 466, in execute
    rec.execute(self)
  File "/Users/joewilson/PythonProjects/Snoogram/venv/lib/python3.12/site-packages/sqlalchemy/orm/unitofwork.py", line 642, in execute
    util.preloaded.orm_persistence.save_obj(
  File "/Users/joewilson/PythonProjects/Snoogram/venv/lib/python3.12/site-packages/sqlalchemy/orm/persistence.py", line 93, in save_obj
    _emit_insert_statements(
  File "/Users/joewilson/PythonProjects/Snoogram/venv/lib/python3.12/site-packages/sqlalchemy/orm/persistence.py", line 1233, in _emit_insert_statements
    result = connection.execute(
             ^^^^^^^^^^^^^^^^^^^
  File "/Users/joewilson/PythonProjects/Snoogram/venv/lib/python3.12/site-packages/sqlalchemy/engine/base.py", line 1418, in execute
    return meth(
           ^^^^^
  File "/Users/joewilson/PythonProjects/Snoogram/venv/lib/python3.12/site-packages/sqlalchemy/sql/elements.py", line 515, in _execute_on_connection
    return connection._execute_clauseelement(
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/Users/joewilson/PythonProjects/Snoogram/venv/lib/python3.12/site-packages/sqlalchemy/engine/base.py", line 1640, in _execute_clauseelement
    ret = self._execute_context(
          ^^^^^^^^^^^^^^^^^^^^^^
  File "/Users/joewilson/PythonProjects/Snoogram/venv/lib/python3.12/site-packages/sqlalchemy/engine/base.py", line 1846, in _execute_context
    return self._exec_single_context(
           ^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/Users/joewilson/PythonProjects/Snoogram/venv/lib/python3.12/site-packages/sqlalchemy/engine/base.py", line 1986, in _exec_single_context
    self._handle_dbapi_exception(
  File "/Users/joewilson/PythonProjects/Snoogram/venv/lib/python3.12/site-packages/sqlalchemy/engine/base.py", line 2355, in _handle_dbapi_exception
    raise sqlalchemy_exception.with_traceback(exc_info[2]) from e
  File "/Users/joewilson/PythonProjects/Snoogram/venv/lib/python3.12/site-packages/sqlalchemy/engine/base.py", line 1967, in _exec_single_context
    self.dialect.do_execute(
  File "/Users/joewilson/PythonProjects/Snoogram/venv/lib/python3.12/site-packages/sqlalchemy/engine/default.py", line 941, in do_execute
    cursor.execute(statement, parameters)
sqlalchemy.exc.OperationalError: (sqlite3.OperationalError) attempt to write a readonly database
[SQL: INSERT INTO sent_post (post_id, subreddit_name, sent_at) VALUES (?, ?, ?)]
[parameters: ('1geqscs', 'girlsfinishingthejob', '2024-10-30 10:25:54.062042')]
(Background on this error at: https://sqlalche.me/e/20/e3q8)
2024-10-30 05:26:16,972 - DEBUG - Looking for jobs to run
2024-10-30 05:26:16,975 - DEBUG - Next wakeup is due at 2024-10-30 05:27:16.969826-05:00 (in 59.993985 seconds)
2024-10-30 05:26:16,976 - INFO - Running job "send_to_telegram (trigger: interval[0:01:00], next run at: 2024-10-30 05:27:16 CDT)" (scheduled at 2024-10-30 05:26:16.969826-05:00)
2024-10-30 05:26:16,976 - INFO - Running job "send_to_telegram (trigger: interval[0:01:00], next run at: 2024-10-30 05:27:16 CDT)" (scheduled at 2024-10-30 05:26:16.970029-05:00)
2024-10-30 05:26:16,977 - INFO - Processing subreddit: girlsfinishingthejob
2024-10-30 05:26:16,977 - INFO - Processing subreddit: wifebutt
2024-10-30 05:26:16,978 - INFO - Fetching top posts of the day
2024-10-30 05:26:16,978 - INFO - Fetching top posts of the month
2024-10-30 05:26:16,979 - DEBUG - Fetching: GET https://oauth.reddit.com/r/girlsfinishingthejob/top at 1730283976.979535
2024-10-30 05:26:16,979 - DEBUG - Fetching: GET https://oauth.reddit.com/r/wifebutt/top at 1730283976.979789
2024-10-30 05:26:16,979 - DEBUG - Data: None
2024-10-30 05:26:16,980 - DEBUG - Data: None
2024-10-30 05:26:16,980 - DEBUG - Params: {'limit': 50, 'raw_json': 1, 't': 'day'}
2024-10-30 05:26:16,980 - DEBUG - Params: {'limit': 50, 'raw_json': 1, 't': 'month'}
2024-10-30 05:26:17,296 - DEBUG - https://oauth.reddit.com:443 "GET /r/girlsfinishingthejob/top?t=day&limit=50&raw_json=1 HTTP/11" 200 24110
2024-10-30 05:26:17,297 - DEBUG - Response: 200 (24110 bytes) (rst-0:rem-148.0:used-2 ratelimit) at 1730283977.297529
2024-10-30 05:26:17,369 - INFO - Checking post: 1gelyz1 - Score: 7102 - URL: https://www.redgifs.com/watch/uttersvelteamphibian
2024-10-30 05:26:17,374 - INFO - Request URL: 'https://cosmossnoogram-centralus.documents.azure.com:443/dbs/ToDoList/colls/sent_posts/docs/'
Request method: 'POST'
Request headers:
    'Cache-Control': 'no-cache'
    'x-ms-version': 'REDACTED'
    'x-ms-documentdb-query-iscontinuationexpected': 'REDACTED'
    'x-ms-consistency-level': 'REDACTED'
    'x-ms-documentdb-isquery': 'REDACTED'
    'Content-Type': 'application/query+json'
    'x-ms-session-token': 'REDACTED'
    'x-ms-documentdb-query-enablecrosspartition': 'REDACTED'
    'x-ms-date': 'REDACTED'
    'authorization': 'REDACTED'
    'Accept': 'application/json'
    'x-ms-cosmos-correlated-activityid': 'REDACTED'
    'Content-Length': '107'
    'User-Agent': 'azsdk-python-cosmos/4.5.1 Python/3.12.4 (macOS-15.0.1-arm64-arm-64bit)'
A body is sent with the request
2024-10-30 05:26:17,404 - DEBUG - https://cosmossnoogram-centralus.documents.azure.com:443 "POST /dbs/ToDoList/colls/sent_posts/docs/ HTTP/11" 200 None
2024-10-30 05:26:17,404 - INFO - Response status: 200
Response headers:
    'Cache-Control': 'no-store, no-cache'
    'Pragma': 'no-cache'
    'Transfer-Encoding': 'chunked'
    'Content-Type': 'application/json'
    'Server': 'Microsoft-HTTPAPI/2.0'
    'Strict-Transport-Security': 'REDACTED'
    'x-ms-activity-id': 'REDACTED'
    'x-ms-last-state-change-utc': 'REDACTED'
    'x-ms-resource-quota': 'REDACTED'
    'x-ms-resource-usage': 'REDACTED'
    'x-ms-schemaversion': 'REDACTED'
    'lsn': 'REDACTED'
    'x-ms-item-count': 'REDACTED'
    'x-ms-request-charge': 'REDACTED'
    'x-ms-alt-content-path': 'REDACTED'
    'x-ms-content-path': 'REDACTED'
    'x-ms-documentdb-partitionkeyrangeid': 'REDACTED'
    'x-ms-xp-role': 'REDACTED'
    'x-ms-cosmos-query-execution-info': 'REDACTED'
    'x-ms-global-Committed-lsn': 'REDACTED'
    'x-ms-number-of-read-regions': 'REDACTED'
    'x-ms-transport-request-id': 'REDACTED'
    'x-ms-cosmos-llsn': 'REDACTED'
    'x-ms-session-token': 'REDACTED'
    'x-ms-request-duration-ms': 'REDACTED'
    'x-ms-serviceversion': 'REDACTED'
    'x-ms-cosmos-is-partition-key-delete-pending': 'REDACTED'
    'x-ms-cosmos-physical-partition-id': 'REDACTED'
    'x-ms-cosmos-internal-partition-id': 'REDACTED'
    'x-ms-gatewayversion': 'REDACTED'
    'Date': 'Wed, 30 Oct 2024 10:26:16 GMT'
2024-10-30 05:26:17,404 - INFO - Found video post: 1gelyz1
2024-10-30 05:26:17,405 - DEBUG - Starting new HTTPS connection (1): api.redgifs.com:443
2024-10-30 05:26:17,545 - DEBUG - https://api.redgifs.com:443 "GET /v2/gifs/uttersvelteamphibian HTTP/11" 200 None
2024-10-30 05:26:17,548 - DEBUG - Starting new HTTPS connection (1): files.redgifs.com:443
2024-10-30 05:26:17,635 - DEBUG - https://files.redgifs.com:443 "GET /UtterSvelteAmphibian.mp4 HTTP/11" 200 42980012
2024-10-30 05:26:17,747 - DEBUG - https://oauth.reddit.com:443 "GET /r/wifebutt/top?t=month&limit=50&raw_json=1 HTTP/11" 200 49234
2024-10-30 05:26:17,782 - DEBUG - Response: 200 (49234 bytes) (rst-0:rem-149.0:used-1 ratelimit) at 1730283977.78214
2024-10-30 05:26:17,790 - INFO - Checking post: 1g9w053 - Score: 5354 - URL: https://www.reddit.com/gallery/1g9w053
2024-10-30 05:26:17,791 - INFO - Request URL: 'https://cosmossnoogram-centralus.documents.azure.com:443/dbs/ToDoList/colls/sent_posts/docs/'
Request method: 'POST'
Request headers:
    'Cache-Control': 'no-cache'
    'x-ms-version': 'REDACTED'
    'x-ms-documentdb-query-iscontinuationexpected': 'REDACTED'
    'x-ms-consistency-level': 'REDACTED'
    'x-ms-documentdb-isquery': 'REDACTED'
    'Content-Type': 'application/query+json'
    'x-ms-session-token': 'REDACTED'
    'x-ms-documentdb-query-enablecrosspartition': 'REDACTED'
    'x-ms-date': 'REDACTED'
    'authorization': 'REDACTED'
    'Accept': 'application/json'
    'x-ms-cosmos-correlated-activityid': 'REDACTED'
    'Content-Length': '107'
    'User-Agent': 'azsdk-python-cosmos/4.5.1 Python/3.12.4 (macOS-15.0.1-arm64-arm-64bit)'
A body is sent with the request
2024-10-30 05:26:17,834 - DEBUG - https://cosmossnoogram-centralus.documents.azure.com:443 "POST /dbs/ToDoList/colls/sent_posts/docs/ HTTP/11" 200 None
2024-10-30 05:26:17,834 - INFO - Response status: 200
Response headers:
    'Cache-Control': 'no-store, no-cache'
    'Pragma': 'no-cache'
    'Transfer-Encoding': 'chunked'
    'Content-Type': 'application/json'
    'Server': 'Microsoft-HTTPAPI/2.0'
    'Strict-Transport-Security': 'REDACTED'
    'x-ms-activity-id': 'REDACTED'
    'x-ms-last-state-change-utc': 'REDACTED'
    'x-ms-resource-quota': 'REDACTED'
    'x-ms-resource-usage': 'REDACTED'
    'x-ms-schemaversion': 'REDACTED'
    'lsn': 'REDACTED'
    'x-ms-item-count': 'REDACTED'
    'x-ms-request-charge': 'REDACTED'
    'x-ms-alt-content-path': 'REDACTED'
    'x-ms-content-path': 'REDACTED'
    'x-ms-documentdb-partitionkeyrangeid': 'REDACTED'
    'x-ms-xp-role': 'REDACTED'
    'x-ms-cosmos-query-execution-info': 'REDACTED'
    'x-ms-global-Committed-lsn': 'REDACTED'
    'x-ms-number-of-read-regions': 'REDACTED'
    'x-ms-transport-request-id': 'REDACTED'
    'x-ms-cosmos-llsn': 'REDACTED'
    'x-ms-session-token': 'REDACTED'
    'x-ms-request-duration-ms': 'REDACTED'
    'x-ms-serviceversion': 'REDACTED'
    'x-ms-cosmos-is-partition-key-delete-pending': 'REDACTED'
    'x-ms-cosmos-physical-partition-id': 'REDACTED'
    'x-ms-cosmos-internal-partition-id': 'REDACTED'
    'x-ms-gatewayversion': 'REDACTED'
    'Date': 'Wed, 30 Oct 2024 10:26:17 GMT'
2024-10-30 05:26:17,834 - INFO - Post 1g9w053 is not an image or video post, skipping
2024-10-30 05:26:17,834 - INFO - Checking post: 1fv4cfc - Score: 4583 - URL: https://www.reddit.com/gallery/1fv4cfc
2024-10-30 05:26:17,834 - INFO - Request URL: 'https://cosmossnoogram-centralus.documents.azure.com:443/dbs/ToDoList/colls/sent_posts/docs/'
Request method: 'POST'
Request headers:
    'Cache-Control': 'no-cache'
    'x-ms-version': 'REDACTED'
    'x-ms-documentdb-query-iscontinuationexpected': 'REDACTED'
    'x-ms-consistency-level': 'REDACTED'
    'x-ms-documentdb-isquery': 'REDACTED'
    'Content-Type': 'application/query+json'
    'x-ms-session-token': 'REDACTED'
    'x-ms-documentdb-query-enablecrosspartition': 'REDACTED'
    'x-ms-date': 'REDACTED'
    'authorization': 'REDACTED'
    'Accept': 'application/json'
    'x-ms-cosmos-correlated-activityid': 'REDACTED'
    'Content-Length': '107'
    'User-Agent': 'azsdk-python-cosmos/4.5.1 Python/3.12.4 (macOS-15.0.1-arm64-arm-64bit)'
A body is sent with the request
2024-10-30 05:26:17,890 - DEBUG - https://cosmossnoogram-centralus.documents.azure.com:443 "POST /dbs/ToDoList/colls/sent_posts/docs/ HTTP/11" 200 None
2024-10-30 05:26:17,891 - INFO - Response status: 200
Response headers:
    'Cache-Control': 'no-store, no-cache'
    'Pragma': 'no-cache'
    'Transfer-Encoding': 'chunked'
    'Content-Type': 'application/json'
    'Server': 'Microsoft-HTTPAPI/2.0'
    'Strict-Transport-Security': 'REDACTED'
    'x-ms-activity-id': 'REDACTED'
    'x-ms-last-state-change-utc': 'REDACTED'
    'x-ms-resource-quota': 'REDACTED'
    'x-ms-resource-usage': 'REDACTED'
    'x-ms-schemaversion': 'REDACTED'
    'lsn': 'REDACTED'
    'x-ms-item-count': 'REDACTED'
    'x-ms-request-charge': 'REDACTED'
    'x-ms-alt-content-path': 'REDACTED'
    'x-ms-content-path': 'REDACTED'
    'x-ms-documentdb-partitionkeyrangeid': 'REDACTED'
    'x-ms-xp-role': 'REDACTED'
    'x-ms-cosmos-query-execution-info': 'REDACTED'
    'x-ms-global-Committed-lsn': 'REDACTED'
    'x-ms-number-of-read-regions': 'REDACTED'
    'x-ms-transport-request-id': 'REDACTED'
    'x-ms-cosmos-llsn': 'REDACTED'
    'x-ms-session-token': 'REDACTED'
    'x-ms-request-duration-ms': 'REDACTED'
    'x-ms-serviceversion': 'REDACTED'
    'x-ms-cosmos-is-partition-key-delete-pending': 'REDACTED'
    'x-ms-cosmos-physical-partition-id': 'REDACTED'
    'x-ms-cosmos-internal-partition-id': 'REDACTED'
    'x-ms-gatewayversion': 'REDACTED'
    'Date': 'Wed, 30 Oct 2024 10:26:17 GMT'
2024-10-30 05:26:17,892 - INFO - Post 1fv4cfc is not an image or video post, skipping
2024-10-30 05:26:17,892 - INFO - Checking post: 1ganrp0 - Score: 4211 - URL: https://i.redd.it/ezatz8645lwd1.jpeg
2024-10-30 05:26:17,894 - INFO - Request URL: 'https://cosmossnoogram-centralus.documents.azure.com:443/dbs/ToDoList/colls/sent_posts/docs/'
Request method: 'POST'
Request headers:
    'Cache-Control': 'no-cache'
    'x-ms-version': 'REDACTED'
    'x-ms-documentdb-query-iscontinuationexpected': 'REDACTED'
    'x-ms-consistency-level': 'REDACTED'
    'x-ms-documentdb-isquery': 'REDACTED'
    'Content-Type': 'application/query+json'
    'x-ms-session-token': 'REDACTED'
    'x-ms-documentdb-query-enablecrosspartition': 'REDACTED'
    'x-ms-date': 'REDACTED'
    'authorization': 'REDACTED'
    'Accept': 'application/json'
    'x-ms-cosmos-correlated-activityid': 'REDACTED'
    'Content-Length': '107'
    'User-Agent': 'azsdk-python-cosmos/4.5.1 Python/3.12.4 (macOS-15.0.1-arm64-arm-64bit)'
A body is sent with the request
2024-10-30 05:26:17,936 - DEBUG - https://cosmossnoogram-centralus.documents.azure.com:443 "POST /dbs/ToDoList/colls/sent_posts/docs/ HTTP/11" 200 None
2024-10-30 05:26:17,937 - INFO - Response status: 200
Response headers:
    'Cache-Control': 'no-store, no-cache'
    'Pragma': 'no-cache'
    'Transfer-Encoding': 'chunked'
    'Content-Type': 'application/json'
    'Server': 'Microsoft-HTTPAPI/2.0'
    'Strict-Transport-Security': 'REDACTED'
    'x-ms-activity-id': 'REDACTED'
    'x-ms-last-state-change-utc': 'REDACTED'
    'x-ms-resource-quota': 'REDACTED'
    'x-ms-resource-usage': 'REDACTED'
    'x-ms-schemaversion': 'REDACTED'
    'lsn': 'REDACTED'
    'x-ms-item-count': 'REDACTED'
    'x-ms-request-charge': 'REDACTED'
    'x-ms-alt-content-path': 'REDACTED'
    'x-ms-content-path': 'REDACTED'
    'x-ms-documentdb-partitionkeyrangeid': 'REDACTED'
    'x-ms-xp-role': 'REDACTED'
    'x-ms-cosmos-query-execution-info': 'REDACTED'
    'x-ms-global-Committed-lsn': 'REDACTED'
    'x-ms-number-of-read-regions': 'REDACTED'
    'x-ms-transport-request-id': 'REDACTED'
    'x-ms-cosmos-llsn': 'REDACTED'
    'x-ms-session-token': 'REDACTED'
    'x-ms-request-duration-ms': 'REDACTED'
    'x-ms-serviceversion': 'REDACTED'
    'x-ms-cosmos-is-partition-key-delete-pending': 'REDACTED'
    'x-ms-cosmos-physical-partition-id': 'REDACTED'
    'x-ms-cosmos-internal-partition-id': 'REDACTED'
    'x-ms-gatewayversion': 'REDACTED'
    'Date': 'Wed, 30 Oct 2024 10:26:17 GMT'
2024-10-30 05:26:17,938 - INFO - Post 1ganrp0 is a duplicate, skipping
2024-10-30 05:26:17,938 - INFO - Checking post: 1gdrcjt - Score: 4062 - URL: https://www.redgifs.com/watch/unrealisticdefinitebarebirdbat
2024-10-30 05:26:17,940 - INFO - Post 1gdrcjt is a duplicate, skipping
2024-10-30 05:26:17,940 - INFO - Checking post: 1g30sx1 - Score: 3966 - URL: https://www.redgifs.com/watch/hardwarlikesunbittern
2024-10-30 05:26:17,940 - INFO - Post 1g30sx1 is a duplicate, skipping
2024-10-30 05:26:17,941 - INFO - Checking post: 1fs7839 - Score: 3854 - URL: https://www.reddit.com/gallery/1fs7839
2024-10-30 05:26:17,942 - INFO - Request URL: 'https://cosmossnoogram-centralus.documents.azure.com:443/dbs/ToDoList/colls/sent_posts/docs/'
Request method: 'POST'
Request headers:
    'Cache-Control': 'no-cache'
    'x-ms-version': 'REDACTED'
    'x-ms-documentdb-query-iscontinuationexpected': 'REDACTED'
    'x-ms-consistency-level': 'REDACTED'
    'x-ms-documentdb-isquery': 'REDACTED'
    'Content-Type': 'application/query+json'
    'x-ms-session-token': 'REDACTED'
    'x-ms-documentdb-query-enablecrosspartition': 'REDACTED'
    'x-ms-date': 'REDACTED'
    'authorization': 'REDACTED'
    'Accept': 'application/json'
    'x-ms-cosmos-correlated-activityid': 'REDACTED'
    'Content-Length': '107'
    'User-Agent': 'azsdk-python-cosmos/4.5.1 Python/3.12.4 (macOS-15.0.1-arm64-arm-64bit)'
A body is sent with the request
2024-10-30 05:26:17,996 - DEBUG - https://cosmossnoogram-centralus.documents.azure.com:443 "POST /dbs/ToDoList/colls/sent_posts/docs/ HTTP/11" 200 None
2024-10-30 05:26:17,997 - INFO - Response status: 200
Response headers:
    'Cache-Control': 'no-store, no-cache'
    'Pragma': 'no-cache'
    'Transfer-Encoding': 'chunked'
    'Content-Type': 'application/json'
    'Server': 'Microsoft-HTTPAPI/2.0'
    'Strict-Transport-Security': 'REDACTED'
    'x-ms-activity-id': 'REDACTED'
    'x-ms-last-state-change-utc': 'REDACTED'
    'x-ms-resource-quota': 'REDACTED'
    'x-ms-resource-usage': 'REDACTED'
    'x-ms-schemaversion': 'REDACTED'
    'lsn': 'REDACTED'
    'x-ms-item-count': 'REDACTED'
    'x-ms-request-charge': 'REDACTED'
    'x-ms-alt-content-path': 'REDACTED'
    'x-ms-content-path': 'REDACTED'
    'x-ms-documentdb-partitionkeyrangeid': 'REDACTED'
    'x-ms-xp-role': 'REDACTED'
    'x-ms-cosmos-query-execution-info': 'REDACTED'
    'x-ms-global-Committed-lsn': 'REDACTED'
    'x-ms-number-of-read-regions': 'REDACTED'
    'x-ms-transport-request-id': 'REDACTED'
    'x-ms-cosmos-llsn': 'REDACTED'
    'x-ms-session-token': 'REDACTED'
    'x-ms-request-duration-ms': 'REDACTED'
    'x-ms-serviceversion': 'REDACTED'
    'x-ms-cosmos-is-partition-key-delete-pending': 'REDACTED'
    'x-ms-cosmos-physical-partition-id': 'REDACTED'
    'x-ms-cosmos-internal-partition-id': 'REDACTED'
    'x-ms-gatewayversion': 'REDACTED'
    'Date': 'Wed, 30 Oct 2024 10:26:17 GMT'
2024-10-30 05:26:17,998 - INFO - Post 1fs7839 is not an image or video post, skipping
2024-10-30 05:26:17,998 - INFO - Checking post: 1g2rse9 - Score: 3767 - URL: https://i.redd.it/gzxs1aeshjud1.png
2024-10-30 05:26:17,999 - INFO - Post 1g2rse9 is a duplicate, skipping
2024-10-30 05:26:17,999 - INFO - Checking post: 1ge9loz - Score: 3725 - URL: https://www.redgifs.com/watch/deadlygregariouswoodchuck
2024-10-30 05:26:18,000 - INFO - Post 1ge9loz is a duplicate, skipping
2024-10-30 05:26:18,000 - INFO - Checking post: 1g0e966 - Score: 3644 - URL: https://www.reddit.com/gallery/1g0e966
2024-10-30 05:26:18,002 - INFO - Request URL: 'https://cosmossnoogram-centralus.documents.azure.com:443/dbs/ToDoList/colls/sent_posts/docs/'
Request method: 'POST'
Request headers:
    'Cache-Control': 'no-cache'
    'x-ms-version': 'REDACTED'
    'x-ms-documentdb-query-iscontinuationexpected': 'REDACTED'
    'x-ms-consistency-level': 'REDACTED'
    'x-ms-documentdb-isquery': 'REDACTED'
    'Content-Type': 'application/query+json'
    'x-ms-session-token': 'REDACTED'
    'x-ms-documentdb-query-enablecrosspartition': 'REDACTED'
    'x-ms-date': 'REDACTED'
    'authorization': 'REDACTED'
    'Accept': 'application/json'
    'x-ms-cosmos-correlated-activityid': 'REDACTED'
    'Content-Length': '107'
    'User-Agent': 'azsdk-python-cosmos/4.5.1 Python/3.12.4 (macOS-15.0.1-arm64-arm-64bit)'
A body is sent with the request
2024-10-30 05:26:18,054 - DEBUG - https://cosmossnoogram-centralus.documents.azure.com:443 "POST /dbs/ToDoList/colls/sent_posts/docs/ HTTP/11" 200 None
2024-10-30 05:26:18,055 - INFO - Response status: 200
Response headers:
    'Cache-Control': 'no-store, no-cache'
    'Pragma': 'no-cache'
    'Transfer-Encoding': 'chunked'
    'Content-Type': 'application/json'
    'Server': 'Microsoft-HTTPAPI/2.0'
    'Strict-Transport-Security': 'REDACTED'
    'x-ms-activity-id': 'REDACTED'
    'x-ms-last-state-change-utc': 'REDACTED'
    'x-ms-resource-quota': 'REDACTED'
    'x-ms-resource-usage': 'REDACTED'
    'x-ms-schemaversion': 'REDACTED'
    'lsn': 'REDACTED'
    'x-ms-item-count': 'REDACTED'
    'x-ms-request-charge': 'REDACTED'
    'x-ms-alt-content-path': 'REDACTED'
    'x-ms-content-path': 'REDACTED'
    'x-ms-documentdb-partitionkeyrangeid': 'REDACTED'
    'x-ms-xp-role': 'REDACTED'
    'x-ms-cosmos-query-execution-info': 'REDACTED'
    'x-ms-global-Committed-lsn': 'REDACTED'
    'x-ms-number-of-read-regions': 'REDACTED'
    'x-ms-transport-request-id': 'REDACTED'
    'x-ms-cosmos-llsn': 'REDACTED'
    'x-ms-session-token': 'REDACTED'
    'x-ms-request-duration-ms': 'REDACTED'
    'x-ms-serviceversion': 'REDACTED'
    'x-ms-cosmos-is-partition-key-delete-pending': 'REDACTED'
    'x-ms-cosmos-physical-partition-id': 'REDACTED'
    'x-ms-cosmos-internal-partition-id': 'REDACTED'
    'x-ms-gatewayversion': 'REDACTED'
    'Date': 'Wed, 30 Oct 2024 10:26:17 GMT'
2024-10-30 05:26:18,055 - INFO - Post 1g0e966 is not an image or video post, skipping
2024-10-30 05:26:18,056 - INFO - Checking post: 1gckgcy - Score: 3393 - URL: https://i.redd.it/njd0mbyjl3xd1.jpeg
2024-10-30 05:26:18,056 - INFO - Post 1gckgcy is a duplicate, skipping
2024-10-30 05:26:18,056 - INFO - Checking post: 1fznoil - Score: 3335 - URL: https://i.redd.it/eruk3694dptd1.jpeg
2024-10-30 05:26:18,056 - INFO - Post 1fznoil is a duplicate, skipping
2024-10-30 05:26:18,056 - INFO - Checking post: 1g3dsj7 - Score: 3184 - URL: https://i.redd.it/cg9oigznmpud1.jpeg
2024-10-30 05:26:18,057 - INFO - Post 1g3dsj7 is a duplicate, skipping
2024-10-30 05:26:18,057 - INFO - Checking post: 1g4dx9i - Score: 3135 - URL: https://i.redd.it/5kv3c8f3lyud1.jpeg
2024-10-30 05:26:18,057 - INFO - Request URL: 'https://cosmossnoogram-centralus.documents.azure.com:443/dbs/ToDoList/colls/sent_posts/docs/'
Request method: 'POST'
Request headers:
    'Cache-Control': 'no-cache'
    'x-ms-version': 'REDACTED'
    'x-ms-documentdb-query-iscontinuationexpected': 'REDACTED'
    'x-ms-consistency-level': 'REDACTED'
    'x-ms-documentdb-isquery': 'REDACTED'
    'Content-Type': 'application/query+json'
    'x-ms-session-token': 'REDACTED'
    'x-ms-documentdb-query-enablecrosspartition': 'REDACTED'
    'x-ms-date': 'REDACTED'
    'authorization': 'REDACTED'
    'Accept': 'application/json'
    'x-ms-cosmos-correlated-activityid': 'REDACTED'
    'Content-Length': '107'
    'User-Agent': 'azsdk-python-cosmos/4.5.1 Python/3.12.4 (macOS-15.0.1-arm64-arm-64bit)'
A body is sent with the request
2024-10-30 05:26:18,111 - DEBUG - https://cosmossnoogram-centralus.documents.azure.com:443 "POST /dbs/ToDoList/colls/sent_posts/docs/ HTTP/11" 200 None
2024-10-30 05:26:18,112 - INFO - Response status: 200
Response headers:
    'Cache-Control': 'no-store, no-cache'
    'Pragma': 'no-cache'
    'Transfer-Encoding': 'chunked'
    'Content-Type': 'application/json'
    'Server': 'Microsoft-HTTPAPI/2.0'
    'Strict-Transport-Security': 'REDACTED'
    'x-ms-activity-id': 'REDACTED'
    'x-ms-last-state-change-utc': 'REDACTED'
    'x-ms-resource-quota': 'REDACTED'
    'x-ms-resource-usage': 'REDACTED'
    'x-ms-schemaversion': 'REDACTED'
    'lsn': 'REDACTED'
    'x-ms-item-count': 'REDACTED'
    'x-ms-request-charge': 'REDACTED'
    'x-ms-alt-content-path': 'REDACTED'
    'x-ms-content-path': 'REDACTED'
    'x-ms-documentdb-partitionkeyrangeid': 'REDACTED'
    'x-ms-xp-role': 'REDACTED'
    'x-ms-cosmos-query-execution-info': 'REDACTED'
    'x-ms-global-Committed-lsn': 'REDACTED'
    'x-ms-number-of-read-regions': 'REDACTED'
    'x-ms-transport-request-id': 'REDACTED'
    'x-ms-cosmos-llsn': 'REDACTED'
    'x-ms-session-token': 'REDACTED'
    'x-ms-request-duration-ms': 'REDACTED'
    'x-ms-serviceversion': 'REDACTED'
    'x-ms-cosmos-is-partition-key-delete-pending': 'REDACTED'
    'x-ms-cosmos-physical-partition-id': 'REDACTED'
    'x-ms-cosmos-internal-partition-id': 'REDACTED'
    'x-ms-gatewayversion': 'REDACTED'
    'Date': 'Wed, 30 Oct 2024 10:26:17 GMT'
2024-10-30 05:26:18,113 - INFO - Post 1g4dx9i is a duplicate, skipping
2024-10-30 05:26:18,113 - INFO - Checking post: 1gbi6rb - Score: 3132 - URL: https://i.redd.it/uzwse73yvswd1.jpeg
2024-10-30 05:26:18,115 - INFO - Request URL: 'https://cosmossnoogram-centralus.documents.azure.com:443/dbs/ToDoList/colls/sent_posts/docs/'
Request method: 'POST'
Request headers:
    'Cache-Control': 'no-cache'
    'x-ms-version': 'REDACTED'
    'x-ms-documentdb-query-iscontinuationexpected': 'REDACTED'
    'x-ms-consistency-level': 'REDACTED'
    'x-ms-documentdb-isquery': 'REDACTED'
    'Content-Type': 'application/query+json'
    'x-ms-session-token': 'REDACTED'
    'x-ms-documentdb-query-enablecrosspartition': 'REDACTED'
    'x-ms-date': 'REDACTED'
    'authorization': 'REDACTED'
    'Accept': 'application/json'
    'x-ms-cosmos-correlated-activityid': 'REDACTED'
    'Content-Length': '107'
    'User-Agent': 'azsdk-python-cosmos/4.5.1 Python/3.12.4 (macOS-15.0.1-arm64-arm-64bit)'
A body is sent with the request
2024-10-30 05:26:18,169 - DEBUG - https://cosmossnoogram-centralus.documents.azure.com:443 "POST /dbs/ToDoList/colls/sent_posts/docs/ HTTP/11" 200 None
2024-10-30 05:26:18,170 - INFO - Response status: 200
Response headers:
    'Cache-Control': 'no-store, no-cache'
    'Pragma': 'no-cache'
    'Transfer-Encoding': 'chunked'
    'Content-Type': 'application/json'
    'Server': 'Microsoft-HTTPAPI/2.0'
    'Strict-Transport-Security': 'REDACTED'
    'x-ms-activity-id': 'REDACTED'
    'x-ms-last-state-change-utc': 'REDACTED'
    'x-ms-resource-quota': 'REDACTED'
    'x-ms-resource-usage': 'REDACTED'
    'x-ms-schemaversion': 'REDACTED'
    'lsn': 'REDACTED'
    'x-ms-item-count': 'REDACTED'
    'x-ms-request-charge': 'REDACTED'
    'x-ms-alt-content-path': 'REDACTED'
    'x-ms-content-path': 'REDACTED'
    'x-ms-documentdb-partitionkeyrangeid': 'REDACTED'
    'x-ms-xp-role': 'REDACTED'
    'x-ms-cosmos-query-execution-info': 'REDACTED'
    'x-ms-global-Committed-lsn': 'REDACTED'
    'x-ms-number-of-read-regions': 'REDACTED'
    'x-ms-transport-request-id': 'REDACTED'
    'x-ms-cosmos-llsn': 'REDACTED'
    'x-ms-session-token': 'REDACTED'
    'x-ms-request-duration-ms': 'REDACTED'
    'x-ms-serviceversion': 'REDACTED'
    'x-ms-cosmos-is-partition-key-delete-pending': 'REDACTED'
    'x-ms-cosmos-physical-partition-id': 'REDACTED'
    'x-ms-cosmos-internal-partition-id': 'REDACTED'
    'x-ms-gatewayversion': 'REDACTED'
    'Date': 'Wed, 30 Oct 2024 10:26:17 GMT'
2024-10-30 05:26:18,170 - INFO - Found image post: 1gbi6rb with URL: https://i.redd.it/uzwse73yvswd1.jpeg
2024-10-30 05:26:18,170 - DEBUG - Starting new HTTPS connection (1): i.redd.it:443
2024-10-30 05:26:18,337 - DEBUG - https://i.redd.it:443 "GET /uzwse73yvswd1.jpeg HTTP/11" 200 2371964
2024-10-30 05:26:18,637 - INFO - Successfully downloaded media to downloads/pics/1gbi6rb_20241030_052618_75043492.jpeg
2024-10-30 05:26:18,639 - DEBUG - Using selector: KqueueSelector
2024-10-30 05:26:18,639 - INFO - Attempting to send photo to Telegram - Path: downloads/pics/1gbi6rb_20241030_052618_75043492.jpeg
2024-10-30 05:26:18,640 - DEBUG - load_ssl_context verify=True cert=None trust_env=True http2=False
2024-10-30 05:26:18,641 - DEBUG - load_verify_locations cafile='/Users/joewilson/PythonProjects/Snoogram/venv/lib/python3.12/site-packages/certifi/cacert.pem'
2024-10-30 05:26:18,650 - DEBUG - load_ssl_context verify=True cert=None trust_env=True http2=False
2024-10-30 05:26:18,651 - DEBUG - load_verify_locations cafile='/Users/joewilson/PythonProjects/Snoogram/venv/lib/python3.12/site-packages/certifi/cacert.pem'
2024-10-30 05:26:18,660 - DEBUG - Entering: get_me
2024-10-30 05:26:18,661 - DEBUG - connect_tcp.started host='api.telegram.org' port=443 local_address=None timeout=5.0 socket_options=None
2024-10-30 05:26:18,796 - DEBUG - connect_tcp.complete return_value=<httpcore._backends.anyio.AnyIOStream object at 0x108a5dfd0>
2024-10-30 05:26:18,797 - DEBUG - start_tls.started ssl_context=<ssl.SSLContext object at 0x10aa44b50> server_hostname='api.telegram.org' timeout=5.0
2024-10-30 05:26:18,948 - DEBUG - start_tls.complete return_value=<httpcore._backends.anyio.AnyIOStream object at 0x108d9f470>
2024-10-30 05:26:18,949 - DEBUG - send_request_headers.started request=<Request [b'POST']>
2024-10-30 05:26:18,950 - DEBUG - send_request_headers.complete
2024-10-30 05:26:18,950 - DEBUG - send_request_body.started request=<Request [b'POST']>
2024-10-30 05:26:18,951 - DEBUG - send_request_body.complete
2024-10-30 05:26:18,951 - DEBUG - receive_response_headers.started request=<Request [b'POST']>
2024-10-30 05:26:18,977 - INFO - Successfully downloaded media to downloads/videos/1gelyz1_20241030_052617_ba5c8ead.mp4
2024-10-30 05:26:18,978 - DEBUG - Using selector: KqueueSelector
2024-10-30 05:26:18,978 - INFO - Attempting to send video to Telegram - Path: downloads/videos/1gelyz1_20241030_052617_ba5c8ead.mp4
2024-10-30 05:26:18,978 - DEBUG - Entering: get_me
2024-10-30 05:26:18,979 - DEBUG - connect_tcp.started host='api.telegram.org' port=443 local_address=None timeout=5.0 socket_options=None
2024-10-30 05:26:19,070 - DEBUG - receive_response_headers.complete return_value=(b'HTTP/1.1', 200, b'OK', [(b'Server', b'nginx/1.18.0'), (b'Date', b'Wed, 30 Oct 2024 10:26:19 GMT'), (b'Content-Type', b'application/json'), (b'Content-Length', b'254'), (b'Connection', b'keep-alive'), (b'Strict-Transport-Security', b'max-age=31536000; includeSubDomains; preload'), (b'Access-Control-Allow-Origin', b'*'), (b'Access-Control-Allow-Methods', b'GET, POST, OPTIONS'), (b'Access-Control-Expose-Headers', b'Content-Length,Content-Type,Date,Server,Connection')])
2024-10-30 05:26:19,071 - INFO - HTTP Request: POST https://api.telegram.org/bot7867694458:AAEFLZjWPyd1p640mHENnBt479WRYfSavWg/getMe "HTTP/1.1 200 OK"
2024-10-30 05:26:19,071 - DEBUG - receive_response_body.started request=<Request [b'POST']>
2024-10-30 05:26:19,071 - DEBUG - receive_response_body.complete
2024-10-30 05:26:19,071 - DEBUG - response_closed.started
2024-10-30 05:26:19,071 - DEBUG - response_closed.complete
2024-10-30 05:26:19,071 - DEBUG - User(api_kwargs={'can_connect_to_business': False, 'has_main_web_app': False}, can_join_groups=True, can_read_all_group_messages=False, first_name='RedditBot', id=7867694458, is_bot=True, supports_inline_queries=False, username='RedditImage_bot')
2024-10-30 05:26:19,071 - DEBUG - Exiting: get_me
2024-10-30 05:26:19,071 - DEBUG - This Bot is already initialized.
2024-10-30 05:26:19,071 - DEBUG - Entering: send_photo
2024-10-30 05:26:19,072 - DEBUG - send_request_headers.started request=<Request [b'POST']>
2024-10-30 05:26:19,073 - DEBUG - send_request_headers.complete
2024-10-30 05:26:19,073 - DEBUG - send_request_body.started request=<Request [b'POST']>
2024-10-30 05:26:19,101 - DEBUG - connect_tcp.complete return_value=<httpcore._backends.anyio.AnyIOStream object at 0x108a5ef60>
2024-10-30 05:26:19,102 - DEBUG - start_tls.started ssl_context=<ssl.SSLContext object at 0x10aa44b50> server_hostname='api.telegram.org' timeout=5.0
2024-10-30 05:26:19,241 - DEBUG - start_tls.complete return_value=<httpcore._backends.anyio.AnyIOStream object at 0x108a5fbf0>
2024-10-30 05:26:19,241 - DEBUG - send_request_headers.started request=<Request [b'POST']>
2024-10-30 05:26:19,242 - DEBUG - send_request_headers.complete
2024-10-30 05:26:19,242 - DEBUG - send_request_body.started request=<Request [b'POST']>
2024-10-30 05:26:19,242 - DEBUG - send_request_body.complete
2024-10-30 05:26:19,242 - DEBUG - receive_response_headers.started request=<Request [b'POST']>
2024-10-30 05:26:19,358 - DEBUG - receive_response_headers.complete return_value=(b'HTTP/1.1', 200, b'OK', [(b'Server', b'nginx/1.18.0'), (b'Date', b'Wed, 30 Oct 2024 10:26:19 GMT'), (b'Content-Type', b'application/json'), (b'Content-Length', b'254'), (b'Connection', b'keep-alive'), (b'Strict-Transport-Security', b'max-age=31536000; includeSubDomains; preload'), (b'Access-Control-Allow-Origin', b'*'), (b'Access-Control-Allow-Methods', b'GET, POST, OPTIONS'), (b'Access-Control-Expose-Headers', b'Content-Length,Content-Type,Date,Server,Connection')])
2024-10-30 05:26:19,358 - INFO - HTTP Request: POST https://api.telegram.org/bot7867694458:AAEFLZjWPyd1p640mHENnBt479WRYfSavWg/getMe "HTTP/1.1 200 OK"
2024-10-30 05:26:19,358 - DEBUG - receive_response_body.started request=<Request [b'POST']>
2024-10-30 05:26:19,358 - DEBUG - receive_response_body.complete
2024-10-30 05:26:19,358 - DEBUG - response_closed.started
2024-10-30 05:26:19,359 - DEBUG - response_closed.complete
2024-10-30 05:26:19,359 - DEBUG - User(api_kwargs={'can_connect_to_business': False, 'has_main_web_app': False}, can_join_groups=True, can_read_all_group_messages=False, first_name='RedditBot', id=7867694458, is_bot=True, supports_inline_queries=False, username='RedditImage_bot')
2024-10-30 05:26:19,359 - DEBUG - Exiting: get_me
2024-10-30 05:26:19,359 - DEBUG - This Updater is already initialized.
2024-10-30 05:26:19,359 - DEBUG - Entering: send_video
2024-10-30 05:26:19,366 - DEBUG - send_request_headers.started request=<Request [b'POST']>
2024-10-30 05:26:19,367 - DEBUG - send_request_headers.complete
2024-10-30 05:26:19,367 - DEBUG - send_request_body.started request=<Request [b'POST']>
2024-10-30 05:26:19,901 - DEBUG - send_request_body.complete
2024-10-30 05:26:19,901 - DEBUG - receive_response_headers.started request=<Request [b'POST']>
2024-10-30 05:26:20,229 - DEBUG - receive_response_headers.complete return_value=(b'HTTP/1.1', 200, b'OK', [(b'Server', b'nginx/1.18.0'), (b'Date', b'Wed, 30 Oct 2024 10:26:20 GMT'), (b'Content-Type', b'application/json'), (b'Content-Length', b'1228'), (b'Connection', b'keep-alive'), (b'Strict-Transport-Security', b'max-age=31536000; includeSubDomains; preload'), (b'Access-Control-Allow-Origin', b'*'), (b'Access-Control-Allow-Methods', b'GET, POST, OPTIONS'), (b'Access-Control-Expose-Headers', b'Content-Length,Content-Type,Date,Server,Connection')])
2024-10-30 05:26:20,229 - INFO - HTTP Request: POST https://api.telegram.org/bot7867694458:AAEFLZjWPyd1p640mHENnBt479WRYfSavWg/sendPhoto "HTTP/1.1 200 OK"
2024-10-30 05:26:20,229 - DEBUG - receive_response_body.started request=<Request [b'POST']>
2024-10-30 05:26:20,229 - DEBUG - receive_response_body.complete
2024-10-30 05:26:20,229 - DEBUG - response_closed.started
2024-10-30 05:26:20,229 - DEBUG - response_closed.complete
2024-10-30 05:26:20,230 - DEBUG - Message(caption='From r/wifebutt: Thursday night wifebutt and football!\nUpvotes: 3,132', channel_chat_created=False, chat=Chat(id=-1002490380283, title='Reddit_Pic_Stream', type=<ChatType.CHANNEL>), date=datetime.datetime(2024, 10, 30, 10, 26, 20, tzinfo=<UTC>), delete_chat_photo=False, group_chat_created=False, message_id=243, photo=(PhotoSize(file_id='AgACAgEAAyEGAASUcC_7AAOaZyH6uC2oEw-KoZQHBhb5XwlLmlkAAkitMRsZEBFF-CyP8HyFv7gBAAMCAANzAAM2BA', file_size=1690, file_unique_id='AQADSK0xGxkQEUV4', height=90, width=62), PhotoSize(file_id='AgACAgEAAyEGAASUcC_7AAOaZyH6uC2oEw-KoZQHBhb5XwlLmlkAAkitMRsZEBFF-CyP8HyFv7gBAAMCAANtAAM2BA', file_size=23805, file_unique_id='AQADSK0xGxkQEUVy', height=320, width=221), PhotoSize(file_id='AgACAgEAAyEGAASUcC_7AAOaZyH6uC2oEw-KoZQHBhb5XwlLmlkAAkitMRsZEBFF-CyP8HyFv7gBAAMCAAN4AAM2BA', file_size=108880, file_unique_id='AQADSK0xGxkQEUV9', height=800, width=552), PhotoSize(file_id='AgACAgEAAyEGAASUcC_7AAOaZyH6uC2oEw-KoZQHBhb5XwlLmlkAAkitMRsZEBFF-CyP8HyFv7gBAAMCAAN5AAM2BA', file_size=243293, file_unique_id='AQADSK0xGxkQEUV-', height=1280, width=884), PhotoSize(file_id='AgACAgEAAyEGAASUcC_7AAOaZyH6uC2oEw-KoZQHBhb5XwlLmlkAAkitMRsZEBFF-CyP8HyFv7gBAAMCAAN3AAM2BA', file_size=762771, file_unique_id='AQADSK0xGxkQEUV8', height=2560, width=1768)), sender_chat=Chat(id=-1002490380283, title='Reddit_Pic_Stream', type=<ChatType.CHANNEL>), supergroup_chat_created=False)
2024-10-30 05:26:20,231 - DEBUG - Exiting: send_photo
2024-10-30 05:26:20,231 - DEBUG - close.started
2024-10-30 05:26:20,231 - DEBUG - close.complete
2024-10-30 05:26:20,231 - DEBUG - close.started
2024-10-30 05:26:20,231 - DEBUG - close.complete
2024-10-30 05:26:20,231 - DEBUG - This Bot is already shut down. Returning.
2024-10-30 05:26:20,231 - DEBUG - Shut down of Updater complete
2024-10-30 05:26:20,231 - INFO - Successfully sent photo to Telegram
2024-10-30 05:26:20,233 - ERROR - Error processing subreddit wifebutt: (sqlite3.OperationalError) attempt to write a readonly database
[SQL: INSERT INTO sent_post (post_id, subreddit_name, sent_at) VALUES (?, ?, ?)]
[parameters: ('1gbi6rb', 'wifebutt', '2024-10-30 10:26:20.233029')]
(Background on this error at: https://sqlalche.me/e/20/e3q8)
2024-10-30 05:26:20,235 - ERROR - Job "send_to_telegram (trigger: interval[0:01:00], next run at: 2024-10-30 05:27:16 CDT)" raised an exception
Traceback (most recent call last):
  File "/Users/joewilson/PythonProjects/Snoogram/venv/lib/python3.12/site-packages/sqlalchemy/engine/base.py", line 1967, in _exec_single_context
    self.dialect.do_execute(
  File "/Users/joewilson/PythonProjects/Snoogram/venv/lib/python3.12/site-packages/sqlalchemy/engine/default.py", line 941, in do_execute
    cursor.execute(statement, parameters)
sqlite3.OperationalError: attempt to write a readonly database

The above exception was the direct cause of the following exception:

Traceback (most recent call last):
  File "/Users/joewilson/PythonProjects/Snoogram/venv/lib/python3.12/site-packages/apscheduler/executors/base.py", line 125, in run_job
    retval = job.func(*job.args, **job.kwargs)
             ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/Users/joewilson/PythonProjects/Snoogram/backend/app.py", line 265, in send_to_telegram
    # Update last_check in Cosmos DB
                ^^^^^^^^^^^^^^^^^^^^^
  File "/Users/joewilson/PythonProjects/Snoogram/backend/db_operations.py", line 100, in add_sent_post
  File "/Users/joewilson/PythonProjects/Snoogram/venv/lib/python3.12/site-packages/sqlalchemy/orm/scoping.py", line 597, in commit
    return self._proxied.commit()
           ^^^^^^^^^^^^^^^^^^^^^^
  File "/Users/joewilson/PythonProjects/Snoogram/venv/lib/python3.12/site-packages/sqlalchemy/orm/session.py", line 2028, in commit
    trans.commit(_to_root=True)
  File "<string>", line 2, in commit
  File "/Users/joewilson/PythonProjects/Snoogram/venv/lib/python3.12/site-packages/sqlalchemy/orm/state_changes.py", line 139, in _go
    ret_value = fn(self, *arg, **kw)
                ^^^^^^^^^^^^^^^^^^^^
  File "/Users/joewilson/PythonProjects/Snoogram/venv/lib/python3.12/site-packages/sqlalchemy/orm/session.py", line 1313, in commit
    self._prepare_impl()
  File "<string>", line 2, in _prepare_impl
  File "/Users/joewilson/PythonProjects/Snoogram/venv/lib/python3.12/site-packages/sqlalchemy/orm/state_changes.py", line 139, in _go
    ret_value = fn(self, *arg, **kw)
                ^^^^^^^^^^^^^^^^^^^^
  File "/Users/joewilson/PythonProjects/Snoogram/venv/lib/python3.12/site-packages/sqlalchemy/orm/session.py", line 1288, in _prepare_impl
    self.session.flush()
  File "/Users/joewilson/PythonProjects/Snoogram/venv/lib/python3.12/site-packages/sqlalchemy/orm/session.py", line 4352, in flush
    self._flush(objects)
  File "/Users/joewilson/PythonProjects/Snoogram/venv/lib/python3.12/site-packages/sqlalchemy/orm/session.py", line 4487, in _flush
    with util.safe_reraise():
  File "/Users/joewilson/PythonProjects/Snoogram/venv/lib/python3.12/site-packages/sqlalchemy/util/langhelpers.py", line 146, in __exit__
    raise exc_value.with_traceback(exc_tb)
  File "/Users/joewilson/PythonProjects/Snoogram/venv/lib/python3.12/site-packages/sqlalchemy/orm/session.py", line 4448, in _flush
    flush_context.execute()
  File "/Users/joewilson/PythonProjects/Snoogram/venv/lib/python3.12/site-packages/sqlalchemy/orm/unitofwork.py", line 466, in execute
    rec.execute(self)
  File "/Users/joewilson/PythonProjects/Snoogram/venv/lib/python3.12/site-packages/sqlalchemy/orm/unitofwork.py", line 642, in execute
    util.preloaded.orm_persistence.save_obj(
  File "/Users/joewilson/PythonProjects/Snoogram/venv/lib/python3.12/site-packages/sqlalchemy/orm/persistence.py", line 93, in save_obj
    _emit_insert_statements(
  File "/Users/joewilson/PythonProjects/Snoogram/venv/lib/python3.12/site-packages/sqlalchemy/orm/persistence.py", line 1233, in _emit_insert_statements
    result = connection.execute(
             ^^^^^^^^^^^^^^^^^^^
  File "/Users/joewilson/PythonProjects/Snoogram/venv/lib/python3.12/site-packages/sqlalchemy/engine/base.py", line 1418, in execute
    return meth(
           ^^^^^
  File "/Users/joewilson/PythonProjects/Snoogram/venv/lib/python3.12/site-packages/sqlalchemy/sql/elements.py", line 515, in _execute_on_connection
    return connection._execute_clauseelement(
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/Users/joewilson/PythonProjects/Snoogram/venv/lib/python3.12/site-packages/sqlalchemy/engine/base.py", line 1640, in _execute_clauseelement
    ret = self._execute_context(
          ^^^^^^^^^^^^^^^^^^^^^^
  File "/Users/joewilson/PythonProjects/Snoogram/venv/lib/python3.12/site-packages/sqlalchemy/engine/base.py", line 1846, in _execute_context
    return self._exec_single_context(
           ^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/Users/joewilson/PythonProjects/Snoogram/venv/lib/python3.12/site-packages/sqlalchemy/engine/base.py", line 1986, in _exec_single_context
    self._handle_dbapi_exception(
  File "/Users/joewilson/PythonProjects/Snoogram/venv/lib/python3.12/site-packages/sqlalchemy/engine/base.py", line 2355, in _handle_dbapi_exception
    raise sqlalchemy_exception.with_traceback(exc_info[2]) from e
  File "/Users/joewilson/PythonProjects/Snoogram/venv/lib/python3.12/site-packages/sqlalchemy/engine/base.py", line 1967, in _exec_single_context
    self.dialect.do_execute(
  File "/Users/joewilson/PythonProjects/Snoogram/venv/lib/python3.12/site-packages/sqlalchemy/engine/default.py", line 941, in do_execute
    cursor.execute(statement, parameters)
sqlalchemy.exc.OperationalError: (sqlite3.OperationalError) attempt to write a readonly database
[SQL: INSERT INTO sent_post (post_id, subreddit_name, sent_at) VALUES (?, ?, ?)]
[parameters: ('1gbi6rb', 'wifebutt', '2024-10-30 10:26:20.233029')]
(Background on this error at: https://sqlalche.me/e/20/e3q8)
2024-10-30 05:26:39,378 - DEBUG - send_request_body.failed exception=WriteError(ClosedResourceError())
2024-10-30 05:26:39,379 - DEBUG - response_closed.started
2024-10-30 05:26:39,380 - DEBUG - response_closed.complete
2024-10-30 05:26:39,380 - DEBUG - This Application is already shut down. Returning.
2024-10-30 05:26:39,381 - ERROR - Failed to send video to Telegram: httpx.WriteError: 
2024-10-30 05:26:39,382 - ERROR - Error sending video post 1gelyz1: httpx.WriteError: 
2024-10-30 05:26:39,382 - INFO - Checking post: 1gejrnl - Score: 2582 - URL: https://v3.redgifs.com/watch/graydefensivepika
2024-10-30 05:26:39,389 - INFO - Request URL: 'https://cosmossnoogram-centralus.documents.azure.com:443/dbs/ToDoList/colls/sent_posts/docs/'
Request method: 'POST'
Request headers:
    'Cache-Control': 'no-cache'
    'x-ms-version': 'REDACTED'
    'x-ms-documentdb-query-iscontinuationexpected': 'REDACTED'
    'x-ms-consistency-level': 'REDACTED'
    'x-ms-documentdb-isquery': 'REDACTED'
    'Content-Type': 'application/query+json'
    'x-ms-session-token': 'REDACTED'
    'x-ms-documentdb-query-enablecrosspartition': 'REDACTED'
    'x-ms-date': 'REDACTED'
    'authorization': 'REDACTED'
    'Accept': 'application/json'
    'x-ms-cosmos-correlated-activityid': 'REDACTED'
    'Content-Length': '107'
    'User-Agent': 'azsdk-python-cosmos/4.5.1 Python/3.12.4 (macOS-15.0.1-arm64-arm-64bit)'
A body is sent with the request
2024-10-30 05:26:39,419 - DEBUG - https://cosmossnoogram-centralus.documents.azure.com:443 "POST /dbs/ToDoList/colls/sent_posts/docs/ HTTP/11" 200 None
2024-10-30 05:26:39,419 - INFO - Response status: 200
Response headers:
    'Cache-Control': 'no-store, no-cache'
    'Pragma': 'no-cache'
    'Transfer-Encoding': 'chunked'
    'Content-Type': 'application/json'
    'Server': 'Microsoft-HTTPAPI/2.0'
    'Strict-Transport-Security': 'REDACTED'
    'x-ms-activity-id': 'REDACTED'
    'x-ms-last-state-change-utc': 'REDACTED'
    'x-ms-resource-quota': 'REDACTED'
    'x-ms-resource-usage': 'REDACTED'
    'x-ms-schemaversion': 'REDACTED'
    'lsn': 'REDACTED'
    'x-ms-item-count': 'REDACTED'
    'x-ms-request-charge': 'REDACTED'
    'x-ms-alt-content-path': 'REDACTED'
    'x-ms-content-path': 'REDACTED'
    'x-ms-documentdb-partitionkeyrangeid': 'REDACTED'
    'x-ms-xp-role': 'REDACTED'
    'x-ms-cosmos-query-execution-info': 'REDACTED'
    'x-ms-global-Committed-lsn': 'REDACTED'
    'x-ms-number-of-read-regions': 'REDACTED'
    'x-ms-transport-request-id': 'REDACTED'
    'x-ms-cosmos-llsn': 'REDACTED'
    'x-ms-session-token': 'REDACTED'
    'x-ms-request-duration-ms': 'REDACTED'
    'x-ms-serviceversion': 'REDACTED'
    'x-ms-cosmos-is-partition-key-delete-pending': 'REDACTED'
    'x-ms-cosmos-physical-partition-id': 'REDACTED'
    'x-ms-cosmos-internal-partition-id': 'REDACTED'
    'x-ms-gatewayversion': 'REDACTED'
    'Date': 'Wed, 30 Oct 2024 10:26:39 GMT'
2024-10-30 05:26:39,419 - INFO - Post 1gejrnl is a duplicate, skipping
2024-10-30 05:26:39,419 - INFO - Checking post: 1gelw33 - Score: 2304 - URL: https://www.redgifs.com/watch/drydarkgraysable
2024-10-30 05:26:39,420 - INFO - Post 1gelw33 is a duplicate, skipping
2024-10-30 05:26:39,420 - INFO - Checking post: 1gevvp0 - Score: 1192 - URL: https://www.redgifs.com/watch/medicalplumhen
2024-10-30 05:26:39,420 - INFO - Post 1gevvp0 is a duplicate, skipping
2024-10-30 05:26:39,420 - INFO - Checking post: 1gesoj7 - Score: 756 - URL: https://www.redgifs.com/watch/lightgreytrickydragonfly
2024-10-30 05:26:39,421 - INFO - Post 1gesoj7 is a duplicate, skipping
2024-10-30 05:26:39,421 - INFO - Checking post: 1geuuqp - Score: 445 - URL: https://www.redgifs.com/watch/cheerfulbeigebagworm
2024-10-30 05:26:39,421 - INFO - Post 1geuuqp is a duplicate, skipping
2024-10-30 05:26:39,421 - INFO - Checking post: 1geakrb - Score: 393 - URL: https://www.redgifs.com/watch/illinformedthickgalapagoshawk
2024-10-30 05:26:39,421 - INFO - Post 1geakrb is a duplicate, skipping
2024-10-30 05:26:39,421 - INFO - Checking post: 1gerubz - Score: 368 - URL: https://v3.redgifs.com/watch/trickysquarepseudodynerusquadrisectus
2024-10-30 05:26:39,421 - INFO - Post 1gerubz is a duplicate, skipping
2024-10-30 05:26:39,421 - INFO - Checking post: 1getxhl - Score: 336 - URL: https://www.redgifs.com/watch/purpledemandingboaconstrictor
2024-10-30 05:26:39,421 - INFO - Post 1getxhl is a duplicate, skipping
2024-10-30 05:26:39,421 - INFO - Checking post: 1ge9gol - Score: 279 - URL: https://v3.redgifs.com/watch/circulardeeppinkamericanbulldog
2024-10-30 05:26:39,422 - INFO - Request URL: 'https://cosmossnoogram-centralus.documents.azure.com:443/dbs/ToDoList/colls/sent_posts/docs/'
Request method: 'POST'
Request headers:
    'Cache-Control': 'no-cache'
    'x-ms-version': 'REDACTED'
    'x-ms-documentdb-query-iscontinuationexpected': 'REDACTED'
    'x-ms-consistency-level': 'REDACTED'
    'x-ms-documentdb-isquery': 'REDACTED'
    'Content-Type': 'application/query+json'
    'x-ms-session-token': 'REDACTED'
    'x-ms-documentdb-query-enablecrosspartition': 'REDACTED'
    'x-ms-date': 'REDACTED'
    'authorization': 'REDACTED'
    'Accept': 'application/json'
    'x-ms-cosmos-correlated-activityid': 'REDACTED'
    'Content-Length': '107'
    'User-Agent': 'azsdk-python-cosmos/4.5.1 Python/3.12.4 (macOS-15.0.1-arm64-arm-64bit)'
A body is sent with the request
2024-10-30 05:26:39,453 - DEBUG - https://cosmossnoogram-centralus.documents.azure.com:443 "POST /dbs/ToDoList/colls/sent_posts/docs/ HTTP/11" 200 None
2024-10-30 05:26:39,454 - INFO - Response status: 200
Response headers:
    'Cache-Control': 'no-store, no-cache'
    'Pragma': 'no-cache'
    'Transfer-Encoding': 'chunked'
    'Content-Type': 'application/json'
    'Server': 'Microsoft-HTTPAPI/2.0'
    'Strict-Transport-Security': 'REDACTED'
    'x-ms-activity-id': 'REDACTED'
    'x-ms-last-state-change-utc': 'REDACTED'
    'x-ms-resource-quota': 'REDACTED'
    'x-ms-resource-usage': 'REDACTED'
    'x-ms-schemaversion': 'REDACTED'
    'lsn': 'REDACTED'
    'x-ms-item-count': 'REDACTED'
    'x-ms-request-charge': 'REDACTED'
    'x-ms-alt-content-path': 'REDACTED'
    'x-ms-content-path': 'REDACTED'
    'x-ms-documentdb-partitionkeyrangeid': 'REDACTED'
    'x-ms-xp-role': 'REDACTED'
    'x-ms-cosmos-query-execution-info': 'REDACTED'
    'x-ms-global-Committed-lsn': 'REDACTED'
    'x-ms-number-of-read-regions': 'REDACTED'
    'x-ms-transport-request-id': 'REDACTED'
    'x-ms-cosmos-llsn': 'REDACTED'
    'x-ms-session-token': 'REDACTED'
    'x-ms-request-duration-ms': 'REDACTED'
    'x-ms-serviceversion': 'REDACTED'
    'x-ms-cosmos-is-partition-key-delete-pending': 'REDACTED'
    'x-ms-cosmos-physical-partition-id': 'REDACTED'
    'x-ms-cosmos-internal-partition-id': 'REDACTED'
    'x-ms-gatewayversion': 'REDACTED'
    'Date': 'Wed, 30 Oct 2024 10:26:39 GMT'
2024-10-30 05:26:39,454 - INFO - Found video post: 1ge9gol
2024-10-30 05:26:39,454 - DEBUG - Starting new HTTPS connection (1): api.redgifs.com:443
2024-10-30 05:26:39,557 - DEBUG - https://api.redgifs.com:443 "GET /v2/gifs/circulardeeppinkamericanbulldog HTTP/11" 200 None
2024-10-30 05:26:39,560 - DEBUG - Starting new HTTPS connection (1): files.redgifs.com:443
2024-10-30 05:26:39,626 - DEBUG - https://files.redgifs.com:443 "GET /CircularDeeppinkAmericanbulldog.mp4 HTTP/11" 200 61415883
2024-10-30 05:26:40,988 - INFO - Successfully downloaded media to downloads/videos/1ge9gol_20241030_052639_fff8ab71.mp4
2024-10-30 05:26:40,990 - DEBUG - Using selector: KqueueSelector
2024-10-30 05:26:40,990 - INFO - Attempting to send video to Telegram - Path: downloads/videos/1ge9gol_20241030_052639_fff8ab71.mp4
2024-10-30 05:26:40,991 - DEBUG - load_ssl_context verify=True cert=None trust_env=True http2=False
2024-10-30 05:26:40,991 - DEBUG - load_verify_locations cafile='/Users/joewilson/PythonProjects/Snoogram/venv/lib/python3.12/site-packages/certifi/cacert.pem'
2024-10-30 05:26:41,002 - DEBUG - load_ssl_context verify=True cert=None trust_env=True http2=False
2024-10-30 05:26:41,002 - DEBUG - load_verify_locations cafile='/Users/joewilson/PythonProjects/Snoogram/venv/lib/python3.12/site-packages/certifi/cacert.pem'
2024-10-30 05:26:41,010 - DEBUG - Entering: get_me
2024-10-30 05:26:41,010 - DEBUG - connect_tcp.started host='api.telegram.org' port=443 local_address=None timeout=5.0 socket_options=None
2024-10-30 05:26:41,129 - DEBUG - connect_tcp.complete return_value=<httpcore._backends.anyio.AnyIOStream object at 0x108cee6f0>
2024-10-30 05:26:41,129 - DEBUG - start_tls.started ssl_context=<ssl.SSLContext object at 0x108ed7950> server_hostname='api.telegram.org' timeout=5.0
2024-10-30 05:26:41,255 - DEBUG - start_tls.complete return_value=<httpcore._backends.anyio.AnyIOStream object at 0x108ced2b0>
2024-10-30 05:26:41,256 - DEBUG - send_request_headers.started request=<Request [b'POST']>
2024-10-30 05:26:41,256 - DEBUG - send_request_headers.complete
2024-10-30 05:26:41,256 - DEBUG - send_request_body.started request=<Request [b'POST']>
2024-10-30 05:26:41,256 - DEBUG - send_request_body.complete
2024-10-30 05:26:41,256 - DEBUG - receive_response_headers.started request=<Request [b'POST']>
2024-10-30 05:26:41,373 - DEBUG - receive_response_headers.complete return_value=(b'HTTP/1.1', 200, b'OK', [(b'Server', b'nginx/1.18.0'), (b'Date', b'Wed, 30 Oct 2024 10:26:41 GMT'), (b'Content-Type', b'application/json'), (b'Content-Length', b'254'), (b'Connection', b'keep-alive'), (b'Strict-Transport-Security', b'max-age=31536000; includeSubDomains; preload'), (b'Access-Control-Allow-Origin', b'*'), (b'Access-Control-Allow-Methods', b'GET, POST, OPTIONS'), (b'Access-Control-Expose-Headers', b'Content-Length,Content-Type,Date,Server,Connection')])
2024-10-30 05:26:41,373 - INFO - HTTP Request: POST https://api.telegram.org/bot7867694458:AAEFLZjWPyd1p640mHENnBt479WRYfSavWg/getMe "HTTP/1.1 200 OK"
2024-10-30 05:26:41,373 - DEBUG - receive_response_body.started request=<Request [b'POST']>
2024-10-30 05:26:41,373 - DEBUG - receive_response_body.complete
2024-10-30 05:26:41,373 - DEBUG - response_closed.started
2024-10-30 05:26:41,373 - DEBUG - response_closed.complete
2024-10-30 05:26:41,374 - DEBUG - User(api_kwargs={'can_connect_to_business': False, 'has_main_web_app': False}, can_join_groups=True, can_read_all_group_messages=False, first_name='RedditBot', id=7867694458, is_bot=True, supports_inline_queries=False, username='RedditImage_bot')
2024-10-30 05:26:41,374 - DEBUG - Exiting: get_me
2024-10-30 05:26:41,374 - DEBUG - This Bot is already initialized.
2024-10-30 05:26:41,374 - DEBUG - Entering: send_video
2024-10-30 05:26:41,404 - DEBUG - send_request_headers.started request=<Request [b'POST']>
2024-10-30 05:26:41,405 - DEBUG - send_request_headers.complete
2024-10-30 05:26:41,405 - DEBUG - send_request_body.started request=<Request [b'POST']>
2024-10-30 05:26:45,830 - DEBUG - send_request_body.complete
2024-10-30 05:26:45,830 - DEBUG - receive_response_headers.started request=<Request [b'POST']>
2024-10-30 05:26:45,831 - DEBUG - receive_response_headers.complete return_value=(b'HTTP/1.1', 413, b'Request Entity Too Large', [(b'Server', b'nginx/1.18.0'), (b'Date', b'Wed, 30 Oct 2024 10:26:41 GMT'), (b'Content-Type', b'application/json'), (b'Content-Length', b'70'), (b'Connection', b'close'), (b'Strict-Transport-Security', b'max-age=31536000; includeSubDomains; preload'), (b'Access-Control-Allow-Origin', b'*'), (b'Access-Control-Expose-Headers', b'Content-Length,Content-Type,Date,Server,Connection')])
2024-10-30 05:26:45,831 - INFO - HTTP Request: POST https://api.telegram.org/bot7867694458:AAEFLZjWPyd1p640mHENnBt479WRYfSavWg/sendVideo "HTTP/1.1 413 Request Entity Too Large"
2024-10-30 05:26:45,831 - DEBUG - receive_response_body.started request=<Request [b'POST']>
2024-10-30 05:26:45,831 - DEBUG - receive_response_body.complete
2024-10-30 05:26:45,831 - DEBUG - response_closed.started
2024-10-30 05:26:45,831 - DEBUG - response_closed.complete
2024-10-30 05:26:45,831 - DEBUG - This Bot is already shut down. Returning.
2024-10-30 05:26:45,831 - DEBUG - Shut down of Updater complete
2024-10-30 05:26:45,831 - ERROR - Failed to send video to Telegram: Request Entity Too Large (413)
2024-10-30 05:26:45,832 - ERROR - Error sending video post 1ge9gol: Request Entity Too Large (413)
2024-10-30 05:26:45,832 - INFO - Checking post: 1ge98kx - Score: 256 - URL: https://www.redgifs.com/watch/frontspecificspittlebug
2024-10-30 05:26:45,832 - INFO - Post 1ge98kx is a duplicate, skipping
2024-10-30 05:26:45,832 - INFO - Checking post: 1geqscs - Score: 240 - URL: https://www.redgifs.com/watch/previousweequeensnake
2024-10-30 05:26:45,833 - INFO - Request URL: 'https://cosmossnoogram-centralus.documents.azure.com:443/dbs/ToDoList/colls/sent_posts/docs/'
Request method: 'POST'
Request headers:
    'Cache-Control': 'no-cache'
    'x-ms-version': 'REDACTED'
    'x-ms-documentdb-query-iscontinuationexpected': 'REDACTED'
    'x-ms-consistency-level': 'REDACTED'
    'x-ms-documentdb-isquery': 'REDACTED'
    'Content-Type': 'application/query+json'
    'x-ms-session-token': 'REDACTED'
    'x-ms-documentdb-query-enablecrosspartition': 'REDACTED'
    'x-ms-date': 'REDACTED'
    'authorization': 'REDACTED'
    'Accept': 'application/json'
    'x-ms-cosmos-correlated-activityid': 'REDACTED'
    'Content-Length': '107'
    'User-Agent': 'azsdk-python-cosmos/4.5.1 Python/3.12.4 (macOS-15.0.1-arm64-arm-64bit)'
A body is sent with the request
2024-10-30 05:26:45,903 - DEBUG - https://cosmossnoogram-centralus.documents.azure.com:443 "POST /dbs/ToDoList/colls/sent_posts/docs/ HTTP/11" 200 None
2024-10-30 05:26:45,904 - INFO - Response status: 200
Response headers:
    'Cache-Control': 'no-store, no-cache'
    'Pragma': 'no-cache'
    'Transfer-Encoding': 'chunked'
    'Content-Type': 'application/json'
    'Server': 'Microsoft-HTTPAPI/2.0'
    'Strict-Transport-Security': 'REDACTED'
    'x-ms-activity-id': 'REDACTED'
    'x-ms-last-state-change-utc': 'REDACTED'
    'x-ms-resource-quota': 'REDACTED'
    'x-ms-resource-usage': 'REDACTED'
    'x-ms-schemaversion': 'REDACTED'
    'lsn': 'REDACTED'
    'x-ms-item-count': 'REDACTED'
    'x-ms-request-charge': 'REDACTED'
    'x-ms-alt-content-path': 'REDACTED'
    'x-ms-content-path': 'REDACTED'
    'x-ms-documentdb-partitionkeyrangeid': 'REDACTED'
    'x-ms-xp-role': 'REDACTED'
    'x-ms-cosmos-query-execution-info': 'REDACTED'
    'x-ms-global-Committed-lsn': 'REDACTED'
    'x-ms-number-of-read-regions': 'REDACTED'
    'x-ms-transport-request-id': 'REDACTED'
    'x-ms-cosmos-llsn': 'REDACTED'
    'x-ms-session-token': 'REDACTED'
    'x-ms-request-duration-ms': 'REDACTED'
    'x-ms-serviceversion': 'REDACTED'
    'x-ms-cosmos-is-partition-key-delete-pending': 'REDACTED'
    'x-ms-cosmos-physical-partition-id': 'REDACTED'
    'x-ms-cosmos-internal-partition-id': 'REDACTED'
    'x-ms-gatewayversion': 'REDACTED'
    'Date': 'Wed, 30 Oct 2024 10:26:45 GMT'
2024-10-30 05:26:45,904 - INFO - Found video post: 1geqscs
2024-10-30 05:26:45,905 - DEBUG - Starting new HTTPS connection (1): api.redgifs.com:443
2024-10-30 05:26:46,015 - DEBUG - https://api.redgifs.com:443 "GET /v2/gifs/previousweequeensnake HTTP/11" 200 None
2024-10-30 05:26:46,017 - DEBUG - Starting new HTTPS connection (1): files.redgifs.com:443
2024-10-30 05:26:46,104 - DEBUG - https://files.redgifs.com:443 "GET /PreviousWeeQueensnake.mp4 HTTP/11" 200 50070206
2024-10-30 05:26:47,191 - INFO - Successfully downloaded media to downloads/videos/1geqscs_20241030_052646_2fd81a4e.mp4
2024-10-30 05:26:47,193 - DEBUG - Using selector: KqueueSelector
2024-10-30 05:26:47,193 - INFO - Attempting to send video to Telegram - Path: downloads/videos/1geqscs_20241030_052646_2fd81a4e.mp4
2024-10-30 05:26:47,193 - DEBUG - load_ssl_context verify=True cert=None trust_env=True http2=False
2024-10-30 05:26:47,194 - DEBUG - load_verify_locations cafile='/Users/joewilson/PythonProjects/Snoogram/venv/lib/python3.12/site-packages/certifi/cacert.pem'
2024-10-30 05:26:47,200 - DEBUG - load_ssl_context verify=True cert=None trust_env=True http2=False
2024-10-30 05:26:47,200 - DEBUG - load_verify_locations cafile='/Users/joewilson/PythonProjects/Snoogram/venv/lib/python3.12/site-packages/certifi/cacert.pem'
2024-10-30 05:26:47,216 - DEBUG - Entering: get_me
2024-10-30 05:26:47,219 - DEBUG - connect_tcp.started host='api.telegram.org' port=443 local_address=None timeout=5.0 socket_options=None
2024-10-30 05:26:47,355 - DEBUG - connect_tcp.complete return_value=<httpcore._backends.anyio.AnyIOStream object at 0x108a33b60>
2024-10-30 05:26:47,356 - DEBUG - start_tls.started ssl_context=<ssl.SSLContext object at 0x108afe7d0> server_hostname='api.telegram.org' timeout=5.0
2024-10-30 05:26:47,490 - DEBUG - start_tls.complete return_value=<httpcore._backends.anyio.AnyIOStream object at 0x108a32d50>
2024-10-30 05:26:47,490 - DEBUG - send_request_headers.started request=<Request [b'POST']>
2024-10-30 05:26:47,490 - DEBUG - send_request_headers.complete
2024-10-30 05:26:47,490 - DEBUG - send_request_body.started request=<Request [b'POST']>
2024-10-30 05:26:47,490 - DEBUG - send_request_body.complete
2024-10-30 05:26:47,490 - DEBUG - receive_response_headers.started request=<Request [b'POST']>
2024-10-30 05:26:47,606 - DEBUG - receive_response_headers.complete return_value=(b'HTTP/1.1', 200, b'OK', [(b'Server', b'nginx/1.18.0'), (b'Date', b'Wed, 30 Oct 2024 10:26:47 GMT'), (b'Content-Type', b'application/json'), (b'Content-Length', b'254'), (b'Connection', b'keep-alive'), (b'Strict-Transport-Security', b'max-age=31536000; includeSubDomains; preload'), (b'Access-Control-Allow-Origin', b'*'), (b'Access-Control-Allow-Methods', b'GET, POST, OPTIONS'), (b'Access-Control-Expose-Headers', b'Content-Length,Content-Type,Date,Server,Connection')])
2024-10-30 05:26:47,606 - INFO - HTTP Request: POST https://api.telegram.org/bot7867694458:AAEFLZjWPyd1p640mHENnBt479WRYfSavWg/getMe "HTTP/1.1 200 OK"
2024-10-30 05:26:47,606 - DEBUG - receive_response_body.started request=<Request [b'POST']>
2024-10-30 05:26:47,606 - DEBUG - receive_response_body.complete
2024-10-30 05:26:47,607 - DEBUG - response_closed.started
2024-10-30 05:26:47,607 - DEBUG - response_closed.complete
2024-10-30 05:26:47,607 - DEBUG - User(api_kwargs={'can_connect_to_business': False, 'has_main_web_app': False}, can_join_groups=True, can_read_all_group_messages=False, first_name='RedditBot', id=7867694458, is_bot=True, supports_inline_queries=False, username='RedditImage_bot')
2024-10-30 05:26:47,607 - DEBUG - Exiting: get_me
2024-10-30 05:26:47,607 - DEBUG - This Bot is already initialized.
2024-10-30 05:26:47,607 - DEBUG - Entering: send_video
2024-10-30 05:26:47,626 - DEBUG - send_request_headers.started request=<Request [b'POST']>
2024-10-30 05:26:47,627 - DEBUG - send_request_headers.complete
2024-10-30 05:26:47,627 - DEBUG - send_request_body.started request=<Request [b'POST']>
2024-10-30 05:26:50,892 - DEBUG - send_request_body.complete
2024-10-30 05:26:50,892 - DEBUG - receive_response_headers.started request=<Request [b'POST']>
2024-10-30 05:26:53,656 - DEBUG - receive_response_headers.complete return_value=(b'HTTP/1.1', 200, b'OK', [(b'Server', b'nginx/1.18.0'), (b'Date', b'Wed, 30 Oct 2024 10:26:53 GMT'), (b'Content-Type', b'application/json'), (b'Content-Length', b'600'), (b'Connection', b'keep-alive'), (b'Strict-Transport-Security', b'max-age=31536000; includeSubDomains; preload'), (b'Access-Control-Allow-Origin', b'*'), (b'Access-Control-Allow-Methods', b'GET, POST, OPTIONS'), (b'Access-Control-Expose-Headers', b'Content-Length,Content-Type,Date,Server,Connection')])
2024-10-30 05:26:53,657 - INFO - HTTP Request: POST https://api.telegram.org/bot7867694458:AAEFLZjWPyd1p640mHENnBt479WRYfSavWg/sendVideo "HTTP/1.1 200 OK"
2024-10-30 05:26:53,657 - DEBUG - receive_response_body.started request=<Request [b'POST']>
2024-10-30 05:26:53,657 - DEBUG - receive_response_body.complete
2024-10-30 05:26:53,657 - DEBUG - response_closed.started
2024-10-30 05:26:53,657 - DEBUG - response_closed.complete
2024-10-30 05:26:53,658 - DEBUG - Message(caption='From r/girlsfinishingthejob: I love when he covers my titties with his hot cum ðŸ¥°\nUpvotes: 240', channel_chat_created=False, chat=Chat(id=-1002490380283, title='Reddit_Pic_Stream', type=<ChatType.CHANNEL>), date=datetime.datetime(2024, 10, 30, 10, 26, 53, tzinfo=<UTC>), delete_chat_photo=False, group_chat_created=False, message_id=244, sender_chat=Chat(id=-1002490380283, title='Reddit_Pic_Stream', type=<ChatType.CHANNEL>), supergroup_chat_created=False, video=Video(duration=0, file_id='BAACAgEAAyEGAASUcC_7AAP0ZyIJ7bogDON3cfqwEOVLEKHAtuMAArcEAAIZEBFFHWgVKJlRVCw2BA', file_name='1geqscs_20241030_052646_2fd81a4e.mp4', file_size=50070206, file_unique_id='AgADtwQAAhkQEUU', height=320, mime_type='video/mp4', width=320))
2024-10-30 05:26:53,659 - DEBUG - Exiting: send_video
2024-10-30 05:26:53,660 - DEBUG - close.started
2024-10-30 05:26:53,660 - DEBUG - close.complete
2024-10-30 05:26:53,660 - DEBUG - This Bot is already shut down. Returning.
2024-10-30 05:26:53,660 - DEBUG - Shut down of Updater complete
2024-10-30 05:26:53,660 - INFO - Successfully sent video to Telegram
2024-10-30 05:26:53,664 - ERROR - Error processing subreddit girlsfinishingthejob: (sqlite3.OperationalError) attempt to write a readonly database
[SQL: INSERT INTO sent_post (post_id, subreddit_name, sent_at) VALUES (?, ?, ?)]
[parameters: ('1geqscs', 'girlsfinishingthejob', '2024-10-30 10:26:53.663135')]
(Background on this error at: https://sqlalche.me/e/20/e3q8)
2024-10-30 05:26:53,666 - ERROR - Job "send_to_telegram (trigger: interval[0:01:00], next run at: 2024-10-30 05:27:16 CDT)" raised an exception
Traceback (most recent call last):
  File "/Users/joewilson/PythonProjects/Snoogram/venv/lib/python3.12/site-packages/sqlalchemy/engine/base.py", line 1967, in _exec_single_context
    self.dialect.do_execute(
  File "/Users/joewilson/PythonProjects/Snoogram/venv/lib/python3.12/site-packages/sqlalchemy/engine/default.py", line 941, in do_execute
    cursor.execute(statement, parameters)
sqlite3.OperationalError: attempt to write a readonly database

The above exception was the direct cause of the following exception:

Traceback (most recent call last):
  File "/Users/joewilson/PythonProjects/Snoogram/venv/lib/python3.12/site-packages/apscheduler/executors/base.py", line 125, in run_job
    retval = job.func(*job.args, **job.kwargs)
             ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/Users/joewilson/PythonProjects/Snoogram/backend/app.py", line 265, in send_to_telegram
    # Update last_check in Cosmos DB
                ^^^^^^^^^^^^^^^^^^^^^
  File "/Users/joewilson/PythonProjects/Snoogram/backend/db_operations.py", line 100, in add_sent_post
  File "/Users/joewilson/PythonProjects/Snoogram/venv/lib/python3.12/site-packages/sqlalchemy/orm/scoping.py", line 597, in commit
    return self._proxied.commit()
           ^^^^^^^^^^^^^^^^^^^^^^
  File "/Users/joewilson/PythonProjects/Snoogram/venv/lib/python3.12/site-packages/sqlalchemy/orm/session.py", line 2028, in commit
    trans.commit(_to_root=True)
  File "<string>", line 2, in commit
  File "/Users/joewilson/PythonProjects/Snoogram/venv/lib/python3.12/site-packages/sqlalchemy/orm/state_changes.py", line 139, in _go
    ret_value = fn(self, *arg, **kw)
                ^^^^^^^^^^^^^^^^^^^^
  File "/Users/joewilson/PythonProjects/Snoogram/venv/lib/python3.12/site-packages/sqlalchemy/orm/session.py", line 1313, in commit
    self._prepare_impl()
  File "<string>", line 2, in _prepare_impl
  File "/Users/joewilson/PythonProjects/Snoogram/venv/lib/python3.12/site-packages/sqlalchemy/orm/state_changes.py", line 139, in _go
    ret_value = fn(self, *arg, **kw)
                ^^^^^^^^^^^^^^^^^^^^
  File "/Users/joewilson/PythonProjects/Snoogram/venv/lib/python3.12/site-packages/sqlalchemy/orm/session.py", line 1288, in _prepare_impl
    self.session.flush()
  File "/Users/joewilson/PythonProjects/Snoogram/venv/lib/python3.12/site-packages/sqlalchemy/orm/session.py", line 4352, in flush
    self._flush(objects)
  File "/Users/joewilson/PythonProjects/Snoogram/venv/lib/python3.12/site-packages/sqlalchemy/orm/session.py", line 4487, in _flush
    with util.safe_reraise():
  File "/Users/joewilson/PythonProjects/Snoogram/venv/lib/python3.12/site-packages/sqlalchemy/util/langhelpers.py", line 146, in __exit__
    raise exc_value.with_traceback(exc_tb)
  File "/Users/joewilson/PythonProjects/Snoogram/venv/lib/python3.12/site-packages/sqlalchemy/orm/session.py", line 4448, in _flush
    flush_context.execute()
  File "/Users/joewilson/PythonProjects/Snoogram/venv/lib/python3.12/site-packages/sqlalchemy/orm/unitofwork.py", line 466, in execute
    rec.execute(self)
  File "/Users/joewilson/PythonProjects/Snoogram/venv/lib/python3.12/site-packages/sqlalchemy/orm/unitofwork.py", line 642, in execute
    util.preloaded.orm_persistence.save_obj(
  File "/Users/joewilson/PythonProjects/Snoogram/venv/lib/python3.12/site-packages/sqlalchemy/orm/persistence.py", line 93, in save_obj
    _emit_insert_statements(
  File "/Users/joewilson/PythonProjects/Snoogram/venv/lib/python3.12/site-packages/sqlalchemy/orm/persistence.py", line 1233, in _emit_insert_statements
    result = connection.execute(
             ^^^^^^^^^^^^^^^^^^^
  File "/Users/joewilson/PythonProjects/Snoogram/venv/lib/python3.12/site-packages/sqlalchemy/engine/base.py", line 1418, in execute
    return meth(
           ^^^^^
  File "/Users/joewilson/PythonProjects/Snoogram/venv/lib/python3.12/site-packages/sqlalchemy/sql/elements.py", line 515, in _execute_on_connection
    return connection._execute_clauseelement(
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/Users/joewilson/PythonProjects/Snoogram/venv/lib/python3.12/site-packages/sqlalchemy/engine/base.py", line 1640, in _execute_clauseelement
    ret = self._execute_context(
          ^^^^^^^^^^^^^^^^^^^^^^
  File "/Users/joewilson/PythonProjects/Snoogram/venv/lib/python3.12/site-packages/sqlalchemy/engine/base.py", line 1846, in _execute_context
    return self._exec_single_context(
           ^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/Users/joewilson/PythonProjects/Snoogram/venv/lib/python3.12/site-packages/sqlalchemy/engine/base.py", line 1986, in _exec_single_context
    self._handle_dbapi_exception(
  File "/Users/joewilson/PythonProjects/Snoogram/venv/lib/python3.12/site-packages/sqlalchemy/engine/base.py", line 2355, in _handle_dbapi_exception
    raise sqlalchemy_exception.with_traceback(exc_info[2]) from e
  File "/Users/joewilson/PythonProjects/Snoogram/venv/lib/python3.12/site-packages/sqlalchemy/engine/base.py", line 1967, in _exec_single_context
    self.dialect.do_execute(
  File "/Users/joewilson/PythonProjects/Snoogram/venv/lib/python3.12/site-packages/sqlalchemy/engine/default.py", line 941, in do_execute
    cursor.execute(statement, parameters)
sqlalchemy.exc.OperationalError: (sqlite3.OperationalError) attempt to write a readonly database
[SQL: INSERT INTO sent_post (post_id, subreddit_name, sent_at) VALUES (?, ?, ?)]
[parameters: ('1geqscs', 'girlsfinishingthejob', '2024-10-30 10:26:53.663135')]
(Background on this error at: https://sqlalche.me/e/20/e3q8)
2024-10-30 05:27:16,972 - DEBUG - Looking for jobs to run
2024-10-30 05:27:16,974 - DEBUG - Next wakeup is due at 2024-10-30 05:28:16.969826-05:00 (in 59.995096 seconds)
2024-10-30 05:27:16,974 - INFO - Running job "send_to_telegram (trigger: interval[0:01:00], next run at: 2024-10-30 05:28:16 CDT)" (scheduled at 2024-10-30 05:27:16.969826-05:00)
2024-10-30 05:27:16,975 - INFO - Running job "send_to_telegram (trigger: interval[0:01:00], next run at: 2024-10-30 05:28:16 CDT)" (scheduled at 2024-10-30 05:27:16.970029-05:00)
2024-10-30 05:27:16,975 - INFO - Processing subreddit: girlsfinishingthejob
2024-10-30 05:27:16,975 - INFO - Processing subreddit: wifebutt
2024-10-30 05:27:16,976 - INFO - Fetching top posts of the day
2024-10-30 05:27:16,976 - INFO - Fetching top posts of the month
2024-10-30 05:27:16,977 - DEBUG - Fetching: GET https://oauth.reddit.com/r/girlsfinishingthejob/top at 1730284036.977012
2024-10-30 05:27:16,977 - DEBUG - Fetching: GET https://oauth.reddit.com/r/wifebutt/top at 1730284036.977201
2024-10-30 05:27:16,977 - DEBUG - Data: None
2024-10-30 05:27:16,977 - DEBUG - Data: None
2024-10-30 05:27:16,977 - DEBUG - Params: {'limit': 50, 'raw_json': 1, 't': 'day'}
2024-10-30 05:27:16,977 - DEBUG - Params: {'limit': 50, 'raw_json': 1, 't': 'month'}
2024-10-30 05:27:17,296 - DEBUG - https://oauth.reddit.com:443 "GET /r/girlsfinishingthejob/top?t=day&limit=50&raw_json=1 HTTP/11" 200 24186
2024-10-30 05:27:17,299 - DEBUG - Response: 200 (24186 bytes) (rst-0:rem-149.0:used-1 ratelimit) at 1730284037.29993
2024-10-30 05:27:17,412 - INFO - Checking post: 1gelyz1 - Score: 7105 - URL: https://www.redgifs.com/watch/uttersvelteamphibian
2024-10-30 05:27:17,416 - INFO - Request URL: 'https://cosmossnoogram-centralus.documents.azure.com:443/dbs/ToDoList/colls/sent_posts/docs/'
Request method: 'POST'
Request headers:
    'Cache-Control': 'no-cache'
    'x-ms-version': 'REDACTED'
    'x-ms-documentdb-query-iscontinuationexpected': 'REDACTED'
    'x-ms-consistency-level': 'REDACTED'
    'x-ms-documentdb-isquery': 'REDACTED'
    'Content-Type': 'application/query+json'
    'x-ms-session-token': 'REDACTED'
    'x-ms-documentdb-query-enablecrosspartition': 'REDACTED'
    'x-ms-date': 'REDACTED'
    'authorization': 'REDACTED'
    'Accept': 'application/json'
    'x-ms-cosmos-correlated-activityid': 'REDACTED'
    'Content-Length': '107'
    'User-Agent': 'azsdk-python-cosmos/4.5.1 Python/3.12.4 (macOS-15.0.1-arm64-arm-64bit)'
A body is sent with the request
2024-10-30 05:27:17,447 - DEBUG - https://cosmossnoogram-centralus.documents.azure.com:443 "POST /dbs/ToDoList/colls/sent_posts/docs/ HTTP/11" 200 None
2024-10-30 05:27:17,448 - INFO - Response status: 200
Response headers:
    'Cache-Control': 'no-store, no-cache'
    'Pragma': 'no-cache'
    'Transfer-Encoding': 'chunked'
    'Content-Type': 'application/json'
    'Server': 'Microsoft-HTTPAPI/2.0'
    'Strict-Transport-Security': 'REDACTED'
    'x-ms-activity-id': 'REDACTED'
    'x-ms-last-state-change-utc': 'REDACTED'
    'x-ms-resource-quota': 'REDACTED'
    'x-ms-resource-usage': 'REDACTED'
    'x-ms-schemaversion': 'REDACTED'
    'lsn': 'REDACTED'
    'x-ms-item-count': 'REDACTED'
    'x-ms-request-charge': 'REDACTED'
    'x-ms-alt-content-path': 'REDACTED'
    'x-ms-content-path': 'REDACTED'
    'x-ms-quorum-acked-lsn': 'REDACTED'
    'x-ms-current-write-quorum': 'REDACTED'
    'x-ms-current-replica-set-size': 'REDACTED'
    'x-ms-documentdb-partitionkeyrangeid': 'REDACTED'
    'x-ms-xp-role': 'REDACTED'
    'x-ms-cosmos-query-execution-info': 'REDACTED'
    'x-ms-global-Committed-lsn': 'REDACTED'
    'x-ms-number-of-read-regions': 'REDACTED'
    'x-ms-transport-request-id': 'REDACTED'
    'x-ms-cosmos-llsn': 'REDACTED'
    'x-ms-cosmos-quorum-acked-llsn': 'REDACTED'
    'x-ms-session-token': 'REDACTED'
    'x-ms-request-duration-ms': 'REDACTED'
    'x-ms-serviceversion': 'REDACTED'
    'x-ms-cosmos-is-partition-key-delete-pending': 'REDACTED'
    'x-ms-cosmos-physical-partition-id': 'REDACTED'
    'x-ms-cosmos-internal-partition-id': 'REDACTED'
    'x-ms-gatewayversion': 'REDACTED'
    'Date': 'Wed, 30 Oct 2024 10:27:17 GMT'
2024-10-30 05:27:17,448 - INFO - Found video post: 1gelyz1
2024-10-30 05:27:17,449 - DEBUG - Starting new HTTPS connection (1): api.redgifs.com:443
2024-10-30 05:27:17,541 - DEBUG - https://api.redgifs.com:443 "GET /v2/gifs/uttersvelteamphibian HTTP/11" 200 None
2024-10-30 05:27:17,544 - DEBUG - Starting new HTTPS connection (1): files.redgifs.com:443
2024-10-30 05:27:17,612 - DEBUG - https://files.redgifs.com:443 "GET /UtterSvelteAmphibian.mp4 HTTP/11" 200 42980012
2024-10-30 05:27:17,812 - DEBUG - https://oauth.reddit.com:443 "GET /r/wifebutt/top?t=month&limit=50&raw_json=1 HTTP/11" 200 49231
2024-10-30 05:27:17,840 - DEBUG - Response: 200 (49231 bytes) (rst-0:rem-148.0:used-2 ratelimit) at 1730284037.840699
2024-10-30 05:27:17,846 - INFO - Checking post: 1g9w053 - Score: 5355 - URL: https://www.reddit.com/gallery/1g9w053
2024-10-30 05:27:17,847 - INFO - Request URL: 'https://cosmossnoogram-centralus.documents.azure.com:443/dbs/ToDoList/colls/sent_posts/docs/'
Request method: 'POST'
Request headers:
    'Cache-Control': 'no-cache'
    'x-ms-version': 'REDACTED'
    'x-ms-documentdb-query-iscontinuationexpected': 'REDACTED'
    'x-ms-consistency-level': 'REDACTED'
    'x-ms-documentdb-isquery': 'REDACTED'
    'Content-Type': 'application/query+json'
    'x-ms-session-token': 'REDACTED'
    'x-ms-documentdb-query-enablecrosspartition': 'REDACTED'
    'x-ms-date': 'REDACTED'
    'authorization': 'REDACTED'
    'Accept': 'application/json'
    'x-ms-cosmos-correlated-activityid': 'REDACTED'
    'Content-Length': '107'
    'User-Agent': 'azsdk-python-cosmos/4.5.1 Python/3.12.4 (macOS-15.0.1-arm64-arm-64bit)'
A body is sent with the request
2024-10-30 05:27:17,890 - DEBUG - https://cosmossnoogram-centralus.documents.azure.com:443 "POST /dbs/ToDoList/colls/sent_posts/docs/ HTTP/11" 200 None
2024-10-30 05:27:17,891 - INFO - Response status: 200
Response headers:
    'Cache-Control': 'no-store, no-cache'
    'Pragma': 'no-cache'
    'Transfer-Encoding': 'chunked'
    'Content-Type': 'application/json'
    'Server': 'Microsoft-HTTPAPI/2.0'
    'Strict-Transport-Security': 'REDACTED'
    'x-ms-activity-id': 'REDACTED'
    'x-ms-last-state-change-utc': 'REDACTED'
    'x-ms-resource-quota': 'REDACTED'
    'x-ms-resource-usage': 'REDACTED'
    'x-ms-schemaversion': 'REDACTED'
    'lsn': 'REDACTED'
    'x-ms-item-count': 'REDACTED'
    'x-ms-request-charge': 'REDACTED'
    'x-ms-alt-content-path': 'REDACTED'
    'x-ms-content-path': 'REDACTED'
    'x-ms-documentdb-partitionkeyrangeid': 'REDACTED'
    'x-ms-xp-role': 'REDACTED'
    'x-ms-cosmos-query-execution-info': 'REDACTED'
    'x-ms-global-Committed-lsn': 'REDACTED'
    'x-ms-number-of-read-regions': 'REDACTED'
    'x-ms-transport-request-id': 'REDACTED'
    'x-ms-cosmos-llsn': 'REDACTED'
    'x-ms-session-token': 'REDACTED'
    'x-ms-request-duration-ms': 'REDACTED'
    'x-ms-serviceversion': 'REDACTED'
    'x-ms-cosmos-is-partition-key-delete-pending': 'REDACTED'
    'x-ms-cosmos-physical-partition-id': 'REDACTED'
    'x-ms-cosmos-internal-partition-id': 'REDACTED'
    'x-ms-gatewayversion': 'REDACTED'
    'Date': 'Wed, 30 Oct 2024 10:27:17 GMT'
2024-10-30 05:27:17,891 - INFO - Post 1g9w053 is not an image or video post, skipping
2024-10-30 05:27:17,891 - INFO - Checking post: 1fv4cfc - Score: 4574 - URL: https://www.reddit.com/gallery/1fv4cfc
2024-10-30 05:27:17,892 - INFO - Request URL: 'https://cosmossnoogram-centralus.documents.azure.com:443/dbs/ToDoList/colls/sent_posts/docs/'
Request method: 'POST'
Request headers:
    'Cache-Control': 'no-cache'
    'x-ms-version': 'REDACTED'
    'x-ms-documentdb-query-iscontinuationexpected': 'REDACTED'
    'x-ms-consistency-level': 'REDACTED'
    'x-ms-documentdb-isquery': 'REDACTED'
    'Content-Type': 'application/query+json'
    'x-ms-session-token': 'REDACTED'
    'x-ms-documentdb-query-enablecrosspartition': 'REDACTED'
    'x-ms-date': 'REDACTED'
    'authorization': 'REDACTED'
    'Accept': 'application/json'
    'x-ms-cosmos-correlated-activityid': 'REDACTED'
    'Content-Length': '107'
    'User-Agent': 'azsdk-python-cosmos/4.5.1 Python/3.12.4 (macOS-15.0.1-arm64-arm-64bit)'
A body is sent with the request
2024-10-30 05:27:17,952 - DEBUG - https://cosmossnoogram-centralus.documents.azure.com:443 "POST /dbs/ToDoList/colls/sent_posts/docs/ HTTP/11" 200 None
2024-10-30 05:27:17,952 - INFO - Response status: 200
Response headers:
    'Cache-Control': 'no-store, no-cache'
    'Pragma': 'no-cache'
    'Transfer-Encoding': 'chunked'
    'Content-Type': 'application/json'
    'Server': 'Microsoft-HTTPAPI/2.0'
    'Strict-Transport-Security': 'REDACTED'
    'x-ms-activity-id': 'REDACTED'
    'x-ms-last-state-change-utc': 'REDACTED'
    'x-ms-resource-quota': 'REDACTED'
    'x-ms-resource-usage': 'REDACTED'
    'x-ms-schemaversion': 'REDACTED'
    'lsn': 'REDACTED'
    'x-ms-item-count': 'REDACTED'
    'x-ms-request-charge': 'REDACTED'
    'x-ms-alt-content-path': 'REDACTED'
    'x-ms-content-path': 'REDACTED'
    'x-ms-documentdb-partitionkeyrangeid': 'REDACTED'
    'x-ms-xp-role': 'REDACTED'
    'x-ms-cosmos-query-execution-info': 'REDACTED'
    'x-ms-global-Committed-lsn': 'REDACTED'
    'x-ms-number-of-read-regions': 'REDACTED'
    'x-ms-transport-request-id': 'REDACTED'
    'x-ms-cosmos-llsn': 'REDACTED'
    'x-ms-session-token': 'REDACTED'
    'x-ms-request-duration-ms': 'REDACTED'
    'x-ms-serviceversion': 'REDACTED'
    'x-ms-cosmos-is-partition-key-delete-pending': 'REDACTED'
    'x-ms-cosmos-physical-partition-id': 'REDACTED'
    'x-ms-cosmos-internal-partition-id': 'REDACTED'
    'x-ms-gatewayversion': 'REDACTED'
    'Date': 'Wed, 30 Oct 2024 10:27:17 GMT'
2024-10-30 05:27:17,952 - INFO - Post 1fv4cfc is not an image or video post, skipping
2024-10-30 05:27:17,952 - INFO - Checking post: 1ganrp0 - Score: 4208 - URL: https://i.redd.it/ezatz8645lwd1.jpeg
2024-10-30 05:27:17,954 - INFO - Request URL: 'https://cosmossnoogram-centralus.documents.azure.com:443/dbs/ToDoList/colls/sent_posts/docs/'
Request method: 'POST'
Request headers:
    'Cache-Control': 'no-cache'
    'x-ms-version': 'REDACTED'
    'x-ms-documentdb-query-iscontinuationexpected': 'REDACTED'
    'x-ms-consistency-level': 'REDACTED'
    'x-ms-documentdb-isquery': 'REDACTED'
    'Content-Type': 'application/query+json'
    'x-ms-session-token': 'REDACTED'
    'x-ms-documentdb-query-enablecrosspartition': 'REDACTED'
    'x-ms-date': 'REDACTED'
    'authorization': 'REDACTED'
    'Accept': 'application/json'
    'x-ms-cosmos-correlated-activityid': 'REDACTED'
    'Content-Length': '107'
    'User-Agent': 'azsdk-python-cosmos/4.5.1 Python/3.12.4 (macOS-15.0.1-arm64-arm-64bit)'
A body is sent with the request
2024-10-30 05:27:18,003 - DEBUG - https://cosmossnoogram-centralus.documents.azure.com:443 "POST /dbs/ToDoList/colls/sent_posts/docs/ HTTP/11" 200 None
2024-10-30 05:27:18,004 - INFO - Response status: 200
Response headers:
    'Cache-Control': 'no-store, no-cache'
    'Pragma': 'no-cache'
    'Transfer-Encoding': 'chunked'
    'Content-Type': 'application/json'
    'Server': 'Microsoft-HTTPAPI/2.0'
    'Strict-Transport-Security': 'REDACTED'
    'x-ms-activity-id': 'REDACTED'
    'x-ms-last-state-change-utc': 'REDACTED'
    'x-ms-resource-quota': 'REDACTED'
    'x-ms-resource-usage': 'REDACTED'
    'x-ms-schemaversion': 'REDACTED'
    'lsn': 'REDACTED'
    'x-ms-item-count': 'REDACTED'
    'x-ms-request-charge': 'REDACTED'
    'x-ms-alt-content-path': 'REDACTED'
    'x-ms-content-path': 'REDACTED'
    'x-ms-documentdb-partitionkeyrangeid': 'REDACTED'
    'x-ms-xp-role': 'REDACTED'
    'x-ms-cosmos-query-execution-info': 'REDACTED'
    'x-ms-global-Committed-lsn': 'REDACTED'
    'x-ms-number-of-read-regions': 'REDACTED'
    'x-ms-transport-request-id': 'REDACTED'
    'x-ms-cosmos-llsn': 'REDACTED'
    'x-ms-session-token': 'REDACTED'
    'x-ms-request-duration-ms': 'REDACTED'
    'x-ms-serviceversion': 'REDACTED'
    'x-ms-cosmos-is-partition-key-delete-pending': 'REDACTED'
    'x-ms-cosmos-physical-partition-id': 'REDACTED'
    'x-ms-cosmos-internal-partition-id': 'REDACTED'
    'x-ms-gatewayversion': 'REDACTED'
    'Date': 'Wed, 30 Oct 2024 10:27:17 GMT'
2024-10-30 05:27:18,004 - INFO - Post 1ganrp0 is a duplicate, skipping
2024-10-30 05:27:18,004 - INFO - Checking post: 1gdrcjt - Score: 4062 - URL: https://www.redgifs.com/watch/unrealisticdefinitebarebirdbat
2024-10-30 05:27:18,005 - INFO - Post 1gdrcjt is a duplicate, skipping
2024-10-30 05:27:18,005 - INFO - Checking post: 1g30sx1 - Score: 3958 - URL: https://www.redgifs.com/watch/hardwarlikesunbittern
2024-10-30 05:27:18,006 - INFO - Post 1g30sx1 is a duplicate, skipping
2024-10-30 05:27:18,006 - INFO - Checking post: 1fs7839 - Score: 3854 - URL: https://www.reddit.com/gallery/1fs7839
2024-10-30 05:27:18,007 - INFO - Request URL: 'https://cosmossnoogram-centralus.documents.azure.com:443/dbs/ToDoList/colls/sent_posts/docs/'
Request method: 'POST'
Request headers:
    'Cache-Control': 'no-cache'
    'x-ms-version': 'REDACTED'
    'x-ms-documentdb-query-iscontinuationexpected': 'REDACTED'
    'x-ms-consistency-level': 'REDACTED'
    'x-ms-documentdb-isquery': 'REDACTED'
    'Content-Type': 'application/query+json'
    'x-ms-session-token': 'REDACTED'
    'x-ms-documentdb-query-enablecrosspartition': 'REDACTED'
    'x-ms-date': 'REDACTED'
    'authorization': 'REDACTED'
    'Accept': 'application/json'
    'x-ms-cosmos-correlated-activityid': 'REDACTED'
    'Content-Length': '107'
    'User-Agent': 'azsdk-python-cosmos/4.5.1 Python/3.12.4 (macOS-15.0.1-arm64-arm-64bit)'
A body is sent with the request
2024-10-30 05:27:18,057 - DEBUG - https://cosmossnoogram-centralus.documents.azure.com:443 "POST /dbs/ToDoList/colls/sent_posts/docs/ HTTP/11" 200 None
2024-10-30 05:27:18,058 - INFO - Response status: 200
Response headers:
    'Cache-Control': 'no-store, no-cache'
    'Pragma': 'no-cache'
    'Transfer-Encoding': 'chunked'
    'Content-Type': 'application/json'
    'Server': 'Microsoft-HTTPAPI/2.0'
    'Strict-Transport-Security': 'REDACTED'
    'x-ms-activity-id': 'REDACTED'
    'x-ms-last-state-change-utc': 'REDACTED'
    'x-ms-resource-quota': 'REDACTED'
    'x-ms-resource-usage': 'REDACTED'
    'x-ms-schemaversion': 'REDACTED'
    'lsn': 'REDACTED'
    'x-ms-item-count': 'REDACTED'
    'x-ms-request-charge': 'REDACTED'
    'x-ms-alt-content-path': 'REDACTED'
    'x-ms-content-path': 'REDACTED'
    'x-ms-documentdb-partitionkeyrangeid': 'REDACTED'
    'x-ms-xp-role': 'REDACTED'
    'x-ms-cosmos-query-execution-info': 'REDACTED'
    'x-ms-global-Committed-lsn': 'REDACTED'
    'x-ms-number-of-read-regions': 'REDACTED'
    'x-ms-transport-request-id': 'REDACTED'
    'x-ms-cosmos-llsn': 'REDACTED'
    'x-ms-session-token': 'REDACTED'
    'x-ms-request-duration-ms': 'REDACTED'
    'x-ms-serviceversion': 'REDACTED'
    'x-ms-cosmos-is-partition-key-delete-pending': 'REDACTED'
    'x-ms-cosmos-physical-partition-id': 'REDACTED'
    'x-ms-cosmos-internal-partition-id': 'REDACTED'
    'x-ms-gatewayversion': 'REDACTED'
    'Date': 'Wed, 30 Oct 2024 10:27:17 GMT'
2024-10-30 05:27:18,058 - INFO - Post 1fs7839 is not an image or video post, skipping
2024-10-30 05:27:18,058 - INFO - Checking post: 1g2rse9 - Score: 3771 - URL: https://i.redd.it/gzxs1aeshjud1.png
2024-10-30 05:27:18,059 - INFO - Post 1g2rse9 is a duplicate, skipping
2024-10-30 05:27:18,059 - INFO - Checking post: 1ge9loz - Score: 3732 - URL: https://www.redgifs.com/watch/deadlygregariouswoodchuck
2024-10-30 05:27:18,059 - INFO - Post 1ge9loz is a duplicate, skipping
2024-10-30 05:27:18,059 - INFO - Checking post: 1g0e966 - Score: 3637 - URL: https://www.reddit.com/gallery/1g0e966
2024-10-30 05:27:18,060 - INFO - Request URL: 'https://cosmossnoogram-centralus.documents.azure.com:443/dbs/ToDoList/colls/sent_posts/docs/'
Request method: 'POST'
Request headers:
    'Cache-Control': 'no-cache'
    'x-ms-version': 'REDACTED'
    'x-ms-documentdb-query-iscontinuationexpected': 'REDACTED'
    'x-ms-consistency-level': 'REDACTED'
    'x-ms-documentdb-isquery': 'REDACTED'
    'Content-Type': 'application/query+json'
    'x-ms-session-token': 'REDACTED'
    'x-ms-documentdb-query-enablecrosspartition': 'REDACTED'
    'x-ms-date': 'REDACTED'
    'authorization': 'REDACTED'
    'Accept': 'application/json'
    'x-ms-cosmos-correlated-activityid': 'REDACTED'
    'Content-Length': '107'
    'User-Agent': 'azsdk-python-cosmos/4.5.1 Python/3.12.4 (macOS-15.0.1-arm64-arm-64bit)'
A body is sent with the request
2024-10-30 05:27:18,113 - DEBUG - https://cosmossnoogram-centralus.documents.azure.com:443 "POST /dbs/ToDoList/colls/sent_posts/docs/ HTTP/11" 200 None
2024-10-30 05:27:18,113 - INFO - Response status: 200
Response headers:
    'Cache-Control': 'no-store, no-cache'
    'Pragma': 'no-cache'
    'Transfer-Encoding': 'chunked'
    'Content-Type': 'application/json'
    'Server': 'Microsoft-HTTPAPI/2.0'
    'Strict-Transport-Security': 'REDACTED'
    'x-ms-activity-id': 'REDACTED'
    'x-ms-last-state-change-utc': 'REDACTED'
    'x-ms-resource-quota': 'REDACTED'
    'x-ms-resource-usage': 'REDACTED'
    'x-ms-schemaversion': 'REDACTED'
    'lsn': 'REDACTED'
    'x-ms-item-count': 'REDACTED'
    'x-ms-request-charge': 'REDACTED'
    'x-ms-alt-content-path': 'REDACTED'
    'x-ms-content-path': 'REDACTED'
    'x-ms-quorum-acked-lsn': 'REDACTED'
    'x-ms-current-write-quorum': 'REDACTED'
    'x-ms-current-replica-set-size': 'REDACTED'
    'x-ms-documentdb-partitionkeyrangeid': 'REDACTED'
    'x-ms-xp-role': 'REDACTED'
    'x-ms-cosmos-query-execution-info': 'REDACTED'
    'x-ms-global-Committed-lsn': 'REDACTED'
    'x-ms-number-of-read-regions': 'REDACTED'
    'x-ms-transport-request-id': 'REDACTED'
    'x-ms-cosmos-llsn': 'REDACTED'
    'x-ms-cosmos-quorum-acked-llsn': 'REDACTED'
    'x-ms-session-token': 'REDACTED'
    'x-ms-request-duration-ms': 'REDACTED'
    'x-ms-serviceversion': 'REDACTED'
    'x-ms-cosmos-is-partition-key-delete-pending': 'REDACTED'
    'x-ms-cosmos-physical-partition-id': 'REDACTED'
    'x-ms-cosmos-internal-partition-id': 'REDACTED'
    'x-ms-gatewayversion': 'REDACTED'
    'Date': 'Wed, 30 Oct 2024 10:27:17 GMT'
2024-10-30 05:27:18,114 - INFO - Post 1g0e966 is not an image or video post, skipping
2024-10-30 05:27:18,114 - INFO - Checking post: 1gckgcy - Score: 3398 - URL: https://i.redd.it/njd0mbyjl3xd1.jpeg
2024-10-30 05:27:18,114 - INFO - Post 1gckgcy is a duplicate, skipping
2024-10-30 05:27:18,114 - INFO - Checking post: 1fznoil - Score: 3335 - URL: https://i.redd.it/eruk3694dptd1.jpeg
2024-10-30 05:27:18,115 - INFO - Post 1fznoil is a duplicate, skipping
2024-10-30 05:27:18,115 - INFO - Checking post: 1g3dsj7 - Score: 3177 - URL: https://i.redd.it/cg9oigznmpud1.jpeg
2024-10-30 05:27:18,115 - INFO - Post 1g3dsj7 is a duplicate, skipping
2024-10-30 05:27:18,115 - INFO - Checking post: 1g4dx9i - Score: 3140 - URL: https://i.redd.it/5kv3c8f3lyud1.jpeg
2024-10-30 05:27:18,116 - INFO - Request URL: 'https://cosmossnoogram-centralus.documents.azure.com:443/dbs/ToDoList/colls/sent_posts/docs/'
Request method: 'POST'
Request headers:
    'Cache-Control': 'no-cache'
    'x-ms-version': 'REDACTED'
    'x-ms-documentdb-query-iscontinuationexpected': 'REDACTED'
    'x-ms-consistency-level': 'REDACTED'
    'x-ms-documentdb-isquery': 'REDACTED'
    'Content-Type': 'application/query+json'
    'x-ms-session-token': 'REDACTED'
    'x-ms-documentdb-query-enablecrosspartition': 'REDACTED'
    'x-ms-date': 'REDACTED'
    'authorization': 'REDACTED'
    'Accept': 'application/json'
    'x-ms-cosmos-correlated-activityid': 'REDACTED'
    'Content-Length': '107'
    'User-Agent': 'azsdk-python-cosmos/4.5.1 Python/3.12.4 (macOS-15.0.1-arm64-arm-64bit)'
A body is sent with the request
2024-10-30 05:27:18,179 - DEBUG - https://cosmossnoogram-centralus.documents.azure.com:443 "POST /dbs/ToDoList/colls/sent_posts/docs/ HTTP/11" 200 None
2024-10-30 05:27:18,179 - INFO - Response status: 200
Response headers:
    'Cache-Control': 'no-store, no-cache'
    'Pragma': 'no-cache'
    'Transfer-Encoding': 'chunked'
    'Content-Type': 'application/json'
    'Server': 'Microsoft-HTTPAPI/2.0'
    'Strict-Transport-Security': 'REDACTED'
    'x-ms-activity-id': 'REDACTED'
    'x-ms-last-state-change-utc': 'REDACTED'
    'x-ms-resource-quota': 'REDACTED'
    'x-ms-resource-usage': 'REDACTED'
    'x-ms-schemaversion': 'REDACTED'
    'lsn': 'REDACTED'
    'x-ms-item-count': 'REDACTED'
    'x-ms-request-charge': 'REDACTED'
    'x-ms-alt-content-path': 'REDACTED'
    'x-ms-content-path': 'REDACTED'
    'x-ms-documentdb-partitionkeyrangeid': 'REDACTED'
    'x-ms-xp-role': 'REDACTED'
    'x-ms-cosmos-query-execution-info': 'REDACTED'
    'x-ms-global-Committed-lsn': 'REDACTED'
    'x-ms-number-of-read-regions': 'REDACTED'
    'x-ms-transport-request-id': 'REDACTED'
    'x-ms-cosmos-llsn': 'REDACTED'
    'x-ms-session-token': 'REDACTED'
    'x-ms-request-duration-ms': 'REDACTED'
    'x-ms-serviceversion': 'REDACTED'
    'x-ms-cosmos-is-partition-key-delete-pending': 'REDACTED'
    'x-ms-cosmos-physical-partition-id': 'REDACTED'
    'x-ms-cosmos-internal-partition-id': 'REDACTED'
    'x-ms-gatewayversion': 'REDACTED'
    'Date': 'Wed, 30 Oct 2024 10:27:17 GMT'
2024-10-30 05:27:18,179 - INFO - Post 1g4dx9i is a duplicate, skipping
2024-10-30 05:27:18,180 - INFO - Checking post: 1gbi6rb - Score: 3134 - URL: https://i.redd.it/uzwse73yvswd1.jpeg
2024-10-30 05:27:18,181 - INFO - Request URL: 'https://cosmossnoogram-centralus.documents.azure.com:443/dbs/ToDoList/colls/sent_posts/docs/'
Request method: 'POST'
Request headers:
    'Cache-Control': 'no-cache'
    'x-ms-version': 'REDACTED'
    'x-ms-documentdb-query-iscontinuationexpected': 'REDACTED'
    'x-ms-consistency-level': 'REDACTED'
    'x-ms-documentdb-isquery': 'REDACTED'
    'Content-Type': 'application/query+json'
    'x-ms-session-token': 'REDACTED'
    'x-ms-documentdb-query-enablecrosspartition': 'REDACTED'
    'x-ms-date': 'REDACTED'
    'authorization': 'REDACTED'
    'Accept': 'application/json'
    'x-ms-cosmos-correlated-activityid': 'REDACTED'
    'Content-Length': '107'
    'User-Agent': 'azsdk-python-cosmos/4.5.1 Python/3.12.4 (macOS-15.0.1-arm64-arm-64bit)'
A body is sent with the request
2024-10-30 05:27:18,237 - DEBUG - https://cosmossnoogram-centralus.documents.azure.com:443 "POST /dbs/ToDoList/colls/sent_posts/docs/ HTTP/11" 200 None
2024-10-30 05:27:18,238 - INFO - Response status: 200
Response headers:
    'Cache-Control': 'no-store, no-cache'
    'Pragma': 'no-cache'
    'Transfer-Encoding': 'chunked'
    'Content-Type': 'application/json'
    'Server': 'Microsoft-HTTPAPI/2.0'
    'Strict-Transport-Security': 'REDACTED'
    'x-ms-activity-id': 'REDACTED'
    'x-ms-last-state-change-utc': 'REDACTED'
    'x-ms-resource-quota': 'REDACTED'
    'x-ms-resource-usage': 'REDACTED'
    'x-ms-schemaversion': 'REDACTED'
    'lsn': 'REDACTED'
    'x-ms-item-count': 'REDACTED'
    'x-ms-request-charge': 'REDACTED'
    'x-ms-alt-content-path': 'REDACTED'
    'x-ms-content-path': 'REDACTED'
    'x-ms-documentdb-partitionkeyrangeid': 'REDACTED'
    'x-ms-xp-role': 'REDACTED'
    'x-ms-cosmos-query-execution-info': 'REDACTED'
    'x-ms-global-Committed-lsn': 'REDACTED'
    'x-ms-number-of-read-regions': 'REDACTED'
    'x-ms-transport-request-id': 'REDACTED'
    'x-ms-cosmos-llsn': 'REDACTED'
    'x-ms-session-token': 'REDACTED'
    'x-ms-request-duration-ms': 'REDACTED'
    'x-ms-serviceversion': 'REDACTED'
    'x-ms-cosmos-is-partition-key-delete-pending': 'REDACTED'
    'x-ms-cosmos-physical-partition-id': 'REDACTED'
    'x-ms-cosmos-internal-partition-id': 'REDACTED'
    'x-ms-gatewayversion': 'REDACTED'
    'Date': 'Wed, 30 Oct 2024 10:27:18 GMT'
2024-10-30 05:27:18,238 - INFO - Found image post: 1gbi6rb with URL: https://i.redd.it/uzwse73yvswd1.jpeg
2024-10-30 05:27:18,239 - DEBUG - Starting new HTTPS connection (1): i.redd.it:443
2024-10-30 05:27:18,438 - INFO - Successfully downloaded media to downloads/videos/1gelyz1_20241030_052717_ba5c8ead.mp4
2024-10-30 05:27:18,439 - DEBUG - Using selector: KqueueSelector
2024-10-30 05:27:18,440 - DEBUG - https://i.redd.it:443 "GET /uzwse73yvswd1.jpeg HTTP/11" 200 2371964
2024-10-30 05:27:18,440 - INFO - Attempting to send video to Telegram - Path: downloads/videos/1gelyz1_20241030_052717_ba5c8ead.mp4
2024-10-30 05:27:18,441 - DEBUG - load_ssl_context verify=True cert=None trust_env=True http2=False
2024-10-30 05:27:18,441 - DEBUG - load_verify_locations cafile='/Users/joewilson/PythonProjects/Snoogram/venv/lib/python3.12/site-packages/certifi/cacert.pem'
2024-10-30 05:27:18,450 - DEBUG - load_ssl_context verify=True cert=None trust_env=True http2=False
2024-10-30 05:27:18,450 - DEBUG - load_verify_locations cafile='/Users/joewilson/PythonProjects/Snoogram/venv/lib/python3.12/site-packages/certifi/cacert.pem'
2024-10-30 05:27:18,459 - DEBUG - Entering: get_me
2024-10-30 05:27:18,460 - DEBUG - connect_tcp.started host='api.telegram.org' port=443 local_address=None timeout=5.0 socket_options=None
2024-10-30 05:27:18,544 - INFO - Successfully downloaded media to downloads/pics/1gbi6rb_20241030_052718_75043492.jpeg
2024-10-30 05:27:18,546 - DEBUG - Using selector: KqueueSelector
2024-10-30 05:27:18,546 - INFO - Attempting to send photo to Telegram - Path: downloads/pics/1gbi6rb_20241030_052718_75043492.jpeg
2024-10-30 05:27:18,546 - DEBUG - Entering: get_me
2024-10-30 05:27:18,547 - DEBUG - connect_tcp.started host='api.telegram.org' port=443 local_address=None timeout=5.0 socket_options=None
2024-10-30 05:27:18,602 - DEBUG - connect_tcp.complete return_value=<httpcore._backends.anyio.AnyIOStream object at 0x108eaede0>
2024-10-30 05:27:18,602 - DEBUG - start_tls.started ssl_context=<ssl.SSLContext object at 0x108ed7950> server_hostname='api.telegram.org' timeout=5.0
2024-10-30 05:27:18,669 - DEBUG - connect_tcp.complete return_value=<httpcore._backends.anyio.AnyIOStream object at 0x108dd2540>
2024-10-30 05:27:18,669 - DEBUG - start_tls.started ssl_context=<ssl.SSLContext object at 0x108ed7950> server_hostname='api.telegram.org' timeout=5.0
2024-10-30 05:27:18,730 - DEBUG - start_tls.complete return_value=<httpcore._backends.anyio.AnyIOStream object at 0x108f37740>
2024-10-30 05:27:18,731 - DEBUG - send_request_headers.started request=<Request [b'POST']>
2024-10-30 05:27:18,731 - DEBUG - send_request_headers.complete
2024-10-30 05:27:18,731 - DEBUG - send_request_body.started request=<Request [b'POST']>
2024-10-30 05:27:18,731 - DEBUG - send_request_body.complete
2024-10-30 05:27:18,731 - DEBUG - receive_response_headers.started request=<Request [b'POST']>
2024-10-30 05:27:18,803 - DEBUG - start_tls.complete return_value=<httpcore._backends.anyio.AnyIOStream object at 0x108e639e0>
2024-10-30 05:27:18,804 - DEBUG - send_request_headers.started request=<Request [b'POST']>
2024-10-30 05:27:18,804 - DEBUG - send_request_headers.complete
2024-10-30 05:27:18,804 - DEBUG - send_request_body.started request=<Request [b'POST']>
2024-10-30 05:27:18,804 - DEBUG - send_request_body.complete
2024-10-30 05:27:18,804 - DEBUG - receive_response_headers.started request=<Request [b'POST']>
2024-10-30 05:27:18,849 - DEBUG - receive_response_headers.complete return_value=(b'HTTP/1.1', 200, b'OK', [(b'Server', b'nginx/1.18.0'), (b'Date', b'Wed, 30 Oct 2024 10:27:18 GMT'), (b'Content-Type', b'application/json'), (b'Content-Length', b'254'), (b'Connection', b'keep-alive'), (b'Strict-Transport-Security', b'max-age=31536000; includeSubDomains; preload'), (b'Access-Control-Allow-Origin', b'*'), (b'Access-Control-Allow-Methods', b'GET, POST, OPTIONS'), (b'Access-Control-Expose-Headers', b'Content-Length,Content-Type,Date,Server,Connection')])
2024-10-30 05:27:18,849 - INFO - HTTP Request: POST https://api.telegram.org/bot7867694458:AAEFLZjWPyd1p640mHENnBt479WRYfSavWg/getMe "HTTP/1.1 200 OK"
2024-10-30 05:27:18,849 - DEBUG - receive_response_body.started request=<Request [b'POST']>
2024-10-30 05:27:18,849 - DEBUG - receive_response_body.complete
2024-10-30 05:27:18,849 - DEBUG - response_closed.started
2024-10-30 05:27:18,850 - DEBUG - response_closed.complete
2024-10-30 05:27:18,850 - DEBUG - User(api_kwargs={'can_connect_to_business': False, 'has_main_web_app': False}, can_join_groups=True, can_read_all_group_messages=False, first_name='RedditBot', id=7867694458, is_bot=True, supports_inline_queries=False, username='RedditImage_bot')
2024-10-30 05:27:18,850 - DEBUG - Exiting: get_me
2024-10-30 05:27:18,850 - DEBUG - This Bot is already initialized.
2024-10-30 05:27:18,851 - DEBUG - Entering: send_video
2024-10-30 05:27:18,870 - DEBUG - send_request_headers.started request=<Request [b'POST']>
2024-10-30 05:27:18,872 - DEBUG - send_request_headers.complete
2024-10-30 05:27:18,872 - DEBUG - send_request_body.started request=<Request [b'POST']>
2024-10-30 05:27:18,928 - DEBUG - receive_response_headers.complete return_value=(b'HTTP/1.1', 200, b'OK', [(b'Server', b'nginx/1.18.0'), (b'Date', b'Wed, 30 Oct 2024 10:27:18 GMT'), (b'Content-Type', b'application/json'), (b'Content-Length', b'254'), (b'Connection', b'keep-alive'), (b'Strict-Transport-Security', b'max-age=31536000; includeSubDomains; preload'), (b'Access-Control-Allow-Origin', b'*'), (b'Access-Control-Allow-Methods', b'GET, POST, OPTIONS'), (b'Access-Control-Expose-Headers', b'Content-Length,Content-Type,Date,Server,Connection')])
2024-10-30 05:27:18,928 - INFO - HTTP Request: POST https://api.telegram.org/bot7867694458:AAEFLZjWPyd1p640mHENnBt479WRYfSavWg/getMe "HTTP/1.1 200 OK"
2024-10-30 05:27:18,928 - DEBUG - receive_response_body.started request=<Request [b'POST']>
2024-10-30 05:27:18,928 - DEBUG - receive_response_body.complete
2024-10-30 05:27:18,928 - DEBUG - response_closed.started
2024-10-30 05:27:18,928 - DEBUG - response_closed.complete
2024-10-30 05:27:18,928 - DEBUG - User(api_kwargs={'can_connect_to_business': False, 'has_main_web_app': False}, can_join_groups=True, can_read_all_group_messages=False, first_name='RedditBot', id=7867694458, is_bot=True, supports_inline_queries=False, username='RedditImage_bot')
2024-10-30 05:27:18,929 - DEBUG - Exiting: get_me
2024-10-30 05:27:18,929 - DEBUG - This Updater is already initialized.
2024-10-30 05:27:18,929 - DEBUG - Entering: send_photo
2024-10-30 05:27:18,930 - DEBUG - send_request_headers.started request=<Request [b'POST']>
2024-10-30 05:27:18,931 - DEBUG - send_request_headers.complete
2024-10-30 05:27:18,931 - DEBUG - send_request_body.started request=<Request [b'POST']>
2024-10-30 05:27:19,799 - DEBUG - send_request_body.complete
2024-10-30 05:27:19,799 - DEBUG - receive_response_headers.started request=<Request [b'POST']>
2024-10-30 05:27:20,310 - DEBUG - receive_response_headers.complete return_value=(b'HTTP/1.1', 200, b'OK', [(b'Server', b'nginx/1.18.0'), (b'Date', b'Wed, 30 Oct 2024 10:27:20 GMT'), (b'Content-Type', b'application/json'), (b'Content-Length', b'1228'), (b'Connection', b'keep-alive'), (b'Strict-Transport-Security', b'max-age=31536000; includeSubDomains; preload'), (b'Access-Control-Allow-Origin', b'*'), (b'Access-Control-Allow-Methods', b'GET, POST, OPTIONS'), (b'Access-Control-Expose-Headers', b'Content-Length,Content-Type,Date,Server,Connection')])
2024-10-30 05:27:20,311 - INFO - HTTP Request: POST https://api.telegram.org/bot7867694458:AAEFLZjWPyd1p640mHENnBt479WRYfSavWg/sendPhoto "HTTP/1.1 200 OK"
2024-10-30 05:27:20,311 - DEBUG - receive_response_body.started request=<Request [b'POST']>
2024-10-30 05:27:20,311 - DEBUG - receive_response_body.complete
2024-10-30 05:27:20,311 - DEBUG - response_closed.started
2024-10-30 05:27:20,311 - DEBUG - response_closed.complete
2024-10-30 05:27:20,312 - DEBUG - Message(caption='From r/wifebutt: Thursday night wifebutt and football!\nUpvotes: 3,134', channel_chat_created=False, chat=Chat(id=-1002490380283, title='Reddit_Pic_Stream', type=<ChatType.CHANNEL>), date=datetime.datetime(2024, 10, 30, 10, 27, 20, tzinfo=<UTC>), delete_chat_photo=False, group_chat_created=False, message_id=245, photo=(PhotoSize(file_id='AgACAgEAAyEGAASUcC_7AAOaZyH6uC2oEw-KoZQHBhb5XwlLmlkAAkitMRsZEBFF-CyP8HyFv7gBAAMCAANzAAM2BA', file_size=1690, file_unique_id='AQADSK0xGxkQEUV4', height=90, width=62), PhotoSize(file_id='AgACAgEAAyEGAASUcC_7AAOaZyH6uC2oEw-KoZQHBhb5XwlLmlkAAkitMRsZEBFF-CyP8HyFv7gBAAMCAANtAAM2BA', file_size=23805, file_unique_id='AQADSK0xGxkQEUVy', height=320, width=221), PhotoSize(file_id='AgACAgEAAyEGAASUcC_7AAOaZyH6uC2oEw-KoZQHBhb5XwlLmlkAAkitMRsZEBFF-CyP8HyFv7gBAAMCAAN4AAM2BA', file_size=108880, file_unique_id='AQADSK0xGxkQEUV9', height=800, width=552), PhotoSize(file_id='AgACAgEAAyEGAASUcC_7AAOaZyH6uC2oEw-KoZQHBhb5XwlLmlkAAkitMRsZEBFF-CyP8HyFv7gBAAMCAAN5AAM2BA', file_size=243293, file_unique_id='AQADSK0xGxkQEUV-', height=1280, width=884), PhotoSize(file_id='AgACAgEAAyEGAASUcC_7AAOaZyH6uC2oEw-KoZQHBhb5XwlLmlkAAkitMRsZEBFF-CyP8HyFv7gBAAMCAAN3AAM2BA', file_size=762771, file_unique_id='AQADSK0xGxkQEUV8', height=2560, width=1768)), sender_chat=Chat(id=-1002490380283, title='Reddit_Pic_Stream', type=<ChatType.CHANNEL>), supergroup_chat_created=False)
2024-10-30 05:27:20,312 - DEBUG - Exiting: send_photo
2024-10-30 05:27:20,312 - DEBUG - close.started
2024-10-30 05:27:20,312 - DEBUG - close.complete
2024-10-30 05:27:20,312 - DEBUG - close.started
2024-10-30 05:27:20,313 - DEBUG - close.complete
2024-10-30 05:27:20,313 - DEBUG - This Bot is already shut down. Returning.
2024-10-30 05:27:20,313 - DEBUG - Shut down of Updater complete
2024-10-30 05:27:20,313 - INFO - Successfully sent photo to Telegram
2024-10-30 05:27:20,314 - ERROR - Error processing subreddit wifebutt: (sqlite3.OperationalError) attempt to write a readonly database
[SQL: INSERT INTO sent_post (post_id, subreddit_name, sent_at) VALUES (?, ?, ?)]
[parameters: ('1gbi6rb', 'wifebutt', '2024-10-30 10:27:20.314327')]
(Background on this error at: https://sqlalche.me/e/20/e3q8)
2024-10-30 05:27:20,316 - ERROR - Job "send_to_telegram (trigger: interval[0:01:00], next run at: 2024-10-30 05:28:16 CDT)" raised an exception
Traceback (most recent call last):
  File "/Users/joewilson/PythonProjects/Snoogram/venv/lib/python3.12/site-packages/sqlalchemy/engine/base.py", line 1967, in _exec_single_context
    self.dialect.do_execute(
  File "/Users/joewilson/PythonProjects/Snoogram/venv/lib/python3.12/site-packages/sqlalchemy/engine/default.py", line 941, in do_execute
    cursor.execute(statement, parameters)
sqlite3.OperationalError: attempt to write a readonly database

The above exception was the direct cause of the following exception:

Traceback (most recent call last):
  File "/Users/joewilson/PythonProjects/Snoogram/venv/lib/python3.12/site-packages/apscheduler/executors/base.py", line 125, in run_job
    retval = job.func(*job.args, **job.kwargs)
             ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/Users/joewilson/PythonProjects/Snoogram/backend/app.py", line 265, in send_to_telegram
    # Update last_check in Cosmos DB
                ^^^^^^^^^^^^^^^^^^^^^
  File "/Users/joewilson/PythonProjects/Snoogram/backend/db_operations.py", line 100, in add_sent_post
  File "/Users/joewilson/PythonProjects/Snoogram/venv/lib/python3.12/site-packages/sqlalchemy/orm/scoping.py", line 597, in commit
    return self._proxied.commit()
           ^^^^^^^^^^^^^^^^^^^^^^
  File "/Users/joewilson/PythonProjects/Snoogram/venv/lib/python3.12/site-packages/sqlalchemy/orm/session.py", line 2028, in commit
    trans.commit(_to_root=True)
  File "<string>", line 2, in commit
  File "/Users/joewilson/PythonProjects/Snoogram/venv/lib/python3.12/site-packages/sqlalchemy/orm/state_changes.py", line 139, in _go
    ret_value = fn(self, *arg, **kw)
                ^^^^^^^^^^^^^^^^^^^^
  File "/Users/joewilson/PythonProjects/Snoogram/venv/lib/python3.12/site-packages/sqlalchemy/orm/session.py", line 1313, in commit
    self._prepare_impl()
  File "<string>", line 2, in _prepare_impl
  File "/Users/joewilson/PythonProjects/Snoogram/venv/lib/python3.12/site-packages/sqlalchemy/orm/state_changes.py", line 139, in _go
    ret_value = fn(self, *arg, **kw)
                ^^^^^^^^^^^^^^^^^^^^
  File "/Users/joewilson/PythonProjects/Snoogram/venv/lib/python3.12/site-packages/sqlalchemy/orm/session.py", line 1288, in _prepare_impl
    self.session.flush()
  File "/Users/joewilson/PythonProjects/Snoogram/venv/lib/python3.12/site-packages/sqlalchemy/orm/session.py", line 4352, in flush
    self._flush(objects)
  File "/Users/joewilson/PythonProjects/Snoogram/venv/lib/python3.12/site-packages/sqlalchemy/orm/session.py", line 4487, in _flush
    with util.safe_reraise():
  File "/Users/joewilson/PythonProjects/Snoogram/venv/lib/python3.12/site-packages/sqlalchemy/util/langhelpers.py", line 146, in __exit__
    raise exc_value.with_traceback(exc_tb)
  File "/Users/joewilson/PythonProjects/Snoogram/venv/lib/python3.12/site-packages/sqlalchemy/orm/session.py", line 4448, in _flush
    flush_context.execute()
  File "/Users/joewilson/PythonProjects/Snoogram/venv/lib/python3.12/site-packages/sqlalchemy/orm/unitofwork.py", line 466, in execute
    rec.execute(self)
  File "/Users/joewilson/PythonProjects/Snoogram/venv/lib/python3.12/site-packages/sqlalchemy/orm/unitofwork.py", line 642, in execute
    util.preloaded.orm_persistence.save_obj(
  File "/Users/joewilson/PythonProjects/Snoogram/venv/lib/python3.12/site-packages/sqlalchemy/orm/persistence.py", line 93, in save_obj
    _emit_insert_statements(
  File "/Users/joewilson/PythonProjects/Snoogram/venv/lib/python3.12/site-packages/sqlalchemy/orm/persistence.py", line 1233, in _emit_insert_statements
    result = connection.execute(
             ^^^^^^^^^^^^^^^^^^^
  File "/Users/joewilson/PythonProjects/Snoogram/venv/lib/python3.12/site-packages/sqlalchemy/engine/base.py", line 1418, in execute
    return meth(
           ^^^^^
  File "/Users/joewilson/PythonProjects/Snoogram/venv/lib/python3.12/site-packages/sqlalchemy/sql/elements.py", line 515, in _execute_on_connection
    return connection._execute_clauseelement(
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/Users/joewilson/PythonProjects/Snoogram/venv/lib/python3.12/site-packages/sqlalchemy/engine/base.py", line 1640, in _execute_clauseelement
    ret = self._execute_context(
          ^^^^^^^^^^^^^^^^^^^^^^
  File "/Users/joewilson/PythonProjects/Snoogram/venv/lib/python3.12/site-packages/sqlalchemy/engine/base.py", line 1846, in _execute_context
    return self._exec_single_context(
           ^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/Users/joewilson/PythonProjects/Snoogram/venv/lib/python3.12/site-packages/sqlalchemy/engine/base.py", line 1986, in _exec_single_context
    self._handle_dbapi_exception(
  File "/Users/joewilson/PythonProjects/Snoogram/venv/lib/python3.12/site-packages/sqlalchemy/engine/base.py", line 2355, in _handle_dbapi_exception
    raise sqlalchemy_exception.with_traceback(exc_info[2]) from e
  File "/Users/joewilson/PythonProjects/Snoogram/venv/lib/python3.12/site-packages/sqlalchemy/engine/base.py", line 1967, in _exec_single_context
    self.dialect.do_execute(
  File "/Users/joewilson/PythonProjects/Snoogram/venv/lib/python3.12/site-packages/sqlalchemy/engine/default.py", line 941, in do_execute
    cursor.execute(statement, parameters)
sqlalchemy.exc.OperationalError: (sqlite3.OperationalError) attempt to write a readonly database
[SQL: INSERT INTO sent_post (post_id, subreddit_name, sent_at) VALUES (?, ?, ?)]
[parameters: ('1gbi6rb', 'wifebutt', '2024-10-30 10:27:20.314327')]
(Background on this error at: https://sqlalche.me/e/20/e3q8)
2024-10-30 05:27:38,879 - DEBUG - send_request_body.failed exception=WriteError(ClosedResourceError())
2024-10-30 05:27:38,880 - DEBUG - response_closed.started
2024-10-30 05:27:38,880 - DEBUG - response_closed.complete
2024-10-30 05:27:38,881 - DEBUG - This Application is already shut down. Returning.
2024-10-30 05:27:38,881 - ERROR - Failed to send video to Telegram: httpx.WriteError: 
2024-10-30 05:27:38,882 - ERROR - Error sending video post 1gelyz1: httpx.WriteError: 
2024-10-30 05:27:38,882 - INFO - Checking post: 1gejrnl - Score: 2584 - URL: https://v3.redgifs.com/watch/graydefensivepika
2024-10-30 05:27:38,888 - INFO - Request URL: 'https://cosmossnoogram-centralus.documents.azure.com:443/dbs/ToDoList/colls/sent_posts/docs/'
Request method: 'POST'
Request headers:
    'Cache-Control': 'no-cache'
    'x-ms-version': 'REDACTED'
    'x-ms-documentdb-query-iscontinuationexpected': 'REDACTED'
    'x-ms-consistency-level': 'REDACTED'
    'x-ms-documentdb-isquery': 'REDACTED'
    'Content-Type': 'application/query+json'
    'x-ms-session-token': 'REDACTED'
    'x-ms-documentdb-query-enablecrosspartition': 'REDACTED'
    'x-ms-date': 'REDACTED'
    'authorization': 'REDACTED'
    'Accept': 'application/json'
    'x-ms-cosmos-correlated-activityid': 'REDACTED'
    'Content-Length': '107'
    'User-Agent': 'azsdk-python-cosmos/4.5.1 Python/3.12.4 (macOS-15.0.1-arm64-arm-64bit)'
A body is sent with the request
2024-10-30 05:27:38,922 - DEBUG - https://cosmossnoogram-centralus.documents.azure.com:443 "POST /dbs/ToDoList/colls/sent_posts/docs/ HTTP/11" 200 None
2024-10-30 05:27:38,923 - INFO - Response status: 200
Response headers:
    'Cache-Control': 'no-store, no-cache'
    'Pragma': 'no-cache'
    'Transfer-Encoding': 'chunked'
    'Content-Type': 'application/json'
    'Server': 'Microsoft-HTTPAPI/2.0'
    'Strict-Transport-Security': 'REDACTED'
    'x-ms-activity-id': 'REDACTED'
    'x-ms-last-state-change-utc': 'REDACTED'
    'x-ms-resource-quota': 'REDACTED'
    'x-ms-resource-usage': 'REDACTED'
    'x-ms-schemaversion': 'REDACTED'
    'lsn': 'REDACTED'
    'x-ms-item-count': 'REDACTED'
    'x-ms-request-charge': 'REDACTED'
    'x-ms-alt-content-path': 'REDACTED'
    'x-ms-content-path': 'REDACTED'
    'x-ms-quorum-acked-lsn': 'REDACTED'
    'x-ms-current-write-quorum': 'REDACTED'
    'x-ms-current-replica-set-size': 'REDACTED'
    'x-ms-documentdb-partitionkeyrangeid': 'REDACTED'
    'x-ms-xp-role': 'REDACTED'
    'x-ms-cosmos-query-execution-info': 'REDACTED'
    'x-ms-global-Committed-lsn': 'REDACTED'
    'x-ms-number-of-read-regions': 'REDACTED'
    'x-ms-transport-request-id': 'REDACTED'
    'x-ms-cosmos-llsn': 'REDACTED'
    'x-ms-cosmos-quorum-acked-llsn': 'REDACTED'
    'x-ms-session-token': 'REDACTED'
    'x-ms-request-duration-ms': 'REDACTED'
    'x-ms-serviceversion': 'REDACTED'
    'x-ms-cosmos-is-partition-key-delete-pending': 'REDACTED'
    'x-ms-cosmos-physical-partition-id': 'REDACTED'
    'x-ms-cosmos-internal-partition-id': 'REDACTED'
    'x-ms-gatewayversion': 'REDACTED'
    'Date': 'Wed, 30 Oct 2024 10:27:38 GMT'
2024-10-30 05:27:38,923 - INFO - Post 1gejrnl is a duplicate, skipping
2024-10-30 05:27:38,923 - INFO - Checking post: 1gelw33 - Score: 2307 - URL: https://www.redgifs.com/watch/drydarkgraysable
2024-10-30 05:27:38,923 - INFO - Post 1gelw33 is a duplicate, skipping
2024-10-30 05:27:38,923 - INFO - Checking post: 1gevvp0 - Score: 1192 - URL: https://www.redgifs.com/watch/medicalplumhen
2024-10-30 05:27:38,924 - INFO - Post 1gevvp0 is a duplicate, skipping
2024-10-30 05:27:38,924 - INFO - Checking post: 1gesoj7 - Score: 749 - URL: https://www.redgifs.com/watch/lightgreytrickydragonfly
2024-10-30 05:27:38,924 - INFO - Post 1gesoj7 is a duplicate, skipping
2024-10-30 05:27:38,924 - INFO - Checking post: 1geuuqp - Score: 446 - URL: https://www.redgifs.com/watch/cheerfulbeigebagworm
2024-10-30 05:27:38,924 - INFO - Post 1geuuqp is a duplicate, skipping
2024-10-30 05:27:38,924 - INFO - Checking post: 1geakrb - Score: 397 - URL: https://www.redgifs.com/watch/illinformedthickgalapagoshawk
2024-10-30 05:27:38,924 - INFO - Post 1geakrb is a duplicate, skipping
2024-10-30 05:27:38,924 - INFO - Checking post: 1gerubz - Score: 365 - URL: https://v3.redgifs.com/watch/trickysquarepseudodynerusquadrisectus
2024-10-30 05:27:38,925 - INFO - Post 1gerubz is a duplicate, skipping
2024-10-30 05:27:38,925 - INFO - Checking post: 1getxhl - Score: 339 - URL: https://www.redgifs.com/watch/purpledemandingboaconstrictor
2024-10-30 05:27:38,925 - INFO - Post 1getxhl is a duplicate, skipping
2024-10-30 05:27:38,925 - INFO - Checking post: 1ge9gol - Score: 273 - URL: https://v3.redgifs.com/watch/circulardeeppinkamericanbulldog
2024-10-30 05:27:38,925 - INFO - Request URL: 'https://cosmossnoogram-centralus.documents.azure.com:443/dbs/ToDoList/colls/sent_posts/docs/'
Request method: 'POST'
Request headers:
    'Cache-Control': 'no-cache'
    'x-ms-version': 'REDACTED'
    'x-ms-documentdb-query-iscontinuationexpected': 'REDACTED'
    'x-ms-consistency-level': 'REDACTED'
    'x-ms-documentdb-isquery': 'REDACTED'
    'Content-Type': 'application/query+json'
    'x-ms-session-token': 'REDACTED'
    'x-ms-documentdb-query-enablecrosspartition': 'REDACTED'
    'x-ms-date': 'REDACTED'
    'authorization': 'REDACTED'
    'Accept': 'application/json'
    'x-ms-cosmos-correlated-activityid': 'REDACTED'
    'Content-Length': '107'
    'User-Agent': 'azsdk-python-cosmos/4.5.1 Python/3.12.4 (macOS-15.0.1-arm64-arm-64bit)'
A body is sent with the request
2024-10-30 05:27:38,961 - DEBUG - https://cosmossnoogram-centralus.documents.azure.com:443 "POST /dbs/ToDoList/colls/sent_posts/docs/ HTTP/11" 200 None
2024-10-30 05:27:38,961 - INFO - Response status: 200
Response headers:
    'Cache-Control': 'no-store, no-cache'
    'Pragma': 'no-cache'
    'Transfer-Encoding': 'chunked'
    'Content-Type': 'application/json'
    'Server': 'Microsoft-HTTPAPI/2.0'
    'Strict-Transport-Security': 'REDACTED'
    'x-ms-activity-id': 'REDACTED'
    'x-ms-last-state-change-utc': 'REDACTED'
    'x-ms-resource-quota': 'REDACTED'
    'x-ms-resource-usage': 'REDACTED'
    'x-ms-schemaversion': 'REDACTED'
    'lsn': 'REDACTED'
    'x-ms-item-count': 'REDACTED'
    'x-ms-request-charge': 'REDACTED'
    'x-ms-alt-content-path': 'REDACTED'
    'x-ms-content-path': 'REDACTED'
    'x-ms-documentdb-partitionkeyrangeid': 'REDACTED'
    'x-ms-xp-role': 'REDACTED'
    'x-ms-cosmos-query-execution-info': 'REDACTED'
    'x-ms-global-Committed-lsn': 'REDACTED'
    'x-ms-number-of-read-regions': 'REDACTED'
    'x-ms-transport-request-id': 'REDACTED'
    'x-ms-cosmos-llsn': 'REDACTED'
    'x-ms-session-token': 'REDACTED'
    'x-ms-request-duration-ms': 'REDACTED'
    'x-ms-serviceversion': 'REDACTED'
    'x-ms-cosmos-is-partition-key-delete-pending': 'REDACTED'
    'x-ms-cosmos-physical-partition-id': 'REDACTED'
    'x-ms-cosmos-internal-partition-id': 'REDACTED'
    'x-ms-gatewayversion': 'REDACTED'
    'Date': 'Wed, 30 Oct 2024 10:27:38 GMT'
2024-10-30 05:27:38,961 - INFO - Found video post: 1ge9gol
2024-10-30 05:27:38,962 - DEBUG - Starting new HTTPS connection (1): api.redgifs.com:443
2024-10-30 05:27:39,060 - DEBUG - https://api.redgifs.com:443 "GET /v2/gifs/circulardeeppinkamericanbulldog HTTP/11" 200 None
2024-10-30 05:27:39,063 - DEBUG - Starting new HTTPS connection (1): files.redgifs.com:443
2024-10-30 05:27:39,133 - DEBUG - https://files.redgifs.com:443 "GET /CircularDeeppinkAmericanbulldog.mp4 HTTP/11" 200 61415883
2024-10-30 05:27:40,210 - INFO - Successfully downloaded media to downloads/videos/1ge9gol_20241030_052739_fff8ab71.mp4
2024-10-30 05:27:40,212 - DEBUG - Using selector: KqueueSelector
2024-10-30 05:27:40,212 - INFO - Attempting to send video to Telegram - Path: downloads/videos/1ge9gol_20241030_052739_fff8ab71.mp4
2024-10-30 05:27:40,212 - DEBUG - load_ssl_context verify=True cert=None trust_env=True http2=False
2024-10-30 05:27:40,213 - DEBUG - load_verify_locations cafile='/Users/joewilson/PythonProjects/Snoogram/venv/lib/python3.12/site-packages/certifi/cacert.pem'
2024-10-30 05:27:40,219 - DEBUG - load_ssl_context verify=True cert=None trust_env=True http2=False
2024-10-30 05:27:40,220 - DEBUG - load_verify_locations cafile='/Users/joewilson/PythonProjects/Snoogram/venv/lib/python3.12/site-packages/certifi/cacert.pem'
2024-10-30 05:27:40,225 - DEBUG - Entering: get_me
2024-10-30 05:27:40,226 - DEBUG - connect_tcp.started host='api.telegram.org' port=443 local_address=None timeout=5.0 socket_options=None
2024-10-30 05:27:40,342 - DEBUG - connect_tcp.complete return_value=<httpcore._backends.anyio.AnyIOStream object at 0x108d9ccb0>
2024-10-30 05:27:40,343 - DEBUG - start_tls.started ssl_context=<ssl.SSLContext object at 0x108aff450> server_hostname='api.telegram.org' timeout=5.0
2024-10-30 05:27:40,473 - DEBUG - start_tls.complete return_value=<httpcore._backends.anyio.AnyIOStream object at 0x108d9f680>
2024-10-30 05:27:40,474 - DEBUG - send_request_headers.started request=<Request [b'POST']>
2024-10-30 05:27:40,474 - DEBUG - send_request_headers.complete
2024-10-30 05:27:40,474 - DEBUG - send_request_body.started request=<Request [b'POST']>
2024-10-30 05:27:40,474 - DEBUG - send_request_body.complete
2024-10-30 05:27:40,474 - DEBUG - receive_response_headers.started request=<Request [b'POST']>
2024-10-30 05:27:40,587 - DEBUG - receive_response_headers.complete return_value=(b'HTTP/1.1', 200, b'OK', [(b'Server', b'nginx/1.18.0'), (b'Date', b'Wed, 30 Oct 2024 10:27:40 GMT'), (b'Content-Type', b'application/json'), (b'Content-Length', b'254'), (b'Connection', b'keep-alive'), (b'Strict-Transport-Security', b'max-age=31536000; includeSubDomains; preload'), (b'Access-Control-Allow-Origin', b'*'), (b'Access-Control-Allow-Methods', b'GET, POST, OPTIONS'), (b'Access-Control-Expose-Headers', b'Content-Length,Content-Type,Date,Server,Connection')])
2024-10-30 05:27:40,587 - INFO - HTTP Request: POST https://api.telegram.org/bot7867694458:AAEFLZjWPyd1p640mHENnBt479WRYfSavWg/getMe "HTTP/1.1 200 OK"
2024-10-30 05:27:40,587 - DEBUG - receive_response_body.started request=<Request [b'POST']>
2024-10-30 05:27:40,587 - DEBUG - receive_response_body.complete
2024-10-30 05:27:40,587 - DEBUG - response_closed.started
2024-10-30 05:27:40,587 - DEBUG - response_closed.complete
2024-10-30 05:27:40,588 - DEBUG - User(api_kwargs={'can_connect_to_business': False, 'has_main_web_app': False}, can_join_groups=True, can_read_all_group_messages=False, first_name='RedditBot', id=7867694458, is_bot=True, supports_inline_queries=False, username='RedditImage_bot')
2024-10-30 05:27:40,588 - DEBUG - Exiting: get_me
2024-10-30 05:27:40,588 - DEBUG - This Bot is already initialized.
2024-10-30 05:27:40,588 - DEBUG - Entering: send_video
2024-10-30 05:27:40,607 - DEBUG - send_request_headers.started request=<Request [b'POST']>
2024-10-30 05:27:40,608 - DEBUG - send_request_headers.complete
2024-10-30 05:27:40,608 - DEBUG - send_request_body.started request=<Request [b'POST']>
2024-10-30 05:27:43,965 - DEBUG - send_request_body.complete
2024-10-30 05:27:43,966 - DEBUG - receive_response_headers.started request=<Request [b'POST']>
2024-10-30 05:27:43,966 - DEBUG - receive_response_headers.complete return_value=(b'HTTP/1.1', 413, b'Request Entity Too Large', [(b'Server', b'nginx/1.18.0'), (b'Date', b'Wed, 30 Oct 2024 10:27:40 GMT'), (b'Content-Type', b'application/json'), (b'Content-Length', b'70'), (b'Connection', b'close'), (b'Strict-Transport-Security', b'max-age=31536000; includeSubDomains; preload'), (b'Access-Control-Allow-Origin', b'*'), (b'Access-Control-Expose-Headers', b'Content-Length,Content-Type,Date,Server,Connection')])
2024-10-30 05:27:43,966 - INFO - HTTP Request: POST https://api.telegram.org/bot7867694458:AAEFLZjWPyd1p640mHENnBt479WRYfSavWg/sendVideo "HTTP/1.1 413 Request Entity Too Large"
2024-10-30 05:27:43,966 - DEBUG - receive_response_body.started request=<Request [b'POST']>
2024-10-30 05:27:43,966 - DEBUG - receive_response_body.complete
2024-10-30 05:27:43,966 - DEBUG - response_closed.started
2024-10-30 05:27:43,966 - DEBUG - response_closed.complete
2024-10-30 05:27:43,967 - DEBUG - This Bot is already shut down. Returning.
2024-10-30 05:27:43,967 - DEBUG - Shut down of Updater complete
2024-10-30 05:27:43,967 - ERROR - Failed to send video to Telegram: Request Entity Too Large (413)
2024-10-30 05:27:43,967 - ERROR - Error sending video post 1ge9gol: Request Entity Too Large (413)
2024-10-30 05:27:43,967 - INFO - Checking post: 1ge98kx - Score: 259 - URL: https://www.redgifs.com/watch/frontspecificspittlebug
2024-10-30 05:27:43,968 - INFO - Post 1ge98kx is a duplicate, skipping
2024-10-30 05:27:43,968 - INFO - Checking post: 1geqscs - Score: 238 - URL: https://www.redgifs.com/watch/previousweequeensnake
2024-10-30 05:27:43,968 - INFO - Request URL: 'https://cosmossnoogram-centralus.documents.azure.com:443/dbs/ToDoList/colls/sent_posts/docs/'
Request method: 'POST'
Request headers:
    'Cache-Control': 'no-cache'
    'x-ms-version': 'REDACTED'
    'x-ms-documentdb-query-iscontinuationexpected': 'REDACTED'
    'x-ms-consistency-level': 'REDACTED'
    'x-ms-documentdb-isquery': 'REDACTED'
    'Content-Type': 'application/query+json'
    'x-ms-session-token': 'REDACTED'
    'x-ms-documentdb-query-enablecrosspartition': 'REDACTED'
    'x-ms-date': 'REDACTED'
    'authorization': 'REDACTED'
    'Accept': 'application/json'
    'x-ms-cosmos-correlated-activityid': 'REDACTED'
    'Content-Length': '107'
    'User-Agent': 'azsdk-python-cosmos/4.5.1 Python/3.12.4 (macOS-15.0.1-arm64-arm-64bit)'
A body is sent with the request
2024-10-30 05:27:44,014 - DEBUG - https://cosmossnoogram-centralus.documents.azure.com:443 "POST /dbs/ToDoList/colls/sent_posts/docs/ HTTP/11" 200 None
2024-10-30 05:27:44,015 - INFO - Response status: 200
Response headers:
    'Cache-Control': 'no-store, no-cache'
    'Pragma': 'no-cache'
    'Transfer-Encoding': 'chunked'
    'Content-Type': 'application/json'
    'Server': 'Microsoft-HTTPAPI/2.0'
    'Strict-Transport-Security': 'REDACTED'
    'x-ms-activity-id': 'REDACTED'
    'x-ms-last-state-change-utc': 'REDACTED'
    'x-ms-resource-quota': 'REDACTED'
    'x-ms-resource-usage': 'REDACTED'
    'x-ms-schemaversion': 'REDACTED'
    'lsn': 'REDACTED'
    'x-ms-item-count': 'REDACTED'
    'x-ms-request-charge': 'REDACTED'
    'x-ms-alt-content-path': 'REDACTED'
    'x-ms-content-path': 'REDACTED'
    'x-ms-documentdb-partitionkeyrangeid': 'REDACTED'
    'x-ms-xp-role': 'REDACTED'
    'x-ms-cosmos-query-execution-info': 'REDACTED'
    'x-ms-global-Committed-lsn': 'REDACTED'
    'x-ms-number-of-read-regions': 'REDACTED'
    'x-ms-transport-request-id': 'REDACTED'
    'x-ms-cosmos-llsn': 'REDACTED'
    'x-ms-session-token': 'REDACTED'
    'x-ms-request-duration-ms': 'REDACTED'
    'x-ms-serviceversion': 'REDACTED'
    'x-ms-cosmos-is-partition-key-delete-pending': 'REDACTED'
    'x-ms-cosmos-physical-partition-id': 'REDACTED'
    'x-ms-cosmos-internal-partition-id': 'REDACTED'
    'x-ms-gatewayversion': 'REDACTED'
    'Date': 'Wed, 30 Oct 2024 10:27:43 GMT'
2024-10-30 05:27:44,015 - INFO - Found video post: 1geqscs
2024-10-30 05:27:44,016 - DEBUG - Starting new HTTPS connection (1): api.redgifs.com:443
2024-10-30 05:27:44,119 - DEBUG - https://api.redgifs.com:443 "GET /v2/gifs/previousweequeensnake HTTP/11" 200 None
2024-10-30 05:27:44,121 - DEBUG - Starting new HTTPS connection (1): files.redgifs.com:443
2024-10-30 05:27:44,178 - DEBUG - https://files.redgifs.com:443 "GET /PreviousWeeQueensnake.mp4 HTTP/11" 200 50070206
2024-10-30 05:27:45,201 - INFO - Successfully downloaded media to downloads/videos/1geqscs_20241030_052744_2fd81a4e.mp4
2024-10-30 05:27:45,202 - DEBUG - Using selector: KqueueSelector
2024-10-30 05:27:45,202 - INFO - Attempting to send video to Telegram - Path: downloads/videos/1geqscs_20241030_052744_2fd81a4e.mp4
2024-10-30 05:27:45,203 - DEBUG - load_ssl_context verify=True cert=None trust_env=True http2=False
2024-10-30 05:27:45,203 - DEBUG - load_verify_locations cafile='/Users/joewilson/PythonProjects/Snoogram/venv/lib/python3.12/site-packages/certifi/cacert.pem'
2024-10-30 05:27:45,210 - DEBUG - load_ssl_context verify=True cert=None trust_env=True http2=False
2024-10-30 05:27:45,210 - DEBUG - load_verify_locations cafile='/Users/joewilson/PythonProjects/Snoogram/venv/lib/python3.12/site-packages/certifi/cacert.pem'
2024-10-30 05:27:45,215 - DEBUG - Entering: get_me
2024-10-30 05:27:45,216 - DEBUG - connect_tcp.started host='api.telegram.org' port=443 local_address=None timeout=5.0 socket_options=None
2024-10-30 05:27:45,340 - DEBUG - connect_tcp.complete return_value=<httpcore._backends.anyio.AnyIOStream object at 0x108e608f0>
2024-10-30 05:27:45,340 - DEBUG - start_tls.started ssl_context=<ssl.SSLContext object at 0x108ac9bd0> server_hostname='api.telegram.org' timeout=5.0
2024-10-30 05:27:45,470 - DEBUG - start_tls.complete return_value=<httpcore._backends.anyio.AnyIOStream object at 0x108f367e0>
2024-10-30 05:27:45,470 - DEBUG - send_request_headers.started request=<Request [b'POST']>
2024-10-30 05:27:45,471 - DEBUG - send_request_headers.complete
2024-10-30 05:27:45,471 - DEBUG - send_request_body.started request=<Request [b'POST']>
2024-10-30 05:27:45,471 - DEBUG - send_request_body.complete
2024-10-30 05:27:45,471 - DEBUG - receive_response_headers.started request=<Request [b'POST']>
2024-10-30 05:27:45,644 - DEBUG - receive_response_headers.complete return_value=(b'HTTP/1.1', 200, b'OK', [(b'Server', b'nginx/1.18.0'), (b'Date', b'Wed, 30 Oct 2024 10:27:45 GMT'), (b'Content-Type', b'application/json'), (b'Content-Length', b'254'), (b'Connection', b'keep-alive'), (b'Strict-Transport-Security', b'max-age=31536000; includeSubDomains; preload'), (b'Access-Control-Allow-Origin', b'*'), (b'Access-Control-Allow-Methods', b'GET, POST, OPTIONS'), (b'Access-Control-Expose-Headers', b'Content-Length,Content-Type,Date,Server,Connection')])
2024-10-30 05:27:45,644 - INFO - HTTP Request: POST https://api.telegram.org/bot7867694458:AAEFLZjWPyd1p640mHENnBt479WRYfSavWg/getMe "HTTP/1.1 200 OK"
2024-10-30 05:27:45,644 - DEBUG - receive_response_body.started request=<Request [b'POST']>
2024-10-30 05:27:45,644 - DEBUG - receive_response_body.complete
2024-10-30 05:27:45,644 - DEBUG - response_closed.started
2024-10-30 05:27:45,644 - DEBUG - response_closed.complete
2024-10-30 05:27:45,644 - DEBUG - User(api_kwargs={'can_connect_to_business': False, 'has_main_web_app': False}, can_join_groups=True, can_read_all_group_messages=False, first_name='RedditBot', id=7867694458, is_bot=True, supports_inline_queries=False, username='RedditImage_bot')
2024-10-30 05:27:45,644 - DEBUG - Exiting: get_me
2024-10-30 05:27:45,644 - DEBUG - This Bot is already initialized.
2024-10-30 05:27:45,644 - DEBUG - Entering: send_video
2024-10-30 05:27:45,655 - DEBUG - send_request_headers.started request=<Request [b'POST']>
2024-10-30 05:27:45,655 - DEBUG - send_request_headers.complete
2024-10-30 05:27:45,655 - DEBUG - send_request_body.started request=<Request [b'POST']>
2024-10-30 05:27:48,561 - DEBUG - send_request_body.complete
2024-10-30 05:27:48,562 - DEBUG - receive_response_headers.started request=<Request [b'POST']>
2024-10-30 05:27:49,225 - INFO -  * Restarting with stat
2024-10-30 05:27:51,189 - DEBUG - receive_response_headers.complete return_value=(b'HTTP/1.1', 200, b'OK', [(b'Server', b'nginx/1.18.0'), (b'Date', b'Wed, 30 Oct 2024 10:27:51 GMT'), (b'Content-Type', b'application/json'), (b'Content-Length', b'598'), (b'Connection', b'keep-alive'), (b'Strict-Transport-Security', b'max-age=31536000; includeSubDomains; preload'), (b'Access-Control-Allow-Origin', b'*'), (b'Access-Control-Allow-Methods', b'GET, POST, OPTIONS'), (b'Access-Control-Expose-Headers', b'Content-Length,Content-Type,Date,Server,Connection')])
2024-10-30 05:27:51,189 - INFO - HTTP Request: POST https://api.telegram.org/bot7867694458:AAEFLZjWPyd1p640mHENnBt479WRYfSavWg/sendVideo "HTTP/1.1 200 OK"
2024-10-30 05:27:51,189 - DEBUG - receive_response_body.started request=<Request [b'POST']>
2024-10-30 05:27:51,190 - DEBUG - receive_response_body.complete
2024-10-30 05:27:51,190 - DEBUG - response_closed.started
2024-10-30 05:27:51,190 - DEBUG - response_closed.complete
2024-10-30 05:27:51,191 - DEBUG - Message(caption='From r/girlsfinishingthejob: I love when he covers my titties with his hot cum ðŸ¥°\nUpvotes: 238', channel_chat_created=False, chat=Chat(id=-1002490380283, title='Reddit_Pic_Stream', type=<ChatType.CHANNEL>), date=datetime.datetime(2024, 10, 30, 10, 27, 51, tzinfo=<UTC>), delete_chat_photo=False, group_chat_created=False, message_id=246, sender_chat=Chat(id=-1002490380283, title='Reddit_Pic_Stream', type=<ChatType.CHANNEL>), supergroup_chat_created=False, video=Video(duration=0, file_id='BAACAgEAAyEGAASUcC_7AAP2ZyIKJx76D_nYIpI-34kJHOfXKgADuAQAAhkQEUV5lHMSTxVCTDYE', file_name='1geqscs_20241030_052744_2fd81a4e.mp4', file_size=50070206, file_unique_id='AgADuAQAAhkQEUU', height=320, mime_type='video/mp4', width=320))
2024-10-30 05:27:51,191 - DEBUG - Exiting: send_video
2024-10-30 05:27:51,191 - DEBUG - close.started
2024-10-30 05:27:51,192 - DEBUG - close.complete
2024-10-30 05:27:51,192 - DEBUG - This Bot is already shut down. Returning.
2024-10-30 05:27:51,192 - DEBUG - Shut down of Updater complete
2024-10-30 05:27:51,192 - INFO - Successfully sent video to Telegram
2024-10-30 05:27:51,196 - ERROR - Error processing subreddit girlsfinishingthejob: (sqlite3.OperationalError) attempt to write a readonly database
[SQL: INSERT INTO sent_post (post_id, subreddit_name, sent_at) VALUES (?, ?, ?)]
[parameters: ('1geqscs', 'girlsfinishingthejob', '2024-10-30 10:27:51.195464')]
(Background on this error at: https://sqlalche.me/e/20/e3q8)
2024-10-30 05:27:51,198 - ERROR - Job "send_to_telegram (trigger: interval[0:01:00], next run at: 2024-10-30 05:28:16 CDT)" raised an exception
Traceback (most recent call last):
  File "/Users/joewilson/PythonProjects/Snoogram/venv/lib/python3.12/site-packages/sqlalchemy/engine/base.py", line 1967, in _exec_single_context
    self.dialect.do_execute(
  File "/Users/joewilson/PythonProjects/Snoogram/venv/lib/python3.12/site-packages/sqlalchemy/engine/default.py", line 941, in do_execute
    cursor.execute(statement, parameters)
sqlite3.OperationalError: attempt to write a readonly database

The above exception was the direct cause of the following exception:

Traceback (most recent call last):
  File "/Users/joewilson/PythonProjects/Snoogram/venv/lib/python3.12/site-packages/apscheduler/executors/base.py", line 125, in run_job
    retval = job.func(*job.args, **job.kwargs)
             ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/Users/joewilson/PythonProjects/Snoogram/backend/app.py", line 265, in send_to_telegram
    # Update last_check in Cosmos DB
                ^^^^^^^^^^^^^^^^^^^^^
  File "/Users/joewilson/PythonProjects/Snoogram/backend/db_operations.py", line 100, in add_sent_post
  File "/Users/joewilson/PythonProjects/Snoogram/venv/lib/python3.12/site-packages/sqlalchemy/orm/scoping.py", line 597, in commit
    return self._proxied.commit()
           ^^^^^^^^^^^^^^^^^^^^^^
  File "/Users/joewilson/PythonProjects/Snoogram/venv/lib/python3.12/site-packages/sqlalchemy/orm/session.py", line 2028, in commit
    trans.commit(_to_root=True)
  File "<string>", line 2, in commit
  File "/Users/joewilson/PythonProjects/Snoogram/venv/lib/python3.12/site-packages/sqlalchemy/orm/state_changes.py", line 139, in _go
    ret_value = fn(self, *arg, **kw)
                ^^^^^^^^^^^^^^^^^^^^
  File "/Users/joewilson/PythonProjects/Snoogram/venv/lib/python3.12/site-packages/sqlalchemy/orm/session.py", line 1313, in commit
    self._prepare_impl()
  File "<string>", line 2, in _prepare_impl
  File "/Users/joewilson/PythonProjects/Snoogram/venv/lib/python3.12/site-packages/sqlalchemy/orm/state_changes.py", line 139, in _go
    ret_value = fn(self, *arg, **kw)
                ^^^^^^^^^^^^^^^^^^^^
  File "/Users/joewilson/PythonProjects/Snoogram/venv/lib/python3.12/site-packages/sqlalchemy/orm/session.py", line 1288, in _prepare_impl
    self.session.flush()
  File "/Users/joewilson/PythonProjects/Snoogram/venv/lib/python3.12/site-packages/sqlalchemy/orm/session.py", line 4352, in flush
    self._flush(objects)
  File "/Users/joewilson/PythonProjects/Snoogram/venv/lib/python3.12/site-packages/sqlalchemy/orm/session.py", line 4487, in _flush
    with util.safe_reraise():
  File "/Users/joewilson/PythonProjects/Snoogram/venv/lib/python3.12/site-packages/sqlalchemy/util/langhelpers.py", line 146, in __exit__
    raise exc_value.with_traceback(exc_tb)
  File "/Users/joewilson/PythonProjects/Snoogram/venv/lib/python3.12/site-packages/sqlalchemy/orm/session.py", line 4448, in _flush
    flush_context.execute()
  File "/Users/joewilson/PythonProjects/Snoogram/venv/lib/python3.12/site-packages/sqlalchemy/orm/unitofwork.py", line 466, in execute
    rec.execute(self)
  File "/Users/joewilson/PythonProjects/Snoogram/venv/lib/python3.12/site-packages/sqlalchemy/orm/unitofwork.py", line 642, in execute
    util.preloaded.orm_persistence.save_obj(
  File "/Users/joewilson/PythonProjects/Snoogram/venv/lib/python3.12/site-packages/sqlalchemy/orm/persistence.py", line 93, in save_obj
    _emit_insert_statements(
  File "/Users/joewilson/PythonProjects/Snoogram/venv/lib/python3.12/site-packages/sqlalchemy/orm/persistence.py", line 1233, in _emit_insert_statements
    result = connection.execute(
             ^^^^^^^^^^^^^^^^^^^
  File "/Users/joewilson/PythonProjects/Snoogram/venv/lib/python3.12/site-packages/sqlalchemy/engine/base.py", line 1418, in execute
    return meth(
           ^^^^^
  File "/Users/joewilson/PythonProjects/Snoogram/venv/lib/python3.12/site-packages/sqlalchemy/sql/elements.py", line 515, in _execute_on_connection
    return connection._execute_clauseelement(
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/Users/joewilson/PythonProjects/Snoogram/venv/lib/python3.12/site-packages/sqlalchemy/engine/base.py", line 1640, in _execute_clauseelement
    ret = self._execute_context(
          ^^^^^^^^^^^^^^^^^^^^^^
  File "/Users/joewilson/PythonProjects/Snoogram/venv/lib/python3.12/site-packages/sqlalchemy/engine/base.py", line 1846, in _execute_context
    return self._exec_single_context(
           ^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/Users/joewilson/PythonProjects/Snoogram/venv/lib/python3.12/site-packages/sqlalchemy/engine/base.py", line 1986, in _exec_single_context
    self._handle_dbapi_exception(
  File "/Users/joewilson/PythonProjects/Snoogram/venv/lib/python3.12/site-packages/sqlalchemy/engine/base.py", line 2355, in _handle_dbapi_exception
    raise sqlalchemy_exception.with_traceback(exc_info[2]) from e
  File "/Users/joewilson/PythonProjects/Snoogram/venv/lib/python3.12/site-packages/sqlalchemy/engine/base.py", line 1967, in _exec_single_context
    self.dialect.do_execute(
  File "/Users/joewilson/PythonProjects/Snoogram/venv/lib/python3.12/site-packages/sqlalchemy/engine/default.py", line 941, in do_execute
    cursor.execute(statement, parameters)
sqlalchemy.exc.OperationalError: (sqlite3.OperationalError) attempt to write a readonly database
[SQL: INSERT INTO sent_post (post_id, subreddit_name, sent_at) VALUES (?, ?, ?)]
[parameters: ('1geqscs', 'girlsfinishingthejob', '2024-10-30 10:27:51.195464')]
(Background on this error at: https://sqlalche.me/e/20/e3q8)
2024-10-30 05:28:16,976 - DEBUG - Looking for jobs to run
2024-10-30 05:28:16,977 - DEBUG - Next wakeup is due at 2024-10-30 05:29:16.969826-05:00 (in 59.992030 seconds)
2024-10-30 05:28:16,977 - INFO - Running job "send_to_telegram (trigger: interval[0:01:00], next run at: 2024-10-30 05:29:16 CDT)" (scheduled at 2024-10-30 05:28:16.969826-05:00)
2024-10-30 05:28:16,978 - INFO - Running job "send_to_telegram (trigger: interval[0:01:00], next run at: 2024-10-30 05:29:16 CDT)" (scheduled at 2024-10-30 05:28:16.970029-05:00)
2024-10-30 05:28:16,978 - INFO - Processing subreddit: girlsfinishingthejob
2024-10-30 05:28:16,978 - INFO - Processing subreddit: wifebutt
2024-10-30 05:28:16,979 - INFO - Fetching top posts of the day
2024-10-30 05:28:16,979 - INFO - Fetching top posts of the month
2024-10-30 05:28:16,980 - DEBUG - Fetching: GET https://oauth.reddit.com/r/girlsfinishingthejob/top at 1730284096.980036
2024-10-30 05:28:16,980 - DEBUG - Fetching: GET https://oauth.reddit.com/r/wifebutt/top at 1730284096.9803252
2024-10-30 05:28:16,980 - DEBUG - Data: None
2024-10-30 05:28:16,980 - DEBUG - Data: None
2024-10-30 05:28:16,980 - DEBUG - Params: {'limit': 50, 'raw_json': 1, 't': 'day'}
2024-10-30 05:28:16,980 - DEBUG - Params: {'limit': 50, 'raw_json': 1, 't': 'month'}
2024-10-30 05:28:17,323 - DEBUG - https://oauth.reddit.com:443 "GET /r/girlsfinishingthejob/top?t=day&limit=50&raw_json=1 HTTP/11" 200 24080
2024-10-30 05:28:17,325 - DEBUG - Response: 200 (24080 bytes) (rst-0:rem-148.0:used-2 ratelimit) at 1730284097.325001
2024-10-30 05:28:17,394 - INFO - Checking post: 1gelyz1 - Score: 7107 - URL: https://www.redgifs.com/watch/uttersvelteamphibian
2024-10-30 05:28:17,400 - INFO - Request URL: 'https://cosmossnoogram-centralus.documents.azure.com:443/dbs/ToDoList/colls/sent_posts/docs/'
Request method: 'POST'
Request headers:
    'Cache-Control': 'no-cache'
    'x-ms-version': 'REDACTED'
    'x-ms-documentdb-query-iscontinuationexpected': 'REDACTED'
    'x-ms-consistency-level': 'REDACTED'
    'x-ms-documentdb-isquery': 'REDACTED'
    'Content-Type': 'application/query+json'
    'x-ms-session-token': 'REDACTED'
    'x-ms-documentdb-query-enablecrosspartition': 'REDACTED'
    'x-ms-date': 'REDACTED'
    'authorization': 'REDACTED'
    'Accept': 'application/json'
    'x-ms-cosmos-correlated-activityid': 'REDACTED'
    'Content-Length': '107'
    'User-Agent': 'azsdk-python-cosmos/4.5.1 Python/3.12.4 (macOS-15.0.1-arm64-arm-64bit)'
A body is sent with the request
2024-10-30 05:28:17,430 - DEBUG - https://cosmossnoogram-centralus.documents.azure.com:443 "POST /dbs/ToDoList/colls/sent_posts/docs/ HTTP/11" 200 None
2024-10-30 05:28:17,431 - INFO - Response status: 200
Response headers:
    'Cache-Control': 'no-store, no-cache'
    'Pragma': 'no-cache'
    'Transfer-Encoding': 'chunked'
    'Content-Type': 'application/json'
    'Server': 'Microsoft-HTTPAPI/2.0'
    'Strict-Transport-Security': 'REDACTED'
    'x-ms-activity-id': 'REDACTED'
    'x-ms-last-state-change-utc': 'REDACTED'
    'x-ms-resource-quota': 'REDACTED'
    'x-ms-resource-usage': 'REDACTED'
    'x-ms-schemaversion': 'REDACTED'
    'lsn': 'REDACTED'
    'x-ms-item-count': 'REDACTED'
    'x-ms-request-charge': 'REDACTED'
    'x-ms-alt-content-path': 'REDACTED'
    'x-ms-content-path': 'REDACTED'
    'x-ms-documentdb-partitionkeyrangeid': 'REDACTED'
    'x-ms-xp-role': 'REDACTED'
    'x-ms-cosmos-query-execution-info': 'REDACTED'
    'x-ms-global-Committed-lsn': 'REDACTED'
    'x-ms-number-of-read-regions': 'REDACTED'
    'x-ms-transport-request-id': 'REDACTED'
    'x-ms-cosmos-llsn': 'REDACTED'
    'x-ms-session-token': 'REDACTED'
    'x-ms-request-duration-ms': 'REDACTED'
    'x-ms-serviceversion': 'REDACTED'
    'x-ms-cosmos-is-partition-key-delete-pending': 'REDACTED'
    'x-ms-cosmos-physical-partition-id': 'REDACTED'
    'x-ms-cosmos-internal-partition-id': 'REDACTED'
    'x-ms-gatewayversion': 'REDACTED'
    'Date': 'Wed, 30 Oct 2024 10:28:17 GMT'
2024-10-30 05:28:17,431 - INFO - Found video post: 1gelyz1
2024-10-30 05:28:17,432 - DEBUG - Starting new HTTPS connection (1): api.redgifs.com:443
2024-10-30 05:28:18,002 - DEBUG - https://api.redgifs.com:443 "GET /v2/gifs/uttersvelteamphibian HTTP/11" 200 None
2024-10-30 05:28:18,007 - DEBUG - Starting new HTTPS connection (1): files.redgifs.com:443
2024-10-30 05:28:18,102 - DEBUG - https://files.redgifs.com:443 "GET /UtterSvelteAmphibian.mp4 HTTP/11" 200 42980012
2024-10-30 05:28:18,247 - DEBUG - https://oauth.reddit.com:443 "GET /r/wifebutt/top?t=month&limit=50&raw_json=1 HTTP/11" 200 49229
2024-10-30 05:28:18,276 - DEBUG - Response: 200 (49229 bytes) (rst-0:rem-149.0:used-1 ratelimit) at 1730284098.276768
2024-10-30 05:28:18,282 - INFO - Checking post: 1g9w053 - Score: 5346 - URL: https://www.reddit.com/gallery/1g9w053
2024-10-30 05:28:18,284 - INFO - Request URL: 'https://cosmossnoogram-centralus.documents.azure.com:443/dbs/ToDoList/colls/sent_posts/docs/'
Request method: 'POST'
Request headers:
    'Cache-Control': 'no-cache'
    'x-ms-version': 'REDACTED'
    'x-ms-documentdb-query-iscontinuationexpected': 'REDACTED'
    'x-ms-consistency-level': 'REDACTED'
    'x-ms-documentdb-isquery': 'REDACTED'
    'Content-Type': 'application/query+json'
    'x-ms-session-token': 'REDACTED'
    'x-ms-documentdb-query-enablecrosspartition': 'REDACTED'
    'x-ms-date': 'REDACTED'
    'authorization': 'REDACTED'
    'Accept': 'application/json'
    'x-ms-cosmos-correlated-activityid': 'REDACTED'
    'Content-Length': '107'
    'User-Agent': 'azsdk-python-cosmos/4.5.1 Python/3.12.4 (macOS-15.0.1-arm64-arm-64bit)'
A body is sent with the request
2024-10-30 05:28:18,316 - DEBUG - https://cosmossnoogram-centralus.documents.azure.com:443 "POST /dbs/ToDoList/colls/sent_posts/docs/ HTTP/11" 200 None
2024-10-30 05:28:18,317 - INFO - Response status: 200
Response headers:
    'Cache-Control': 'no-store, no-cache'
    'Pragma': 'no-cache'
    'Transfer-Encoding': 'chunked'
    'Content-Type': 'application/json'
    'Server': 'Microsoft-HTTPAPI/2.0'
    'Strict-Transport-Security': 'REDACTED'
    'x-ms-activity-id': 'REDACTED'
    'x-ms-last-state-change-utc': 'REDACTED'
    'x-ms-resource-quota': 'REDACTED'
    'x-ms-resource-usage': 'REDACTED'
    'x-ms-schemaversion': 'REDACTED'
    'lsn': 'REDACTED'
    'x-ms-item-count': 'REDACTED'
    'x-ms-request-charge': 'REDACTED'
    'x-ms-alt-content-path': 'REDACTED'
    'x-ms-content-path': 'REDACTED'
    'x-ms-documentdb-partitionkeyrangeid': 'REDACTED'
    'x-ms-xp-role': 'REDACTED'
    'x-ms-cosmos-query-execution-info': 'REDACTED'
    'x-ms-global-Committed-lsn': 'REDACTED'
    'x-ms-number-of-read-regions': 'REDACTED'
    'x-ms-transport-request-id': 'REDACTED'
    'x-ms-cosmos-llsn': 'REDACTED'
    'x-ms-session-token': 'REDACTED'
    'x-ms-request-duration-ms': 'REDACTED'
    'x-ms-serviceversion': 'REDACTED'
    'x-ms-cosmos-is-partition-key-delete-pending': 'REDACTED'
    'x-ms-cosmos-physical-partition-id': 'REDACTED'
    'x-ms-cosmos-internal-partition-id': 'REDACTED'
    'x-ms-gatewayversion': 'REDACTED'
    'Date': 'Wed, 30 Oct 2024 10:28:18 GMT'
2024-10-30 05:28:18,317 - INFO - Post 1g9w053 is not an image or video post, skipping
2024-10-30 05:28:18,317 - INFO - Checking post: 1fv4cfc - Score: 4574 - URL: https://www.reddit.com/gallery/1fv4cfc
2024-10-30 05:28:18,318 - INFO - Request URL: 'https://cosmossnoogram-centralus.documents.azure.com:443/dbs/ToDoList/colls/sent_posts/docs/'
Request method: 'POST'
Request headers:
    'Cache-Control': 'no-cache'
    'x-ms-version': 'REDACTED'
    'x-ms-documentdb-query-iscontinuationexpected': 'REDACTED'
    'x-ms-consistency-level': 'REDACTED'
    'x-ms-documentdb-isquery': 'REDACTED'
    'Content-Type': 'application/query+json'
    'x-ms-session-token': 'REDACTED'
    'x-ms-documentdb-query-enablecrosspartition': 'REDACTED'
    'x-ms-date': 'REDACTED'
    'authorization': 'REDACTED'
    'Accept': 'application/json'
    'x-ms-cosmos-correlated-activityid': 'REDACTED'
    'Content-Length': '107'
    'User-Agent': 'azsdk-python-cosmos/4.5.1 Python/3.12.4 (macOS-15.0.1-arm64-arm-64bit)'
A body is sent with the request
2024-10-30 05:28:18,359 - DEBUG - https://cosmossnoogram-centralus.documents.azure.com:443 "POST /dbs/ToDoList/colls/sent_posts/docs/ HTTP/11" 200 None
2024-10-30 05:28:18,359 - INFO - Response status: 200
Response headers:
    'Cache-Control': 'no-store, no-cache'
    'Pragma': 'no-cache'
    'Transfer-Encoding': 'chunked'
    'Content-Type': 'application/json'
    'Server': 'Microsoft-HTTPAPI/2.0'
    'Strict-Transport-Security': 'REDACTED'
    'x-ms-activity-id': 'REDACTED'
    'x-ms-last-state-change-utc': 'REDACTED'
    'x-ms-resource-quota': 'REDACTED'
    'x-ms-resource-usage': 'REDACTED'
    'x-ms-schemaversion': 'REDACTED'
    'lsn': 'REDACTED'
    'x-ms-item-count': 'REDACTED'
    'x-ms-request-charge': 'REDACTED'
    'x-ms-alt-content-path': 'REDACTED'
    'x-ms-content-path': 'REDACTED'
    'x-ms-documentdb-partitionkeyrangeid': 'REDACTED'
    'x-ms-xp-role': 'REDACTED'
    'x-ms-cosmos-query-execution-info': 'REDACTED'
    'x-ms-global-Committed-lsn': 'REDACTED'
    'x-ms-number-of-read-regions': 'REDACTED'
    'x-ms-transport-request-id': 'REDACTED'
    'x-ms-cosmos-llsn': 'REDACTED'
    'x-ms-session-token': 'REDACTED'
    'x-ms-request-duration-ms': 'REDACTED'
    'x-ms-serviceversion': 'REDACTED'
    'x-ms-cosmos-is-partition-key-delete-pending': 'REDACTED'
    'x-ms-cosmos-physical-partition-id': 'REDACTED'
    'x-ms-cosmos-internal-partition-id': 'REDACTED'
    'x-ms-gatewayversion': 'REDACTED'
    'Date': 'Wed, 30 Oct 2024 10:28:18 GMT'
2024-10-30 05:28:18,359 - INFO - Post 1fv4cfc is not an image or video post, skipping
2024-10-30 05:28:18,359 - INFO - Checking post: 1ganrp0 - Score: 4211 - URL: https://i.redd.it/ezatz8645lwd1.jpeg
2024-10-30 05:28:18,360 - INFO - Request URL: 'https://cosmossnoogram-centralus.documents.azure.com:443/dbs/ToDoList/colls/sent_posts/docs/'
Request method: 'POST'
Request headers:
    'Cache-Control': 'no-cache'
    'x-ms-version': 'REDACTED'
    'x-ms-documentdb-query-iscontinuationexpected': 'REDACTED'
    'x-ms-consistency-level': 'REDACTED'
    'x-ms-documentdb-isquery': 'REDACTED'
    'Content-Type': 'application/query+json'
    'x-ms-session-token': 'REDACTED'
    'x-ms-documentdb-query-enablecrosspartition': 'REDACTED'
    'x-ms-date': 'REDACTED'
    'authorization': 'REDACTED'
    'Accept': 'application/json'
    'x-ms-cosmos-correlated-activityid': 'REDACTED'
    'Content-Length': '107'
    'User-Agent': 'azsdk-python-cosmos/4.5.1 Python/3.12.4 (macOS-15.0.1-arm64-arm-64bit)'
A body is sent with the request
2024-10-30 05:28:18,403 - DEBUG - https://cosmossnoogram-centralus.documents.azure.com:443 "POST /dbs/ToDoList/colls/sent_posts/docs/ HTTP/11" 200 None
2024-10-30 05:28:18,403 - INFO - Response status: 200
Response headers:
    'Cache-Control': 'no-store, no-cache'
    'Pragma': 'no-cache'
    'Transfer-Encoding': 'chunked'
    'Content-Type': 'application/json'
    'Server': 'Microsoft-HTTPAPI/2.0'
    'Strict-Transport-Security': 'REDACTED'
    'x-ms-activity-id': 'REDACTED'
    'x-ms-last-state-change-utc': 'REDACTED'
    'x-ms-resource-quota': 'REDACTED'
    'x-ms-resource-usage': 'REDACTED'
    'x-ms-schemaversion': 'REDACTED'
    'lsn': 'REDACTED'
    'x-ms-item-count': 'REDACTED'
    'x-ms-request-charge': 'REDACTED'
    'x-ms-alt-content-path': 'REDACTED'
    'x-ms-content-path': 'REDACTED'
    'x-ms-quorum-acked-lsn': 'REDACTED'
    'x-ms-current-write-quorum': 'REDACTED'
    'x-ms-current-replica-set-size': 'REDACTED'
    'x-ms-documentdb-partitionkeyrangeid': 'REDACTED'
    'x-ms-xp-role': 'REDACTED'
    'x-ms-cosmos-query-execution-info': 'REDACTED'
    'x-ms-global-Committed-lsn': 'REDACTED'
    'x-ms-number-of-read-regions': 'REDACTED'
    'x-ms-transport-request-id': 'REDACTED'
    'x-ms-cosmos-llsn': 'REDACTED'
    'x-ms-cosmos-quorum-acked-llsn': 'REDACTED'
    'x-ms-session-token': 'REDACTED'
    'x-ms-request-duration-ms': 'REDACTED'
    'x-ms-serviceversion': 'REDACTED'
    'x-ms-cosmos-is-partition-key-delete-pending': 'REDACTED'
    'x-ms-cosmos-physical-partition-id': 'REDACTED'
    'x-ms-cosmos-internal-partition-id': 'REDACTED'
    'x-ms-gatewayversion': 'REDACTED'
    'Date': 'Wed, 30 Oct 2024 10:28:18 GMT'
2024-10-30 05:28:18,404 - INFO - Post 1ganrp0 is a duplicate, skipping
2024-10-30 05:28:18,404 - INFO - Checking post: 1gdrcjt - Score: 4065 - URL: https://www.redgifs.com/watch/unrealisticdefinitebarebirdbat
2024-10-30 05:28:18,404 - INFO - Post 1gdrcjt is a duplicate, skipping
2024-10-30 05:28:18,405 - INFO - Checking post: 1g30sx1 - Score: 3968 - URL: https://www.redgifs.com/watch/hardwarlikesunbittern
2024-10-30 05:28:18,405 - INFO - Post 1g30sx1 is a duplicate, skipping
2024-10-30 05:28:18,405 - INFO - Checking post: 1fs7839 - Score: 3860 - URL: https://www.reddit.com/gallery/1fs7839
2024-10-30 05:28:18,406 - INFO - Request URL: 'https://cosmossnoogram-centralus.documents.azure.com:443/dbs/ToDoList/colls/sent_posts/docs/'
Request method: 'POST'
Request headers:
    'Cache-Control': 'no-cache'
    'x-ms-version': 'REDACTED'
    'x-ms-documentdb-query-iscontinuationexpected': 'REDACTED'
    'x-ms-consistency-level': 'REDACTED'
    'x-ms-documentdb-isquery': 'REDACTED'
    'Content-Type': 'application/query+json'
    'x-ms-session-token': 'REDACTED'
    'x-ms-documentdb-query-enablecrosspartition': 'REDACTED'
    'x-ms-date': 'REDACTED'
    'authorization': 'REDACTED'
    'Accept': 'application/json'
    'x-ms-cosmos-correlated-activityid': 'REDACTED'
    'Content-Length': '107'
    'User-Agent': 'azsdk-python-cosmos/4.5.1 Python/3.12.4 (macOS-15.0.1-arm64-arm-64bit)'
A body is sent with the request
2024-10-30 05:28:18,441 - DEBUG - https://cosmossnoogram-centralus.documents.azure.com:443 "POST /dbs/ToDoList/colls/sent_posts/docs/ HTTP/11" 200 None
2024-10-30 05:28:18,441 - INFO - Response status: 200
Response headers:
    'Cache-Control': 'no-store, no-cache'
    'Pragma': 'no-cache'
    'Transfer-Encoding': 'chunked'
    'Content-Type': 'application/json'
    'Server': 'Microsoft-HTTPAPI/2.0'
    'Strict-Transport-Security': 'REDACTED'
    'x-ms-activity-id': 'REDACTED'
    'x-ms-last-state-change-utc': 'REDACTED'
    'x-ms-resource-quota': 'REDACTED'
    'x-ms-resource-usage': 'REDACTED'
    'x-ms-schemaversion': 'REDACTED'
    'lsn': 'REDACTED'
    'x-ms-item-count': 'REDACTED'
    'x-ms-request-charge': 'REDACTED'
    'x-ms-alt-content-path': 'REDACTED'
    'x-ms-content-path': 'REDACTED'
    'x-ms-documentdb-partitionkeyrangeid': 'REDACTED'
    'x-ms-xp-role': 'REDACTED'
    'x-ms-cosmos-query-execution-info': 'REDACTED'
    'x-ms-global-Committed-lsn': 'REDACTED'
    'x-ms-number-of-read-regions': 'REDACTED'
    'x-ms-transport-request-id': 'REDACTED'
    'x-ms-cosmos-llsn': 'REDACTED'
    'x-ms-session-token': 'REDACTED'
    'x-ms-request-duration-ms': 'REDACTED'
    'x-ms-serviceversion': 'REDACTED'
    'x-ms-cosmos-is-partition-key-delete-pending': 'REDACTED'
    'x-ms-cosmos-physical-partition-id': 'REDACTED'
    'x-ms-cosmos-internal-partition-id': 'REDACTED'
    'x-ms-gatewayversion': 'REDACTED'
    'Date': 'Wed, 30 Oct 2024 10:28:18 GMT'
2024-10-30 05:28:18,442 - INFO - Post 1fs7839 is not an image or video post, skipping
2024-10-30 05:28:18,442 - INFO - Checking post: 1g2rse9 - Score: 3768 - URL: https://i.redd.it/gzxs1aeshjud1.png
2024-10-30 05:28:18,442 - INFO - Post 1g2rse9 is a duplicate, skipping
2024-10-30 05:28:18,442 - INFO - Checking post: 1ge9loz - Score: 3719 - URL: https://www.redgifs.com/watch/deadlygregariouswoodchuck
2024-10-30 05:28:18,443 - INFO - Post 1ge9loz is a duplicate, skipping
2024-10-30 05:28:18,443 - INFO - Checking post: 1g0e966 - Score: 3643 - URL: https://www.reddit.com/gallery/1g0e966
2024-10-30 05:28:18,443 - INFO - Request URL: 'https://cosmossnoogram-centralus.documents.azure.com:443/dbs/ToDoList/colls/sent_posts/docs/'
Request method: 'POST'
Request headers:
    'Cache-Control': 'no-cache'
    'x-ms-version': 'REDACTED'
    'x-ms-documentdb-query-iscontinuationexpected': 'REDACTED'
    'x-ms-consistency-level': 'REDACTED'
    'x-ms-documentdb-isquery': 'REDACTED'
    'Content-Type': 'application/query+json'
    'x-ms-session-token': 'REDACTED'
    'x-ms-documentdb-query-enablecrosspartition': 'REDACTED'
    'x-ms-date': 'REDACTED'
    'authorization': 'REDACTED'
    'Accept': 'application/json'
    'x-ms-cosmos-correlated-activityid': 'REDACTED'
    'Content-Length': '107'
    'User-Agent': 'azsdk-python-cosmos/4.5.1 Python/3.12.4 (macOS-15.0.1-arm64-arm-64bit)'
A body is sent with the request
2024-10-30 05:28:18,477 - DEBUG - https://cosmossnoogram-centralus.documents.azure.com:443 "POST /dbs/ToDoList/colls/sent_posts/docs/ HTTP/11" 200 None
2024-10-30 05:28:18,478 - INFO - Response status: 200
Response headers:
    'Cache-Control': 'no-store, no-cache'
    'Pragma': 'no-cache'
    'Transfer-Encoding': 'chunked'
    'Content-Type': 'application/json'
    'Server': 'Microsoft-HTTPAPI/2.0'
    'Strict-Transport-Security': 'REDACTED'
    'x-ms-activity-id': 'REDACTED'
    'x-ms-last-state-change-utc': 'REDACTED'
    'x-ms-resource-quota': 'REDACTED'
    'x-ms-resource-usage': 'REDACTED'
    'x-ms-schemaversion': 'REDACTED'
    'lsn': 'REDACTED'
    'x-ms-item-count': 'REDACTED'
    'x-ms-request-charge': 'REDACTED'
    'x-ms-alt-content-path': 'REDACTED'
    'x-ms-content-path': 'REDACTED'
    'x-ms-documentdb-partitionkeyrangeid': 'REDACTED'
    'x-ms-xp-role': 'REDACTED'
    'x-ms-cosmos-query-execution-info': 'REDACTED'
    'x-ms-global-Committed-lsn': 'REDACTED'
    'x-ms-number-of-read-regions': 'REDACTED'
    'x-ms-transport-request-id': 'REDACTED'
    'x-ms-cosmos-llsn': 'REDACTED'
    'x-ms-session-token': 'REDACTED'
    'x-ms-request-duration-ms': 'REDACTED'
    'x-ms-serviceversion': 'REDACTED'
    'x-ms-cosmos-is-partition-key-delete-pending': 'REDACTED'
    'x-ms-cosmos-physical-partition-id': 'REDACTED'
    'x-ms-cosmos-internal-partition-id': 'REDACTED'
    'x-ms-gatewayversion': 'REDACTED'
    'Date': 'Wed, 30 Oct 2024 10:28:18 GMT'
2024-10-30 05:28:18,478 - INFO - Post 1g0e966 is not an image or video post, skipping
2024-10-30 05:28:18,478 - INFO - Checking post: 1gckgcy - Score: 3397 - URL: https://i.redd.it/njd0mbyjl3xd1.jpeg
2024-10-30 05:28:18,478 - INFO - Post 1gckgcy is a duplicate, skipping
2024-10-30 05:28:18,478 - INFO - Checking post: 1fznoil - Score: 3335 - URL: https://i.redd.it/eruk3694dptd1.jpeg
2024-10-30 05:28:18,479 - INFO - Post 1fznoil is a duplicate, skipping
2024-10-30 05:28:18,479 - INFO - Checking post: 1g3dsj7 - Score: 3183 - URL: https://i.redd.it/cg9oigznmpud1.jpeg
2024-10-30 05:28:18,479 - INFO - Post 1g3dsj7 is a duplicate, skipping
2024-10-30 05:28:18,479 - INFO - Checking post: 1g4dx9i - Score: 3137 - URL: https://i.redd.it/5kv3c8f3lyud1.jpeg
2024-10-30 05:28:18,479 - INFO - Request URL: 'https://cosmossnoogram-centralus.documents.azure.com:443/dbs/ToDoList/colls/sent_posts/docs/'
Request method: 'POST'
Request headers:
    'Cache-Control': 'no-cache'
    'x-ms-version': 'REDACTED'
    'x-ms-documentdb-query-iscontinuationexpected': 'REDACTED'
    'x-ms-consistency-level': 'REDACTED'
    'x-ms-documentdb-isquery': 'REDACTED'
    'Content-Type': 'application/query+json'
    'x-ms-session-token': 'REDACTED'
    'x-ms-documentdb-query-enablecrosspartition': 'REDACTED'
    'x-ms-date': 'REDACTED'
    'authorization': 'REDACTED'
    'Accept': 'application/json'
    'x-ms-cosmos-correlated-activityid': 'REDACTED'
    'Content-Length': '107'
    'User-Agent': 'azsdk-python-cosmos/4.5.1 Python/3.12.4 (macOS-15.0.1-arm64-arm-64bit)'
A body is sent with the request
2024-10-30 05:28:18,515 - DEBUG - https://cosmossnoogram-centralus.documents.azure.com:443 "POST /dbs/ToDoList/colls/sent_posts/docs/ HTTP/11" 200 None
2024-10-30 05:28:18,516 - INFO - Response status: 200
Response headers:
    'Cache-Control': 'no-store, no-cache'
    'Pragma': 'no-cache'
    'Transfer-Encoding': 'chunked'
    'Content-Type': 'application/json'
    'Server': 'Microsoft-HTTPAPI/2.0'
    'Strict-Transport-Security': 'REDACTED'
    'x-ms-activity-id': 'REDACTED'
    'x-ms-last-state-change-utc': 'REDACTED'
    'x-ms-resource-quota': 'REDACTED'
    'x-ms-resource-usage': 'REDACTED'
    'x-ms-schemaversion': 'REDACTED'
    'lsn': 'REDACTED'
    'x-ms-item-count': 'REDACTED'
    'x-ms-request-charge': 'REDACTED'
    'x-ms-alt-content-path': 'REDACTED'
    'x-ms-content-path': 'REDACTED'
    'x-ms-documentdb-partitionkeyrangeid': 'REDACTED'
    'x-ms-xp-role': 'REDACTED'
    'x-ms-cosmos-query-execution-info': 'REDACTED'
    'x-ms-global-Committed-lsn': 'REDACTED'
    'x-ms-number-of-read-regions': 'REDACTED'
    'x-ms-transport-request-id': 'REDACTED'
    'x-ms-cosmos-llsn': 'REDACTED'
    'x-ms-session-token': 'REDACTED'
    'x-ms-request-duration-ms': 'REDACTED'
    'x-ms-serviceversion': 'REDACTED'
    'x-ms-cosmos-is-partition-key-delete-pending': 'REDACTED'
    'x-ms-cosmos-physical-partition-id': 'REDACTED'
    'x-ms-cosmos-internal-partition-id': 'REDACTED'
    'x-ms-gatewayversion': 'REDACTED'
    'Date': 'Wed, 30 Oct 2024 10:28:18 GMT'
2024-10-30 05:28:18,516 - INFO - Post 1g4dx9i is a duplicate, skipping
2024-10-30 05:28:18,516 - INFO - Checking post: 1ftaz41 - Score: 3131 - URL: https://i.redd.it/2meejva1g1sd1.jpeg
2024-10-30 05:28:18,517 - INFO - Request URL: 'https://cosmossnoogram-centralus.documents.azure.com:443/dbs/ToDoList/colls/sent_posts/docs/'
Request method: 'POST'
Request headers:
    'Cache-Control': 'no-cache'
    'x-ms-version': 'REDACTED'
    'x-ms-documentdb-query-iscontinuationexpected': 'REDACTED'
    'x-ms-consistency-level': 'REDACTED'
    'x-ms-documentdb-isquery': 'REDACTED'
    'Content-Type': 'application/query+json'
    'x-ms-session-token': 'REDACTED'
    'x-ms-documentdb-query-enablecrosspartition': 'REDACTED'
    'x-ms-date': 'REDACTED'
    'authorization': 'REDACTED'
    'Accept': 'application/json'
    'x-ms-cosmos-correlated-activityid': 'REDACTED'
    'Content-Length': '107'
    'User-Agent': 'azsdk-python-cosmos/4.5.1 Python/3.12.4 (macOS-15.0.1-arm64-arm-64bit)'
A body is sent with the request
2024-10-30 05:28:18,549 - DEBUG - https://cosmossnoogram-centralus.documents.azure.com:443 "POST /dbs/ToDoList/colls/sent_posts/docs/ HTTP/11" 200 None
2024-10-30 05:28:18,550 - INFO - Response status: 200
Response headers:
    'Cache-Control': 'no-store, no-cache'
    'Pragma': 'no-cache'
    'Transfer-Encoding': 'chunked'
    'Content-Type': 'application/json'
    'Server': 'Microsoft-HTTPAPI/2.0'
    'Strict-Transport-Security': 'REDACTED'
    'x-ms-activity-id': 'REDACTED'
    'x-ms-last-state-change-utc': 'REDACTED'
    'x-ms-resource-quota': 'REDACTED'
    'x-ms-resource-usage': 'REDACTED'
    'x-ms-schemaversion': 'REDACTED'
    'lsn': 'REDACTED'
    'x-ms-item-count': 'REDACTED'
    'x-ms-request-charge': 'REDACTED'
    'x-ms-alt-content-path': 'REDACTED'
    'x-ms-content-path': 'REDACTED'
    'x-ms-documentdb-partitionkeyrangeid': 'REDACTED'
    'x-ms-xp-role': 'REDACTED'
    'x-ms-cosmos-query-execution-info': 'REDACTED'
    'x-ms-global-Committed-lsn': 'REDACTED'
    'x-ms-number-of-read-regions': 'REDACTED'
    'x-ms-transport-request-id': 'REDACTED'
    'x-ms-cosmos-llsn': 'REDACTED'
    'x-ms-session-token': 'REDACTED'
    'x-ms-request-duration-ms': 'REDACTED'
    'x-ms-serviceversion': 'REDACTED'
    'x-ms-cosmos-is-partition-key-delete-pending': 'REDACTED'
    'x-ms-cosmos-physical-partition-id': 'REDACTED'
    'x-ms-cosmos-internal-partition-id': 'REDACTED'
    'x-ms-gatewayversion': 'REDACTED'
    'Date': 'Wed, 30 Oct 2024 10:28:18 GMT'
2024-10-30 05:28:18,550 - INFO - Found image post: 1ftaz41 with URL: https://i.redd.it/2meejva1g1sd1.jpeg
2024-10-30 05:28:18,551 - DEBUG - Starting new HTTPS connection (1): i.redd.it:443
2024-10-30 05:28:18,693 - DEBUG - https://i.redd.it:443 "GET /2meejva1g1sd1.jpeg HTTP/11" 200 1985406
2024-10-30 05:28:18,904 - INFO - Successfully downloaded media to downloads/pics/1ftaz41_20241030_052818_48b57fcf.jpeg
2024-10-30 05:28:18,906 - DEBUG - Using selector: KqueueSelector
2024-10-30 05:28:18,906 - INFO - Attempting to send photo to Telegram - Path: downloads/pics/1ftaz41_20241030_052818_48b57fcf.jpeg
2024-10-30 05:28:18,907 - DEBUG - load_ssl_context verify=True cert=None trust_env=True http2=False
2024-10-30 05:28:18,907 - DEBUG - load_verify_locations cafile='/Users/joewilson/PythonProjects/Snoogram/venv/lib/python3.12/site-packages/certifi/cacert.pem'
2024-10-30 05:28:18,916 - DEBUG - load_ssl_context verify=True cert=None trust_env=True http2=False
2024-10-30 05:28:18,917 - DEBUG - load_verify_locations cafile='/Users/joewilson/PythonProjects/Snoogram/venv/lib/python3.12/site-packages/certifi/cacert.pem'
2024-10-30 05:28:18,926 - DEBUG - Entering: get_me
2024-10-30 05:28:18,927 - DEBUG - connect_tcp.started host='api.telegram.org' port=443 local_address=None timeout=5.0 socket_options=None
2024-10-30 05:28:19,050 - DEBUG - connect_tcp.complete return_value=<httpcore._backends.anyio.AnyIOStream object at 0x108e61010>
2024-10-30 05:28:19,050 - DEBUG - start_tls.started ssl_context=<ssl.SSLContext object at 0x10aa46050> server_hostname='api.telegram.org' timeout=5.0
2024-10-30 05:28:19,195 - DEBUG - start_tls.complete return_value=<httpcore._backends.anyio.AnyIOStream object at 0x108a5cda0>
2024-10-30 05:28:19,195 - DEBUG - send_request_headers.started request=<Request [b'POST']>
2024-10-30 05:28:19,196 - DEBUG - send_request_headers.complete
2024-10-30 05:28:19,196 - DEBUG - send_request_body.started request=<Request [b'POST']>
2024-10-30 05:28:19,196 - DEBUG - send_request_body.complete
2024-10-30 05:28:19,196 - DEBUG - receive_response_headers.started request=<Request [b'POST']>
2024-10-30 05:28:19,317 - DEBUG - receive_response_headers.complete return_value=(b'HTTP/1.1', 200, b'OK', [(b'Server', b'nginx/1.18.0'), (b'Date', b'Wed, 30 Oct 2024 10:28:19 GMT'), (b'Content-Type', b'application/json'), (b'Content-Length', b'254'), (b'Connection', b'keep-alive'), (b'Strict-Transport-Security', b'max-age=31536000; includeSubDomains; preload'), (b'Access-Control-Allow-Origin', b'*'), (b'Access-Control-Allow-Methods', b'GET, POST, OPTIONS'), (b'Access-Control-Expose-Headers', b'Content-Length,Content-Type,Date,Server,Connection')])
2024-10-30 05:28:19,317 - INFO - HTTP Request: POST https://api.telegram.org/bot7867694458:AAEFLZjWPyd1p640mHENnBt479WRYfSavWg/getMe "HTTP/1.1 200 OK"
2024-10-30 05:28:19,317 - DEBUG - receive_response_body.started request=<Request [b'POST']>
2024-10-30 05:28:19,317 - DEBUG - receive_response_body.complete
2024-10-30 05:28:19,317 - DEBUG - response_closed.started
2024-10-30 05:28:19,318 - DEBUG - response_closed.complete
2024-10-30 05:28:19,318 - DEBUG - User(api_kwargs={'can_connect_to_business': False, 'has_main_web_app': False}, can_join_groups=True, can_read_all_group_messages=False, first_name='RedditBot', id=7867694458, is_bot=True, supports_inline_queries=False, username='RedditImage_bot')
2024-10-30 05:28:19,318 - DEBUG - Exiting: get_me
2024-10-30 05:28:19,318 - DEBUG - This Bot is already initialized.
2024-10-30 05:28:19,318 - DEBUG - Entering: send_photo
2024-10-30 05:28:19,320 - DEBUG - send_request_headers.started request=<Request [b'POST']>
2024-10-30 05:28:19,320 - DEBUG - send_request_headers.complete
2024-10-30 05:28:19,320 - DEBUG - send_request_body.started request=<Request [b'POST']>
2024-10-30 05:28:19,518 - INFO - Successfully downloaded media to downloads/videos/1gelyz1_20241030_052818_ba5c8ead.mp4
2024-10-30 05:28:19,519 - DEBUG - Using selector: KqueueSelector
2024-10-30 05:28:19,520 - INFO - Attempting to send video to Telegram - Path: downloads/videos/1gelyz1_20241030_052818_ba5c8ead.mp4
2024-10-30 05:28:19,520 - DEBUG - This Application is already initialized.
2024-10-30 05:28:19,520 - DEBUG - Entering: send_video
2024-10-30 05:28:19,541 - DEBUG - connect_tcp.started host='api.telegram.org' port=443 local_address=None timeout=5.0 socket_options=None
2024-10-30 05:28:19,667 - DEBUG - connect_tcp.complete return_value=<httpcore._backends.anyio.AnyIOStream object at 0x108d9fcb0>
2024-10-30 05:28:19,668 - DEBUG - start_tls.started ssl_context=<ssl.SSLContext object at 0x10aa46050> server_hostname='api.telegram.org' timeout=5.0
2024-10-30 05:28:19,801 - DEBUG - start_tls.complete return_value=<httpcore._backends.anyio.AnyIOStream object at 0x108d7bb90>
2024-10-30 05:28:19,801 - DEBUG - send_request_headers.started request=<Request [b'POST']>
2024-10-30 05:28:19,802 - DEBUG - send_request_headers.complete
2024-10-30 05:28:19,802 - DEBUG - send_request_body.started request=<Request [b'POST']>
2024-10-30 05:28:20,202 - DEBUG - send_request_body.complete
2024-10-30 05:28:20,202 - DEBUG - receive_response_headers.started request=<Request [b'POST']>
2024-10-30 05:28:20,594 - DEBUG - receive_response_headers.complete return_value=(b'HTTP/1.1', 200, b'OK', [(b'Server', b'nginx/1.18.0'), (b'Date', b'Wed, 30 Oct 2024 10:28:20 GMT'), (b'Content-Type', b'application/json'), (b'Content-Length', b'1274'), (b'Connection', b'keep-alive'), (b'Strict-Transport-Security', b'max-age=31536000; includeSubDomains; preload'), (b'Access-Control-Allow-Origin', b'*'), (b'Access-Control-Allow-Methods', b'GET, POST, OPTIONS'), (b'Access-Control-Expose-Headers', b'Content-Length,Content-Type,Date,Server,Connection')])
2024-10-30 05:28:20,594 - INFO - HTTP Request: POST https://api.telegram.org/bot7867694458:AAEFLZjWPyd1p640mHENnBt479WRYfSavWg/sendPhoto "HTTP/1.1 200 OK"
2024-10-30 05:28:20,594 - DEBUG - receive_response_body.started request=<Request [b'POST']>
2024-10-30 05:28:20,594 - DEBUG - receive_response_body.complete
2024-10-30 05:28:20,594 - DEBUG - response_closed.started
2024-10-30 05:28:20,594 - DEBUG - response_closed.complete
2024-10-30 05:28:20,595 - DEBUG - Message(caption='From r/wifebutt: My freshly showered wifebutt getting laundry done before hubby gets homeâ¤ï¸\nUpvotes: 3,131', channel_chat_created=False, chat=Chat(id=-1002490380283, title='Reddit_Pic_Stream', type=<ChatType.CHANNEL>), date=datetime.datetime(2024, 10, 30, 10, 28, 20, tzinfo=<UTC>), delete_chat_photo=False, group_chat_created=False, message_id=247, photo=(PhotoSize(file_id='AgACAgEAAyEGAASUcC_7AAOVZyH6fIsDbmatiKqYBM-ekhjWV94AAkatMRsZEBFFVdgzLssswhoBAAMCAANzAAM2BA', file_size=1559, file_unique_id='AQADRq0xGxkQEUV4', height=90, width=58), PhotoSize(file_id='AgACAgEAAyEGAASUcC_7AAOVZyH6fIsDbmatiKqYBM-ekhjWV94AAkatMRsZEBFFVdgzLssswhoBAAMCAANtAAM2BA', file_size=20620, file_unique_id='AQADRq0xGxkQEUVy', height=320, width=206), PhotoSize(file_id='AgACAgEAAyEGAASUcC_7AAOVZyH6fIsDbmatiKqYBM-ekhjWV94AAkatMRsZEBFFVdgzLssswhoBAAMCAAN4AAM2BA', file_size=93007, file_unique_id='AQADRq0xGxkQEUV9', height=800, width=516), PhotoSize(file_id='AgACAgEAAyEGAASUcC_7AAOVZyH6fIsDbmatiKqYBM-ekhjWV94AAkatMRsZEBFFVdgzLssswhoBAAMCAAN5AAM2BA', file_size=202595, file_unique_id='AQADRq0xGxkQEUV-', height=1280, width=826), PhotoSize(file_id='AgACAgEAAyEGAASUcC_7AAOVZyH6fIsDbmatiKqYBM-ekhjWV94AAkatMRsZEBFFVdgzLssswhoBAAMCAAN3AAM2BA', file_size=633586, file_unique_id='AQADRq0xGxkQEUV8', height=2560, width=1653)), sender_chat=Chat(id=-1002490380283, title='Reddit_Pic_Stream', type=<ChatType.CHANNEL>), supergroup_chat_created=False)
2024-10-30 05:28:20,595 - DEBUG - Exiting: send_photo
2024-10-30 05:28:20,596 - DEBUG - close.started
2024-10-30 05:28:20,596 - DEBUG - close.complete
2024-10-30 05:28:20,596 - DEBUG - close.started
2024-10-30 05:28:20,596 - DEBUG - close.complete
2024-10-30 05:28:20,596 - DEBUG - This Bot is already shut down. Returning.
2024-10-30 05:28:20,596 - DEBUG - Shut down of Updater complete
2024-10-30 05:28:20,596 - INFO - Successfully sent photo to Telegram
2024-10-30 05:28:20,598 - ERROR - Error processing subreddit wifebutt: (sqlite3.OperationalError) attempt to write a readonly database
[SQL: INSERT INTO sent_post (post_id, subreddit_name, sent_at) VALUES (?, ?, ?)]
[parameters: ('1ftaz41', 'wifebutt', '2024-10-30 10:28:20.598107')]
(Background on this error at: https://sqlalche.me/e/20/e3q8)
2024-10-30 05:28:20,600 - ERROR - Job "send_to_telegram (trigger: interval[0:01:00], next run at: 2024-10-30 05:29:16 CDT)" raised an exception
Traceback (most recent call last):
  File "/Users/joewilson/PythonProjects/Snoogram/venv/lib/python3.12/site-packages/sqlalchemy/engine/base.py", line 1967, in _exec_single_context
    self.dialect.do_execute(
  File "/Users/joewilson/PythonProjects/Snoogram/venv/lib/python3.12/site-packages/sqlalchemy/engine/default.py", line 941, in do_execute
    cursor.execute(statement, parameters)
sqlite3.OperationalError: attempt to write a readonly database

The above exception was the direct cause of the following exception:

Traceback (most recent call last):
  File "/Users/joewilson/PythonProjects/Snoogram/venv/lib/python3.12/site-packages/apscheduler/executors/base.py", line 125, in run_job
    retval = job.func(*job.args, **job.kwargs)
             ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/Users/joewilson/PythonProjects/Snoogram/backend/app.py", line 265, in send_to_telegram
    # Update last_check in Cosmos DB
                ^^^^^^^^^^^^^^^^^^^^^
  File "/Users/joewilson/PythonProjects/Snoogram/backend/db_operations.py", line 100, in add_sent_post
  File "/Users/joewilson/PythonProjects/Snoogram/venv/lib/python3.12/site-packages/sqlalchemy/orm/scoping.py", line 597, in commit
    return self._proxied.commit()
           ^^^^^^^^^^^^^^^^^^^^^^
  File "/Users/joewilson/PythonProjects/Snoogram/venv/lib/python3.12/site-packages/sqlalchemy/orm/session.py", line 2028, in commit
    trans.commit(_to_root=True)
  File "<string>", line 2, in commit
  File "/Users/joewilson/PythonProjects/Snoogram/venv/lib/python3.12/site-packages/sqlalchemy/orm/state_changes.py", line 139, in _go
    ret_value = fn(self, *arg, **kw)
                ^^^^^^^^^^^^^^^^^^^^
  File "/Users/joewilson/PythonProjects/Snoogram/venv/lib/python3.12/site-packages/sqlalchemy/orm/session.py", line 1313, in commit
    self._prepare_impl()
  File "<string>", line 2, in _prepare_impl
  File "/Users/joewilson/PythonProjects/Snoogram/venv/lib/python3.12/site-packages/sqlalchemy/orm/state_changes.py", line 139, in _go
    ret_value = fn(self, *arg, **kw)
                ^^^^^^^^^^^^^^^^^^^^
  File "/Users/joewilson/PythonProjects/Snoogram/venv/lib/python3.12/site-packages/sqlalchemy/orm/session.py", line 1288, in _prepare_impl
    self.session.flush()
  File "/Users/joewilson/PythonProjects/Snoogram/venv/lib/python3.12/site-packages/sqlalchemy/orm/session.py", line 4352, in flush
    self._flush(objects)
  File "/Users/joewilson/PythonProjects/Snoogram/venv/lib/python3.12/site-packages/sqlalchemy/orm/session.py", line 4487, in _flush
    with util.safe_reraise():
  File "/Users/joewilson/PythonProjects/Snoogram/venv/lib/python3.12/site-packages/sqlalchemy/util/langhelpers.py", line 146, in __exit__
    raise exc_value.with_traceback(exc_tb)
  File "/Users/joewilson/PythonProjects/Snoogram/venv/lib/python3.12/site-packages/sqlalchemy/orm/session.py", line 4448, in _flush
    flush_context.execute()
  File "/Users/joewilson/PythonProjects/Snoogram/venv/lib/python3.12/site-packages/sqlalchemy/orm/unitofwork.py", line 466, in execute
    rec.execute(self)
  File "/Users/joewilson/PythonProjects/Snoogram/venv/lib/python3.12/site-packages/sqlalchemy/orm/unitofwork.py", line 642, in execute
    util.preloaded.orm_persistence.save_obj(
  File "/Users/joewilson/PythonProjects/Snoogram/venv/lib/python3.12/site-packages/sqlalchemy/orm/persistence.py", line 93, in save_obj
    _emit_insert_statements(
  File "/Users/joewilson/PythonProjects/Snoogram/venv/lib/python3.12/site-packages/sqlalchemy/orm/persistence.py", line 1233, in _emit_insert_statements
    result = connection.execute(
             ^^^^^^^^^^^^^^^^^^^
  File "/Users/joewilson/PythonProjects/Snoogram/venv/lib/python3.12/site-packages/sqlalchemy/engine/base.py", line 1418, in execute
    return meth(
           ^^^^^
  File "/Users/joewilson/PythonProjects/Snoogram/venv/lib/python3.12/site-packages/sqlalchemy/sql/elements.py", line 515, in _execute_on_connection
    return connection._execute_clauseelement(
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/Users/joewilson/PythonProjects/Snoogram/venv/lib/python3.12/site-packages/sqlalchemy/engine/base.py", line 1640, in _execute_clauseelement
    ret = self._execute_context(
          ^^^^^^^^^^^^^^^^^^^^^^
  File "/Users/joewilson/PythonProjects/Snoogram/venv/lib/python3.12/site-packages/sqlalchemy/engine/base.py", line 1846, in _execute_context
    return self._exec_single_context(
           ^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/Users/joewilson/PythonProjects/Snoogram/venv/lib/python3.12/site-packages/sqlalchemy/engine/base.py", line 1986, in _exec_single_context
    self._handle_dbapi_exception(
  File "/Users/joewilson/PythonProjects/Snoogram/venv/lib/python3.12/site-packages/sqlalchemy/engine/base.py", line 2355, in _handle_dbapi_exception
    raise sqlalchemy_exception.with_traceback(exc_info[2]) from e
  File "/Users/joewilson/PythonProjects/Snoogram/venv/lib/python3.12/site-packages/sqlalchemy/engine/base.py", line 1967, in _exec_single_context
    self.dialect.do_execute(
  File "/Users/joewilson/PythonProjects/Snoogram/venv/lib/python3.12/site-packages/sqlalchemy/engine/default.py", line 941, in do_execute
    cursor.execute(statement, parameters)
sqlalchemy.exc.OperationalError: (sqlite3.OperationalError) attempt to write a readonly database
[SQL: INSERT INTO sent_post (post_id, subreddit_name, sent_at) VALUES (?, ?, ?)]
[parameters: ('1ftaz41', 'wifebutt', '2024-10-30 10:28:20.598107')]
(Background on this error at: https://sqlalche.me/e/20/e3q8)
2024-10-30 05:28:39,809 - DEBUG - send_request_body.failed exception=WriteError(ClosedResourceError())
2024-10-30 05:28:39,810 - DEBUG - response_closed.started
2024-10-30 05:28:39,811 - DEBUG - response_closed.complete
2024-10-30 05:28:39,811 - DEBUG - This Application is already shut down. Returning.
2024-10-30 05:28:39,811 - ERROR - Failed to send video to Telegram: httpx.WriteError: 
2024-10-30 05:28:39,813 - ERROR - Error sending video post 1gelyz1: httpx.WriteError: 
2024-10-30 05:28:39,813 - INFO - Checking post: 1gejrnl - Score: 2581 - URL: https://v3.redgifs.com/watch/graydefensivepika
2024-10-30 05:28:39,818 - INFO - Request URL: 'https://cosmossnoogram-centralus.documents.azure.com:443/dbs/ToDoList/colls/sent_posts/docs/'
Request method: 'POST'
Request headers:
    'Cache-Control': 'no-cache'
    'x-ms-version': 'REDACTED'
    'x-ms-documentdb-query-iscontinuationexpected': 'REDACTED'
    'x-ms-consistency-level': 'REDACTED'
    'x-ms-documentdb-isquery': 'REDACTED'
    'Content-Type': 'application/query+json'
    'x-ms-session-token': 'REDACTED'
    'x-ms-documentdb-query-enablecrosspartition': 'REDACTED'
    'x-ms-date': 'REDACTED'
    'authorization': 'REDACTED'
    'Accept': 'application/json'
    'x-ms-cosmos-correlated-activityid': 'REDACTED'
    'Content-Length': '107'
    'User-Agent': 'azsdk-python-cosmos/4.5.1 Python/3.12.4 (macOS-15.0.1-arm64-arm-64bit)'
A body is sent with the request
2024-10-30 05:28:39,854 - DEBUG - https://cosmossnoogram-centralus.documents.azure.com:443 "POST /dbs/ToDoList/colls/sent_posts/docs/ HTTP/11" 200 None
2024-10-30 05:28:39,854 - INFO - Response status: 200
Response headers:
    'Cache-Control': 'no-store, no-cache'
    'Pragma': 'no-cache'
    'Transfer-Encoding': 'chunked'
    'Content-Type': 'application/json'
    'Server': 'Microsoft-HTTPAPI/2.0'
    'Strict-Transport-Security': 'REDACTED'
    'x-ms-activity-id': 'REDACTED'
    'x-ms-last-state-change-utc': 'REDACTED'
    'x-ms-resource-quota': 'REDACTED'
    'x-ms-resource-usage': 'REDACTED'
    'x-ms-schemaversion': 'REDACTED'
    'lsn': 'REDACTED'
    'x-ms-item-count': 'REDACTED'
    'x-ms-request-charge': 'REDACTED'
    'x-ms-alt-content-path': 'REDACTED'
    'x-ms-content-path': 'REDACTED'
    'x-ms-documentdb-partitionkeyrangeid': 'REDACTED'
    'x-ms-xp-role': 'REDACTED'
    'x-ms-cosmos-query-execution-info': 'REDACTED'
    'x-ms-global-Committed-lsn': 'REDACTED'
    'x-ms-number-of-read-regions': 'REDACTED'
    'x-ms-transport-request-id': 'REDACTED'
    'x-ms-cosmos-llsn': 'REDACTED'
    'x-ms-session-token': 'REDACTED'
    'x-ms-request-duration-ms': 'REDACTED'
    'x-ms-serviceversion': 'REDACTED'
    'x-ms-cosmos-is-partition-key-delete-pending': 'REDACTED'
    'x-ms-cosmos-physical-partition-id': 'REDACTED'
    'x-ms-cosmos-internal-partition-id': 'REDACTED'
    'x-ms-gatewayversion': 'REDACTED'
    'Date': 'Wed, 30 Oct 2024 10:28:39 GMT'
2024-10-30 05:28:39,855 - INFO - Post 1gejrnl is a duplicate, skipping
2024-10-30 05:28:39,855 - INFO - Checking post: 1gelw33 - Score: 2306 - URL: https://www.redgifs.com/watch/drydarkgraysable
2024-10-30 05:28:39,855 - INFO - Post 1gelw33 is a duplicate, skipping
2024-10-30 05:28:39,855 - INFO - Checking post: 1gevvp0 - Score: 1192 - URL: https://www.redgifs.com/watch/medicalplumhen
2024-10-30 05:28:39,855 - INFO - Post 1gevvp0 is a duplicate, skipping
2024-10-30 05:28:39,856 - INFO - Checking post: 1gesoj7 - Score: 750 - URL: https://www.redgifs.com/watch/lightgreytrickydragonfly
2024-10-30 05:28:39,856 - INFO - Post 1gesoj7 is a duplicate, skipping
2024-10-30 05:28:39,856 - INFO - Checking post: 1geuuqp - Score: 441 - URL: https://www.redgifs.com/watch/cheerfulbeigebagworm
2024-10-30 05:28:39,856 - INFO - Post 1geuuqp is a duplicate, skipping
2024-10-30 05:28:39,856 - INFO - Checking post: 1geakrb - Score: 396 - URL: https://www.redgifs.com/watch/illinformedthickgalapagoshawk
2024-10-30 05:28:39,856 - INFO - Post 1geakrb is a duplicate, skipping
2024-10-30 05:28:39,856 - INFO - Checking post: 1gerubz - Score: 362 - URL: https://v3.redgifs.com/watch/trickysquarepseudodynerusquadrisectus
2024-10-30 05:28:39,856 - INFO - Post 1gerubz is a duplicate, skipping
2024-10-30 05:28:39,856 - INFO - Checking post: 1getxhl - Score: 334 - URL: https://www.redgifs.com/watch/purpledemandingboaconstrictor
2024-10-30 05:28:39,857 - INFO - Post 1getxhl is a duplicate, skipping
2024-10-30 05:28:39,857 - INFO - Checking post: 1ge9gol - Score: 280 - URL: https://v3.redgifs.com/watch/circulardeeppinkamericanbulldog
2024-10-30 05:28:39,857 - INFO - Request URL: 'https://cosmossnoogram-centralus.documents.azure.com:443/dbs/ToDoList/colls/sent_posts/docs/'
Request method: 'POST'
Request headers:
    'Cache-Control': 'no-cache'
    'x-ms-version': 'REDACTED'
    'x-ms-documentdb-query-iscontinuationexpected': 'REDACTED'
    'x-ms-consistency-level': 'REDACTED'
    'x-ms-documentdb-isquery': 'REDACTED'
    'Content-Type': 'application/query+json'
    'x-ms-session-token': 'REDACTED'
    'x-ms-documentdb-query-enablecrosspartition': 'REDACTED'
    'x-ms-date': 'REDACTED'
    'authorization': 'REDACTED'
    'Accept': 'application/json'
    'x-ms-cosmos-correlated-activityid': 'REDACTED'
    'Content-Length': '107'
    'User-Agent': 'azsdk-python-cosmos/4.5.1 Python/3.12.4 (macOS-15.0.1-arm64-arm-64bit)'
A body is sent with the request
2024-10-30 05:28:39,884 - DEBUG - https://cosmossnoogram-centralus.documents.azure.com:443 "POST /dbs/ToDoList/colls/sent_posts/docs/ HTTP/11" 200 None
2024-10-30 05:28:39,885 - INFO - Response status: 200
Response headers:
    'Cache-Control': 'no-store, no-cache'
    'Pragma': 'no-cache'
    'Transfer-Encoding': 'chunked'
    'Content-Type': 'application/json'
    'Server': 'Microsoft-HTTPAPI/2.0'
    'Strict-Transport-Security': 'REDACTED'
    'x-ms-activity-id': 'REDACTED'
    'x-ms-last-state-change-utc': 'REDACTED'
    'x-ms-resource-quota': 'REDACTED'
    'x-ms-resource-usage': 'REDACTED'
    'x-ms-schemaversion': 'REDACTED'
    'lsn': 'REDACTED'
    'x-ms-item-count': 'REDACTED'
    'x-ms-request-charge': 'REDACTED'
    'x-ms-alt-content-path': 'REDACTED'
    'x-ms-content-path': 'REDACTED'
    'x-ms-documentdb-partitionkeyrangeid': 'REDACTED'
    'x-ms-xp-role': 'REDACTED'
    'x-ms-cosmos-query-execution-info': 'REDACTED'
    'x-ms-global-Committed-lsn': 'REDACTED'
    'x-ms-number-of-read-regions': 'REDACTED'
    'x-ms-transport-request-id': 'REDACTED'
    'x-ms-cosmos-llsn': 'REDACTED'
    'x-ms-session-token': 'REDACTED'
    'x-ms-request-duration-ms': 'REDACTED'
    'x-ms-serviceversion': 'REDACTED'
    'x-ms-cosmos-is-partition-key-delete-pending': 'REDACTED'
    'x-ms-cosmos-physical-partition-id': 'REDACTED'
    'x-ms-cosmos-internal-partition-id': 'REDACTED'
    'x-ms-gatewayversion': 'REDACTED'
    'Date': 'Wed, 30 Oct 2024 10:28:39 GMT'
2024-10-30 05:28:39,885 - INFO - Found video post: 1ge9gol
2024-10-30 05:28:39,886 - DEBUG - Starting new HTTPS connection (1): api.redgifs.com:443
2024-10-30 05:28:39,991 - DEBUG - https://api.redgifs.com:443 "GET /v2/gifs/circulardeeppinkamericanbulldog HTTP/11" 200 None
2024-10-30 05:28:39,993 - DEBUG - Starting new HTTPS connection (1): files.redgifs.com:443
2024-10-30 05:28:40,062 - DEBUG - https://files.redgifs.com:443 "GET /CircularDeeppinkAmericanbulldog.mp4 HTTP/11" 200 61415883
2024-10-30 05:28:41,403 - INFO - Successfully downloaded media to downloads/videos/1ge9gol_20241030_052839_fff8ab71.mp4
2024-10-30 05:28:41,405 - DEBUG - Using selector: KqueueSelector
2024-10-30 05:28:41,405 - INFO - Attempting to send video to Telegram - Path: downloads/videos/1ge9gol_20241030_052839_fff8ab71.mp4
2024-10-30 05:28:41,406 - DEBUG - load_ssl_context verify=True cert=None trust_env=True http2=False
2024-10-30 05:28:41,407 - DEBUG - load_verify_locations cafile='/Users/joewilson/PythonProjects/Snoogram/venv/lib/python3.12/site-packages/certifi/cacert.pem'
2024-10-30 05:28:41,415 - DEBUG - load_ssl_context verify=True cert=None trust_env=True http2=False
2024-10-30 05:28:41,416 - DEBUG - load_verify_locations cafile='/Users/joewilson/PythonProjects/Snoogram/venv/lib/python3.12/site-packages/certifi/cacert.pem'
2024-10-30 05:28:41,422 - DEBUG - Entering: get_me
2024-10-30 05:28:41,423 - DEBUG - connect_tcp.started host='api.telegram.org' port=443 local_address=None timeout=5.0 socket_options=None
2024-10-30 05:28:41,547 - DEBUG - connect_tcp.complete return_value=<httpcore._backends.anyio.AnyIOStream object at 0x108ed2600>
2024-10-30 05:28:41,548 - DEBUG - start_tls.started ssl_context=<ssl.SSLContext object at 0x108c82f50> server_hostname='api.telegram.org' timeout=5.0
2024-10-30 05:28:41,680 - DEBUG - start_tls.complete return_value=<httpcore._backends.anyio.AnyIOStream object at 0x108ed22d0>
2024-10-30 05:28:41,681 - DEBUG - send_request_headers.started request=<Request [b'POST']>
2024-10-30 05:28:41,682 - DEBUG - send_request_headers.complete
2024-10-30 05:28:41,682 - DEBUG - send_request_body.started request=<Request [b'POST']>
2024-10-30 05:28:41,682 - DEBUG - send_request_body.complete
2024-10-30 05:28:41,682 - DEBUG - receive_response_headers.started request=<Request [b'POST']>
2024-10-30 05:28:41,800 - DEBUG - receive_response_headers.complete return_value=(b'HTTP/1.1', 200, b'OK', [(b'Server', b'nginx/1.18.0'), (b'Date', b'Wed, 30 Oct 2024 10:28:41 GMT'), (b'Content-Type', b'application/json'), (b'Content-Length', b'254'), (b'Connection', b'keep-alive'), (b'Strict-Transport-Security', b'max-age=31536000; includeSubDomains; preload'), (b'Access-Control-Allow-Origin', b'*'), (b'Access-Control-Allow-Methods', b'GET, POST, OPTIONS'), (b'Access-Control-Expose-Headers', b'Content-Length,Content-Type,Date,Server,Connection')])
2024-10-30 05:28:41,801 - INFO - HTTP Request: POST https://api.telegram.org/bot7867694458:AAEFLZjWPyd1p640mHENnBt479WRYfSavWg/getMe "HTTP/1.1 200 OK"
2024-10-30 05:28:41,801 - DEBUG - receive_response_body.started request=<Request [b'POST']>
2024-10-30 05:28:41,801 - DEBUG - receive_response_body.complete
2024-10-30 05:28:41,801 - DEBUG - response_closed.started
2024-10-30 05:28:41,801 - DEBUG - response_closed.complete
2024-10-30 05:28:41,801 - DEBUG - User(api_kwargs={'can_connect_to_business': False, 'has_main_web_app': False}, can_join_groups=True, can_read_all_group_messages=False, first_name='RedditBot', id=7867694458, is_bot=True, supports_inline_queries=False, username='RedditImage_bot')
2024-10-30 05:28:41,801 - DEBUG - Exiting: get_me
2024-10-30 05:28:41,801 - DEBUG - This Bot is already initialized.
2024-10-30 05:28:41,801 - DEBUG - Entering: send_video
2024-10-30 05:28:41,822 - DEBUG - send_request_headers.started request=<Request [b'POST']>
2024-10-30 05:28:41,823 - DEBUG - send_request_headers.complete
2024-10-30 05:28:41,823 - DEBUG - send_request_body.started request=<Request [b'POST']>
2024-10-30 05:28:45,420 - DEBUG - send_request_body.complete
2024-10-30 05:28:45,420 - DEBUG - receive_response_headers.started request=<Request [b'POST']>
2024-10-30 05:28:45,421 - DEBUG - receive_response_headers.complete return_value=(b'HTTP/1.1', 413, b'Request Entity Too Large', [(b'Server', b'nginx/1.18.0'), (b'Date', b'Wed, 30 Oct 2024 10:28:41 GMT'), (b'Content-Type', b'application/json'), (b'Content-Length', b'70'), (b'Connection', b'close'), (b'Strict-Transport-Security', b'max-age=31536000; includeSubDomains; preload'), (b'Access-Control-Allow-Origin', b'*'), (b'Access-Control-Expose-Headers', b'Content-Length,Content-Type,Date,Server,Connection')])
2024-10-30 05:28:45,421 - INFO - HTTP Request: POST https://api.telegram.org/bot7867694458:AAEFLZjWPyd1p640mHENnBt479WRYfSavWg/sendVideo "HTTP/1.1 413 Request Entity Too Large"
2024-10-30 05:28:45,421 - DEBUG - receive_response_body.started request=<Request [b'POST']>
2024-10-30 05:28:45,422 - DEBUG - receive_response_body.complete
2024-10-30 05:28:45,422 - DEBUG - response_closed.started
2024-10-30 05:28:45,422 - DEBUG - response_closed.complete
2024-10-30 05:28:45,422 - DEBUG - This Bot is already shut down. Returning.
2024-10-30 05:28:45,422 - DEBUG - Shut down of Updater complete
2024-10-30 05:28:45,422 - ERROR - Failed to send video to Telegram: Request Entity Too Large (413)
2024-10-30 05:28:45,423 - ERROR - Error sending video post 1ge9gol: Request Entity Too Large (413)
2024-10-30 05:28:45,423 - INFO - Checking post: 1ge98kx - Score: 258 - URL: https://www.redgifs.com/watch/frontspecificspittlebug
2024-10-30 05:28:45,423 - INFO - Post 1ge98kx is a duplicate, skipping
2024-10-30 05:28:45,423 - INFO - Checking post: 1geqscs - Score: 236 - URL: https://www.redgifs.com/watch/previousweequeensnake
2024-10-30 05:28:45,424 - INFO - Request URL: 'https://cosmossnoogram-centralus.documents.azure.com:443/dbs/ToDoList/colls/sent_posts/docs/'
Request method: 'POST'
Request headers:
    'Cache-Control': 'no-cache'
    'x-ms-version': 'REDACTED'
    'x-ms-documentdb-query-iscontinuationexpected': 'REDACTED'
    'x-ms-consistency-level': 'REDACTED'
    'x-ms-documentdb-isquery': 'REDACTED'
    'Content-Type': 'application/query+json'
    'x-ms-session-token': 'REDACTED'
    'x-ms-documentdb-query-enablecrosspartition': 'REDACTED'
    'x-ms-date': 'REDACTED'
    'authorization': 'REDACTED'
    'Accept': 'application/json'
    'x-ms-cosmos-correlated-activityid': 'REDACTED'
    'Content-Length': '107'
    'User-Agent': 'azsdk-python-cosmos/4.5.1 Python/3.12.4 (macOS-15.0.1-arm64-arm-64bit)'
A body is sent with the request
2024-10-30 05:28:45,487 - DEBUG - https://cosmossnoogram-centralus.documents.azure.com:443 "POST /dbs/ToDoList/colls/sent_posts/docs/ HTTP/11" 200 None
2024-10-30 05:28:45,488 - INFO - Response status: 200
Response headers:
    'Cache-Control': 'no-store, no-cache'
    'Pragma': 'no-cache'
    'Transfer-Encoding': 'chunked'
    'Content-Type': 'application/json'
    'Server': 'Microsoft-HTTPAPI/2.0'
    'Strict-Transport-Security': 'REDACTED'
    'x-ms-activity-id': 'REDACTED'
    'x-ms-last-state-change-utc': 'REDACTED'
    'x-ms-resource-quota': 'REDACTED'
    'x-ms-resource-usage': 'REDACTED'
    'x-ms-schemaversion': 'REDACTED'
    'lsn': 'REDACTED'
    'x-ms-item-count': 'REDACTED'
    'x-ms-request-charge': 'REDACTED'
    'x-ms-alt-content-path': 'REDACTED'
    'x-ms-content-path': 'REDACTED'
    'x-ms-documentdb-partitionkeyrangeid': 'REDACTED'
    'x-ms-xp-role': 'REDACTED'
    'x-ms-cosmos-query-execution-info': 'REDACTED'
    'x-ms-global-Committed-lsn': 'REDACTED'
    'x-ms-number-of-read-regions': 'REDACTED'
    'x-ms-transport-request-id': 'REDACTED'
    'x-ms-cosmos-llsn': 'REDACTED'
    'x-ms-session-token': 'REDACTED'
    'x-ms-request-duration-ms': 'REDACTED'
    'x-ms-serviceversion': 'REDACTED'
    'x-ms-cosmos-is-partition-key-delete-pending': 'REDACTED'
    'x-ms-cosmos-physical-partition-id': 'REDACTED'
    'x-ms-cosmos-internal-partition-id': 'REDACTED'
    'x-ms-gatewayversion': 'REDACTED'
    'Date': 'Wed, 30 Oct 2024 10:28:45 GMT'
2024-10-30 05:28:45,488 - INFO - Found video post: 1geqscs
2024-10-30 05:28:45,490 - DEBUG - Starting new HTTPS connection (1): api.redgifs.com:443
2024-10-30 05:28:45,591 - DEBUG - https://api.redgifs.com:443 "GET /v2/gifs/previousweequeensnake HTTP/11" 200 None
2024-10-30 05:28:45,595 - DEBUG - Starting new HTTPS connection (1): files.redgifs.com:443
2024-10-30 05:28:45,680 - DEBUG - https://files.redgifs.com:443 "GET /PreviousWeeQueensnake.mp4 HTTP/11" 200 50070206
2024-10-30 05:28:46,693 - INFO - Successfully downloaded media to downloads/videos/1geqscs_20241030_052845_2fd81a4e.mp4
2024-10-30 05:28:46,696 - DEBUG - Using selector: KqueueSelector
2024-10-30 05:28:46,696 - INFO - Attempting to send video to Telegram - Path: downloads/videos/1geqscs_20241030_052845_2fd81a4e.mp4
2024-10-30 05:28:46,697 - DEBUG - load_ssl_context verify=True cert=None trust_env=True http2=False
2024-10-30 05:28:46,697 - DEBUG - load_verify_locations cafile='/Users/joewilson/PythonProjects/Snoogram/venv/lib/python3.12/site-packages/certifi/cacert.pem'
2024-10-30 05:28:46,705 - DEBUG - load_ssl_context verify=True cert=None trust_env=True http2=False
2024-10-30 05:28:46,706 - DEBUG - load_verify_locations cafile='/Users/joewilson/PythonProjects/Snoogram/venv/lib/python3.12/site-packages/certifi/cacert.pem'
2024-10-30 05:28:46,713 - DEBUG - Entering: get_me
2024-10-30 05:28:46,713 - DEBUG - connect_tcp.started host='api.telegram.org' port=443 local_address=None timeout=5.0 socket_options=None
2024-10-30 05:28:46,836 - DEBUG - connect_tcp.complete return_value=<httpcore._backends.anyio.AnyIOStream object at 0x108a5e660>
2024-10-30 05:28:46,837 - DEBUG - start_tls.started ssl_context=<ssl.SSLContext object at 0x1089bd6d0> server_hostname='api.telegram.org' timeout=5.0
2024-10-30 05:28:46,969 - DEBUG - start_tls.complete return_value=<httpcore._backends.anyio.AnyIOStream object at 0x108a5f680>
2024-10-30 05:28:46,969 - DEBUG - send_request_headers.started request=<Request [b'POST']>
2024-10-30 05:28:46,969 - DEBUG - send_request_headers.complete
2024-10-30 05:28:46,970 - DEBUG - send_request_body.started request=<Request [b'POST']>
2024-10-30 05:28:46,970 - DEBUG - send_request_body.complete
2024-10-30 05:28:46,970 - DEBUG - receive_response_headers.started request=<Request [b'POST']>
2024-10-30 05:28:47,087 - DEBUG - receive_response_headers.complete return_value=(b'HTTP/1.1', 200, b'OK', [(b'Server', b'nginx/1.18.0'), (b'Date', b'Wed, 30 Oct 2024 10:28:47 GMT'), (b'Content-Type', b'application/json'), (b'Content-Length', b'254'), (b'Connection', b'keep-alive'), (b'Strict-Transport-Security', b'max-age=31536000; includeSubDomains; preload'), (b'Access-Control-Allow-Origin', b'*'), (b'Access-Control-Allow-Methods', b'GET, POST, OPTIONS'), (b'Access-Control-Expose-Headers', b'Content-Length,Content-Type,Date,Server,Connection')])
2024-10-30 05:28:47,088 - INFO - HTTP Request: POST https://api.telegram.org/bot7867694458:AAEFLZjWPyd1p640mHENnBt479WRYfSavWg/getMe "HTTP/1.1 200 OK"
2024-10-30 05:28:47,088 - DEBUG - receive_response_body.started request=<Request [b'POST']>
2024-10-30 05:28:47,088 - DEBUG - receive_response_body.complete
2024-10-30 05:28:47,088 - DEBUG - response_closed.started
2024-10-30 05:28:47,088 - DEBUG - response_closed.complete
2024-10-30 05:28:47,088 - DEBUG - User(api_kwargs={'can_connect_to_business': False, 'has_main_web_app': False}, can_join_groups=True, can_read_all_group_messages=False, first_name='RedditBot', id=7867694458, is_bot=True, supports_inline_queries=False, username='RedditImage_bot')
2024-10-30 05:28:47,089 - DEBUG - Exiting: get_me
2024-10-30 05:28:47,089 - DEBUG - This Bot is already initialized.
2024-10-30 05:28:47,089 - DEBUG - Entering: send_video
2024-10-30 05:28:47,111 - DEBUG - send_request_headers.started request=<Request [b'POST']>
2024-10-30 05:28:47,111 - DEBUG - send_request_headers.complete
2024-10-30 05:28:47,111 - DEBUG - send_request_body.started request=<Request [b'POST']>
2024-10-30 05:28:51,129 - DEBUG - send_request_body.complete
2024-10-30 05:28:51,130 - DEBUG - receive_response_headers.started request=<Request [b'POST']>
2024-10-30 05:28:53,863 - DEBUG - receive_response_headers.complete return_value=(b'HTTP/1.1', 200, b'OK', [(b'Server', b'nginx/1.18.0'), (b'Date', b'Wed, 30 Oct 2024 10:28:53 GMT'), (b'Content-Type', b'application/json'), (b'Content-Length', b'600'), (b'Connection', b'keep-alive'), (b'Strict-Transport-Security', b'max-age=31536000; includeSubDomains; preload'), (b'Access-Control-Allow-Origin', b'*'), (b'Access-Control-Allow-Methods', b'GET, POST, OPTIONS'), (b'Access-Control-Expose-Headers', b'Content-Length,Content-Type,Date,Server,Connection')])
2024-10-30 05:28:53,865 - INFO - HTTP Request: POST https://api.telegram.org/bot7867694458:AAEFLZjWPyd1p640mHENnBt479WRYfSavWg/sendVideo "HTTP/1.1 200 OK"
2024-10-30 05:28:53,866 - DEBUG - receive_response_body.started request=<Request [b'POST']>
2024-10-30 05:28:53,866 - DEBUG - receive_response_body.complete
2024-10-30 05:28:53,866 - DEBUG - response_closed.started
2024-10-30 05:28:53,867 - DEBUG - response_closed.complete
2024-10-30 05:28:53,869 - DEBUG - Message(caption='From r/girlsfinishingthejob: I love when he covers my titties with his hot cum ðŸ¥°\nUpvotes: 236', channel_chat_created=False, chat=Chat(id=-1002490380283, title='Reddit_Pic_Stream', type=<ChatType.CHANNEL>), date=datetime.datetime(2024, 10, 30, 10, 28, 53, tzinfo=<UTC>), delete_chat_photo=False, group_chat_created=False, message_id=248, sender_chat=Chat(id=-1002490380283, title='Reddit_Pic_Stream', type=<ChatType.CHANNEL>), supergroup_chat_created=False, video=Video(duration=0, file_id='BAACAgEAAyEGAASUcC_7AAP4ZyIKZd_sQ-OnUP8Ohuytn_dG1_8AArkEAAIZEBFFJsbTnlqhvsk2BA', file_name='1geqscs_20241030_052845_2fd81a4e.mp4', file_size=50070206, file_unique_id='AgADuQQAAhkQEUU', height=320, mime_type='video/mp4', width=320))
2024-10-30 05:28:53,870 - DEBUG - Exiting: send_video
2024-10-30 05:28:53,870 - DEBUG - close.started
2024-10-30 05:28:53,871 - DEBUG - close.complete
2024-10-30 05:28:53,871 - DEBUG - This Bot is already shut down. Returning.
2024-10-30 05:28:53,871 - DEBUG - Shut down of Updater complete
2024-10-30 05:28:53,871 - INFO - Successfully sent video to Telegram
2024-10-30 05:28:53,875 - ERROR - Error processing subreddit girlsfinishingthejob: (sqlite3.OperationalError) attempt to write a readonly database
[SQL: INSERT INTO sent_post (post_id, subreddit_name, sent_at) VALUES (?, ?, ?)]
[parameters: ('1geqscs', 'girlsfinishingthejob', '2024-10-30 10:28:53.874538')]
(Background on this error at: https://sqlalche.me/e/20/e3q8)
2024-10-30 05:28:53,877 - ERROR - Job "send_to_telegram (trigger: interval[0:01:00], next run at: 2024-10-30 05:29:16 CDT)" raised an exception
Traceback (most recent call last):
  File "/Users/joewilson/PythonProjects/Snoogram/venv/lib/python3.12/site-packages/sqlalchemy/engine/base.py", line 1967, in _exec_single_context
    self.dialect.do_execute(
  File "/Users/joewilson/PythonProjects/Snoogram/venv/lib/python3.12/site-packages/sqlalchemy/engine/default.py", line 941, in do_execute
    cursor.execute(statement, parameters)
sqlite3.OperationalError: attempt to write a readonly database

The above exception was the direct cause of the following exception:

Traceback (most recent call last):
  File "/Users/joewilson/PythonProjects/Snoogram/venv/lib/python3.12/site-packages/apscheduler/executors/base.py", line 125, in run_job
    retval = job.func(*job.args, **job.kwargs)
             ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/Users/joewilson/PythonProjects/Snoogram/backend/app.py", line 265, in send_to_telegram
    # Update last_check in Cosmos DB
                ^^^^^^^^^^^^^^^^^^^^^
  File "/Users/joewilson/PythonProjects/Snoogram/backend/db_operations.py", line 100, in add_sent_post
  File "/Users/joewilson/PythonProjects/Snoogram/venv/lib/python3.12/site-packages/sqlalchemy/orm/scoping.py", line 597, in commit
    return self._proxied.commit()
           ^^^^^^^^^^^^^^^^^^^^^^
  File "/Users/joewilson/PythonProjects/Snoogram/venv/lib/python3.12/site-packages/sqlalchemy/orm/session.py", line 2028, in commit
    trans.commit(_to_root=True)
  File "<string>", line 2, in commit
  File "/Users/joewilson/PythonProjects/Snoogram/venv/lib/python3.12/site-packages/sqlalchemy/orm/state_changes.py", line 139, in _go
    ret_value = fn(self, *arg, **kw)
                ^^^^^^^^^^^^^^^^^^^^
  File "/Users/joewilson/PythonProjects/Snoogram/venv/lib/python3.12/site-packages/sqlalchemy/orm/session.py", line 1313, in commit
    self._prepare_impl()
  File "<string>", line 2, in _prepare_impl
  File "/Users/joewilson/PythonProjects/Snoogram/venv/lib/python3.12/site-packages/sqlalchemy/orm/state_changes.py", line 139, in _go
    ret_value = fn(self, *arg, **kw)
                ^^^^^^^^^^^^^^^^^^^^
  File "/Users/joewilson/PythonProjects/Snoogram/venv/lib/python3.12/site-packages/sqlalchemy/orm/session.py", line 1288, in _prepare_impl
    self.session.flush()
  File "/Users/joewilson/PythonProjects/Snoogram/venv/lib/python3.12/site-packages/sqlalchemy/orm/session.py", line 4352, in flush
    self._flush(objects)
  File "/Users/joewilson/PythonProjects/Snoogram/venv/lib/python3.12/site-packages/sqlalchemy/orm/session.py", line 4487, in _flush
    with util.safe_reraise():
  File "/Users/joewilson/PythonProjects/Snoogram/venv/lib/python3.12/site-packages/sqlalchemy/util/langhelpers.py", line 146, in __exit__
    raise exc_value.with_traceback(exc_tb)
  File "/Users/joewilson/PythonProjects/Snoogram/venv/lib/python3.12/site-packages/sqlalchemy/orm/session.py", line 4448, in _flush
    flush_context.execute()
  File "/Users/joewilson/PythonProjects/Snoogram/venv/lib/python3.12/site-packages/sqlalchemy/orm/unitofwork.py", line 466, in execute
    rec.execute(self)
  File "/Users/joewilson/PythonProjects/Snoogram/venv/lib/python3.12/site-packages/sqlalchemy/orm/unitofwork.py", line 642, in execute
    util.preloaded.orm_persistence.save_obj(
  File "/Users/joewilson/PythonProjects/Snoogram/venv/lib/python3.12/site-packages/sqlalchemy/orm/persistence.py", line 93, in save_obj
    _emit_insert_statements(
  File "/Users/joewilson/PythonProjects/Snoogram/venv/lib/python3.12/site-packages/sqlalchemy/orm/persistence.py", line 1233, in _emit_insert_statements
    result = connection.execute(
             ^^^^^^^^^^^^^^^^^^^
  File "/Users/joewilson/PythonProjects/Snoogram/venv/lib/python3.12/site-packages/sqlalchemy/engine/base.py", line 1418, in execute
    return meth(
           ^^^^^
  File "/Users/joewilson/PythonProjects/Snoogram/venv/lib/python3.12/site-packages/sqlalchemy/sql/elements.py", line 515, in _execute_on_connection
    return connection._execute_clauseelement(
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/Users/joewilson/PythonProjects/Snoogram/venv/lib/python3.12/site-packages/sqlalchemy/engine/base.py", line 1640, in _execute_clauseelement
    ret = self._execute_context(
          ^^^^^^^^^^^^^^^^^^^^^^
  File "/Users/joewilson/PythonProjects/Snoogram/venv/lib/python3.12/site-packages/sqlalchemy/engine/base.py", line 1846, in _execute_context
    return self._exec_single_context(
           ^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/Users/joewilson/PythonProjects/Snoogram/venv/lib/python3.12/site-packages/sqlalchemy/engine/base.py", line 1986, in _exec_single_context
    self._handle_dbapi_exception(
  File "/Users/joewilson/PythonProjects/Snoogram/venv/lib/python3.12/site-packages/sqlalchemy/engine/base.py", line 2355, in _handle_dbapi_exception
    raise sqlalchemy_exception.with_traceback(exc_info[2]) from e
  File "/Users/joewilson/PythonProjects/Snoogram/venv/lib/python3.12/site-packages/sqlalchemy/engine/base.py", line 1967, in _exec_single_context
    self.dialect.do_execute(
  File "/Users/joewilson/PythonProjects/Snoogram/venv/lib/python3.12/site-packages/sqlalchemy/engine/default.py", line 941, in do_execute
    cursor.execute(statement, parameters)
sqlalchemy.exc.OperationalError: (sqlite3.OperationalError) attempt to write a readonly database
[SQL: INSERT INTO sent_post (post_id, subreddit_name, sent_at) VALUES (?, ?, ?)]
[parameters: ('1geqscs', 'girlsfinishingthejob', '2024-10-30 10:28:53.874538')]
(Background on this error at: https://sqlalche.me/e/20/e3q8)
2024-10-30 05:29:07,854 - INFO -  * Restarting with stat
2024-10-30 05:29:16,977 - DEBUG - Looking for jobs to run
2024-10-30 05:29:16,979 - DEBUG - Next wakeup is due at 2024-10-30 05:30:16.969826-05:00 (in 59.990012 seconds)
2024-10-30 05:29:16,980 - INFO - Running job "send_to_telegram (trigger: interval[0:01:00], next run at: 2024-10-30 05:30:16 CDT)" (scheduled at 2024-10-30 05:29:16.969826-05:00)
2024-10-30 05:29:16,980 - INFO - Running job "send_to_telegram (trigger: interval[0:01:00], next run at: 2024-10-30 05:30:16 CDT)" (scheduled at 2024-10-30 05:29:16.970029-05:00)
2024-10-30 05:29:16,981 - INFO - Processing subreddit: girlsfinishingthejob
2024-10-30 05:29:16,981 - INFO - Processing subreddit: wifebutt
2024-10-30 05:29:16,982 - INFO - Fetching top posts of the day
2024-10-30 05:29:16,982 - INFO - Fetching top posts of the month
2024-10-30 05:29:16,984 - DEBUG - Fetching: GET https://oauth.reddit.com/r/girlsfinishingthejob/top at 1730284156.9842508
2024-10-30 05:29:16,984 - DEBUG - Fetching: GET https://oauth.reddit.com/r/wifebutt/top at 1730284156.984627
2024-10-30 05:29:16,984 - DEBUG - Data: None
2024-10-30 05:29:16,985 - DEBUG - Data: None
2024-10-30 05:29:16,985 - DEBUG - Params: {'limit': 50, 'raw_json': 1, 't': 'day'}
2024-10-30 05:29:16,985 - DEBUG - Params: {'limit': 50, 'raw_json': 1, 't': 'month'}
2024-10-30 05:29:17,288 - DEBUG - https://oauth.reddit.com:443 "GET /r/girlsfinishingthejob/top?t=day&limit=50&raw_json=1 HTTP/11" 200 24102
2024-10-30 05:29:17,290 - DEBUG - Response: 200 (24102 bytes) (rst-0:rem-148.0:used-2 ratelimit) at 1730284157.290724
2024-10-30 05:29:17,346 - INFO - Checking post: 1gelyz1 - Score: 7106 - URL: https://www.redgifs.com/watch/uttersvelteamphibian
2024-10-30 05:29:17,350 - INFO - Request URL: 'https://cosmossnoogram-centralus.documents.azure.com:443/dbs/ToDoList/colls/sent_posts/docs/'
Request method: 'POST'
Request headers:
    'Cache-Control': 'no-cache'
    'x-ms-version': 'REDACTED'
    'x-ms-documentdb-query-iscontinuationexpected': 'REDACTED'
    'x-ms-consistency-level': 'REDACTED'
    'x-ms-documentdb-isquery': 'REDACTED'
    'Content-Type': 'application/query+json'
    'x-ms-session-token': 'REDACTED'
    'x-ms-documentdb-query-enablecrosspartition': 'REDACTED'
    'x-ms-date': 'REDACTED'
    'authorization': 'REDACTED'
    'Accept': 'application/json'
    'x-ms-cosmos-correlated-activityid': 'REDACTED'
    'Content-Length': '107'
    'User-Agent': 'azsdk-python-cosmos/4.5.1 Python/3.12.4 (macOS-15.0.1-arm64-arm-64bit)'
A body is sent with the request
2024-10-30 05:29:17,383 - DEBUG - https://cosmossnoogram-centralus.documents.azure.com:443 "POST /dbs/ToDoList/colls/sent_posts/docs/ HTTP/11" 200 None
2024-10-30 05:29:17,384 - INFO - Response status: 200
Response headers:
    'Cache-Control': 'no-store, no-cache'
    'Pragma': 'no-cache'
    'Transfer-Encoding': 'chunked'
    'Content-Type': 'application/json'
    'Server': 'Microsoft-HTTPAPI/2.0'
    'Strict-Transport-Security': 'REDACTED'
    'x-ms-activity-id': 'REDACTED'
    'x-ms-last-state-change-utc': 'REDACTED'
    'x-ms-resource-quota': 'REDACTED'
    'x-ms-resource-usage': 'REDACTED'
    'x-ms-schemaversion': 'REDACTED'
    'lsn': 'REDACTED'
    'x-ms-item-count': 'REDACTED'
    'x-ms-request-charge': 'REDACTED'
    'x-ms-alt-content-path': 'REDACTED'
    'x-ms-content-path': 'REDACTED'
    'x-ms-documentdb-partitionkeyrangeid': 'REDACTED'
    'x-ms-xp-role': 'REDACTED'
    'x-ms-cosmos-query-execution-info': 'REDACTED'
    'x-ms-global-Committed-lsn': 'REDACTED'
    'x-ms-number-of-read-regions': 'REDACTED'
    'x-ms-transport-request-id': 'REDACTED'
    'x-ms-cosmos-llsn': 'REDACTED'
    'x-ms-session-token': 'REDACTED'
    'x-ms-request-duration-ms': 'REDACTED'
    'x-ms-serviceversion': 'REDACTED'
    'x-ms-cosmos-is-partition-key-delete-pending': 'REDACTED'
    'x-ms-cosmos-physical-partition-id': 'REDACTED'
    'x-ms-cosmos-internal-partition-id': 'REDACTED'
    'x-ms-gatewayversion': 'REDACTED'
    'Date': 'Wed, 30 Oct 2024 10:29:16 GMT'
2024-10-30 05:29:17,384 - INFO - Found video post: 1gelyz1
2024-10-30 05:29:17,385 - DEBUG - Starting new HTTPS connection (1): api.redgifs.com:443
2024-10-30 05:29:17,481 - DEBUG - https://api.redgifs.com:443 "GET /v2/gifs/uttersvelteamphibian HTTP/11" 200 None
2024-10-30 05:29:17,483 - DEBUG - Starting new HTTPS connection (1): files.redgifs.com:443
2024-10-30 05:29:17,559 - DEBUG - https://files.redgifs.com:443 "GET /UtterSvelteAmphibian.mp4 HTTP/11" 200 42980012
2024-10-30 05:29:18,169 - DEBUG - https://oauth.reddit.com:443 "GET /r/wifebutt/top?t=month&limit=50&raw_json=1 HTTP/11" 200 49233
2024-10-30 05:29:18,183 - DEBUG - Response: 200 (49233 bytes) (rst-0:rem-149.0:used-1 ratelimit) at 1730284158.1832361
2024-10-30 05:29:18,187 - INFO - Checking post: 1g9w053 - Score: 5348 - URL: https://www.reddit.com/gallery/1g9w053
2024-10-30 05:29:18,188 - INFO - Request URL: 'https://cosmossnoogram-centralus.documents.azure.com:443/dbs/ToDoList/colls/sent_posts/docs/'
Request method: 'POST'
Request headers:
    'Cache-Control': 'no-cache'
    'x-ms-version': 'REDACTED'
    'x-ms-documentdb-query-iscontinuationexpected': 'REDACTED'
    'x-ms-consistency-level': 'REDACTED'
    'x-ms-documentdb-isquery': 'REDACTED'
    'Content-Type': 'application/query+json'
    'x-ms-session-token': 'REDACTED'
    'x-ms-documentdb-query-enablecrosspartition': 'REDACTED'
    'x-ms-date': 'REDACTED'
    'authorization': 'REDACTED'
    'Accept': 'application/json'
    'x-ms-cosmos-correlated-activityid': 'REDACTED'
    'Content-Length': '107'
    'User-Agent': 'azsdk-python-cosmos/4.5.1 Python/3.12.4 (macOS-15.0.1-arm64-arm-64bit)'
A body is sent with the request
2024-10-30 05:29:18,237 - DEBUG - https://cosmossnoogram-centralus.documents.azure.com:443 "POST /dbs/ToDoList/colls/sent_posts/docs/ HTTP/11" 200 None
2024-10-30 05:29:18,237 - INFO - Response status: 200
Response headers:
    'Cache-Control': 'no-store, no-cache'
    'Pragma': 'no-cache'
    'Transfer-Encoding': 'chunked'
    'Content-Type': 'application/json'
    'Server': 'Microsoft-HTTPAPI/2.0'
    'Strict-Transport-Security': 'REDACTED'
    'x-ms-activity-id': 'REDACTED'
    'x-ms-last-state-change-utc': 'REDACTED'
    'x-ms-resource-quota': 'REDACTED'
    'x-ms-resource-usage': 'REDACTED'
    'x-ms-schemaversion': 'REDACTED'
    'lsn': 'REDACTED'
    'x-ms-item-count': 'REDACTED'
    'x-ms-request-charge': 'REDACTED'
    'x-ms-alt-content-path': 'REDACTED'
    'x-ms-content-path': 'REDACTED'
    'x-ms-quorum-acked-lsn': 'REDACTED'
    'x-ms-current-write-quorum': 'REDACTED'
    'x-ms-current-replica-set-size': 'REDACTED'
    'x-ms-documentdb-partitionkeyrangeid': 'REDACTED'
    'x-ms-xp-role': 'REDACTED'
    'x-ms-cosmos-query-execution-info': 'REDACTED'
    'x-ms-global-Committed-lsn': 'REDACTED'
    'x-ms-number-of-read-regions': 'REDACTED'
    'x-ms-transport-request-id': 'REDACTED'
    'x-ms-cosmos-llsn': 'REDACTED'
    'x-ms-cosmos-quorum-acked-llsn': 'REDACTED'
    'x-ms-session-token': 'REDACTED'
    'x-ms-request-duration-ms': 'REDACTED'
    'x-ms-serviceversion': 'REDACTED'
    'x-ms-cosmos-is-partition-key-delete-pending': 'REDACTED'
    'x-ms-cosmos-physical-partition-id': 'REDACTED'
    'x-ms-cosmos-internal-partition-id': 'REDACTED'
    'x-ms-gatewayversion': 'REDACTED'
    'Date': 'Wed, 30 Oct 2024 10:29:17 GMT'
2024-10-30 05:29:18,237 - INFO - Post 1g9w053 is not an image or video post, skipping
2024-10-30 05:29:18,237 - INFO - Checking post: 1fv4cfc - Score: 4579 - URL: https://www.reddit.com/gallery/1fv4cfc
2024-10-30 05:29:18,238 - INFO - Request URL: 'https://cosmossnoogram-centralus.documents.azure.com:443/dbs/ToDoList/colls/sent_posts/docs/'
Request method: 'POST'
Request headers:
    'Cache-Control': 'no-cache'
    'x-ms-version': 'REDACTED'
    'x-ms-documentdb-query-iscontinuationexpected': 'REDACTED'
    'x-ms-consistency-level': 'REDACTED'
    'x-ms-documentdb-isquery': 'REDACTED'
    'Content-Type': 'application/query+json'
    'x-ms-session-token': 'REDACTED'
    'x-ms-documentdb-query-enablecrosspartition': 'REDACTED'
    'x-ms-date': 'REDACTED'
    'authorization': 'REDACTED'
    'Accept': 'application/json'
    'x-ms-cosmos-correlated-activityid': 'REDACTED'
    'Content-Length': '107'
    'User-Agent': 'azsdk-python-cosmos/4.5.1 Python/3.12.4 (macOS-15.0.1-arm64-arm-64bit)'
A body is sent with the request
2024-10-30 05:29:18,296 - DEBUG - https://cosmossnoogram-centralus.documents.azure.com:443 "POST /dbs/ToDoList/colls/sent_posts/docs/ HTTP/11" 200 None
2024-10-30 05:29:18,297 - INFO - Response status: 200
Response headers:
    'Cache-Control': 'no-store, no-cache'
    'Pragma': 'no-cache'
    'Transfer-Encoding': 'chunked'
    'Content-Type': 'application/json'
    'Server': 'Microsoft-HTTPAPI/2.0'
    'Strict-Transport-Security': 'REDACTED'
    'x-ms-activity-id': 'REDACTED'
    'x-ms-last-state-change-utc': 'REDACTED'
    'x-ms-resource-quota': 'REDACTED'
    'x-ms-resource-usage': 'REDACTED'
    'x-ms-schemaversion': 'REDACTED'
    'lsn': 'REDACTED'
    'x-ms-item-count': 'REDACTED'
    'x-ms-request-charge': 'REDACTED'
    'x-ms-alt-content-path': 'REDACTED'
    'x-ms-content-path': 'REDACTED'
    'x-ms-documentdb-partitionkeyrangeid': 'REDACTED'
    'x-ms-xp-role': 'REDACTED'
    'x-ms-cosmos-query-execution-info': 'REDACTED'
    'x-ms-global-Committed-lsn': 'REDACTED'
    'x-ms-number-of-read-regions': 'REDACTED'
    'x-ms-transport-request-id': 'REDACTED'
    'x-ms-cosmos-llsn': 'REDACTED'
    'x-ms-session-token': 'REDACTED'
    'x-ms-request-duration-ms': 'REDACTED'
    'x-ms-serviceversion': 'REDACTED'
    'x-ms-cosmos-is-partition-key-delete-pending': 'REDACTED'
    'x-ms-cosmos-physical-partition-id': 'REDACTED'
    'x-ms-cosmos-internal-partition-id': 'REDACTED'
    'x-ms-gatewayversion': 'REDACTED'
    'Date': 'Wed, 30 Oct 2024 10:29:17 GMT'
2024-10-30 05:29:18,297 - INFO - Post 1fv4cfc is not an image or video post, skipping
2024-10-30 05:29:18,297 - INFO - Checking post: 1ganrp0 - Score: 4211 - URL: https://i.redd.it/ezatz8645lwd1.jpeg
2024-10-30 05:29:18,298 - INFO - Request URL: 'https://cosmossnoogram-centralus.documents.azure.com:443/dbs/ToDoList/colls/sent_posts/docs/'
Request method: 'POST'
Request headers:
    'Cache-Control': 'no-cache'
    'x-ms-version': 'REDACTED'
    'x-ms-documentdb-query-iscontinuationexpected': 'REDACTED'
    'x-ms-consistency-level': 'REDACTED'
    'x-ms-documentdb-isquery': 'REDACTED'
    'Content-Type': 'application/query+json'
    'x-ms-session-token': 'REDACTED'
    'x-ms-documentdb-query-enablecrosspartition': 'REDACTED'
    'x-ms-date': 'REDACTED'
    'authorization': 'REDACTED'
    'Accept': 'application/json'
    'x-ms-cosmos-correlated-activityid': 'REDACTED'
    'Content-Length': '107'
    'User-Agent': 'azsdk-python-cosmos/4.5.1 Python/3.12.4 (macOS-15.0.1-arm64-arm-64bit)'
A body is sent with the request
2024-10-30 05:29:18,361 - DEBUG - https://cosmossnoogram-centralus.documents.azure.com:443 "POST /dbs/ToDoList/colls/sent_posts/docs/ HTTP/11" 200 None
2024-10-30 05:29:18,361 - INFO - Response status: 200
Response headers:
    'Cache-Control': 'no-store, no-cache'
    'Pragma': 'no-cache'
    'Transfer-Encoding': 'chunked'
    'Content-Type': 'application/json'
    'Server': 'Microsoft-HTTPAPI/2.0'
    'Strict-Transport-Security': 'REDACTED'
    'x-ms-activity-id': 'REDACTED'
    'x-ms-last-state-change-utc': 'REDACTED'
    'x-ms-resource-quota': 'REDACTED'
    'x-ms-resource-usage': 'REDACTED'
    'x-ms-schemaversion': 'REDACTED'
    'lsn': 'REDACTED'
    'x-ms-item-count': 'REDACTED'
    'x-ms-request-charge': 'REDACTED'
    'x-ms-alt-content-path': 'REDACTED'
    'x-ms-content-path': 'REDACTED'
    'x-ms-documentdb-partitionkeyrangeid': 'REDACTED'
    'x-ms-xp-role': 'REDACTED'
    'x-ms-cosmos-query-execution-info': 'REDACTED'
    'x-ms-global-Committed-lsn': 'REDACTED'
    'x-ms-number-of-read-regions': 'REDACTED'
    'x-ms-transport-request-id': 'REDACTED'
    'x-ms-cosmos-llsn': 'REDACTED'
    'x-ms-session-token': 'REDACTED'
    'x-ms-request-duration-ms': 'REDACTED'
    'x-ms-serviceversion': 'REDACTED'
    'x-ms-cosmos-is-partition-key-delete-pending': 'REDACTED'
    'x-ms-cosmos-physical-partition-id': 'REDACTED'
    'x-ms-cosmos-internal-partition-id': 'REDACTED'
    'x-ms-gatewayversion': 'REDACTED'
    'Date': 'Wed, 30 Oct 2024 10:29:17 GMT'
2024-10-30 05:29:18,361 - INFO - Post 1ganrp0 is a duplicate, skipping
2024-10-30 05:29:18,361 - INFO - Checking post: 1gdrcjt - Score: 4062 - URL: https://www.redgifs.com/watch/unrealisticdefinitebarebirdbat
2024-10-30 05:29:18,362 - INFO - Post 1gdrcjt is a duplicate, skipping
2024-10-30 05:29:18,362 - INFO - Checking post: 1g30sx1 - Score: 3955 - URL: https://www.redgifs.com/watch/hardwarlikesunbittern
2024-10-30 05:29:18,362 - INFO - Post 1g30sx1 is a duplicate, skipping
2024-10-30 05:29:18,362 - INFO - Checking post: 1fs7839 - Score: 3856 - URL: https://www.reddit.com/gallery/1fs7839
2024-10-30 05:29:18,363 - INFO - Request URL: 'https://cosmossnoogram-centralus.documents.azure.com:443/dbs/ToDoList/colls/sent_posts/docs/'
Request method: 'POST'
Request headers:
    'Cache-Control': 'no-cache'
    'x-ms-version': 'REDACTED'
    'x-ms-documentdb-query-iscontinuationexpected': 'REDACTED'
    'x-ms-consistency-level': 'REDACTED'
    'x-ms-documentdb-isquery': 'REDACTED'
    'Content-Type': 'application/query+json'
    'x-ms-session-token': 'REDACTED'
    'x-ms-documentdb-query-enablecrosspartition': 'REDACTED'
    'x-ms-date': 'REDACTED'
    'authorization': 'REDACTED'
    'Accept': 'application/json'
    'x-ms-cosmos-correlated-activityid': 'REDACTED'
    'Content-Length': '107'
    'User-Agent': 'azsdk-python-cosmos/4.5.1 Python/3.12.4 (macOS-15.0.1-arm64-arm-64bit)'
A body is sent with the request
2024-10-30 05:29:18,423 - DEBUG - https://cosmossnoogram-centralus.documents.azure.com:443 "POST /dbs/ToDoList/colls/sent_posts/docs/ HTTP/11" 200 None
2024-10-30 05:29:18,423 - INFO - Response status: 200
Response headers:
    'Cache-Control': 'no-store, no-cache'
    'Pragma': 'no-cache'
    'Transfer-Encoding': 'chunked'
    'Content-Type': 'application/json'
    'Server': 'Microsoft-HTTPAPI/2.0'
    'Strict-Transport-Security': 'REDACTED'
    'x-ms-activity-id': 'REDACTED'
    'x-ms-last-state-change-utc': 'REDACTED'
    'x-ms-resource-quota': 'REDACTED'
    'x-ms-resource-usage': 'REDACTED'
    'x-ms-schemaversion': 'REDACTED'
    'lsn': 'REDACTED'
    'x-ms-item-count': 'REDACTED'
    'x-ms-request-charge': 'REDACTED'
    'x-ms-alt-content-path': 'REDACTED'
    'x-ms-content-path': 'REDACTED'
    'x-ms-documentdb-partitionkeyrangeid': 'REDACTED'
    'x-ms-xp-role': 'REDACTED'
    'x-ms-cosmos-query-execution-info': 'REDACTED'
    'x-ms-global-Committed-lsn': 'REDACTED'
    'x-ms-number-of-read-regions': 'REDACTED'
    'x-ms-transport-request-id': 'REDACTED'
    'x-ms-cosmos-llsn': 'REDACTED'
    'x-ms-session-token': 'REDACTED'
    'x-ms-request-duration-ms': 'REDACTED'
    'x-ms-serviceversion': 'REDACTED'
    'x-ms-cosmos-is-partition-key-delete-pending': 'REDACTED'
    'x-ms-cosmos-physical-partition-id': 'REDACTED'
    'x-ms-cosmos-internal-partition-id': 'REDACTED'
    'x-ms-gatewayversion': 'REDACTED'
    'Date': 'Wed, 30 Oct 2024 10:29:17 GMT'
2024-10-30 05:29:18,424 - INFO - Post 1fs7839 is not an image or video post, skipping
2024-10-30 05:29:18,424 - INFO - Checking post: 1g2rse9 - Score: 3773 - URL: https://i.redd.it/gzxs1aeshjud1.png
2024-10-30 05:29:18,424 - INFO - Post 1g2rse9 is a duplicate, skipping
2024-10-30 05:29:18,424 - INFO - Checking post: 1ge9loz - Score: 3721 - URL: https://www.redgifs.com/watch/deadlygregariouswoodchuck
2024-10-30 05:29:18,425 - INFO - Post 1ge9loz is a duplicate, skipping
2024-10-30 05:29:18,425 - INFO - Checking post: 1g0e966 - Score: 3633 - URL: https://www.reddit.com/gallery/1g0e966
2024-10-30 05:29:18,425 - INFO - Request URL: 'https://cosmossnoogram-centralus.documents.azure.com:443/dbs/ToDoList/colls/sent_posts/docs/'
Request method: 'POST'
Request headers:
    'Cache-Control': 'no-cache'
    'x-ms-version': 'REDACTED'
    'x-ms-documentdb-query-iscontinuationexpected': 'REDACTED'
    'x-ms-consistency-level': 'REDACTED'
    'x-ms-documentdb-isquery': 'REDACTED'
    'Content-Type': 'application/query+json'
    'x-ms-session-token': 'REDACTED'
    'x-ms-documentdb-query-enablecrosspartition': 'REDACTED'
    'x-ms-date': 'REDACTED'
    'authorization': 'REDACTED'
    'Accept': 'application/json'
    'x-ms-cosmos-correlated-activityid': 'REDACTED'
    'Content-Length': '107'
    'User-Agent': 'azsdk-python-cosmos/4.5.1 Python/3.12.4 (macOS-15.0.1-arm64-arm-64bit)'
A body is sent with the request
2024-10-30 05:29:18,498 - DEBUG - https://cosmossnoogram-centralus.documents.azure.com:443 "POST /dbs/ToDoList/colls/sent_posts/docs/ HTTP/11" 200 None
2024-10-30 05:29:18,499 - INFO - Response status: 200
Response headers:
    'Cache-Control': 'no-store, no-cache'
    'Pragma': 'no-cache'
    'Transfer-Encoding': 'chunked'
    'Content-Type': 'application/json'
    'Server': 'Microsoft-HTTPAPI/2.0'
    'Strict-Transport-Security': 'REDACTED'
    'x-ms-activity-id': 'REDACTED'
    'x-ms-last-state-change-utc': 'REDACTED'
    'x-ms-resource-quota': 'REDACTED'
    'x-ms-resource-usage': 'REDACTED'
    'x-ms-schemaversion': 'REDACTED'
    'lsn': 'REDACTED'
    'x-ms-item-count': 'REDACTED'
    'x-ms-request-charge': 'REDACTED'
    'x-ms-alt-content-path': 'REDACTED'
    'x-ms-content-path': 'REDACTED'
    'x-ms-documentdb-partitionkeyrangeid': 'REDACTED'
    'x-ms-xp-role': 'REDACTED'
    'x-ms-cosmos-query-execution-info': 'REDACTED'
    'x-ms-global-Committed-lsn': 'REDACTED'
    'x-ms-number-of-read-regions': 'REDACTED'
    'x-ms-transport-request-id': 'REDACTED'
    'x-ms-cosmos-llsn': 'REDACTED'
    'x-ms-session-token': 'REDACTED'
    'x-ms-request-duration-ms': 'REDACTED'
    'x-ms-serviceversion': 'REDACTED'
    'x-ms-cosmos-is-partition-key-delete-pending': 'REDACTED'
    'x-ms-cosmos-physical-partition-id': 'REDACTED'
    'x-ms-cosmos-internal-partition-id': 'REDACTED'
    'x-ms-gatewayversion': 'REDACTED'
    'Date': 'Wed, 30 Oct 2024 10:29:17 GMT'
2024-10-30 05:29:18,499 - INFO - Post 1g0e966 is not an image or video post, skipping
2024-10-30 05:29:18,499 - INFO - Checking post: 1gckgcy - Score: 3398 - URL: https://i.redd.it/njd0mbyjl3xd1.jpeg
2024-10-30 05:29:18,500 - INFO - Post 1gckgcy is a duplicate, skipping
2024-10-30 05:29:18,500 - INFO - Checking post: 1fznoil - Score: 3330 - URL: https://i.redd.it/eruk3694dptd1.jpeg
2024-10-30 05:29:18,500 - INFO - Post 1fznoil is a duplicate, skipping
2024-10-30 05:29:18,500 - INFO - Checking post: 1g3dsj7 - Score: 3184 - URL: https://i.redd.it/cg9oigznmpud1.jpeg
2024-10-30 05:29:18,501 - INFO - Post 1g3dsj7 is a duplicate, skipping
2024-10-30 05:29:18,501 - INFO - Checking post: 1g4dx9i - Score: 3138 - URL: https://i.redd.it/5kv3c8f3lyud1.jpeg
2024-10-30 05:29:18,501 - INFO - Request URL: 'https://cosmossnoogram-centralus.documents.azure.com:443/dbs/ToDoList/colls/sent_posts/docs/'
Request method: 'POST'
Request headers:
    'Cache-Control': 'no-cache'
    'x-ms-version': 'REDACTED'
    'x-ms-documentdb-query-iscontinuationexpected': 'REDACTED'
    'x-ms-consistency-level': 'REDACTED'
    'x-ms-documentdb-isquery': 'REDACTED'
    'Content-Type': 'application/query+json'
    'x-ms-session-token': 'REDACTED'
    'x-ms-documentdb-query-enablecrosspartition': 'REDACTED'
    'x-ms-date': 'REDACTED'
    'authorization': 'REDACTED'
    'Accept': 'application/json'
    'x-ms-cosmos-correlated-activityid': 'REDACTED'
    'Content-Length': '107'
    'User-Agent': 'azsdk-python-cosmos/4.5.1 Python/3.12.4 (macOS-15.0.1-arm64-arm-64bit)'
A body is sent with the request
2024-10-30 05:29:18,558 - DEBUG - https://cosmossnoogram-centralus.documents.azure.com:443 "POST /dbs/ToDoList/colls/sent_posts/docs/ HTTP/11" 200 None
2024-10-30 05:29:18,559 - INFO - Response status: 200
Response headers:
    'Cache-Control': 'no-store, no-cache'
    'Pragma': 'no-cache'
    'Transfer-Encoding': 'chunked'
    'Content-Type': 'application/json'
    'Server': 'Microsoft-HTTPAPI/2.0'
    'Strict-Transport-Security': 'REDACTED'
    'x-ms-activity-id': 'REDACTED'
    'x-ms-last-state-change-utc': 'REDACTED'
    'x-ms-resource-quota': 'REDACTED'
    'x-ms-resource-usage': 'REDACTED'
    'x-ms-schemaversion': 'REDACTED'
    'lsn': 'REDACTED'
    'x-ms-item-count': 'REDACTED'
    'x-ms-request-charge': 'REDACTED'
    'x-ms-alt-content-path': 'REDACTED'
    'x-ms-content-path': 'REDACTED'
    'x-ms-documentdb-partitionkeyrangeid': 'REDACTED'
    'x-ms-xp-role': 'REDACTED'
    'x-ms-cosmos-query-execution-info': 'REDACTED'
    'x-ms-global-Committed-lsn': 'REDACTED'
    'x-ms-number-of-read-regions': 'REDACTED'
    'x-ms-transport-request-id': 'REDACTED'
    'x-ms-cosmos-llsn': 'REDACTED'
    'x-ms-session-token': 'REDACTED'
    'x-ms-request-duration-ms': 'REDACTED'
    'x-ms-serviceversion': 'REDACTED'
    'x-ms-cosmos-is-partition-key-delete-pending': 'REDACTED'
    'x-ms-cosmos-physical-partition-id': 'REDACTED'
    'x-ms-cosmos-internal-partition-id': 'REDACTED'
    'x-ms-gatewayversion': 'REDACTED'
    'Date': 'Wed, 30 Oct 2024 10:29:17 GMT'
2024-10-30 05:29:18,559 - INFO - Post 1g4dx9i is a duplicate, skipping
2024-10-30 05:29:18,559 - INFO - Checking post: 1gbi6rb - Score: 3133 - URL: https://i.redd.it/uzwse73yvswd1.jpeg
2024-10-30 05:29:18,559 - INFO - Successfully downloaded media to downloads/videos/1gelyz1_20241030_052917_ba5c8ead.mp4
2024-10-30 05:29:18,560 - INFO - Request URL: 'https://cosmossnoogram-centralus.documents.azure.com:443/dbs/ToDoList/colls/sent_posts/docs/'
Request method: 'POST'
Request headers:
    'Cache-Control': 'no-cache'
    'x-ms-version': 'REDACTED'
    'x-ms-documentdb-query-iscontinuationexpected': 'REDACTED'
    'x-ms-consistency-level': 'REDACTED'
    'x-ms-documentdb-isquery': 'REDACTED'
    'Content-Type': 'application/query+json'
    'x-ms-session-token': 'REDACTED'
    'x-ms-documentdb-query-enablecrosspartition': 'REDACTED'
    'x-ms-date': 'REDACTED'
    'authorization': 'REDACTED'
    'Accept': 'application/json'
    'x-ms-cosmos-correlated-activityid': 'REDACTED'
    'Content-Length': '107'
    'User-Agent': 'azsdk-python-cosmos/4.5.1 Python/3.12.4 (macOS-15.0.1-arm64-arm-64bit)'
A body is sent with the request
2024-10-30 05:29:18,562 - DEBUG - Using selector: KqueueSelector
2024-10-30 05:29:18,563 - INFO - Attempting to send video to Telegram - Path: downloads/videos/1gelyz1_20241030_052917_ba5c8ead.mp4
2024-10-30 05:29:18,564 - DEBUG - load_ssl_context verify=True cert=None trust_env=True http2=False
2024-10-30 05:29:18,564 - DEBUG - load_verify_locations cafile='/Users/joewilson/PythonProjects/Snoogram/venv/lib/python3.12/site-packages/certifi/cacert.pem'
2024-10-30 05:29:18,573 - DEBUG - load_ssl_context verify=True cert=None trust_env=True http2=False
2024-10-30 05:29:18,573 - DEBUG - load_verify_locations cafile='/Users/joewilson/PythonProjects/Snoogram/venv/lib/python3.12/site-packages/certifi/cacert.pem'
2024-10-30 05:29:18,581 - DEBUG - Entering: get_me
2024-10-30 05:29:18,582 - DEBUG - connect_tcp.started host='api.telegram.org' port=443 local_address=None timeout=5.0 socket_options=None
2024-10-30 05:29:18,611 - DEBUG - https://cosmossnoogram-centralus.documents.azure.com:443 "POST /dbs/ToDoList/colls/sent_posts/docs/ HTTP/11" 200 None
2024-10-30 05:29:18,612 - INFO - Response status: 200
Response headers:
    'Cache-Control': 'no-store, no-cache'
    'Pragma': 'no-cache'
    'Transfer-Encoding': 'chunked'
    'Content-Type': 'application/json'
    'Server': 'Microsoft-HTTPAPI/2.0'
    'Strict-Transport-Security': 'REDACTED'
    'x-ms-activity-id': 'REDACTED'
    'x-ms-last-state-change-utc': 'REDACTED'
    'x-ms-resource-quota': 'REDACTED'
    'x-ms-resource-usage': 'REDACTED'
    'x-ms-schemaversion': 'REDACTED'
    'lsn': 'REDACTED'
    'x-ms-item-count': 'REDACTED'
    'x-ms-request-charge': 'REDACTED'
    'x-ms-alt-content-path': 'REDACTED'
    'x-ms-content-path': 'REDACTED'
    'x-ms-quorum-acked-lsn': 'REDACTED'
    'x-ms-current-write-quorum': 'REDACTED'
    'x-ms-current-replica-set-size': 'REDACTED'
    'x-ms-documentdb-partitionkeyrangeid': 'REDACTED'
    'x-ms-xp-role': 'REDACTED'
    'x-ms-cosmos-query-execution-info': 'REDACTED'
    'x-ms-global-Committed-lsn': 'REDACTED'
    'x-ms-number-of-read-regions': 'REDACTED'
    'x-ms-transport-request-id': 'REDACTED'
    'x-ms-cosmos-llsn': 'REDACTED'
    'x-ms-cosmos-quorum-acked-llsn': 'REDACTED'
    'x-ms-session-token': 'REDACTED'
    'x-ms-request-duration-ms': 'REDACTED'
    'x-ms-serviceversion': 'REDACTED'
    'x-ms-cosmos-is-partition-key-delete-pending': 'REDACTED'
    'x-ms-cosmos-physical-partition-id': 'REDACTED'
    'x-ms-cosmos-internal-partition-id': 'REDACTED'
    'x-ms-gatewayversion': 'REDACTED'
    'Date': 'Wed, 30 Oct 2024 10:29:17 GMT'
2024-10-30 05:29:18,612 - INFO - Found image post: 1gbi6rb with URL: https://i.redd.it/uzwse73yvswd1.jpeg
2024-10-30 05:29:18,613 - DEBUG - Starting new HTTPS connection (1): i.redd.it:443
2024-10-30 05:29:18,703 - DEBUG - https://i.redd.it:443 "GET /uzwse73yvswd1.jpeg HTTP/11" 200 2371964
2024-10-30 05:29:18,736 - DEBUG - connect_tcp.complete return_value=<httpcore._backends.anyio.AnyIOStream object at 0x108a5ffe0>
2024-10-30 05:29:18,736 - DEBUG - start_tls.started ssl_context=<ssl.SSLContext object at 0x10aa45d50> server_hostname='api.telegram.org' timeout=5.0
2024-10-30 05:29:18,801 - INFO - Successfully downloaded media to downloads/pics/1gbi6rb_20241030_052918_75043492.jpeg
2024-10-30 05:29:18,802 - DEBUG - Using selector: KqueueSelector
2024-10-30 05:29:18,803 - INFO - Attempting to send photo to Telegram - Path: downloads/pics/1gbi6rb_20241030_052918_75043492.jpeg
2024-10-30 05:29:18,803 - DEBUG - Entering: get_me
2024-10-30 05:29:18,803 - DEBUG - connect_tcp.started host='api.telegram.org' port=443 local_address=None timeout=5.0 socket_options=None
2024-10-30 05:29:18,869 - DEBUG - start_tls.complete return_value=<httpcore._backends.anyio.AnyIOStream object at 0x108a5e780>
2024-10-30 05:29:18,870 - DEBUG - send_request_headers.started request=<Request [b'POST']>
2024-10-30 05:29:18,871 - DEBUG - send_request_headers.complete
2024-10-30 05:29:18,871 - DEBUG - send_request_body.started request=<Request [b'POST']>
2024-10-30 05:29:18,871 - DEBUG - send_request_body.complete
2024-10-30 05:29:18,871 - DEBUG - receive_response_headers.started request=<Request [b'POST']>
2024-10-30 05:29:18,926 - DEBUG - connect_tcp.complete return_value=<httpcore._backends.anyio.AnyIOStream object at 0x108a5f3e0>
2024-10-30 05:29:18,926 - DEBUG - start_tls.started ssl_context=<ssl.SSLContext object at 0x10aa45d50> server_hostname='api.telegram.org' timeout=5.0
2024-10-30 05:29:18,997 - DEBUG - receive_response_headers.complete return_value=(b'HTTP/1.1', 200, b'OK', [(b'Server', b'nginx/1.18.0'), (b'Date', b'Wed, 30 Oct 2024 10:29:18 GMT'), (b'Content-Type', b'application/json'), (b'Content-Length', b'254'), (b'Connection', b'keep-alive'), (b'Strict-Transport-Security', b'max-age=31536000; includeSubDomains; preload'), (b'Access-Control-Allow-Origin', b'*'), (b'Access-Control-Allow-Methods', b'GET, POST, OPTIONS'), (b'Access-Control-Expose-Headers', b'Content-Length,Content-Type,Date,Server,Connection')])
2024-10-30 05:29:18,998 - INFO - HTTP Request: POST https://api.telegram.org/bot7867694458:AAEFLZjWPyd1p640mHENnBt479WRYfSavWg/getMe "HTTP/1.1 200 OK"
2024-10-30 05:29:18,998 - DEBUG - receive_response_body.started request=<Request [b'POST']>
2024-10-30 05:29:18,998 - DEBUG - receive_response_body.complete
2024-10-30 05:29:18,998 - DEBUG - response_closed.started
2024-10-30 05:29:18,998 - DEBUG - response_closed.complete
2024-10-30 05:29:18,999 - DEBUG - User(api_kwargs={'can_connect_to_business': False, 'has_main_web_app': False}, can_join_groups=True, can_read_all_group_messages=False, first_name='RedditBot', id=7867694458, is_bot=True, supports_inline_queries=False, username='RedditImage_bot')
2024-10-30 05:29:18,999 - DEBUG - Exiting: get_me
2024-10-30 05:29:18,999 - DEBUG - This Bot is already initialized.
2024-10-30 05:29:18,999 - DEBUG - Entering: send_video
2024-10-30 05:29:19,008 - DEBUG - send_request_headers.started request=<Request [b'POST']>
2024-10-30 05:29:19,008 - DEBUG - send_request_headers.complete
2024-10-30 05:29:19,009 - DEBUG - send_request_body.started request=<Request [b'POST']>
2024-10-30 05:29:19,055 - DEBUG - start_tls.complete return_value=<httpcore._backends.anyio.AnyIOStream object at 0x108a5f6e0>
2024-10-30 05:29:19,056 - DEBUG - send_request_headers.started request=<Request [b'POST']>
2024-10-30 05:29:19,056 - DEBUG - send_request_headers.complete
2024-10-30 05:29:19,056 - DEBUG - send_request_body.started request=<Request [b'POST']>
2024-10-30 05:29:19,056 - DEBUG - send_request_body.complete
2024-10-30 05:29:19,056 - DEBUG - receive_response_headers.started request=<Request [b'POST']>
2024-10-30 05:29:19,169 - DEBUG - receive_response_headers.complete return_value=(b'HTTP/1.1', 200, b'OK', [(b'Server', b'nginx/1.18.0'), (b'Date', b'Wed, 30 Oct 2024 10:29:19 GMT'), (b'Content-Type', b'application/json'), (b'Content-Length', b'254'), (b'Connection', b'keep-alive'), (b'Strict-Transport-Security', b'max-age=31536000; includeSubDomains; preload'), (b'Access-Control-Allow-Origin', b'*'), (b'Access-Control-Allow-Methods', b'GET, POST, OPTIONS'), (b'Access-Control-Expose-Headers', b'Content-Length,Content-Type,Date,Server,Connection')])
2024-10-30 05:29:19,169 - INFO - HTTP Request: POST https://api.telegram.org/bot7867694458:AAEFLZjWPyd1p640mHENnBt479WRYfSavWg/getMe "HTTP/1.1 200 OK"
2024-10-30 05:29:19,169 - DEBUG - receive_response_body.started request=<Request [b'POST']>
2024-10-30 05:29:19,169 - DEBUG - receive_response_body.complete
2024-10-30 05:29:19,169 - DEBUG - response_closed.started
2024-10-30 05:29:19,169 - DEBUG - response_closed.complete
2024-10-30 05:29:19,169 - DEBUG - User(api_kwargs={'can_connect_to_business': False, 'has_main_web_app': False}, can_join_groups=True, can_read_all_group_messages=False, first_name='RedditBot', id=7867694458, is_bot=True, supports_inline_queries=False, username='RedditImage_bot')
2024-10-30 05:29:19,170 - DEBUG - Exiting: get_me
2024-10-30 05:29:19,170 - DEBUG - This Updater is already initialized.
2024-10-30 05:29:19,170 - DEBUG - Entering: send_photo
2024-10-30 05:29:19,171 - DEBUG - send_request_headers.started request=<Request [b'POST']>
2024-10-30 05:29:19,171 - DEBUG - send_request_headers.complete
2024-10-30 05:29:19,171 - DEBUG - send_request_body.started request=<Request [b'POST']>
2024-10-30 05:29:20,018 - DEBUG - send_request_body.complete
2024-10-30 05:29:20,018 - DEBUG - receive_response_headers.started request=<Request [b'POST']>
2024-10-30 05:29:21,244 - DEBUG - receive_response_headers.complete return_value=(b'HTTP/1.1', 200, b'OK', [(b'Server', b'nginx/1.18.0'), (b'Date', b'Wed, 30 Oct 2024 10:29:21 GMT'), (b'Content-Type', b'application/json'), (b'Content-Length', b'1228'), (b'Connection', b'keep-alive'), (b'Strict-Transport-Security', b'max-age=31536000; includeSubDomains; preload'), (b'Access-Control-Allow-Origin', b'*'), (b'Access-Control-Allow-Methods', b'GET, POST, OPTIONS'), (b'Access-Control-Expose-Headers', b'Content-Length,Content-Type,Date,Server,Connection')])
2024-10-30 05:29:21,245 - INFO - HTTP Request: POST https://api.telegram.org/bot7867694458:AAEFLZjWPyd1p640mHENnBt479WRYfSavWg/sendPhoto "HTTP/1.1 200 OK"
2024-10-30 05:29:21,245 - DEBUG - receive_response_body.started request=<Request [b'POST']>
2024-10-30 05:29:21,245 - DEBUG - receive_response_body.complete
2024-10-30 05:29:21,245 - DEBUG - response_closed.started
2024-10-30 05:29:21,247 - DEBUG - response_closed.complete
2024-10-30 05:29:21,248 - DEBUG - Message(caption='From r/wifebutt: Thursday night wifebutt and football!\nUpvotes: 3,133', channel_chat_created=False, chat=Chat(id=-1002490380283, title='Reddit_Pic_Stream', type=<ChatType.CHANNEL>), date=datetime.datetime(2024, 10, 30, 10, 29, 20, tzinfo=<UTC>), delete_chat_photo=False, group_chat_created=False, message_id=249, photo=(PhotoSize(file_id='AgACAgEAAyEGAASUcC_7AAOaZyH6uC2oEw-KoZQHBhb5XwlLmlkAAkitMRsZEBFF-CyP8HyFv7gBAAMCAANzAAM2BA', file_size=1690, file_unique_id='AQADSK0xGxkQEUV4', height=90, width=62), PhotoSize(file_id='AgACAgEAAyEGAASUcC_7AAOaZyH6uC2oEw-KoZQHBhb5XwlLmlkAAkitMRsZEBFF-CyP8HyFv7gBAAMCAANtAAM2BA', file_size=23805, file_unique_id='AQADSK0xGxkQEUVy', height=320, width=221), PhotoSize(file_id='AgACAgEAAyEGAASUcC_7AAOaZyH6uC2oEw-KoZQHBhb5XwlLmlkAAkitMRsZEBFF-CyP8HyFv7gBAAMCAAN4AAM2BA', file_size=108880, file_unique_id='AQADSK0xGxkQEUV9', height=800, width=552), PhotoSize(file_id='AgACAgEAAyEGAASUcC_7AAOaZyH6uC2oEw-KoZQHBhb5XwlLmlkAAkitMRsZEBFF-CyP8HyFv7gBAAMCAAN5AAM2BA', file_size=243293, file_unique_id='AQADSK0xGxkQEUV-', height=1280, width=884), PhotoSize(file_id='AgACAgEAAyEGAASUcC_7AAOaZyH6uC2oEw-KoZQHBhb5XwlLmlkAAkitMRsZEBFF-CyP8HyFv7gBAAMCAAN3AAM2BA', file_size=762771, file_unique_id='AQADSK0xGxkQEUV8', height=2560, width=1768)), sender_chat=Chat(id=-1002490380283, title='Reddit_Pic_Stream', type=<ChatType.CHANNEL>), supergroup_chat_created=False)
2024-10-30 05:29:21,249 - DEBUG - Exiting: send_photo
2024-10-30 05:29:21,249 - DEBUG - close.started
2024-10-30 05:29:21,250 - DEBUG - close.complete
2024-10-30 05:29:21,250 - DEBUG - close.started
2024-10-30 05:29:21,250 - DEBUG - close.complete
2024-10-30 05:29:21,250 - DEBUG - This Bot is already shut down. Returning.
2024-10-30 05:29:21,250 - DEBUG - Shut down of Updater complete
2024-10-30 05:29:21,250 - INFO - Successfully sent photo to Telegram
2024-10-30 05:29:21,252 - ERROR - Error processing subreddit wifebutt: (sqlite3.OperationalError) attempt to write a readonly database
[SQL: INSERT INTO sent_post (post_id, subreddit_name, sent_at) VALUES (?, ?, ?)]
[parameters: ('1gbi6rb', 'wifebutt', '2024-10-30 10:29:21.252033')]
(Background on this error at: https://sqlalche.me/e/20/e3q8)
2024-10-30 05:29:21,254 - ERROR - Job "send_to_telegram (trigger: interval[0:01:00], next run at: 2024-10-30 05:30:16 CDT)" raised an exception
Traceback (most recent call last):
  File "/Users/joewilson/PythonProjects/Snoogram/venv/lib/python3.12/site-packages/sqlalchemy/engine/base.py", line 1967, in _exec_single_context
    self.dialect.do_execute(
  File "/Users/joewilson/PythonProjects/Snoogram/venv/lib/python3.12/site-packages/sqlalchemy/engine/default.py", line 941, in do_execute
    cursor.execute(statement, parameters)
sqlite3.OperationalError: attempt to write a readonly database

The above exception was the direct cause of the following exception:

Traceback (most recent call last):
  File "/Users/joewilson/PythonProjects/Snoogram/venv/lib/python3.12/site-packages/apscheduler/executors/base.py", line 125, in run_job
    retval = job.func(*job.args, **job.kwargs)
             ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/Users/joewilson/PythonProjects/Snoogram/backend/app.py", line 265, in send_to_telegram
    # Update last_check in Cosmos DB
                ^^^^^^^^^^^^^^^^^^^^^
  File "/Users/joewilson/PythonProjects/Snoogram/backend/db_operations.py", line 100, in add_sent_post
  File "/Users/joewilson/PythonProjects/Snoogram/venv/lib/python3.12/site-packages/sqlalchemy/orm/scoping.py", line 597, in commit
    return self._proxied.commit()
           ^^^^^^^^^^^^^^^^^^^^^^
  File "/Users/joewilson/PythonProjects/Snoogram/venv/lib/python3.12/site-packages/sqlalchemy/orm/session.py", line 2028, in commit
    trans.commit(_to_root=True)
  File "<string>", line 2, in commit
  File "/Users/joewilson/PythonProjects/Snoogram/venv/lib/python3.12/site-packages/sqlalchemy/orm/state_changes.py", line 139, in _go
    ret_value = fn(self, *arg, **kw)
                ^^^^^^^^^^^^^^^^^^^^
  File "/Users/joewilson/PythonProjects/Snoogram/venv/lib/python3.12/site-packages/sqlalchemy/orm/session.py", line 1313, in commit
    self._prepare_impl()
  File "<string>", line 2, in _prepare_impl
  File "/Users/joewilson/PythonProjects/Snoogram/venv/lib/python3.12/site-packages/sqlalchemy/orm/state_changes.py", line 139, in _go
    ret_value = fn(self, *arg, **kw)
                ^^^^^^^^^^^^^^^^^^^^
  File "/Users/joewilson/PythonProjects/Snoogram/venv/lib/python3.12/site-packages/sqlalchemy/orm/session.py", line 1288, in _prepare_impl
    self.session.flush()
  File "/Users/joewilson/PythonProjects/Snoogram/venv/lib/python3.12/site-packages/sqlalchemy/orm/session.py", line 4352, in flush
    self._flush(objects)
  File "/Users/joewilson/PythonProjects/Snoogram/venv/lib/python3.12/site-packages/sqlalchemy/orm/session.py", line 4487, in _flush
    with util.safe_reraise():
  File "/Users/joewilson/PythonProjects/Snoogram/venv/lib/python3.12/site-packages/sqlalchemy/util/langhelpers.py", line 146, in __exit__
    raise exc_value.with_traceback(exc_tb)
  File "/Users/joewilson/PythonProjects/Snoogram/venv/lib/python3.12/site-packages/sqlalchemy/orm/session.py", line 4448, in _flush
    flush_context.execute()
  File "/Users/joewilson/PythonProjects/Snoogram/venv/lib/python3.12/site-packages/sqlalchemy/orm/unitofwork.py", line 466, in execute
    rec.execute(self)
  File "/Users/joewilson/PythonProjects/Snoogram/venv/lib/python3.12/site-packages/sqlalchemy/orm/unitofwork.py", line 642, in execute
    util.preloaded.orm_persistence.save_obj(
  File "/Users/joewilson/PythonProjects/Snoogram/venv/lib/python3.12/site-packages/sqlalchemy/orm/persistence.py", line 93, in save_obj
    _emit_insert_statements(
  File "/Users/joewilson/PythonProjects/Snoogram/venv/lib/python3.12/site-packages/sqlalchemy/orm/persistence.py", line 1233, in _emit_insert_statements
    result = connection.execute(
             ^^^^^^^^^^^^^^^^^^^
  File "/Users/joewilson/PythonProjects/Snoogram/venv/lib/python3.12/site-packages/sqlalchemy/engine/base.py", line 1418, in execute
    return meth(
           ^^^^^
  File "/Users/joewilson/PythonProjects/Snoogram/venv/lib/python3.12/site-packages/sqlalchemy/sql/elements.py", line 515, in _execute_on_connection
    return connection._execute_clauseelement(
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/Users/joewilson/PythonProjects/Snoogram/venv/lib/python3.12/site-packages/sqlalchemy/engine/base.py", line 1640, in _execute_clauseelement
    ret = self._execute_context(
          ^^^^^^^^^^^^^^^^^^^^^^
  File "/Users/joewilson/PythonProjects/Snoogram/venv/lib/python3.12/site-packages/sqlalchemy/engine/base.py", line 1846, in _execute_context
    return self._exec_single_context(
           ^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/Users/joewilson/PythonProjects/Snoogram/venv/lib/python3.12/site-packages/sqlalchemy/engine/base.py", line 1986, in _exec_single_context
    self._handle_dbapi_exception(
  File "/Users/joewilson/PythonProjects/Snoogram/venv/lib/python3.12/site-packages/sqlalchemy/engine/base.py", line 2355, in _handle_dbapi_exception
    raise sqlalchemy_exception.with_traceback(exc_info[2]) from e
  File "/Users/joewilson/PythonProjects/Snoogram/venv/lib/python3.12/site-packages/sqlalchemy/engine/base.py", line 1967, in _exec_single_context
    self.dialect.do_execute(
  File "/Users/joewilson/PythonProjects/Snoogram/venv/lib/python3.12/site-packages/sqlalchemy/engine/default.py", line 941, in do_execute
    cursor.execute(statement, parameters)
sqlalchemy.exc.OperationalError: (sqlite3.OperationalError) attempt to write a readonly database
[SQL: INSERT INTO sent_post (post_id, subreddit_name, sent_at) VALUES (?, ?, ?)]
[parameters: ('1gbi6rb', 'wifebutt', '2024-10-30 10:29:21.252033')]
(Background on this error at: https://sqlalche.me/e/20/e3q8)
2024-10-30 05:29:39,016 - DEBUG - send_request_body.failed exception=WriteError(ClosedResourceError())
2024-10-30 05:29:39,017 - DEBUG - response_closed.started
2024-10-30 05:29:39,017 - DEBUG - response_closed.complete
2024-10-30 05:29:39,018 - DEBUG - This Application is already shut down. Returning.
2024-10-30 05:29:39,019 - ERROR - Failed to send video to Telegram: httpx.WriteError: 
2024-10-30 05:29:39,020 - ERROR - Error sending video post 1gelyz1: httpx.WriteError: 
2024-10-30 05:29:39,020 - INFO - Checking post: 1gejrnl - Score: 2585 - URL: https://v3.redgifs.com/watch/graydefensivepika
2024-10-30 05:29:39,027 - INFO - Request URL: 'https://cosmossnoogram-centralus.documents.azure.com:443/dbs/ToDoList/colls/sent_posts/docs/'
Request method: 'POST'
Request headers:
    'Cache-Control': 'no-cache'
    'x-ms-version': 'REDACTED'
    'x-ms-documentdb-query-iscontinuationexpected': 'REDACTED'
    'x-ms-consistency-level': 'REDACTED'
    'x-ms-documentdb-isquery': 'REDACTED'
    'Content-Type': 'application/query+json'
    'x-ms-session-token': 'REDACTED'
    'x-ms-documentdb-query-enablecrosspartition': 'REDACTED'
    'x-ms-date': 'REDACTED'
    'authorization': 'REDACTED'
    'Accept': 'application/json'
    'x-ms-cosmos-correlated-activityid': 'REDACTED'
    'Content-Length': '107'
    'User-Agent': 'azsdk-python-cosmos/4.5.1 Python/3.12.4 (macOS-15.0.1-arm64-arm-64bit)'
A body is sent with the request
2024-10-30 05:29:39,060 - DEBUG - https://cosmossnoogram-centralus.documents.azure.com:443 "POST /dbs/ToDoList/colls/sent_posts/docs/ HTTP/11" 200 None
2024-10-30 05:29:39,061 - INFO - Response status: 200
Response headers:
    'Cache-Control': 'no-store, no-cache'
    'Pragma': 'no-cache'
    'Transfer-Encoding': 'chunked'
    'Content-Type': 'application/json'
    'Server': 'Microsoft-HTTPAPI/2.0'
    'Strict-Transport-Security': 'REDACTED'
    'x-ms-activity-id': 'REDACTED'
    'x-ms-last-state-change-utc': 'REDACTED'
    'x-ms-resource-quota': 'REDACTED'
    'x-ms-resource-usage': 'REDACTED'
    'x-ms-schemaversion': 'REDACTED'
    'lsn': 'REDACTED'
    'x-ms-item-count': 'REDACTED'
    'x-ms-request-charge': 'REDACTED'
    'x-ms-alt-content-path': 'REDACTED'
    'x-ms-content-path': 'REDACTED'
    'x-ms-documentdb-partitionkeyrangeid': 'REDACTED'
    'x-ms-xp-role': 'REDACTED'
    'x-ms-cosmos-query-execution-info': 'REDACTED'
    'x-ms-global-Committed-lsn': 'REDACTED'
    'x-ms-number-of-read-regions': 'REDACTED'
    'x-ms-transport-request-id': 'REDACTED'
    'x-ms-cosmos-llsn': 'REDACTED'
    'x-ms-session-token': 'REDACTED'
    'x-ms-request-duration-ms': 'REDACTED'
    'x-ms-serviceversion': 'REDACTED'
    'x-ms-cosmos-is-partition-key-delete-pending': 'REDACTED'
    'x-ms-cosmos-physical-partition-id': 'REDACTED'
    'x-ms-cosmos-internal-partition-id': 'REDACTED'
    'x-ms-gatewayversion': 'REDACTED'
    'Date': 'Wed, 30 Oct 2024 10:29:39 GMT'
2024-10-30 05:29:39,061 - INFO - Post 1gejrnl is a duplicate, skipping
2024-10-30 05:29:39,061 - INFO - Checking post: 1gelw33 - Score: 2309 - URL: https://www.redgifs.com/watch/drydarkgraysable
2024-10-30 05:29:39,062 - INFO - Post 1gelw33 is a duplicate, skipping
2024-10-30 05:29:39,062 - INFO - Checking post: 1gevvp0 - Score: 1195 - URL: https://www.redgifs.com/watch/medicalplumhen
2024-10-30 05:29:39,062 - INFO - Post 1gevvp0 is a duplicate, skipping
2024-10-30 05:29:39,062 - INFO - Checking post: 1gesoj7 - Score: 752 - URL: https://www.redgifs.com/watch/lightgreytrickydragonfly
2024-10-30 05:29:39,062 - INFO - Post 1gesoj7 is a duplicate, skipping
2024-10-30 05:29:39,062 - INFO - Checking post: 1geuuqp - Score: 440 - URL: https://www.redgifs.com/watch/cheerfulbeigebagworm
2024-10-30 05:29:39,062 - INFO - Post 1geuuqp is a duplicate, skipping
2024-10-30 05:29:39,062 - INFO - Checking post: 1geakrb - Score: 396 - URL: https://www.redgifs.com/watch/illinformedthickgalapagoshawk
2024-10-30 05:29:39,063 - INFO - Post 1geakrb is a duplicate, skipping
2024-10-30 05:29:39,063 - INFO - Checking post: 1gerubz - Score: 364 - URL: https://v3.redgifs.com/watch/trickysquarepseudodynerusquadrisectus
2024-10-30 05:29:39,063 - INFO - Post 1gerubz is a duplicate, skipping
2024-10-30 05:29:39,063 - INFO - Checking post: 1getxhl - Score: 339 - URL: https://www.redgifs.com/watch/purpledemandingboaconstrictor
2024-10-30 05:29:39,063 - INFO - Post 1getxhl is a duplicate, skipping
2024-10-30 05:29:39,063 - INFO - Checking post: 1ge9gol - Score: 277 - URL: https://v3.redgifs.com/watch/circulardeeppinkamericanbulldog
2024-10-30 05:29:39,064 - INFO - Request URL: 'https://cosmossnoogram-centralus.documents.azure.com:443/dbs/ToDoList/colls/sent_posts/docs/'
Request method: 'POST'
Request headers:
    'Cache-Control': 'no-cache'
    'x-ms-version': 'REDACTED'
    'x-ms-documentdb-query-iscontinuationexpected': 'REDACTED'
    'x-ms-consistency-level': 'REDACTED'
    'x-ms-documentdb-isquery': 'REDACTED'
    'Content-Type': 'application/query+json'
    'x-ms-session-token': 'REDACTED'
    'x-ms-documentdb-query-enablecrosspartition': 'REDACTED'
    'x-ms-date': 'REDACTED'
    'authorization': 'REDACTED'
    'Accept': 'application/json'
    'x-ms-cosmos-correlated-activityid': 'REDACTED'
    'Content-Length': '107'
    'User-Agent': 'azsdk-python-cosmos/4.5.1 Python/3.12.4 (macOS-15.0.1-arm64-arm-64bit)'
A body is sent with the request
2024-10-30 05:29:39,110 - DEBUG - https://cosmossnoogram-centralus.documents.azure.com:443 "POST /dbs/ToDoList/colls/sent_posts/docs/ HTTP/11" 200 None
2024-10-30 05:29:39,110 - INFO - Response status: 200
Response headers:
    'Cache-Control': 'no-store, no-cache'
    'Pragma': 'no-cache'
    'Transfer-Encoding': 'chunked'
    'Content-Type': 'application/json'
    'Server': 'Microsoft-HTTPAPI/2.0'
    'Strict-Transport-Security': 'REDACTED'
    'x-ms-activity-id': 'REDACTED'
    'x-ms-last-state-change-utc': 'REDACTED'
    'x-ms-resource-quota': 'REDACTED'
    'x-ms-resource-usage': 'REDACTED'
    'x-ms-schemaversion': 'REDACTED'
    'lsn': 'REDACTED'
    'x-ms-item-count': 'REDACTED'
    'x-ms-request-charge': 'REDACTED'
    'x-ms-alt-content-path': 'REDACTED'
    'x-ms-content-path': 'REDACTED'
    'x-ms-documentdb-partitionkeyrangeid': 'REDACTED'
    'x-ms-xp-role': 'REDACTED'
    'x-ms-cosmos-query-execution-info': 'REDACTED'
    'x-ms-global-Committed-lsn': 'REDACTED'
    'x-ms-number-of-read-regions': 'REDACTED'
    'x-ms-transport-request-id': 'REDACTED'
    'x-ms-cosmos-llsn': 'REDACTED'
    'x-ms-session-token': 'REDACTED'
    'x-ms-request-duration-ms': 'REDACTED'
    'x-ms-serviceversion': 'REDACTED'
    'x-ms-cosmos-is-partition-key-delete-pending': 'REDACTED'
    'x-ms-cosmos-physical-partition-id': 'REDACTED'
    'x-ms-cosmos-internal-partition-id': 'REDACTED'
    'x-ms-gatewayversion': 'REDACTED'
    'Date': 'Wed, 30 Oct 2024 10:29:39 GMT'
2024-10-30 05:29:39,110 - INFO - Found video post: 1ge9gol
2024-10-30 05:29:39,111 - DEBUG - Starting new HTTPS connection (1): api.redgifs.com:443
2024-10-30 05:29:39,212 - DEBUG - https://api.redgifs.com:443 "GET /v2/gifs/circulardeeppinkamericanbulldog HTTP/11" 200 None
2024-10-30 05:29:39,216 - DEBUG - Starting new HTTPS connection (1): files.redgifs.com:443
2024-10-30 05:29:39,291 - DEBUG - https://files.redgifs.com:443 "GET /CircularDeeppinkAmericanbulldog.mp4 HTTP/11" 200 61415883
2024-10-30 05:29:40,994 - INFO - Successfully downloaded media to downloads/videos/1ge9gol_20241030_052939_fff8ab71.mp4
2024-10-30 05:29:40,996 - DEBUG - Using selector: KqueueSelector
2024-10-30 05:29:40,997 - INFO - Attempting to send video to Telegram - Path: downloads/videos/1ge9gol_20241030_052939_fff8ab71.mp4
2024-10-30 05:29:40,998 - DEBUG - load_ssl_context verify=True cert=None trust_env=True http2=False
2024-10-30 05:29:40,999 - DEBUG - load_verify_locations cafile='/Users/joewilson/PythonProjects/Snoogram/venv/lib/python3.12/site-packages/certifi/cacert.pem'
2024-10-30 05:29:41,019 - DEBUG - load_ssl_context verify=True cert=None trust_env=True http2=False
2024-10-30 05:29:41,020 - DEBUG - load_verify_locations cafile='/Users/joewilson/PythonProjects/Snoogram/venv/lib/python3.12/site-packages/certifi/cacert.pem'
2024-10-30 05:29:41,026 - DEBUG - Entering: get_me
2024-10-30 05:29:41,027 - DEBUG - connect_tcp.started host='api.telegram.org' port=443 local_address=None timeout=5.0 socket_options=None
2024-10-30 05:29:41,150 - DEBUG - connect_tcp.complete return_value=<httpcore._backends.anyio.AnyIOStream object at 0x108d7a4b0>
2024-10-30 05:29:41,150 - DEBUG - start_tls.started ssl_context=<ssl.SSLContext object at 0x108ed5dd0> server_hostname='api.telegram.org' timeout=5.0
2024-10-30 05:29:41,283 - DEBUG - start_tls.complete return_value=<httpcore._backends.anyio.AnyIOStream object at 0x108d7bad0>
2024-10-30 05:29:41,284 - DEBUG - send_request_headers.started request=<Request [b'POST']>
2024-10-30 05:29:41,284 - DEBUG - send_request_headers.complete
2024-10-30 05:29:41,284 - DEBUG - send_request_body.started request=<Request [b'POST']>
2024-10-30 05:29:41,284 - DEBUG - send_request_body.complete
2024-10-30 05:29:41,284 - DEBUG - receive_response_headers.started request=<Request [b'POST']>
2024-10-30 05:29:41,406 - DEBUG - receive_response_headers.complete return_value=(b'HTTP/1.1', 200, b'OK', [(b'Server', b'nginx/1.18.0'), (b'Date', b'Wed, 30 Oct 2024 10:29:41 GMT'), (b'Content-Type', b'application/json'), (b'Content-Length', b'254'), (b'Connection', b'keep-alive'), (b'Strict-Transport-Security', b'max-age=31536000; includeSubDomains; preload'), (b'Access-Control-Allow-Origin', b'*'), (b'Access-Control-Allow-Methods', b'GET, POST, OPTIONS'), (b'Access-Control-Expose-Headers', b'Content-Length,Content-Type,Date,Server,Connection')])
2024-10-30 05:29:41,407 - INFO - HTTP Request: POST https://api.telegram.org/bot7867694458:AAEFLZjWPyd1p640mHENnBt479WRYfSavWg/getMe "HTTP/1.1 200 OK"
2024-10-30 05:29:41,407 - DEBUG - receive_response_body.started request=<Request [b'POST']>
2024-10-30 05:29:41,407 - DEBUG - receive_response_body.complete
2024-10-30 05:29:41,407 - DEBUG - response_closed.started
2024-10-30 05:29:41,407 - DEBUG - response_closed.complete
2024-10-30 05:29:41,407 - DEBUG - User(api_kwargs={'can_connect_to_business': False, 'has_main_web_app': False}, can_join_groups=True, can_read_all_group_messages=False, first_name='RedditBot', id=7867694458, is_bot=True, supports_inline_queries=False, username='RedditImage_bot')
2024-10-30 05:29:41,408 - DEBUG - Exiting: get_me
2024-10-30 05:29:41,408 - DEBUG - This Bot is already initialized.
2024-10-30 05:29:41,408 - DEBUG - Entering: send_video
2024-10-30 05:29:41,446 - DEBUG - send_request_headers.started request=<Request [b'POST']>
2024-10-30 05:29:41,447 - DEBUG - send_request_headers.complete
2024-10-30 05:29:41,447 - DEBUG - send_request_body.started request=<Request [b'POST']>
2024-10-30 05:29:46,262 - DEBUG - send_request_body.complete
2024-10-30 05:29:46,263 - DEBUG - receive_response_headers.started request=<Request [b'POST']>
2024-10-30 05:29:46,263 - DEBUG - receive_response_headers.complete return_value=(b'HTTP/1.1', 413, b'Request Entity Too Large', [(b'Server', b'nginx/1.18.0'), (b'Date', b'Wed, 30 Oct 2024 10:29:41 GMT'), (b'Content-Type', b'application/json'), (b'Content-Length', b'70'), (b'Connection', b'close'), (b'Strict-Transport-Security', b'max-age=31536000; includeSubDomains; preload'), (b'Access-Control-Allow-Origin', b'*'), (b'Access-Control-Expose-Headers', b'Content-Length,Content-Type,Date,Server,Connection')])
2024-10-30 05:29:46,264 - INFO - HTTP Request: POST https://api.telegram.org/bot7867694458:AAEFLZjWPyd1p640mHENnBt479WRYfSavWg/sendVideo "HTTP/1.1 413 Request Entity Too Large"
2024-10-30 05:29:46,264 - DEBUG - receive_response_body.started request=<Request [b'POST']>
2024-10-30 05:29:46,264 - DEBUG - receive_response_body.complete
2024-10-30 05:29:46,265 - DEBUG - response_closed.started
2024-10-30 05:29:46,265 - DEBUG - response_closed.complete
2024-10-30 05:29:46,265 - DEBUG - This Bot is already shut down. Returning.
2024-10-30 05:29:46,265 - DEBUG - Shut down of Updater complete
2024-10-30 05:29:46,265 - ERROR - Failed to send video to Telegram: Request Entity Too Large (413)
2024-10-30 05:29:46,266 - ERROR - Error sending video post 1ge9gol: Request Entity Too Large (413)
2024-10-30 05:29:46,266 - INFO - Checking post: 1ge98kx - Score: 257 - URL: https://www.redgifs.com/watch/frontspecificspittlebug
2024-10-30 05:29:46,270 - INFO - Post 1ge98kx is a duplicate, skipping
2024-10-30 05:29:46,270 - INFO - Checking post: 1geqscs - Score: 243 - URL: https://www.redgifs.com/watch/previousweequeensnake
2024-10-30 05:29:46,271 - INFO - Request URL: 'https://cosmossnoogram-centralus.documents.azure.com:443/dbs/ToDoList/colls/sent_posts/docs/'
Request method: 'POST'
Request headers:
    'Cache-Control': 'no-cache'
    'x-ms-version': 'REDACTED'
    'x-ms-documentdb-query-iscontinuationexpected': 'REDACTED'
    'x-ms-consistency-level': 'REDACTED'
    'x-ms-documentdb-isquery': 'REDACTED'
    'Content-Type': 'application/query+json'
    'x-ms-session-token': 'REDACTED'
    'x-ms-documentdb-query-enablecrosspartition': 'REDACTED'
    'x-ms-date': 'REDACTED'
    'authorization': 'REDACTED'
    'Accept': 'application/json'
    'x-ms-cosmos-correlated-activityid': 'REDACTED'
    'Content-Length': '107'
    'User-Agent': 'azsdk-python-cosmos/4.5.1 Python/3.12.4 (macOS-15.0.1-arm64-arm-64bit)'
A body is sent with the request
2024-10-30 05:29:46,368 - DEBUG - https://cosmossnoogram-centralus.documents.azure.com:443 "POST /dbs/ToDoList/colls/sent_posts/docs/ HTTP/11" 200 None
2024-10-30 05:29:46,377 - INFO - Response status: 200
Response headers:
    'Cache-Control': 'no-store, no-cache'
    'Pragma': 'no-cache'
    'Transfer-Encoding': 'chunked'
    'Content-Type': 'application/json'
    'Server': 'Microsoft-HTTPAPI/2.0'
    'Strict-Transport-Security': 'REDACTED'
    'x-ms-activity-id': 'REDACTED'
    'x-ms-last-state-change-utc': 'REDACTED'
    'x-ms-resource-quota': 'REDACTED'
    'x-ms-resource-usage': 'REDACTED'
    'x-ms-schemaversion': 'REDACTED'
    'lsn': 'REDACTED'
    'x-ms-item-count': 'REDACTED'
    'x-ms-request-charge': 'REDACTED'
    'x-ms-alt-content-path': 'REDACTED'
    'x-ms-content-path': 'REDACTED'
    'x-ms-documentdb-partitionkeyrangeid': 'REDACTED'
    'x-ms-xp-role': 'REDACTED'
    'x-ms-cosmos-query-execution-info': 'REDACTED'
    'x-ms-global-Committed-lsn': 'REDACTED'
    'x-ms-number-of-read-regions': 'REDACTED'
    'x-ms-transport-request-id': 'REDACTED'
    'x-ms-cosmos-llsn': 'REDACTED'
    'x-ms-session-token': 'REDACTED'
    'x-ms-request-duration-ms': 'REDACTED'
    'x-ms-serviceversion': 'REDACTED'
    'x-ms-cosmos-is-partition-key-delete-pending': 'REDACTED'
    'x-ms-cosmos-physical-partition-id': 'REDACTED'
    'x-ms-cosmos-internal-partition-id': 'REDACTED'
    'x-ms-gatewayversion': 'REDACTED'
    'Date': 'Wed, 30 Oct 2024 10:29:45 GMT'
2024-10-30 05:29:46,377 - INFO - Found video post: 1geqscs
2024-10-30 05:29:46,378 - DEBUG - Starting new HTTPS connection (1): api.redgifs.com:443
2024-10-30 05:29:46,489 - DEBUG - https://api.redgifs.com:443 "GET /v2/gifs/previousweequeensnake HTTP/11" 200 None
2024-10-30 05:29:46,492 - DEBUG - Starting new HTTPS connection (1): files.redgifs.com:443
2024-10-30 05:29:46,562 - DEBUG - https://files.redgifs.com:443 "GET /PreviousWeeQueensnake.mp4 HTTP/11" 200 50070206
2024-10-30 05:29:47,714 - INFO - Successfully downloaded media to downloads/videos/1geqscs_20241030_052946_2fd81a4e.mp4
2024-10-30 05:29:47,716 - DEBUG - Using selector: KqueueSelector
2024-10-30 05:29:47,716 - INFO - Attempting to send video to Telegram - Path: downloads/videos/1geqscs_20241030_052946_2fd81a4e.mp4
2024-10-30 05:29:47,716 - DEBUG - load_ssl_context verify=True cert=None trust_env=True http2=False
2024-10-30 05:29:47,717 - DEBUG - load_verify_locations cafile='/Users/joewilson/PythonProjects/Snoogram/venv/lib/python3.12/site-packages/certifi/cacert.pem'
2024-10-30 05:29:47,726 - DEBUG - load_ssl_context verify=True cert=None trust_env=True http2=False
2024-10-30 05:29:47,726 - DEBUG - load_verify_locations cafile='/Users/joewilson/PythonProjects/Snoogram/venv/lib/python3.12/site-packages/certifi/cacert.pem'
2024-10-30 05:29:47,732 - DEBUG - Entering: get_me
2024-10-30 05:29:47,733 - DEBUG - connect_tcp.started host='api.telegram.org' port=443 local_address=None timeout=5.0 socket_options=None
2024-10-30 05:29:47,857 - DEBUG - connect_tcp.complete return_value=<httpcore._backends.anyio.AnyIOStream object at 0x108d9c830>
2024-10-30 05:29:47,857 - DEBUG - start_tls.started ssl_context=<ssl.SSLContext object at 0x108cdd850> server_hostname='api.telegram.org' timeout=5.0
2024-10-30 05:29:47,991 - DEBUG - start_tls.complete return_value=<httpcore._backends.anyio.AnyIOStream object at 0x108f2be90>
2024-10-30 05:29:47,991 - DEBUG - send_request_headers.started request=<Request [b'POST']>
2024-10-30 05:29:47,992 - DEBUG - send_request_headers.complete
2024-10-30 05:29:47,992 - DEBUG - send_request_body.started request=<Request [b'POST']>
2024-10-30 05:29:47,992 - DEBUG - send_request_body.complete
2024-10-30 05:29:47,992 - DEBUG - receive_response_headers.started request=<Request [b'POST']>
2024-10-30 05:29:48,110 - DEBUG - receive_response_headers.complete return_value=(b'HTTP/1.1', 200, b'OK', [(b'Server', b'nginx/1.18.0'), (b'Date', b'Wed, 30 Oct 2024 10:29:48 GMT'), (b'Content-Type', b'application/json'), (b'Content-Length', b'254'), (b'Connection', b'keep-alive'), (b'Strict-Transport-Security', b'max-age=31536000; includeSubDomains; preload'), (b'Access-Control-Allow-Origin', b'*'), (b'Access-Control-Allow-Methods', b'GET, POST, OPTIONS'), (b'Access-Control-Expose-Headers', b'Content-Length,Content-Type,Date,Server,Connection')])
2024-10-30 05:29:48,110 - INFO - HTTP Request: POST https://api.telegram.org/bot7867694458:AAEFLZjWPyd1p640mHENnBt479WRYfSavWg/getMe "HTTP/1.1 200 OK"
2024-10-30 05:29:48,111 - DEBUG - receive_response_body.started request=<Request [b'POST']>
2024-10-30 05:29:48,111 - DEBUG - receive_response_body.complete
2024-10-30 05:29:48,111 - DEBUG - response_closed.started
2024-10-30 05:29:48,111 - DEBUG - response_closed.complete
2024-10-30 05:29:48,111 - DEBUG - User(api_kwargs={'can_connect_to_business': False, 'has_main_web_app': False}, can_join_groups=True, can_read_all_group_messages=False, first_name='RedditBot', id=7867694458, is_bot=True, supports_inline_queries=False, username='RedditImage_bot')
2024-10-30 05:29:48,111 - DEBUG - Exiting: get_me
2024-10-30 05:29:48,111 - DEBUG - This Bot is already initialized.
2024-10-30 05:29:48,111 - DEBUG - Entering: send_video
2024-10-30 05:29:48,160 - DEBUG - send_request_headers.started request=<Request [b'POST']>
2024-10-30 05:29:48,160 - DEBUG - send_request_headers.complete
2024-10-30 05:29:48,160 - DEBUG - send_request_body.started request=<Request [b'POST']>
2024-10-30 05:29:51,783 - DEBUG - send_request_body.complete
2024-10-30 05:29:51,783 - DEBUG - receive_response_headers.started request=<Request [b'POST']>
2024-10-30 05:29:54,738 - DEBUG - receive_response_headers.complete return_value=(b'HTTP/1.1', 200, b'OK', [(b'Server', b'nginx/1.18.0'), (b'Date', b'Wed, 30 Oct 2024 10:29:54 GMT'), (b'Content-Type', b'application/json'), (b'Content-Length', b'600'), (b'Connection', b'keep-alive'), (b'Strict-Transport-Security', b'max-age=31536000; includeSubDomains; preload'), (b'Access-Control-Allow-Origin', b'*'), (b'Access-Control-Allow-Methods', b'GET, POST, OPTIONS'), (b'Access-Control-Expose-Headers', b'Content-Length,Content-Type,Date,Server,Connection')])
2024-10-30 05:29:54,738 - INFO - HTTP Request: POST https://api.telegram.org/bot7867694458:AAEFLZjWPyd1p640mHENnBt479WRYfSavWg/sendVideo "HTTP/1.1 200 OK"
2024-10-30 05:29:54,738 - DEBUG - receive_response_body.started request=<Request [b'POST']>
2024-10-30 05:29:54,738 - DEBUG - receive_response_body.complete
2024-10-30 05:29:54,738 - DEBUG - response_closed.started
2024-10-30 05:29:54,738 - DEBUG - response_closed.complete
2024-10-30 05:29:54,739 - DEBUG - Message(caption='From r/girlsfinishingthejob: I love when he covers my titties with his hot cum ðŸ¥°\nUpvotes: 243', channel_chat_created=False, chat=Chat(id=-1002490380283, title='Reddit_Pic_Stream', type=<ChatType.CHANNEL>), date=datetime.datetime(2024, 10, 30, 10, 29, 54, tzinfo=<UTC>), delete_chat_photo=False, group_chat_created=False, message_id=250, sender_chat=Chat(id=-1002490380283, title='Reddit_Pic_Stream', type=<ChatType.CHANNEL>), supergroup_chat_created=False, video=Video(duration=0, file_id='BAACAgEAAyEGAASUcC_7AAP6ZyIKothSO2-zD4BO7ed-L_o9isEAAroEAAIZEBFFkSuryAsU4Gk2BA', file_name='1geqscs_20241030_052946_2fd81a4e.mp4', file_size=50070206, file_unique_id='AgADugQAAhkQEUU', height=320, mime_type='video/mp4', width=320))
2024-10-30 05:29:54,740 - DEBUG - Exiting: send_video
2024-10-30 05:29:54,740 - DEBUG - close.started
2024-10-30 05:29:54,740 - DEBUG - close.complete
2024-10-30 05:29:54,740 - DEBUG - This Bot is already shut down. Returning.
2024-10-30 05:29:54,740 - DEBUG - Shut down of Updater complete
2024-10-30 05:29:54,740 - INFO - Successfully sent video to Telegram
2024-10-30 05:29:54,742 - ERROR - Error processing subreddit girlsfinishingthejob: (sqlite3.OperationalError) attempt to write a readonly database
[SQL: INSERT INTO sent_post (post_id, subreddit_name, sent_at) VALUES (?, ?, ?)]
[parameters: ('1geqscs', 'girlsfinishingthejob', '2024-10-30 10:29:54.741729')]
(Background on this error at: https://sqlalche.me/e/20/e3q8)
2024-10-30 05:29:54,745 - ERROR - Job "send_to_telegram (trigger: interval[0:01:00], next run at: 2024-10-30 05:30:16 CDT)" raised an exception
Traceback (most recent call last):
  File "/Users/joewilson/PythonProjects/Snoogram/venv/lib/python3.12/site-packages/sqlalchemy/engine/base.py", line 1967, in _exec_single_context
    self.dialect.do_execute(
  File "/Users/joewilson/PythonProjects/Snoogram/venv/lib/python3.12/site-packages/sqlalchemy/engine/default.py", line 941, in do_execute
    cursor.execute(statement, parameters)
sqlite3.OperationalError: attempt to write a readonly database

The above exception was the direct cause of the following exception:

Traceback (most recent call last):
  File "/Users/joewilson/PythonProjects/Snoogram/venv/lib/python3.12/site-packages/apscheduler/executors/base.py", line 125, in run_job
    retval = job.func(*job.args, **job.kwargs)
             ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/Users/joewilson/PythonProjects/Snoogram/backend/app.py", line 265, in send_to_telegram
    # Update last_check in Cosmos DB
                ^^^^^^^^^^^^^^^^^^^^^
  File "/Users/joewilson/PythonProjects/Snoogram/backend/db_operations.py", line 100, in add_sent_post
  File "/Users/joewilson/PythonProjects/Snoogram/venv/lib/python3.12/site-packages/sqlalchemy/orm/scoping.py", line 597, in commit
    return self._proxied.commit()
           ^^^^^^^^^^^^^^^^^^^^^^
  File "/Users/joewilson/PythonProjects/Snoogram/venv/lib/python3.12/site-packages/sqlalchemy/orm/session.py", line 2028, in commit
    trans.commit(_to_root=True)
  File "<string>", line 2, in commit
  File "/Users/joewilson/PythonProjects/Snoogram/venv/lib/python3.12/site-packages/sqlalchemy/orm/state_changes.py", line 139, in _go
    ret_value = fn(self, *arg, **kw)
                ^^^^^^^^^^^^^^^^^^^^
  File "/Users/joewilson/PythonProjects/Snoogram/venv/lib/python3.12/site-packages/sqlalchemy/orm/session.py", line 1313, in commit
    self._prepare_impl()
  File "<string>", line 2, in _prepare_impl
  File "/Users/joewilson/PythonProjects/Snoogram/venv/lib/python3.12/site-packages/sqlalchemy/orm/state_changes.py", line 139, in _go
    ret_value = fn(self, *arg, **kw)
                ^^^^^^^^^^^^^^^^^^^^
  File "/Users/joewilson/PythonProjects/Snoogram/venv/lib/python3.12/site-packages/sqlalchemy/orm/session.py", line 1288, in _prepare_impl
    self.session.flush()
  File "/Users/joewilson/PythonProjects/Snoogram/venv/lib/python3.12/site-packages/sqlalchemy/orm/session.py", line 4352, in flush
    self._flush(objects)
  File "/Users/joewilson/PythonProjects/Snoogram/venv/lib/python3.12/site-packages/sqlalchemy/orm/session.py", line 4487, in _flush
    with util.safe_reraise():
  File "/Users/joewilson/PythonProjects/Snoogram/venv/lib/python3.12/site-packages/sqlalchemy/util/langhelpers.py", line 146, in __exit__
    raise exc_value.with_traceback(exc_tb)
  File "/Users/joewilson/PythonProjects/Snoogram/venv/lib/python3.12/site-packages/sqlalchemy/orm/session.py", line 4448, in _flush
    flush_context.execute()
  File "/Users/joewilson/PythonProjects/Snoogram/venv/lib/python3.12/site-packages/sqlalchemy/orm/unitofwork.py", line 466, in execute
    rec.execute(self)
  File "/Users/joewilson/PythonProjects/Snoogram/venv/lib/python3.12/site-packages/sqlalchemy/orm/unitofwork.py", line 642, in execute
    util.preloaded.orm_persistence.save_obj(
  File "/Users/joewilson/PythonProjects/Snoogram/venv/lib/python3.12/site-packages/sqlalchemy/orm/persistence.py", line 93, in save_obj
    _emit_insert_statements(
  File "/Users/joewilson/PythonProjects/Snoogram/venv/lib/python3.12/site-packages/sqlalchemy/orm/persistence.py", line 1233, in _emit_insert_statements
    result = connection.execute(
             ^^^^^^^^^^^^^^^^^^^
  File "/Users/joewilson/PythonProjects/Snoogram/venv/lib/python3.12/site-packages/sqlalchemy/engine/base.py", line 1418, in execute
    return meth(
           ^^^^^
  File "/Users/joewilson/PythonProjects/Snoogram/venv/lib/python3.12/site-packages/sqlalchemy/sql/elements.py", line 515, in _execute_on_connection
    return connection._execute_clauseelement(
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/Users/joewilson/PythonProjects/Snoogram/venv/lib/python3.12/site-packages/sqlalchemy/engine/base.py", line 1640, in _execute_clauseelement
    ret = self._execute_context(
          ^^^^^^^^^^^^^^^^^^^^^^
  File "/Users/joewilson/PythonProjects/Snoogram/venv/lib/python3.12/site-packages/sqlalchemy/engine/base.py", line 1846, in _execute_context
    return self._exec_single_context(
           ^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/Users/joewilson/PythonProjects/Snoogram/venv/lib/python3.12/site-packages/sqlalchemy/engine/base.py", line 1986, in _exec_single_context
    self._handle_dbapi_exception(
  File "/Users/joewilson/PythonProjects/Snoogram/venv/lib/python3.12/site-packages/sqlalchemy/engine/base.py", line 2355, in _handle_dbapi_exception
    raise sqlalchemy_exception.with_traceback(exc_info[2]) from e
  File "/Users/joewilson/PythonProjects/Snoogram/venv/lib/python3.12/site-packages/sqlalchemy/engine/base.py", line 1967, in _exec_single_context
    self.dialect.do_execute(
  File "/Users/joewilson/PythonProjects/Snoogram/venv/lib/python3.12/site-packages/sqlalchemy/engine/default.py", line 941, in do_execute
    cursor.execute(statement, parameters)
sqlalchemy.exc.OperationalError: (sqlite3.OperationalError) attempt to write a readonly database
[SQL: INSERT INTO sent_post (post_id, subreddit_name, sent_at) VALUES (?, ?, ?)]
[parameters: ('1geqscs', 'girlsfinishingthejob', '2024-10-30 10:29:54.741729')]
(Background on this error at: https://sqlalche.me/e/20/e3q8)
2024-10-30 05:30:16,957 - DEBUG - Looking for jobs to run
2024-10-30 05:30:16,959 - DEBUG - Next wakeup is due at 2024-10-30 05:30:16.969826-05:00 (in 0.010045 seconds)
2024-10-30 05:30:16,970 - DEBUG - Looking for jobs to run
2024-10-30 05:30:16,971 - DEBUG - Next wakeup is due at 2024-10-30 05:31:16.969826-05:00 (in 59.998475 seconds)
2024-10-30 05:30:16,971 - INFO - Running job "send_to_telegram (trigger: interval[0:01:00], next run at: 2024-10-30 05:31:16 CDT)" (scheduled at 2024-10-30 05:30:16.969826-05:00)
2024-10-30 05:30:16,971 - INFO - Running job "send_to_telegram (trigger: interval[0:01:00], next run at: 2024-10-30 05:31:16 CDT)" (scheduled at 2024-10-30 05:30:16.970029-05:00)
2024-10-30 05:30:16,972 - INFO - Processing subreddit: girlsfinishingthejob
2024-10-30 05:30:16,972 - INFO - Processing subreddit: wifebutt
2024-10-30 05:30:16,972 - INFO - Fetching top posts of the day
2024-10-30 05:30:16,972 - INFO - Fetching top posts of the month
2024-10-30 05:30:16,973 - DEBUG - Fetching: GET https://oauth.reddit.com/r/girlsfinishingthejob/top at 1730284216.9737852
2024-10-30 05:30:16,973 - DEBUG - Fetching: GET https://oauth.reddit.com/r/wifebutt/top at 1730284216.97393
2024-10-30 05:30:16,974 - DEBUG - Data: None
2024-10-30 05:30:16,974 - DEBUG - Data: None
2024-10-30 05:30:16,974 - DEBUG - Params: {'limit': 50, 'raw_json': 1, 't': 'day'}
2024-10-30 05:30:16,974 - DEBUG - Params: {'limit': 50, 'raw_json': 1, 't': 'month'}
2024-10-30 05:30:17,350 - DEBUG - https://oauth.reddit.com:443 "GET /r/girlsfinishingthejob/top?t=day&limit=50&raw_json=1 HTTP/11" 200 24070
2024-10-30 05:30:17,353 - DEBUG - Response: 200 (24070 bytes) (rst-0:rem-148.0:used-2 ratelimit) at 1730284217.353205
2024-10-30 05:30:17,421 - INFO - Checking post: 1gelyz1 - Score: 7115 - URL: https://www.redgifs.com/watch/uttersvelteamphibian
2024-10-30 05:30:17,426 - INFO - Request URL: 'https://cosmossnoogram-centralus.documents.azure.com:443/dbs/ToDoList/colls/sent_posts/docs/'
Request method: 'POST'
Request headers:
    'Cache-Control': 'no-cache'
    'x-ms-version': 'REDACTED'
    'x-ms-documentdb-query-iscontinuationexpected': 'REDACTED'
    'x-ms-consistency-level': 'REDACTED'
    'x-ms-documentdb-isquery': 'REDACTED'
    'Content-Type': 'application/query+json'
    'x-ms-session-token': 'REDACTED'
    'x-ms-documentdb-query-enablecrosspartition': 'REDACTED'
    'x-ms-date': 'REDACTED'
    'authorization': 'REDACTED'
    'Accept': 'application/json'
    'x-ms-cosmos-correlated-activityid': 'REDACTED'
    'Content-Length': '107'
    'User-Agent': 'azsdk-python-cosmos/4.5.1 Python/3.12.4 (macOS-15.0.1-arm64-arm-64bit)'
A body is sent with the request
2024-10-30 05:30:17,458 - DEBUG - https://cosmossnoogram-centralus.documents.azure.com:443 "POST /dbs/ToDoList/colls/sent_posts/docs/ HTTP/11" 200 None
2024-10-30 05:30:17,458 - INFO - Response status: 200
Response headers:
    'Cache-Control': 'no-store, no-cache'
    'Pragma': 'no-cache'
    'Transfer-Encoding': 'chunked'
    'Content-Type': 'application/json'
    'Server': 'Microsoft-HTTPAPI/2.0'
    'Strict-Transport-Security': 'REDACTED'
    'x-ms-activity-id': 'REDACTED'
    'x-ms-last-state-change-utc': 'REDACTED'
    'x-ms-resource-quota': 'REDACTED'
    'x-ms-resource-usage': 'REDACTED'
    'x-ms-schemaversion': 'REDACTED'
    'lsn': 'REDACTED'
    'x-ms-item-count': 'REDACTED'
    'x-ms-request-charge': 'REDACTED'
    'x-ms-alt-content-path': 'REDACTED'
    'x-ms-content-path': 'REDACTED'
    'x-ms-documentdb-partitionkeyrangeid': 'REDACTED'
    'x-ms-xp-role': 'REDACTED'
    'x-ms-cosmos-query-execution-info': 'REDACTED'
    'x-ms-global-Committed-lsn': 'REDACTED'
    'x-ms-number-of-read-regions': 'REDACTED'
    'x-ms-transport-request-id': 'REDACTED'
    'x-ms-cosmos-llsn': 'REDACTED'
    'x-ms-session-token': 'REDACTED'
    'x-ms-request-duration-ms': 'REDACTED'
    'x-ms-serviceversion': 'REDACTED'
    'x-ms-cosmos-is-partition-key-delete-pending': 'REDACTED'
    'x-ms-cosmos-physical-partition-id': 'REDACTED'
    'x-ms-cosmos-internal-partition-id': 'REDACTED'
    'x-ms-gatewayversion': 'REDACTED'
    'Date': 'Wed, 30 Oct 2024 10:30:16 GMT'
2024-10-30 05:30:17,458 - INFO - Found video post: 1gelyz1
2024-10-30 05:30:17,459 - DEBUG - Starting new HTTPS connection (1): api.redgifs.com:443
2024-10-30 05:30:17,570 - DEBUG - https://api.redgifs.com:443 "GET /v2/gifs/uttersvelteamphibian HTTP/11" 200 None
2024-10-30 05:30:17,573 - DEBUG - Starting new HTTPS connection (1): files.redgifs.com:443
2024-10-30 05:30:17,645 - DEBUG - https://files.redgifs.com:443 "GET /UtterSvelteAmphibian.mp4 HTTP/11" 200 42980012
2024-10-30 05:30:17,781 - DEBUG - https://oauth.reddit.com:443 "GET /r/wifebutt/top?t=month&limit=50&raw_json=1 HTTP/11" 200 49232
2024-10-30 05:30:17,809 - DEBUG - Response: 200 (49232 bytes) (rst-0:rem-147.0:used-3 ratelimit) at 1730284217.809002
2024-10-30 05:30:17,814 - INFO - Checking post: 1g9w053 - Score: 5361 - URL: https://www.reddit.com/gallery/1g9w053
2024-10-30 05:30:17,816 - INFO - Request URL: 'https://cosmossnoogram-centralus.documents.azure.com:443/dbs/ToDoList/colls/sent_posts/docs/'
Request method: 'POST'
Request headers:
    'Cache-Control': 'no-cache'
    'x-ms-version': 'REDACTED'
    'x-ms-documentdb-query-iscontinuationexpected': 'REDACTED'
    'x-ms-consistency-level': 'REDACTED'
    'x-ms-documentdb-isquery': 'REDACTED'
    'Content-Type': 'application/query+json'
    'x-ms-session-token': 'REDACTED'
    'x-ms-documentdb-query-enablecrosspartition': 'REDACTED'
    'x-ms-date': 'REDACTED'
    'authorization': 'REDACTED'
    'Accept': 'application/json'
    'x-ms-cosmos-correlated-activityid': 'REDACTED'
    'Content-Length': '107'
    'User-Agent': 'azsdk-python-cosmos/4.5.1 Python/3.12.4 (macOS-15.0.1-arm64-arm-64bit)'
A body is sent with the request
2024-10-30 05:30:17,865 - DEBUG - https://cosmossnoogram-centralus.documents.azure.com:443 "POST /dbs/ToDoList/colls/sent_posts/docs/ HTTP/11" 200 None
2024-10-30 05:30:17,866 - INFO - Response status: 200
Response headers:
    'Cache-Control': 'no-store, no-cache'
    'Pragma': 'no-cache'
    'Transfer-Encoding': 'chunked'
    'Content-Type': 'application/json'
    'Server': 'Microsoft-HTTPAPI/2.0'
    'Strict-Transport-Security': 'REDACTED'
    'x-ms-activity-id': 'REDACTED'
    'x-ms-last-state-change-utc': 'REDACTED'
    'x-ms-resource-quota': 'REDACTED'
    'x-ms-resource-usage': 'REDACTED'
    'x-ms-schemaversion': 'REDACTED'
    'lsn': 'REDACTED'
    'x-ms-item-count': 'REDACTED'
    'x-ms-request-charge': 'REDACTED'
    'x-ms-alt-content-path': 'REDACTED'
    'x-ms-content-path': 'REDACTED'
    'x-ms-quorum-acked-lsn': 'REDACTED'
    'x-ms-current-write-quorum': 'REDACTED'
    'x-ms-current-replica-set-size': 'REDACTED'
    'x-ms-documentdb-partitionkeyrangeid': 'REDACTED'
    'x-ms-xp-role': 'REDACTED'
    'x-ms-cosmos-query-execution-info': 'REDACTED'
    'x-ms-global-Committed-lsn': 'REDACTED'
    'x-ms-number-of-read-regions': 'REDACTED'
    'x-ms-transport-request-id': 'REDACTED'
    'x-ms-cosmos-llsn': 'REDACTED'
    'x-ms-cosmos-quorum-acked-llsn': 'REDACTED'
    'x-ms-session-token': 'REDACTED'
    'x-ms-request-duration-ms': 'REDACTED'
    'x-ms-serviceversion': 'REDACTED'
    'x-ms-cosmos-is-partition-key-delete-pending': 'REDACTED'
    'x-ms-cosmos-physical-partition-id': 'REDACTED'
    'x-ms-cosmos-internal-partition-id': 'REDACTED'
    'x-ms-gatewayversion': 'REDACTED'
    'Date': 'Wed, 30 Oct 2024 10:30:17 GMT'
2024-10-30 05:30:17,866 - INFO - Post 1g9w053 is not an image or video post, skipping
2024-10-30 05:30:17,866 - INFO - Checking post: 1fv4cfc - Score: 4579 - URL: https://www.reddit.com/gallery/1fv4cfc
2024-10-30 05:30:17,867 - INFO - Request URL: 'https://cosmossnoogram-centralus.documents.azure.com:443/dbs/ToDoList/colls/sent_posts/docs/'
Request method: 'POST'
Request headers:
    'Cache-Control': 'no-cache'
    'x-ms-version': 'REDACTED'
    'x-ms-documentdb-query-iscontinuationexpected': 'REDACTED'
    'x-ms-consistency-level': 'REDACTED'
    'x-ms-documentdb-isquery': 'REDACTED'
    'Content-Type': 'application/query+json'
    'x-ms-session-token': 'REDACTED'
    'x-ms-documentdb-query-enablecrosspartition': 'REDACTED'
    'x-ms-date': 'REDACTED'
    'authorization': 'REDACTED'
    'Accept': 'application/json'
    'x-ms-cosmos-correlated-activityid': 'REDACTED'
    'Content-Length': '107'
    'User-Agent': 'azsdk-python-cosmos/4.5.1 Python/3.12.4 (macOS-15.0.1-arm64-arm-64bit)'
A body is sent with the request
2024-10-30 05:30:17,912 - DEBUG - https://cosmossnoogram-centralus.documents.azure.com:443 "POST /dbs/ToDoList/colls/sent_posts/docs/ HTTP/11" 200 None
2024-10-30 05:30:17,913 - INFO - Response status: 200
Response headers:
    'Cache-Control': 'no-store, no-cache'
    'Pragma': 'no-cache'
    'Transfer-Encoding': 'chunked'
    'Content-Type': 'application/json'
    'Server': 'Microsoft-HTTPAPI/2.0'
    'Strict-Transport-Security': 'REDACTED'
    'x-ms-activity-id': 'REDACTED'
    'x-ms-last-state-change-utc': 'REDACTED'
    'x-ms-resource-quota': 'REDACTED'
    'x-ms-resource-usage': 'REDACTED'
    'x-ms-schemaversion': 'REDACTED'
    'lsn': 'REDACTED'
    'x-ms-item-count': 'REDACTED'
    'x-ms-request-charge': 'REDACTED'
    'x-ms-alt-content-path': 'REDACTED'
    'x-ms-content-path': 'REDACTED'
    'x-ms-quorum-acked-lsn': 'REDACTED'
    'x-ms-current-write-quorum': 'REDACTED'
    'x-ms-current-replica-set-size': 'REDACTED'
    'x-ms-documentdb-partitionkeyrangeid': 'REDACTED'
    'x-ms-xp-role': 'REDACTED'
    'x-ms-cosmos-query-execution-info': 'REDACTED'
    'x-ms-global-Committed-lsn': 'REDACTED'
    'x-ms-number-of-read-regions': 'REDACTED'
    'x-ms-transport-request-id': 'REDACTED'
    'x-ms-cosmos-llsn': 'REDACTED'
    'x-ms-cosmos-quorum-acked-llsn': 'REDACTED'
    'x-ms-session-token': 'REDACTED'
    'x-ms-request-duration-ms': 'REDACTED'
    'x-ms-serviceversion': 'REDACTED'
    'x-ms-cosmos-is-partition-key-delete-pending': 'REDACTED'
    'x-ms-cosmos-physical-partition-id': 'REDACTED'
    'x-ms-cosmos-internal-partition-id': 'REDACTED'
    'x-ms-gatewayversion': 'REDACTED'
    'Date': 'Wed, 30 Oct 2024 10:30:17 GMT'
2024-10-30 05:30:17,913 - INFO - Post 1fv4cfc is not an image or video post, skipping
2024-10-30 05:30:17,913 - INFO - Checking post: 1ganrp0 - Score: 4210 - URL: https://i.redd.it/ezatz8645lwd1.jpeg
2024-10-30 05:30:17,914 - INFO - Request URL: 'https://cosmossnoogram-centralus.documents.azure.com:443/dbs/ToDoList/colls/sent_posts/docs/'
Request method: 'POST'
Request headers:
    'Cache-Control': 'no-cache'
    'x-ms-version': 'REDACTED'
    'x-ms-documentdb-query-iscontinuationexpected': 'REDACTED'
    'x-ms-consistency-level': 'REDACTED'
    'x-ms-documentdb-isquery': 'REDACTED'
    'Content-Type': 'application/query+json'
    'x-ms-session-token': 'REDACTED'
    'x-ms-documentdb-query-enablecrosspartition': 'REDACTED'
    'x-ms-date': 'REDACTED'
    'authorization': 'REDACTED'
    'Accept': 'application/json'
    'x-ms-cosmos-correlated-activityid': 'REDACTED'
    'Content-Length': '107'
    'User-Agent': 'azsdk-python-cosmos/4.5.1 Python/3.12.4 (macOS-15.0.1-arm64-arm-64bit)'
A body is sent with the request
2024-10-30 05:30:17,979 - DEBUG - https://cosmossnoogram-centralus.documents.azure.com:443 "POST /dbs/ToDoList/colls/sent_posts/docs/ HTTP/11" 200 None
2024-10-30 05:30:17,979 - INFO - Response status: 200
Response headers:
    'Cache-Control': 'no-store, no-cache'
    'Pragma': 'no-cache'
    'Transfer-Encoding': 'chunked'
    'Content-Type': 'application/json'
    'Server': 'Microsoft-HTTPAPI/2.0'
    'Strict-Transport-Security': 'REDACTED'
    'x-ms-activity-id': 'REDACTED'
    'x-ms-last-state-change-utc': 'REDACTED'
    'x-ms-resource-quota': 'REDACTED'
    'x-ms-resource-usage': 'REDACTED'
    'x-ms-schemaversion': 'REDACTED'
    'lsn': 'REDACTED'
    'x-ms-item-count': 'REDACTED'
    'x-ms-request-charge': 'REDACTED'
    'x-ms-alt-content-path': 'REDACTED'
    'x-ms-content-path': 'REDACTED'
    'x-ms-documentdb-partitionkeyrangeid': 'REDACTED'
    'x-ms-xp-role': 'REDACTED'
    'x-ms-cosmos-query-execution-info': 'REDACTED'
    'x-ms-global-Committed-lsn': 'REDACTED'
    'x-ms-number-of-read-regions': 'REDACTED'
    'x-ms-transport-request-id': 'REDACTED'
    'x-ms-cosmos-llsn': 'REDACTED'
    'x-ms-session-token': 'REDACTED'
    'x-ms-request-duration-ms': 'REDACTED'
    'x-ms-serviceversion': 'REDACTED'
    'x-ms-cosmos-is-partition-key-delete-pending': 'REDACTED'
    'x-ms-cosmos-physical-partition-id': 'REDACTED'
    'x-ms-cosmos-internal-partition-id': 'REDACTED'
    'x-ms-gatewayversion': 'REDACTED'
    'Date': 'Wed, 30 Oct 2024 10:30:17 GMT'
2024-10-30 05:30:17,979 - INFO - Post 1ganrp0 is a duplicate, skipping
2024-10-30 05:30:17,979 - INFO - Checking post: 1gdrcjt - Score: 4063 - URL: https://www.redgifs.com/watch/unrealisticdefinitebarebirdbat
2024-10-30 05:30:17,980 - INFO - Post 1gdrcjt is a duplicate, skipping
2024-10-30 05:30:17,980 - INFO - Checking post: 1g30sx1 - Score: 3969 - URL: https://www.redgifs.com/watch/hardwarlikesunbittern
2024-10-30 05:30:17,980 - INFO - Post 1g30sx1 is a duplicate, skipping
2024-10-30 05:30:17,980 - INFO - Checking post: 1fs7839 - Score: 3857 - URL: https://www.reddit.com/gallery/1fs7839
2024-10-30 05:30:17,981 - INFO - Request URL: 'https://cosmossnoogram-centralus.documents.azure.com:443/dbs/ToDoList/colls/sent_posts/docs/'
Request method: 'POST'
Request headers:
    'Cache-Control': 'no-cache'
    'x-ms-version': 'REDACTED'
    'x-ms-documentdb-query-iscontinuationexpected': 'REDACTED'
    'x-ms-consistency-level': 'REDACTED'
    'x-ms-documentdb-isquery': 'REDACTED'
    'Content-Type': 'application/query+json'
    'x-ms-session-token': 'REDACTED'
    'x-ms-documentdb-query-enablecrosspartition': 'REDACTED'
    'x-ms-date': 'REDACTED'
    'authorization': 'REDACTED'
    'Accept': 'application/json'
    'x-ms-cosmos-correlated-activityid': 'REDACTED'
    'Content-Length': '107'
    'User-Agent': 'azsdk-python-cosmos/4.5.1 Python/3.12.4 (macOS-15.0.1-arm64-arm-64bit)'
A body is sent with the request
2024-10-30 05:30:18,034 - DEBUG - https://cosmossnoogram-centralus.documents.azure.com:443 "POST /dbs/ToDoList/colls/sent_posts/docs/ HTTP/11" 200 None
2024-10-30 05:30:18,035 - INFO - Response status: 200
Response headers:
    'Cache-Control': 'no-store, no-cache'
    'Pragma': 'no-cache'
    'Transfer-Encoding': 'chunked'
    'Content-Type': 'application/json'
    'Server': 'Microsoft-HTTPAPI/2.0'
    'Strict-Transport-Security': 'REDACTED'
    'x-ms-activity-id': 'REDACTED'
    'x-ms-last-state-change-utc': 'REDACTED'
    'x-ms-resource-quota': 'REDACTED'
    'x-ms-resource-usage': 'REDACTED'
    'x-ms-schemaversion': 'REDACTED'
    'lsn': 'REDACTED'
    'x-ms-item-count': 'REDACTED'
    'x-ms-request-charge': 'REDACTED'
    'x-ms-alt-content-path': 'REDACTED'
    'x-ms-content-path': 'REDACTED'
    'x-ms-documentdb-partitionkeyrangeid': 'REDACTED'
    'x-ms-xp-role': 'REDACTED'
    'x-ms-cosmos-query-execution-info': 'REDACTED'
    'x-ms-global-Committed-lsn': 'REDACTED'
    'x-ms-number-of-read-regions': 'REDACTED'
    'x-ms-transport-request-id': 'REDACTED'
    'x-ms-cosmos-llsn': 'REDACTED'
    'x-ms-session-token': 'REDACTED'
    'x-ms-request-duration-ms': 'REDACTED'
    'x-ms-serviceversion': 'REDACTED'
    'x-ms-cosmos-is-partition-key-delete-pending': 'REDACTED'
    'x-ms-cosmos-physical-partition-id': 'REDACTED'
    'x-ms-cosmos-internal-partition-id': 'REDACTED'
    'x-ms-gatewayversion': 'REDACTED'
    'Date': 'Wed, 30 Oct 2024 10:30:17 GMT'
2024-10-30 05:30:18,035 - INFO - Post 1fs7839 is not an image or video post, skipping
2024-10-30 05:30:18,035 - INFO - Checking post: 1g2rse9 - Score: 3769 - URL: https://i.redd.it/gzxs1aeshjud1.png
2024-10-30 05:30:18,036 - INFO - Post 1g2rse9 is a duplicate, skipping
2024-10-30 05:30:18,036 - INFO - Checking post: 1ge9loz - Score: 3723 - URL: https://www.redgifs.com/watch/deadlygregariouswoodchuck
2024-10-30 05:30:18,036 - INFO - Post 1ge9loz is a duplicate, skipping
2024-10-30 05:30:18,036 - INFO - Checking post: 1g0e966 - Score: 3633 - URL: https://www.reddit.com/gallery/1g0e966
2024-10-30 05:30:18,037 - INFO - Request URL: 'https://cosmossnoogram-centralus.documents.azure.com:443/dbs/ToDoList/colls/sent_posts/docs/'
Request method: 'POST'
Request headers:
    'Cache-Control': 'no-cache'
    'x-ms-version': 'REDACTED'
    'x-ms-documentdb-query-iscontinuationexpected': 'REDACTED'
    'x-ms-consistency-level': 'REDACTED'
    'x-ms-documentdb-isquery': 'REDACTED'
    'Content-Type': 'application/query+json'
    'x-ms-session-token': 'REDACTED'
    'x-ms-documentdb-query-enablecrosspartition': 'REDACTED'
    'x-ms-date': 'REDACTED'
    'authorization': 'REDACTED'
    'Accept': 'application/json'
    'x-ms-cosmos-correlated-activityid': 'REDACTED'
    'Content-Length': '107'
    'User-Agent': 'azsdk-python-cosmos/4.5.1 Python/3.12.4 (macOS-15.0.1-arm64-arm-64bit)'
A body is sent with the request
2024-10-30 05:30:18,086 - DEBUG - https://cosmossnoogram-centralus.documents.azure.com:443 "POST /dbs/ToDoList/colls/sent_posts/docs/ HTTP/11" 200 None
2024-10-30 05:30:18,086 - INFO - Response status: 200
Response headers:
    'Cache-Control': 'no-store, no-cache'
    'Pragma': 'no-cache'
    'Transfer-Encoding': 'chunked'
    'Content-Type': 'application/json'
    'Server': 'Microsoft-HTTPAPI/2.0'
    'Strict-Transport-Security': 'REDACTED'
    'x-ms-activity-id': 'REDACTED'
    'x-ms-last-state-change-utc': 'REDACTED'
    'x-ms-resource-quota': 'REDACTED'
    'x-ms-resource-usage': 'REDACTED'
    'x-ms-schemaversion': 'REDACTED'
    'lsn': 'REDACTED'
    'x-ms-item-count': 'REDACTED'
    'x-ms-request-charge': 'REDACTED'
    'x-ms-alt-content-path': 'REDACTED'
    'x-ms-content-path': 'REDACTED'
    'x-ms-documentdb-partitionkeyrangeid': 'REDACTED'
    'x-ms-xp-role': 'REDACTED'
    'x-ms-cosmos-query-execution-info': 'REDACTED'
    'x-ms-global-Committed-lsn': 'REDACTED'
    'x-ms-number-of-read-regions': 'REDACTED'
    'x-ms-transport-request-id': 'REDACTED'
    'x-ms-cosmos-llsn': 'REDACTED'
    'x-ms-session-token': 'REDACTED'
    'x-ms-request-duration-ms': 'REDACTED'
    'x-ms-serviceversion': 'REDACTED'
    'x-ms-cosmos-is-partition-key-delete-pending': 'REDACTED'
    'x-ms-cosmos-physical-partition-id': 'REDACTED'
    'x-ms-cosmos-internal-partition-id': 'REDACTED'
    'x-ms-gatewayversion': 'REDACTED'
    'Date': 'Wed, 30 Oct 2024 10:30:17 GMT'
2024-10-30 05:30:18,086 - INFO - Post 1g0e966 is not an image or video post, skipping
2024-10-30 05:30:18,086 - INFO - Checking post: 1gckgcy - Score: 3394 - URL: https://i.redd.it/njd0mbyjl3xd1.jpeg
2024-10-30 05:30:18,087 - INFO - Post 1gckgcy is a duplicate, skipping
2024-10-30 05:30:18,087 - INFO - Checking post: 1fznoil - Score: 3331 - URL: https://i.redd.it/eruk3694dptd1.jpeg
2024-10-30 05:30:18,087 - INFO - Post 1fznoil is a duplicate, skipping
2024-10-30 05:30:18,087 - INFO - Checking post: 1g3dsj7 - Score: 3186 - URL: https://i.redd.it/cg9oigznmpud1.jpeg
2024-10-30 05:30:18,088 - INFO - Post 1g3dsj7 is a duplicate, skipping
2024-10-30 05:30:18,088 - INFO - Checking post: 1g4dx9i - Score: 3136 - URL: https://i.redd.it/5kv3c8f3lyud1.jpeg
2024-10-30 05:30:18,088 - INFO - Request URL: 'https://cosmossnoogram-centralus.documents.azure.com:443/dbs/ToDoList/colls/sent_posts/docs/'
Request method: 'POST'
Request headers:
    'Cache-Control': 'no-cache'
    'x-ms-version': 'REDACTED'
    'x-ms-documentdb-query-iscontinuationexpected': 'REDACTED'
    'x-ms-consistency-level': 'REDACTED'
    'x-ms-documentdb-isquery': 'REDACTED'
    'Content-Type': 'application/query+json'
    'x-ms-session-token': 'REDACTED'
    'x-ms-documentdb-query-enablecrosspartition': 'REDACTED'
    'x-ms-date': 'REDACTED'
    'authorization': 'REDACTED'
    'Accept': 'application/json'
    'x-ms-cosmos-correlated-activityid': 'REDACTED'
    'Content-Length': '107'
    'User-Agent': 'azsdk-python-cosmos/4.5.1 Python/3.12.4 (macOS-15.0.1-arm64-arm-64bit)'
A body is sent with the request
2024-10-30 05:30:18,128 - DEBUG - https://cosmossnoogram-centralus.documents.azure.com:443 "POST /dbs/ToDoList/colls/sent_posts/docs/ HTTP/11" 200 None
2024-10-30 05:30:18,129 - INFO - Response status: 200
Response headers:
    'Cache-Control': 'no-store, no-cache'
    'Pragma': 'no-cache'
    'Transfer-Encoding': 'chunked'
    'Content-Type': 'application/json'
    'Server': 'Microsoft-HTTPAPI/2.0'
    'Strict-Transport-Security': 'REDACTED'
    'x-ms-activity-id': 'REDACTED'
    'x-ms-last-state-change-utc': 'REDACTED'
    'x-ms-resource-quota': 'REDACTED'
    'x-ms-resource-usage': 'REDACTED'
    'x-ms-schemaversion': 'REDACTED'
    'lsn': 'REDACTED'
    'x-ms-item-count': 'REDACTED'
    'x-ms-request-charge': 'REDACTED'
    'x-ms-alt-content-path': 'REDACTED'
    'x-ms-content-path': 'REDACTED'
    'x-ms-documentdb-partitionkeyrangeid': 'REDACTED'
    'x-ms-xp-role': 'REDACTED'
    'x-ms-cosmos-query-execution-info': 'REDACTED'
    'x-ms-global-Committed-lsn': 'REDACTED'
    'x-ms-number-of-read-regions': 'REDACTED'
    'x-ms-transport-request-id': 'REDACTED'
    'x-ms-cosmos-llsn': 'REDACTED'
    'x-ms-session-token': 'REDACTED'
    'x-ms-request-duration-ms': 'REDACTED'
    'x-ms-serviceversion': 'REDACTED'
    'x-ms-cosmos-is-partition-key-delete-pending': 'REDACTED'
    'x-ms-cosmos-physical-partition-id': 'REDACTED'
    'x-ms-cosmos-internal-partition-id': 'REDACTED'
    'x-ms-gatewayversion': 'REDACTED'
    'Date': 'Wed, 30 Oct 2024 10:30:17 GMT'
2024-10-30 05:30:18,129 - INFO - Post 1g4dx9i is a duplicate, skipping
2024-10-30 05:30:18,129 - INFO - Checking post: 1ge2oko - Score: 3133 - URL: https://i.redd.it/3vk9ocmf6ixd1.jpeg
2024-10-30 05:30:18,130 - INFO - Request URL: 'https://cosmossnoogram-centralus.documents.azure.com:443/dbs/ToDoList/colls/sent_posts/docs/'
Request method: 'POST'
Request headers:
    'Cache-Control': 'no-cache'
    'x-ms-version': 'REDACTED'
    'x-ms-documentdb-query-iscontinuationexpected': 'REDACTED'
    'x-ms-consistency-level': 'REDACTED'
    'x-ms-documentdb-isquery': 'REDACTED'
    'Content-Type': 'application/query+json'
    'x-ms-session-token': 'REDACTED'
    'x-ms-documentdb-query-enablecrosspartition': 'REDACTED'
    'x-ms-date': 'REDACTED'
    'authorization': 'REDACTED'
    'Accept': 'application/json'
    'x-ms-cosmos-correlated-activityid': 'REDACTED'
    'Content-Length': '107'
    'User-Agent': 'azsdk-python-cosmos/4.5.1 Python/3.12.4 (macOS-15.0.1-arm64-arm-64bit)'
A body is sent with the request
2024-10-30 05:30:18,172 - DEBUG - https://cosmossnoogram-centralus.documents.azure.com:443 "POST /dbs/ToDoList/colls/sent_posts/docs/ HTTP/11" 200 None
2024-10-30 05:30:18,172 - INFO - Response status: 200
Response headers:
    'Cache-Control': 'no-store, no-cache'
    'Pragma': 'no-cache'
    'Transfer-Encoding': 'chunked'
    'Content-Type': 'application/json'
    'Server': 'Microsoft-HTTPAPI/2.0'
    'Strict-Transport-Security': 'REDACTED'
    'x-ms-activity-id': 'REDACTED'
    'x-ms-last-state-change-utc': 'REDACTED'
    'x-ms-resource-quota': 'REDACTED'
    'x-ms-resource-usage': 'REDACTED'
    'x-ms-schemaversion': 'REDACTED'
    'lsn': 'REDACTED'
    'x-ms-item-count': 'REDACTED'
    'x-ms-request-charge': 'REDACTED'
    'x-ms-alt-content-path': 'REDACTED'
    'x-ms-content-path': 'REDACTED'
    'x-ms-documentdb-partitionkeyrangeid': 'REDACTED'
    'x-ms-xp-role': 'REDACTED'
    'x-ms-cosmos-query-execution-info': 'REDACTED'
    'x-ms-global-Committed-lsn': 'REDACTED'
    'x-ms-number-of-read-regions': 'REDACTED'
    'x-ms-transport-request-id': 'REDACTED'
    'x-ms-cosmos-llsn': 'REDACTED'
    'x-ms-session-token': 'REDACTED'
    'x-ms-request-duration-ms': 'REDACTED'
    'x-ms-serviceversion': 'REDACTED'
    'x-ms-cosmos-is-partition-key-delete-pending': 'REDACTED'
    'x-ms-cosmos-physical-partition-id': 'REDACTED'
    'x-ms-cosmos-internal-partition-id': 'REDACTED'
    'x-ms-gatewayversion': 'REDACTED'
    'Date': 'Wed, 30 Oct 2024 10:30:17 GMT'
2024-10-30 05:30:18,172 - INFO - Found image post: 1ge2oko with URL: https://i.redd.it/3vk9ocmf6ixd1.jpeg
2024-10-30 05:30:18,173 - DEBUG - Starting new HTTPS connection (1): i.redd.it:443
2024-10-30 05:30:18,361 - DEBUG - https://i.redd.it:443 "GET /3vk9ocmf6ixd1.jpeg HTTP/11" 200 2942027
2024-10-30 05:30:18,502 - INFO - Successfully downloaded media to downloads/videos/1gelyz1_20241030_053017_ba5c8ead.mp4
2024-10-30 05:30:18,504 - DEBUG - Using selector: KqueueSelector
2024-10-30 05:30:18,505 - INFO - Attempting to send video to Telegram - Path: downloads/videos/1gelyz1_20241030_053017_ba5c8ead.mp4
2024-10-30 05:30:18,505 - DEBUG - load_ssl_context verify=True cert=None trust_env=True http2=False
2024-10-30 05:30:18,506 - DEBUG - load_verify_locations cafile='/Users/joewilson/PythonProjects/Snoogram/venv/lib/python3.12/site-packages/certifi/cacert.pem'
2024-10-30 05:30:18,514 - DEBUG - load_ssl_context verify=True cert=None trust_env=True http2=False
2024-10-30 05:30:18,514 - DEBUG - load_verify_locations cafile='/Users/joewilson/PythonProjects/Snoogram/venv/lib/python3.12/site-packages/certifi/cacert.pem'
2024-10-30 05:30:18,521 - DEBUG - Entering: get_me
2024-10-30 05:30:18,522 - DEBUG - connect_tcp.started host='api.telegram.org' port=443 local_address=None timeout=5.0 socket_options=None
2024-10-30 05:30:18,599 - INFO - Successfully downloaded media to downloads/pics/1ge2oko_20241030_053018_c0dedffe.jpeg
2024-10-30 05:30:18,600 - DEBUG - Using selector: KqueueSelector
2024-10-30 05:30:18,600 - INFO - Attempting to send photo to Telegram - Path: downloads/pics/1ge2oko_20241030_053018_c0dedffe.jpeg
2024-10-30 05:30:18,601 - DEBUG - Entering: get_me
2024-10-30 05:30:18,601 - DEBUG - connect_tcp.started host='api.telegram.org' port=443 local_address=None timeout=5.0 socket_options=None
2024-10-30 05:30:18,649 - DEBUG - connect_tcp.complete return_value=<httpcore._backends.anyio.AnyIOStream object at 0x108ed0860>
2024-10-30 05:30:18,649 - DEBUG - start_tls.started ssl_context=<ssl.SSLContext object at 0x1089bcbd0> server_hostname='api.telegram.org' timeout=5.0
2024-10-30 05:30:18,725 - DEBUG - connect_tcp.complete return_value=<httpcore._backends.anyio.AnyIOStream object at 0x108ed2900>
2024-10-30 05:30:18,725 - DEBUG - start_tls.started ssl_context=<ssl.SSLContext object at 0x1089bcbd0> server_hostname='api.telegram.org' timeout=5.0
2024-10-30 05:30:18,793 - DEBUG - start_tls.complete return_value=<httpcore._backends.anyio.AnyIOStream object at 0x108a5e990>
2024-10-30 05:30:18,793 - DEBUG - send_request_headers.started request=<Request [b'POST']>
2024-10-30 05:30:18,793 - DEBUG - send_request_headers.complete
2024-10-30 05:30:18,794 - DEBUG - send_request_body.started request=<Request [b'POST']>
2024-10-30 05:30:18,794 - DEBUG - send_request_body.complete
2024-10-30 05:30:18,794 - DEBUG - receive_response_headers.started request=<Request [b'POST']>
2024-10-30 05:30:18,885 - DEBUG - start_tls.complete return_value=<httpcore._backends.anyio.AnyIOStream object at 0x108ed26c0>
2024-10-30 05:30:18,885 - DEBUG - send_request_headers.started request=<Request [b'POST']>
2024-10-30 05:30:18,886 - DEBUG - send_request_headers.complete
2024-10-30 05:30:18,886 - DEBUG - send_request_body.started request=<Request [b'POST']>
2024-10-30 05:30:18,886 - DEBUG - send_request_body.complete
2024-10-30 05:30:18,886 - DEBUG - receive_response_headers.started request=<Request [b'POST']>
2024-10-30 05:30:18,909 - DEBUG - receive_response_headers.complete return_value=(b'HTTP/1.1', 200, b'OK', [(b'Server', b'nginx/1.18.0'), (b'Date', b'Wed, 30 Oct 2024 10:30:18 GMT'), (b'Content-Type', b'application/json'), (b'Content-Length', b'254'), (b'Connection', b'keep-alive'), (b'Strict-Transport-Security', b'max-age=31536000; includeSubDomains; preload'), (b'Access-Control-Allow-Origin', b'*'), (b'Access-Control-Allow-Methods', b'GET, POST, OPTIONS'), (b'Access-Control-Expose-Headers', b'Content-Length,Content-Type,Date,Server,Connection')])
2024-10-30 05:30:18,910 - INFO - HTTP Request: POST https://api.telegram.org/bot7867694458:AAEFLZjWPyd1p640mHENnBt479WRYfSavWg/getMe "HTTP/1.1 200 OK"
2024-10-30 05:30:18,910 - DEBUG - receive_response_body.started request=<Request [b'POST']>
2024-10-30 05:30:18,910 - DEBUG - receive_response_body.complete
2024-10-30 05:30:18,910 - DEBUG - response_closed.started
2024-10-30 05:30:18,910 - DEBUG - response_closed.complete
2024-10-30 05:30:18,910 - DEBUG - User(api_kwargs={'can_connect_to_business': False, 'has_main_web_app': False}, can_join_groups=True, can_read_all_group_messages=False, first_name='RedditBot', id=7867694458, is_bot=True, supports_inline_queries=False, username='RedditImage_bot')
2024-10-30 05:30:18,910 - DEBUG - Exiting: get_me
2024-10-30 05:30:18,910 - DEBUG - This Bot is already initialized.
2024-10-30 05:30:18,910 - DEBUG - Entering: send_video
2024-10-30 05:30:18,920 - DEBUG - send_request_headers.started request=<Request [b'POST']>
2024-10-30 05:30:18,920 - DEBUG - send_request_headers.complete
2024-10-30 05:30:18,920 - DEBUG - send_request_body.started request=<Request [b'POST']>
2024-10-30 05:30:19,012 - DEBUG - receive_response_headers.complete return_value=(b'HTTP/1.1', 200, b'OK', [(b'Server', b'nginx/1.18.0'), (b'Date', b'Wed, 30 Oct 2024 10:30:18 GMT'), (b'Content-Type', b'application/json'), (b'Content-Length', b'254'), (b'Connection', b'keep-alive'), (b'Strict-Transport-Security', b'max-age=31536000; includeSubDomains; preload'), (b'Access-Control-Allow-Origin', b'*'), (b'Access-Control-Allow-Methods', b'GET, POST, OPTIONS'), (b'Access-Control-Expose-Headers', b'Content-Length,Content-Type,Date,Server,Connection')])
2024-10-30 05:30:19,012 - INFO - HTTP Request: POST https://api.telegram.org/bot7867694458:AAEFLZjWPyd1p640mHENnBt479WRYfSavWg/getMe "HTTP/1.1 200 OK"
2024-10-30 05:30:19,012 - DEBUG - receive_response_body.started request=<Request [b'POST']>
2024-10-30 05:30:19,012 - DEBUG - receive_response_body.complete
2024-10-30 05:30:19,012 - DEBUG - response_closed.started
2024-10-30 05:30:19,012 - DEBUG - response_closed.complete
2024-10-30 05:30:19,012 - DEBUG - User(api_kwargs={'can_connect_to_business': False, 'has_main_web_app': False}, can_join_groups=True, can_read_all_group_messages=False, first_name='RedditBot', id=7867694458, is_bot=True, supports_inline_queries=False, username='RedditImage_bot')
2024-10-30 05:30:19,012 - DEBUG - Exiting: get_me
2024-10-30 05:30:19,012 - DEBUG - This Updater is already initialized.
2024-10-30 05:30:19,012 - DEBUG - Entering: send_photo
2024-10-30 05:30:19,013 - DEBUG - send_request_headers.started request=<Request [b'POST']>
2024-10-30 05:30:19,013 - DEBUG - send_request_headers.complete
2024-10-30 05:30:19,013 - DEBUG - send_request_body.started request=<Request [b'POST']>
2024-10-30 05:30:19,980 - DEBUG - send_request_body.complete
2024-10-30 05:30:19,981 - DEBUG - receive_response_headers.started request=<Request [b'POST']>
2024-10-30 05:30:20,582 - DEBUG - receive_response_headers.complete return_value=(b'HTTP/1.1', 200, b'OK', [(b'Server', b'nginx/1.18.0'), (b'Date', b'Wed, 30 Oct 2024 10:30:20 GMT'), (b'Content-Type', b'application/json'), (b'Content-Length', b'1213'), (b'Connection', b'keep-alive'), (b'Strict-Transport-Security', b'max-age=31536000; includeSubDomains; preload'), (b'Access-Control-Allow-Origin', b'*'), (b'Access-Control-Allow-Methods', b'GET, POST, OPTIONS'), (b'Access-Control-Expose-Headers', b'Content-Length,Content-Type,Date,Server,Connection')])
2024-10-30 05:30:20,582 - INFO - HTTP Request: POST https://api.telegram.org/bot7867694458:AAEFLZjWPyd1p640mHENnBt479WRYfSavWg/sendPhoto "HTTP/1.1 200 OK"
2024-10-30 05:30:20,582 - DEBUG - receive_response_body.started request=<Request [b'POST']>
2024-10-30 05:30:20,583 - DEBUG - receive_response_body.complete
2024-10-30 05:30:20,583 - DEBUG - response_closed.started
2024-10-30 05:30:20,583 - DEBUG - response_closed.complete
2024-10-30 05:30:20,584 - DEBUG - Message(caption='From r/wifebutt: Fresh morning Wifebutt\nUpvotes: 3,133', channel_chat_created=False, chat=Chat(id=-1002490380283, title='Reddit_Pic_Stream', type=<ChatType.CHANNEL>), date=datetime.datetime(2024, 10, 30, 10, 30, 20, tzinfo=<UTC>), delete_chat_photo=False, group_chat_created=False, message_id=251, photo=(PhotoSize(file_id='AgACAgEAAyEGAASUcC_7AAOZZyH6uPME2ny7Ln2nX6zcZxEOxyoAAketMRsZEBFFtveidIwWN04BAAMCAANzAAM2BA', file_size=1506, file_unique_id='AQADR60xGxkQEUV4', height=90, width=67), PhotoSize(file_id='AgACAgEAAyEGAASUcC_7AAOZZyH6uPME2ny7Ln2nX6zcZxEOxyoAAketMRsZEBFFtveidIwWN04BAAMCAANtAAM2BA', file_size=23685, file_unique_id='AQADR60xGxkQEUVy', height=320, width=240), PhotoSize(file_id='AgACAgEAAyEGAASUcC_7AAOZZyH6uPME2ny7Ln2nX6zcZxEOxyoAAketMRsZEBFFtveidIwWN04BAAMCAAN4AAM2BA', file_size=120875, file_unique_id='AQADR60xGxkQEUV9', height=800, width=600), PhotoSize(file_id='AgACAgEAAyEGAASUcC_7AAOZZyH6uPME2ny7Ln2nX6zcZxEOxyoAAketMRsZEBFFtveidIwWN04BAAMCAAN5AAM2BA', file_size=286149, file_unique_id='AQADR60xGxkQEUV-', height=1280, width=960), PhotoSize(file_id='AgACAgEAAyEGAASUcC_7AAOZZyH6uPME2ny7Ln2nX6zcZxEOxyoAAketMRsZEBFFtveidIwWN04BAAMCAAN3AAM2BA', file_size=958648, file_unique_id='AQADR60xGxkQEUV8', height=2560, width=1920)), sender_chat=Chat(id=-1002490380283, title='Reddit_Pic_Stream', type=<ChatType.CHANNEL>), supergroup_chat_created=False)
2024-10-30 05:30:20,584 - DEBUG - Exiting: send_photo
2024-10-30 05:30:20,584 - DEBUG - close.started
2024-10-30 05:30:20,584 - DEBUG - close.complete
2024-10-30 05:30:20,584 - DEBUG - close.started
2024-10-30 05:30:20,584 - DEBUG - close.complete
2024-10-30 05:30:20,585 - DEBUG - This Bot is already shut down. Returning.
2024-10-30 05:30:20,585 - DEBUG - Shut down of Updater complete
2024-10-30 05:30:20,585 - INFO - Successfully sent photo to Telegram
2024-10-30 05:30:20,587 - ERROR - Error processing subreddit wifebutt: (sqlite3.OperationalError) attempt to write a readonly database
[SQL: INSERT INTO sent_post (post_id, subreddit_name, sent_at) VALUES (?, ?, ?)]
[parameters: ('1ge2oko', 'wifebutt', '2024-10-30 10:30:20.586524')]
(Background on this error at: https://sqlalche.me/e/20/e3q8)
2024-10-30 05:30:20,588 - ERROR - Job "send_to_telegram (trigger: interval[0:01:00], next run at: 2024-10-30 05:31:16 CDT)" raised an exception
Traceback (most recent call last):
  File "/Users/joewilson/PythonProjects/Snoogram/venv/lib/python3.12/site-packages/sqlalchemy/engine/base.py", line 1967, in _exec_single_context
    self.dialect.do_execute(
  File "/Users/joewilson/PythonProjects/Snoogram/venv/lib/python3.12/site-packages/sqlalchemy/engine/default.py", line 941, in do_execute
    cursor.execute(statement, parameters)
sqlite3.OperationalError: attempt to write a readonly database

The above exception was the direct cause of the following exception:

Traceback (most recent call last):
  File "/Users/joewilson/PythonProjects/Snoogram/venv/lib/python3.12/site-packages/apscheduler/executors/base.py", line 125, in run_job
    retval = job.func(*job.args, **job.kwargs)
             ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/Users/joewilson/PythonProjects/Snoogram/backend/app.py", line 265, in send_to_telegram
    # Update last_check in Cosmos DB
                ^^^^^^^^^^^^^^^^^^^^^
  File "/Users/joewilson/PythonProjects/Snoogram/backend/db_operations.py", line 100, in add_sent_post
  File "/Users/joewilson/PythonProjects/Snoogram/venv/lib/python3.12/site-packages/sqlalchemy/orm/scoping.py", line 597, in commit
    return self._proxied.commit()
           ^^^^^^^^^^^^^^^^^^^^^^
  File "/Users/joewilson/PythonProjects/Snoogram/venv/lib/python3.12/site-packages/sqlalchemy/orm/session.py", line 2028, in commit
    trans.commit(_to_root=True)
  File "<string>", line 2, in commit
  File "/Users/joewilson/PythonProjects/Snoogram/venv/lib/python3.12/site-packages/sqlalchemy/orm/state_changes.py", line 139, in _go
    ret_value = fn(self, *arg, **kw)
                ^^^^^^^^^^^^^^^^^^^^
  File "/Users/joewilson/PythonProjects/Snoogram/venv/lib/python3.12/site-packages/sqlalchemy/orm/session.py", line 1313, in commit
    self._prepare_impl()
  File "<string>", line 2, in _prepare_impl
  File "/Users/joewilson/PythonProjects/Snoogram/venv/lib/python3.12/site-packages/sqlalchemy/orm/state_changes.py", line 139, in _go
    ret_value = fn(self, *arg, **kw)
                ^^^^^^^^^^^^^^^^^^^^
  File "/Users/joewilson/PythonProjects/Snoogram/venv/lib/python3.12/site-packages/sqlalchemy/orm/session.py", line 1288, in _prepare_impl
    self.session.flush()
  File "/Users/joewilson/PythonProjects/Snoogram/venv/lib/python3.12/site-packages/sqlalchemy/orm/session.py", line 4352, in flush
    self._flush(objects)
  File "/Users/joewilson/PythonProjects/Snoogram/venv/lib/python3.12/site-packages/sqlalchemy/orm/session.py", line 4487, in _flush
    with util.safe_reraise():
  File "/Users/joewilson/PythonProjects/Snoogram/venv/lib/python3.12/site-packages/sqlalchemy/util/langhelpers.py", line 146, in __exit__
    raise exc_value.with_traceback(exc_tb)
  File "/Users/joewilson/PythonProjects/Snoogram/venv/lib/python3.12/site-packages/sqlalchemy/orm/session.py", line 4448, in _flush
    flush_context.execute()
  File "/Users/joewilson/PythonProjects/Snoogram/venv/lib/python3.12/site-packages/sqlalchemy/orm/unitofwork.py", line 466, in execute
    rec.execute(self)
  File "/Users/joewilson/PythonProjects/Snoogram/venv/lib/python3.12/site-packages/sqlalchemy/orm/unitofwork.py", line 642, in execute
    util.preloaded.orm_persistence.save_obj(
  File "/Users/joewilson/PythonProjects/Snoogram/venv/lib/python3.12/site-packages/sqlalchemy/orm/persistence.py", line 93, in save_obj
    _emit_insert_statements(
  File "/Users/joewilson/PythonProjects/Snoogram/venv/lib/python3.12/site-packages/sqlalchemy/orm/persistence.py", line 1233, in _emit_insert_statements
    result = connection.execute(
             ^^^^^^^^^^^^^^^^^^^
  File "/Users/joewilson/PythonProjects/Snoogram/venv/lib/python3.12/site-packages/sqlalchemy/engine/base.py", line 1418, in execute
    return meth(
           ^^^^^
  File "/Users/joewilson/PythonProjects/Snoogram/venv/lib/python3.12/site-packages/sqlalchemy/sql/elements.py", line 515, in _execute_on_connection
    return connection._execute_clauseelement(
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/Users/joewilson/PythonProjects/Snoogram/venv/lib/python3.12/site-packages/sqlalchemy/engine/base.py", line 1640, in _execute_clauseelement
    ret = self._execute_context(
          ^^^^^^^^^^^^^^^^^^^^^^
  File "/Users/joewilson/PythonProjects/Snoogram/venv/lib/python3.12/site-packages/sqlalchemy/engine/base.py", line 1846, in _execute_context
    return self._exec_single_context(
           ^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/Users/joewilson/PythonProjects/Snoogram/venv/lib/python3.12/site-packages/sqlalchemy/engine/base.py", line 1986, in _exec_single_context
    self._handle_dbapi_exception(
  File "/Users/joewilson/PythonProjects/Snoogram/venv/lib/python3.12/site-packages/sqlalchemy/engine/base.py", line 2355, in _handle_dbapi_exception
    raise sqlalchemy_exception.with_traceback(exc_info[2]) from e
  File "/Users/joewilson/PythonProjects/Snoogram/venv/lib/python3.12/site-packages/sqlalchemy/engine/base.py", line 1967, in _exec_single_context
    self.dialect.do_execute(
  File "/Users/joewilson/PythonProjects/Snoogram/venv/lib/python3.12/site-packages/sqlalchemy/engine/default.py", line 941, in do_execute
    cursor.execute(statement, parameters)
sqlalchemy.exc.OperationalError: (sqlite3.OperationalError) attempt to write a readonly database
[SQL: INSERT INTO sent_post (post_id, subreddit_name, sent_at) VALUES (?, ?, ?)]
[parameters: ('1ge2oko', 'wifebutt', '2024-10-30 10:30:20.586524')]
(Background on this error at: https://sqlalche.me/e/20/e3q8)
2024-10-30 05:30:29,566 - INFO -  * Restarting with stat
2024-10-30 05:30:38,926 - DEBUG - send_request_body.failed exception=WriteError(ClosedResourceError())
2024-10-30 05:30:38,926 - DEBUG - response_closed.started
2024-10-30 05:30:38,927 - DEBUG - response_closed.complete
2024-10-30 05:30:38,927 - DEBUG - This Application is already shut down. Returning.
2024-10-30 05:30:38,927 - ERROR - Failed to send video to Telegram: httpx.WriteError: 
2024-10-30 05:30:38,928 - ERROR - Error sending video post 1gelyz1: httpx.WriteError: 
2024-10-30 05:30:38,928 - INFO - Checking post: 1gejrnl - Score: 2582 - URL: https://v3.redgifs.com/watch/graydefensivepika
2024-10-30 05:30:38,934 - INFO - Request URL: 'https://cosmossnoogram-centralus.documents.azure.com:443/dbs/ToDoList/colls/sent_posts/docs/'
Request method: 'POST'
Request headers:
    'Cache-Control': 'no-cache'
    'x-ms-version': 'REDACTED'
    'x-ms-documentdb-query-iscontinuationexpected': 'REDACTED'
    'x-ms-consistency-level': 'REDACTED'
    'x-ms-documentdb-isquery': 'REDACTED'
    'Content-Type': 'application/query+json'
    'x-ms-session-token': 'REDACTED'
    'x-ms-documentdb-query-enablecrosspartition': 'REDACTED'
    'x-ms-date': 'REDACTED'
    'authorization': 'REDACTED'
    'Accept': 'application/json'
    'x-ms-cosmos-correlated-activityid': 'REDACTED'
    'Content-Length': '107'
    'User-Agent': 'azsdk-python-cosmos/4.5.1 Python/3.12.4 (macOS-15.0.1-arm64-arm-64bit)'
A body is sent with the request
2024-10-30 05:30:38,975 - DEBUG - https://cosmossnoogram-centralus.documents.azure.com:443 "POST /dbs/ToDoList/colls/sent_posts/docs/ HTTP/11" 200 None
2024-10-30 05:30:38,976 - INFO - Response status: 200
Response headers:
    'Cache-Control': 'no-store, no-cache'
    'Pragma': 'no-cache'
    'Transfer-Encoding': 'chunked'
    'Content-Type': 'application/json'
    'Server': 'Microsoft-HTTPAPI/2.0'
    'Strict-Transport-Security': 'REDACTED'
    'x-ms-activity-id': 'REDACTED'
    'x-ms-last-state-change-utc': 'REDACTED'
    'x-ms-resource-quota': 'REDACTED'
    'x-ms-resource-usage': 'REDACTED'
    'x-ms-schemaversion': 'REDACTED'
    'lsn': 'REDACTED'
    'x-ms-item-count': 'REDACTED'
    'x-ms-request-charge': 'REDACTED'
    'x-ms-alt-content-path': 'REDACTED'
    'x-ms-content-path': 'REDACTED'
    'x-ms-documentdb-partitionkeyrangeid': 'REDACTED'
    'x-ms-xp-role': 'REDACTED'
    'x-ms-cosmos-query-execution-info': 'REDACTED'
    'x-ms-global-Committed-lsn': 'REDACTED'
    'x-ms-number-of-read-regions': 'REDACTED'
    'x-ms-transport-request-id': 'REDACTED'
    'x-ms-cosmos-llsn': 'REDACTED'
    'x-ms-session-token': 'REDACTED'
    'x-ms-request-duration-ms': 'REDACTED'
    'x-ms-serviceversion': 'REDACTED'
    'x-ms-cosmos-is-partition-key-delete-pending': 'REDACTED'
    'x-ms-cosmos-physical-partition-id': 'REDACTED'
    'x-ms-cosmos-internal-partition-id': 'REDACTED'
    'x-ms-gatewayversion': 'REDACTED'
    'Date': 'Wed, 30 Oct 2024 10:30:38 GMT'
2024-10-30 05:30:38,976 - INFO - Post 1gejrnl is a duplicate, skipping
2024-10-30 05:30:38,976 - INFO - Checking post: 1gelw33 - Score: 2305 - URL: https://www.redgifs.com/watch/drydarkgraysable
2024-10-30 05:30:38,976 - INFO - Post 1gelw33 is a duplicate, skipping
2024-10-30 05:30:38,977 - INFO - Checking post: 1gevvp0 - Score: 1194 - URL: https://www.redgifs.com/watch/medicalplumhen
2024-10-30 05:30:38,977 - INFO - Post 1gevvp0 is a duplicate, skipping
2024-10-30 05:30:38,977 - INFO - Checking post: 1gesoj7 - Score: 753 - URL: https://www.redgifs.com/watch/lightgreytrickydragonfly
2024-10-30 05:30:38,977 - INFO - Post 1gesoj7 is a duplicate, skipping
2024-10-30 05:30:38,977 - INFO - Checking post: 1geuuqp - Score: 440 - URL: https://www.redgifs.com/watch/cheerfulbeigebagworm
2024-10-30 05:30:38,977 - INFO - Post 1geuuqp is a duplicate, skipping
2024-10-30 05:30:38,977 - INFO - Checking post: 1geakrb - Score: 396 - URL: https://www.redgifs.com/watch/illinformedthickgalapagoshawk
2024-10-30 05:30:38,977 - INFO - Post 1geakrb is a duplicate, skipping
2024-10-30 05:30:38,977 - INFO - Checking post: 1gerubz - Score: 364 - URL: https://v3.redgifs.com/watch/trickysquarepseudodynerusquadrisectus
2024-10-30 05:30:38,977 - INFO - Post 1gerubz is a duplicate, skipping
2024-10-30 05:30:38,977 - INFO - Checking post: 1getxhl - Score: 343 - URL: https://www.redgifs.com/watch/purpledemandingboaconstrictor
2024-10-30 05:30:38,977 - INFO - Post 1getxhl is a duplicate, skipping
2024-10-30 05:30:38,977 - INFO - Checking post: 1ge9gol - Score: 274 - URL: https://v3.redgifs.com/watch/circulardeeppinkamericanbulldog
2024-10-30 05:30:38,978 - INFO - Request URL: 'https://cosmossnoogram-centralus.documents.azure.com:443/dbs/ToDoList/colls/sent_posts/docs/'
Request method: 'POST'
Request headers:
    'Cache-Control': 'no-cache'
    'x-ms-version': 'REDACTED'
    'x-ms-documentdb-query-iscontinuationexpected': 'REDACTED'
    'x-ms-consistency-level': 'REDACTED'
    'x-ms-documentdb-isquery': 'REDACTED'
    'Content-Type': 'application/query+json'
    'x-ms-session-token': 'REDACTED'
    'x-ms-documentdb-query-enablecrosspartition': 'REDACTED'
    'x-ms-date': 'REDACTED'
    'authorization': 'REDACTED'
    'Accept': 'application/json'
    'x-ms-cosmos-correlated-activityid': 'REDACTED'
    'Content-Length': '107'
    'User-Agent': 'azsdk-python-cosmos/4.5.1 Python/3.12.4 (macOS-15.0.1-arm64-arm-64bit)'
A body is sent with the request
2024-10-30 05:30:39,006 - DEBUG - https://cosmossnoogram-centralus.documents.azure.com:443 "POST /dbs/ToDoList/colls/sent_posts/docs/ HTTP/11" 200 None
2024-10-30 05:30:39,006 - INFO - Response status: 200
Response headers:
    'Cache-Control': 'no-store, no-cache'
    'Pragma': 'no-cache'
    'Transfer-Encoding': 'chunked'
    'Content-Type': 'application/json'
    'Server': 'Microsoft-HTTPAPI/2.0'
    'Strict-Transport-Security': 'REDACTED'
    'x-ms-activity-id': 'REDACTED'
    'x-ms-last-state-change-utc': 'REDACTED'
    'x-ms-resource-quota': 'REDACTED'
    'x-ms-resource-usage': 'REDACTED'
    'x-ms-schemaversion': 'REDACTED'
    'lsn': 'REDACTED'
    'x-ms-item-count': 'REDACTED'
    'x-ms-request-charge': 'REDACTED'
    'x-ms-alt-content-path': 'REDACTED'
    'x-ms-content-path': 'REDACTED'
    'x-ms-quorum-acked-lsn': 'REDACTED'
    'x-ms-current-write-quorum': 'REDACTED'
    'x-ms-current-replica-set-size': 'REDACTED'
    'x-ms-documentdb-partitionkeyrangeid': 'REDACTED'
    'x-ms-xp-role': 'REDACTED'
    'x-ms-cosmos-query-execution-info': 'REDACTED'
    'x-ms-global-Committed-lsn': 'REDACTED'
    'x-ms-number-of-read-regions': 'REDACTED'
    'x-ms-transport-request-id': 'REDACTED'
    'x-ms-cosmos-llsn': 'REDACTED'
    'x-ms-cosmos-quorum-acked-llsn': 'REDACTED'
    'x-ms-session-token': 'REDACTED'
    'x-ms-request-duration-ms': 'REDACTED'
    'x-ms-serviceversion': 'REDACTED'
    'x-ms-cosmos-is-partition-key-delete-pending': 'REDACTED'
    'x-ms-cosmos-physical-partition-id': 'REDACTED'
    'x-ms-cosmos-internal-partition-id': 'REDACTED'
    'x-ms-gatewayversion': 'REDACTED'
    'Date': 'Wed, 30 Oct 2024 10:30:38 GMT'
2024-10-30 05:30:39,007 - INFO - Found video post: 1ge9gol
2024-10-30 05:30:39,007 - DEBUG - Starting new HTTPS connection (1): api.redgifs.com:443
2024-10-30 05:30:39,113 - DEBUG - https://api.redgifs.com:443 "GET /v2/gifs/circulardeeppinkamericanbulldog HTTP/11" 200 None
2024-10-30 05:30:39,122 - DEBUG - Starting new HTTPS connection (1): files.redgifs.com:443
2024-10-30 05:30:39,193 - DEBUG - https://files.redgifs.com:443 "GET /CircularDeeppinkAmericanbulldog.mp4 HTTP/11" 200 61415883
2024-10-30 05:30:40,514 - INFO - Successfully downloaded media to downloads/videos/1ge9gol_20241030_053039_fff8ab71.mp4
2024-10-30 05:30:40,516 - DEBUG - Using selector: KqueueSelector
2024-10-30 05:30:40,516 - INFO - Attempting to send video to Telegram - Path: downloads/videos/1ge9gol_20241030_053039_fff8ab71.mp4
2024-10-30 05:30:40,516 - DEBUG - load_ssl_context verify=True cert=None trust_env=True http2=False
2024-10-30 05:30:40,517 - DEBUG - load_verify_locations cafile='/Users/joewilson/PythonProjects/Snoogram/venv/lib/python3.12/site-packages/certifi/cacert.pem'
2024-10-30 05:30:40,525 - DEBUG - load_ssl_context verify=True cert=None trust_env=True http2=False
2024-10-30 05:30:40,525 - DEBUG - load_verify_locations cafile='/Users/joewilson/PythonProjects/Snoogram/venv/lib/python3.12/site-packages/certifi/cacert.pem'
2024-10-30 05:30:40,531 - DEBUG - Entering: get_me
2024-10-30 05:30:40,532 - DEBUG - connect_tcp.started host='api.telegram.org' port=443 local_address=None timeout=5.0 socket_options=None
2024-10-30 05:30:40,656 - DEBUG - connect_tcp.complete return_value=<httpcore._backends.anyio.AnyIOStream object at 0x108a5d3d0>
2024-10-30 05:30:40,657 - DEBUG - start_tls.started ssl_context=<ssl.SSLContext object at 0x108e9c950> server_hostname='api.telegram.org' timeout=5.0
2024-10-30 05:30:40,788 - DEBUG - start_tls.complete return_value=<httpcore._backends.anyio.AnyIOStream object at 0x108a5c8f0>
2024-10-30 05:30:40,788 - DEBUG - send_request_headers.started request=<Request [b'POST']>
2024-10-30 05:30:40,789 - DEBUG - send_request_headers.complete
2024-10-30 05:30:40,789 - DEBUG - send_request_body.started request=<Request [b'POST']>
2024-10-30 05:30:40,789 - DEBUG - send_request_body.complete
2024-10-30 05:30:40,789 - DEBUG - receive_response_headers.started request=<Request [b'POST']>
2024-10-30 05:30:40,912 - DEBUG - receive_response_headers.complete return_value=(b'HTTP/1.1', 200, b'OK', [(b'Server', b'nginx/1.18.0'), (b'Date', b'Wed, 30 Oct 2024 10:30:40 GMT'), (b'Content-Type', b'application/json'), (b'Content-Length', b'254'), (b'Connection', b'keep-alive'), (b'Strict-Transport-Security', b'max-age=31536000; includeSubDomains; preload'), (b'Access-Control-Allow-Origin', b'*'), (b'Access-Control-Allow-Methods', b'GET, POST, OPTIONS'), (b'Access-Control-Expose-Headers', b'Content-Length,Content-Type,Date,Server,Connection')])
2024-10-30 05:30:40,912 - INFO - HTTP Request: POST https://api.telegram.org/bot7867694458:AAEFLZjWPyd1p640mHENnBt479WRYfSavWg/getMe "HTTP/1.1 200 OK"
2024-10-30 05:30:40,912 - DEBUG - receive_response_body.started request=<Request [b'POST']>
2024-10-30 05:30:40,912 - DEBUG - receive_response_body.complete
2024-10-30 05:30:40,912 - DEBUG - response_closed.started
2024-10-30 05:30:40,912 - DEBUG - response_closed.complete
2024-10-30 05:30:40,913 - DEBUG - User(api_kwargs={'can_connect_to_business': False, 'has_main_web_app': False}, can_join_groups=True, can_read_all_group_messages=False, first_name='RedditBot', id=7867694458, is_bot=True, supports_inline_queries=False, username='RedditImage_bot')
2024-10-30 05:30:40,913 - DEBUG - Exiting: get_me
2024-10-30 05:30:40,913 - DEBUG - This Bot is already initialized.
2024-10-30 05:30:40,913 - DEBUG - Entering: send_video
2024-10-30 05:30:40,937 - DEBUG - send_request_headers.started request=<Request [b'POST']>
2024-10-30 05:30:40,939 - DEBUG - send_request_headers.complete
2024-10-30 05:30:40,939 - DEBUG - send_request_body.started request=<Request [b'POST']>
2024-10-30 05:30:45,030 - DEBUG - send_request_body.complete
2024-10-30 05:30:45,031 - DEBUG - receive_response_headers.started request=<Request [b'POST']>
2024-10-30 05:30:45,033 - DEBUG - receive_response_headers.complete return_value=(b'HTTP/1.1', 413, b'Request Entity Too Large', [(b'Server', b'nginx/1.18.0'), (b'Date', b'Wed, 30 Oct 2024 10:30:41 GMT'), (b'Content-Type', b'application/json'), (b'Content-Length', b'70'), (b'Connection', b'close'), (b'Strict-Transport-Security', b'max-age=31536000; includeSubDomains; preload'), (b'Access-Control-Allow-Origin', b'*'), (b'Access-Control-Expose-Headers', b'Content-Length,Content-Type,Date,Server,Connection')])
2024-10-30 05:30:45,034 - INFO - HTTP Request: POST https://api.telegram.org/bot7867694458:AAEFLZjWPyd1p640mHENnBt479WRYfSavWg/sendVideo "HTTP/1.1 413 Request Entity Too Large"
2024-10-30 05:30:45,034 - DEBUG - receive_response_body.started request=<Request [b'POST']>
2024-10-30 05:30:45,034 - DEBUG - receive_response_body.complete
2024-10-30 05:30:45,034 - DEBUG - response_closed.started
2024-10-30 05:30:45,035 - DEBUG - response_closed.complete
2024-10-30 05:30:45,035 - DEBUG - This Bot is already shut down. Returning.
2024-10-30 05:30:45,035 - DEBUG - Shut down of Updater complete
2024-10-30 05:30:45,035 - ERROR - Failed to send video to Telegram: Request Entity Too Large (413)
2024-10-30 05:30:45,035 - ERROR - Error sending video post 1ge9gol: Request Entity Too Large (413)
2024-10-30 05:30:45,035 - INFO - Checking post: 1ge98kx - Score: 255 - URL: https://www.redgifs.com/watch/frontspecificspittlebug
2024-10-30 05:30:45,036 - INFO - Post 1ge98kx is a duplicate, skipping
2024-10-30 05:30:45,036 - INFO - Checking post: 1geqscs - Score: 239 - URL: https://www.redgifs.com/watch/previousweequeensnake
2024-10-30 05:30:45,037 - INFO - Request URL: 'https://cosmossnoogram-centralus.documents.azure.com:443/dbs/ToDoList/colls/sent_posts/docs/'
Request method: 'POST'
Request headers:
    'Cache-Control': 'no-cache'
    'x-ms-version': 'REDACTED'
    'x-ms-documentdb-query-iscontinuationexpected': 'REDACTED'
    'x-ms-consistency-level': 'REDACTED'
    'x-ms-documentdb-isquery': 'REDACTED'
    'Content-Type': 'application/query+json'
    'x-ms-session-token': 'REDACTED'
    'x-ms-documentdb-query-enablecrosspartition': 'REDACTED'
    'x-ms-date': 'REDACTED'
    'authorization': 'REDACTED'
    'Accept': 'application/json'
    'x-ms-cosmos-correlated-activityid': 'REDACTED'
    'Content-Length': '107'
    'User-Agent': 'azsdk-python-cosmos/4.5.1 Python/3.12.4 (macOS-15.0.1-arm64-arm-64bit)'
A body is sent with the request
2024-10-30 05:30:45,246 - DEBUG - https://cosmossnoogram-centralus.documents.azure.com:443 "POST /dbs/ToDoList/colls/sent_posts/docs/ HTTP/11" 200 None
2024-10-30 05:30:45,246 - INFO - Response status: 200
Response headers:
    'Cache-Control': 'no-store, no-cache'
    'Pragma': 'no-cache'
    'Transfer-Encoding': 'chunked'
    'Content-Type': 'application/json'
    'Server': 'Microsoft-HTTPAPI/2.0'
    'Strict-Transport-Security': 'REDACTED'
    'x-ms-activity-id': 'REDACTED'
    'x-ms-last-state-change-utc': 'REDACTED'
    'x-ms-resource-quota': 'REDACTED'
    'x-ms-resource-usage': 'REDACTED'
    'x-ms-schemaversion': 'REDACTED'
    'lsn': 'REDACTED'
    'x-ms-item-count': 'REDACTED'
    'x-ms-request-charge': 'REDACTED'
    'x-ms-alt-content-path': 'REDACTED'
    'x-ms-content-path': 'REDACTED'
    'x-ms-documentdb-partitionkeyrangeid': 'REDACTED'
    'x-ms-xp-role': 'REDACTED'
    'x-ms-cosmos-query-execution-info': 'REDACTED'
    'x-ms-global-Committed-lsn': 'REDACTED'
    'x-ms-number-of-read-regions': 'REDACTED'
    'x-ms-transport-request-id': 'REDACTED'
    'x-ms-cosmos-llsn': 'REDACTED'
    'x-ms-session-token': 'REDACTED'
    'x-ms-request-duration-ms': 'REDACTED'
    'x-ms-serviceversion': 'REDACTED'
    'x-ms-cosmos-is-partition-key-delete-pending': 'REDACTED'
    'x-ms-cosmos-physical-partition-id': 'REDACTED'
    'x-ms-cosmos-internal-partition-id': 'REDACTED'
    'x-ms-gatewayversion': 'REDACTED'
    'Date': 'Wed, 30 Oct 2024 10:30:44 GMT'
2024-10-30 05:30:45,246 - INFO - Found video post: 1geqscs
2024-10-30 05:30:45,247 - DEBUG - Starting new HTTPS connection (1): api.redgifs.com:443
2024-10-30 05:30:45,395 - DEBUG - https://api.redgifs.com:443 "GET /v2/gifs/previousweequeensnake HTTP/11" 200 None
2024-10-30 05:30:45,399 - DEBUG - Starting new HTTPS connection (1): files.redgifs.com:443
2024-10-30 05:30:45,476 - DEBUG - https://files.redgifs.com:443 "GET /PreviousWeeQueensnake.mp4 HTTP/11" 200 50070206
2024-10-30 05:30:46,946 - INFO - Successfully downloaded media to downloads/videos/1geqscs_20241030_053045_2fd81a4e.mp4
2024-10-30 05:30:46,948 - DEBUG - Using selector: KqueueSelector
2024-10-30 05:30:46,948 - INFO - Attempting to send video to Telegram - Path: downloads/videos/1geqscs_20241030_053045_2fd81a4e.mp4
2024-10-30 05:30:46,949 - DEBUG - load_ssl_context verify=True cert=None trust_env=True http2=False
2024-10-30 05:30:46,949 - DEBUG - load_verify_locations cafile='/Users/joewilson/PythonProjects/Snoogram/venv/lib/python3.12/site-packages/certifi/cacert.pem'
2024-10-30 05:30:46,955 - DEBUG - load_ssl_context verify=True cert=None trust_env=True http2=False
2024-10-30 05:30:46,955 - DEBUG - load_verify_locations cafile='/Users/joewilson/PythonProjects/Snoogram/venv/lib/python3.12/site-packages/certifi/cacert.pem'
2024-10-30 05:30:46,961 - DEBUG - Entering: get_me
2024-10-30 05:30:46,961 - DEBUG - connect_tcp.started host='api.telegram.org' port=443 local_address=None timeout=5.0 socket_options=None
2024-10-30 05:30:47,085 - DEBUG - connect_tcp.complete return_value=<httpcore._backends.anyio.AnyIOStream object at 0x108eac140>
2024-10-30 05:30:47,085 - DEBUG - start_tls.started ssl_context=<ssl.SSLContext object at 0x108e35ad0> server_hostname='api.telegram.org' timeout=5.0
2024-10-30 05:30:47,223 - DEBUG - start_tls.complete return_value=<httpcore._backends.anyio.AnyIOStream object at 0x108eaf380>
2024-10-30 05:30:47,223 - DEBUG - send_request_headers.started request=<Request [b'POST']>
2024-10-30 05:30:47,224 - DEBUG - send_request_headers.complete
2024-10-30 05:30:47,224 - DEBUG - send_request_body.started request=<Request [b'POST']>
2024-10-30 05:30:47,224 - DEBUG - send_request_body.complete
2024-10-30 05:30:47,224 - DEBUG - receive_response_headers.started request=<Request [b'POST']>
2024-10-30 05:30:47,370 - DEBUG - receive_response_headers.complete return_value=(b'HTTP/1.1', 200, b'OK', [(b'Server', b'nginx/1.18.0'), (b'Date', b'Wed, 30 Oct 2024 10:30:47 GMT'), (b'Content-Type', b'application/json'), (b'Content-Length', b'254'), (b'Connection', b'keep-alive'), (b'Strict-Transport-Security', b'max-age=31536000; includeSubDomains; preload'), (b'Access-Control-Allow-Origin', b'*'), (b'Access-Control-Allow-Methods', b'GET, POST, OPTIONS'), (b'Access-Control-Expose-Headers', b'Content-Length,Content-Type,Date,Server,Connection')])
2024-10-30 05:30:47,370 - INFO - HTTP Request: POST https://api.telegram.org/bot7867694458:AAEFLZjWPyd1p640mHENnBt479WRYfSavWg/getMe "HTTP/1.1 200 OK"
2024-10-30 05:30:47,370 - DEBUG - receive_response_body.started request=<Request [b'POST']>
2024-10-30 05:30:47,370 - DEBUG - receive_response_body.complete
2024-10-30 05:30:47,371 - DEBUG - response_closed.started
2024-10-30 05:30:47,371 - DEBUG - response_closed.complete
2024-10-30 05:30:47,371 - DEBUG - User(api_kwargs={'can_connect_to_business': False, 'has_main_web_app': False}, can_join_groups=True, can_read_all_group_messages=False, first_name='RedditBot', id=7867694458, is_bot=True, supports_inline_queries=False, username='RedditImage_bot')
2024-10-30 05:30:47,371 - DEBUG - Exiting: get_me
2024-10-30 05:30:47,371 - DEBUG - This Bot is already initialized.
2024-10-30 05:30:47,371 - DEBUG - Entering: send_video
2024-10-30 05:30:47,383 - DEBUG - send_request_headers.started request=<Request [b'POST']>
2024-10-30 05:30:47,383 - DEBUG - send_request_headers.complete
2024-10-30 05:30:47,383 - DEBUG - send_request_body.started request=<Request [b'POST']>
2024-10-30 05:30:52,218 - DEBUG - send_request_body.complete
2024-10-30 05:30:52,219 - DEBUG - receive_response_headers.started request=<Request [b'POST']>
2024-10-30 05:30:55,504 - DEBUG - receive_response_headers.complete return_value=(b'HTTP/1.1', 200, b'OK', [(b'Server', b'nginx/1.18.0'), (b'Date', b'Wed, 30 Oct 2024 10:30:55 GMT'), (b'Content-Type', b'application/json'), (b'Content-Length', b'600'), (b'Connection', b'keep-alive'), (b'Strict-Transport-Security', b'max-age=31536000; includeSubDomains; preload'), (b'Access-Control-Allow-Origin', b'*'), (b'Access-Control-Allow-Methods', b'GET, POST, OPTIONS'), (b'Access-Control-Expose-Headers', b'Content-Length,Content-Type,Date,Server,Connection')])
2024-10-30 05:30:55,505 - INFO - HTTP Request: POST https://api.telegram.org/bot7867694458:AAEFLZjWPyd1p640mHENnBt479WRYfSavWg/sendVideo "HTTP/1.1 200 OK"
2024-10-30 05:30:55,506 - DEBUG - receive_response_body.started request=<Request [b'POST']>
2024-10-30 05:30:55,506 - DEBUG - receive_response_body.complete
2024-10-30 05:30:55,506 - DEBUG - response_closed.started
2024-10-30 05:30:55,506 - DEBUG - response_closed.complete
2024-10-30 05:30:55,509 - DEBUG - Message(caption='From r/girlsfinishingthejob: I love when he covers my titties with his hot cum ðŸ¥°\nUpvotes: 239', channel_chat_created=False, chat=Chat(id=-1002490380283, title='Reddit_Pic_Stream', type=<ChatType.CHANNEL>), date=datetime.datetime(2024, 10, 30, 10, 30, 55, tzinfo=<UTC>), delete_chat_photo=False, group_chat_created=False, message_id=252, sender_chat=Chat(id=-1002490380283, title='Reddit_Pic_Stream', type=<ChatType.CHANNEL>), supergroup_chat_created=False, video=Video(duration=0, file_id='BAACAgEAAyEGAASUcC_7AAP8ZyIK378pc5DHA9Dt10Qd4vCwPAEAArsEAAIZEBFFkXUdfCnG2vA2BA', file_name='1geqscs_20241030_053045_2fd81a4e.mp4', file_size=50070206, file_unique_id='AgADuwQAAhkQEUU', height=320, mime_type='video/mp4', width=320))
2024-10-30 05:30:55,510 - DEBUG - Exiting: send_video
2024-10-30 05:30:55,510 - DEBUG - close.started
2024-10-30 05:30:55,510 - DEBUG - close.complete
2024-10-30 05:30:55,510 - DEBUG - This Bot is already shut down. Returning.
2024-10-30 05:30:55,510 - DEBUG - Shut down of Updater complete
2024-10-30 05:30:55,510 - INFO - Successfully sent video to Telegram
2024-10-30 05:30:55,516 - ERROR - Error processing subreddit girlsfinishingthejob: (sqlite3.OperationalError) attempt to write a readonly database
[SQL: INSERT INTO sent_post (post_id, subreddit_name, sent_at) VALUES (?, ?, ?)]
[parameters: ('1geqscs', 'girlsfinishingthejob', '2024-10-30 10:30:55.514755')]
(Background on this error at: https://sqlalche.me/e/20/e3q8)
2024-10-30 05:30:55,519 - ERROR - Job "send_to_telegram (trigger: interval[0:01:00], next run at: 2024-10-30 05:31:16 CDT)" raised an exception
Traceback (most recent call last):
  File "/Users/joewilson/PythonProjects/Snoogram/venv/lib/python3.12/site-packages/sqlalchemy/engine/base.py", line 1967, in _exec_single_context
    self.dialect.do_execute(
  File "/Users/joewilson/PythonProjects/Snoogram/venv/lib/python3.12/site-packages/sqlalchemy/engine/default.py", line 941, in do_execute
    cursor.execute(statement, parameters)
sqlite3.OperationalError: attempt to write a readonly database

The above exception was the direct cause of the following exception:

Traceback (most recent call last):
  File "/Users/joewilson/PythonProjects/Snoogram/venv/lib/python3.12/site-packages/apscheduler/executors/base.py", line 125, in run_job
    retval = job.func(*job.args, **job.kwargs)
             ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/Users/joewilson/PythonProjects/Snoogram/backend/app.py", line 265, in send_to_telegram
    # Update last_check in Cosmos DB
                ^^^^^^^^^^^^^^^^^^^^^
  File "/Users/joewilson/PythonProjects/Snoogram/backend/db_operations.py", line 100, in add_sent_post
  File "/Users/joewilson/PythonProjects/Snoogram/venv/lib/python3.12/site-packages/sqlalchemy/orm/scoping.py", line 597, in commit
    return self._proxied.commit()
           ^^^^^^^^^^^^^^^^^^^^^^
  File "/Users/joewilson/PythonProjects/Snoogram/venv/lib/python3.12/site-packages/sqlalchemy/orm/session.py", line 2028, in commit
    trans.commit(_to_root=True)
  File "<string>", line 2, in commit
  File "/Users/joewilson/PythonProjects/Snoogram/venv/lib/python3.12/site-packages/sqlalchemy/orm/state_changes.py", line 139, in _go
    ret_value = fn(self, *arg, **kw)
                ^^^^^^^^^^^^^^^^^^^^
  File "/Users/joewilson/PythonProjects/Snoogram/venv/lib/python3.12/site-packages/sqlalchemy/orm/session.py", line 1313, in commit
    self._prepare_impl()
  File "<string>", line 2, in _prepare_impl
  File "/Users/joewilson/PythonProjects/Snoogram/venv/lib/python3.12/site-packages/sqlalchemy/orm/state_changes.py", line 139, in _go
    ret_value = fn(self, *arg, **kw)
                ^^^^^^^^^^^^^^^^^^^^
  File "/Users/joewilson/PythonProjects/Snoogram/venv/lib/python3.12/site-packages/sqlalchemy/orm/session.py", line 1288, in _prepare_impl
    self.session.flush()
  File "/Users/joewilson/PythonProjects/Snoogram/venv/lib/python3.12/site-packages/sqlalchemy/orm/session.py", line 4352, in flush
    self._flush(objects)
  File "/Users/joewilson/PythonProjects/Snoogram/venv/lib/python3.12/site-packages/sqlalchemy/orm/session.py", line 4487, in _flush
    with util.safe_reraise():
  File "/Users/joewilson/PythonProjects/Snoogram/venv/lib/python3.12/site-packages/sqlalchemy/util/langhelpers.py", line 146, in __exit__
    raise exc_value.with_traceback(exc_tb)
  File "/Users/joewilson/PythonProjects/Snoogram/venv/lib/python3.12/site-packages/sqlalchemy/orm/session.py", line 4448, in _flush
    flush_context.execute()
  File "/Users/joewilson/PythonProjects/Snoogram/venv/lib/python3.12/site-packages/sqlalchemy/orm/unitofwork.py", line 466, in execute
    rec.execute(self)
  File "/Users/joewilson/PythonProjects/Snoogram/venv/lib/python3.12/site-packages/sqlalchemy/orm/unitofwork.py", line 642, in execute
    util.preloaded.orm_persistence.save_obj(
  File "/Users/joewilson/PythonProjects/Snoogram/venv/lib/python3.12/site-packages/sqlalchemy/orm/persistence.py", line 93, in save_obj
    _emit_insert_statements(
  File "/Users/joewilson/PythonProjects/Snoogram/venv/lib/python3.12/site-packages/sqlalchemy/orm/persistence.py", line 1233, in _emit_insert_statements
    result = connection.execute(
             ^^^^^^^^^^^^^^^^^^^
  File "/Users/joewilson/PythonProjects/Snoogram/venv/lib/python3.12/site-packages/sqlalchemy/engine/base.py", line 1418, in execute
    return meth(
           ^^^^^
  File "/Users/joewilson/PythonProjects/Snoogram/venv/lib/python3.12/site-packages/sqlalchemy/sql/elements.py", line 515, in _execute_on_connection
    return connection._execute_clauseelement(
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/Users/joewilson/PythonProjects/Snoogram/venv/lib/python3.12/site-packages/sqlalchemy/engine/base.py", line 1640, in _execute_clauseelement
    ret = self._execute_context(
          ^^^^^^^^^^^^^^^^^^^^^^
  File "/Users/joewilson/PythonProjects/Snoogram/venv/lib/python3.12/site-packages/sqlalchemy/engine/base.py", line 1846, in _execute_context
    return self._exec_single_context(
           ^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/Users/joewilson/PythonProjects/Snoogram/venv/lib/python3.12/site-packages/sqlalchemy/engine/base.py", line 1986, in _exec_single_context
    self._handle_dbapi_exception(
  File "/Users/joewilson/PythonProjects/Snoogram/venv/lib/python3.12/site-packages/sqlalchemy/engine/base.py", line 2355, in _handle_dbapi_exception
    raise sqlalchemy_exception.with_traceback(exc_info[2]) from e
  File "/Users/joewilson/PythonProjects/Snoogram/venv/lib/python3.12/site-packages/sqlalchemy/engine/base.py", line 1967, in _exec_single_context
    self.dialect.do_execute(
  File "/Users/joewilson/PythonProjects/Snoogram/venv/lib/python3.12/site-packages/sqlalchemy/engine/default.py", line 941, in do_execute
    cursor.execute(statement, parameters)
sqlalchemy.exc.OperationalError: (sqlite3.OperationalError) attempt to write a readonly database
[SQL: INSERT INTO sent_post (post_id, subreddit_name, sent_at) VALUES (?, ?, ?)]
[parameters: ('1geqscs', 'girlsfinishingthejob', '2024-10-30 10:30:55.514755')]
(Background on this error at: https://sqlalche.me/e/20/e3q8)
2024-10-30 05:31:16,971 - DEBUG - Looking for jobs to run
2024-10-30 05:31:16,974 - DEBUG - Next wakeup is due at 2024-10-30 05:32:16.969826-05:00 (in 59.995863 seconds)
2024-10-30 05:31:16,974 - INFO - Running job "send_to_telegram (trigger: interval[0:01:00], next run at: 2024-10-30 05:32:16 CDT)" (scheduled at 2024-10-30 05:31:16.969826-05:00)
2024-10-30 05:31:16,974 - INFO - Running job "send_to_telegram (trigger: interval[0:01:00], next run at: 2024-10-30 05:32:16 CDT)" (scheduled at 2024-10-30 05:31:16.970029-05:00)
2024-10-30 05:31:16,975 - INFO - Processing subreddit: girlsfinishingthejob
2024-10-30 05:31:16,975 - INFO - Processing subreddit: wifebutt
2024-10-30 05:31:16,976 - INFO - Fetching top posts of the day
2024-10-30 05:31:16,976 - INFO - Fetching top posts of the month
2024-10-30 05:31:16,977 - DEBUG - Fetching: GET https://oauth.reddit.com/r/girlsfinishingthejob/top at 1730284276.977386
2024-10-30 05:31:16,977 - DEBUG - Fetching: GET https://oauth.reddit.com/r/wifebutt/top at 1730284276.97762
2024-10-30 05:31:16,977 - DEBUG - Data: None
2024-10-30 05:31:16,977 - DEBUG - Data: None
2024-10-30 05:31:16,978 - DEBUG - Params: {'limit': 50, 'raw_json': 1, 't': 'day'}
2024-10-30 05:31:16,978 - DEBUG - Params: {'limit': 50, 'raw_json': 1, 't': 'month'}
2024-10-30 05:31:17,289 - DEBUG - https://oauth.reddit.com:443 "GET /r/girlsfinishingthejob/top?t=day&limit=50&raw_json=1 HTTP/11" 200 24127
2024-10-30 05:31:17,305 - DEBUG - Response: 200 (24127 bytes) (rst-0:rem-148.0:used-2 ratelimit) at 1730284277.305681
2024-10-30 05:31:17,356 - INFO - Checking post: 1gelyz1 - Score: 7114 - URL: https://www.redgifs.com/watch/uttersvelteamphibian
2024-10-30 05:31:17,361 - INFO - Request URL: 'https://cosmossnoogram-centralus.documents.azure.com:443/dbs/ToDoList/colls/sent_posts/docs/'
Request method: 'POST'
Request headers:
    'Cache-Control': 'no-cache'
    'x-ms-version': 'REDACTED'
    'x-ms-documentdb-query-iscontinuationexpected': 'REDACTED'
    'x-ms-consistency-level': 'REDACTED'
    'x-ms-documentdb-isquery': 'REDACTED'
    'Content-Type': 'application/query+json'
    'x-ms-session-token': 'REDACTED'
    'x-ms-documentdb-query-enablecrosspartition': 'REDACTED'
    'x-ms-date': 'REDACTED'
    'authorization': 'REDACTED'
    'Accept': 'application/json'
    'x-ms-cosmos-correlated-activityid': 'REDACTED'
    'Content-Length': '107'
    'User-Agent': 'azsdk-python-cosmos/4.5.1 Python/3.12.4 (macOS-15.0.1-arm64-arm-64bit)'
A body is sent with the request
2024-10-30 05:31:17,394 - DEBUG - https://cosmossnoogram-centralus.documents.azure.com:443 "POST /dbs/ToDoList/colls/sent_posts/docs/ HTTP/11" 200 None
2024-10-30 05:31:17,394 - INFO - Response status: 200
Response headers:
    'Cache-Control': 'no-store, no-cache'
    'Pragma': 'no-cache'
    'Transfer-Encoding': 'chunked'
    'Content-Type': 'application/json'
    'Server': 'Microsoft-HTTPAPI/2.0'
    'Strict-Transport-Security': 'REDACTED'
    'x-ms-activity-id': 'REDACTED'
    'x-ms-last-state-change-utc': 'REDACTED'
    'x-ms-resource-quota': 'REDACTED'
    'x-ms-resource-usage': 'REDACTED'
    'x-ms-schemaversion': 'REDACTED'
    'lsn': 'REDACTED'
    'x-ms-item-count': 'REDACTED'
    'x-ms-request-charge': 'REDACTED'
    'x-ms-alt-content-path': 'REDACTED'
    'x-ms-content-path': 'REDACTED'
    'x-ms-documentdb-partitionkeyrangeid': 'REDACTED'
    'x-ms-xp-role': 'REDACTED'
    'x-ms-cosmos-query-execution-info': 'REDACTED'
    'x-ms-global-Committed-lsn': 'REDACTED'
    'x-ms-number-of-read-regions': 'REDACTED'
    'x-ms-transport-request-id': 'REDACTED'
    'x-ms-cosmos-llsn': 'REDACTED'
    'x-ms-session-token': 'REDACTED'
    'x-ms-request-duration-ms': 'REDACTED'
    'x-ms-serviceversion': 'REDACTED'
    'x-ms-cosmos-is-partition-key-delete-pending': 'REDACTED'
    'x-ms-cosmos-physical-partition-id': 'REDACTED'
    'x-ms-cosmos-internal-partition-id': 'REDACTED'
    'x-ms-gatewayversion': 'REDACTED'
    'Date': 'Wed, 30 Oct 2024 10:31:16 GMT'
2024-10-30 05:31:17,394 - INFO - Found video post: 1gelyz1
2024-10-30 05:31:17,395 - DEBUG - Starting new HTTPS connection (1): api.redgifs.com:443
2024-10-30 05:31:17,524 - DEBUG - https://api.redgifs.com:443 "GET /v2/gifs/uttersvelteamphibian HTTP/11" 200 None
2024-10-30 05:31:17,526 - DEBUG - Starting new HTTPS connection (1): files.redgifs.com:443
2024-10-30 05:31:17,604 - DEBUG - https://files.redgifs.com:443 "GET /UtterSvelteAmphibian.mp4 HTTP/11" 200 42980012
2024-10-30 05:31:17,782 - DEBUG - https://oauth.reddit.com:443 "GET /r/wifebutt/top?t=month&limit=50&raw_json=1 HTTP/11" 200 49242
2024-10-30 05:31:17,809 - DEBUG - Response: 200 (49242 bytes) (rst-0:rem-149.0:used-1 ratelimit) at 1730284277.809375
2024-10-30 05:31:17,814 - INFO - Checking post: 1g9w053 - Score: 5353 - URL: https://www.reddit.com/gallery/1g9w053
2024-10-30 05:31:17,815 - INFO - Request URL: 'https://cosmossnoogram-centralus.documents.azure.com:443/dbs/ToDoList/colls/sent_posts/docs/'
Request method: 'POST'
Request headers:
    'Cache-Control': 'no-cache'
    'x-ms-version': 'REDACTED'
    'x-ms-documentdb-query-iscontinuationexpected': 'REDACTED'
    'x-ms-consistency-level': 'REDACTED'
    'x-ms-documentdb-isquery': 'REDACTED'
    'Content-Type': 'application/query+json'
    'x-ms-session-token': 'REDACTED'
    'x-ms-documentdb-query-enablecrosspartition': 'REDACTED'
    'x-ms-date': 'REDACTED'
    'authorization': 'REDACTED'
    'Accept': 'application/json'
    'x-ms-cosmos-correlated-activityid': 'REDACTED'
    'Content-Length': '107'
    'User-Agent': 'azsdk-python-cosmos/4.5.1 Python/3.12.4 (macOS-15.0.1-arm64-arm-64bit)'
A body is sent with the request
2024-10-30 05:31:17,863 - DEBUG - https://cosmossnoogram-centralus.documents.azure.com:443 "POST /dbs/ToDoList/colls/sent_posts/docs/ HTTP/11" 200 None
2024-10-30 05:31:17,864 - INFO - Response status: 200
Response headers:
    'Cache-Control': 'no-store, no-cache'
    'Pragma': 'no-cache'
    'Transfer-Encoding': 'chunked'
    'Content-Type': 'application/json'
    'Server': 'Microsoft-HTTPAPI/2.0'
    'Strict-Transport-Security': 'REDACTED'
    'x-ms-activity-id': 'REDACTED'
    'x-ms-last-state-change-utc': 'REDACTED'
    'x-ms-resource-quota': 'REDACTED'
    'x-ms-resource-usage': 'REDACTED'
    'x-ms-schemaversion': 'REDACTED'
    'lsn': 'REDACTED'
    'x-ms-item-count': 'REDACTED'
    'x-ms-request-charge': 'REDACTED'
    'x-ms-alt-content-path': 'REDACTED'
    'x-ms-content-path': 'REDACTED'
    'x-ms-documentdb-partitionkeyrangeid': 'REDACTED'
    'x-ms-xp-role': 'REDACTED'
    'x-ms-cosmos-query-execution-info': 'REDACTED'
    'x-ms-global-Committed-lsn': 'REDACTED'
    'x-ms-number-of-read-regions': 'REDACTED'
    'x-ms-transport-request-id': 'REDACTED'
    'x-ms-cosmos-llsn': 'REDACTED'
    'x-ms-session-token': 'REDACTED'
    'x-ms-request-duration-ms': 'REDACTED'
    'x-ms-serviceversion': 'REDACTED'
    'x-ms-cosmos-is-partition-key-delete-pending': 'REDACTED'
    'x-ms-cosmos-physical-partition-id': 'REDACTED'
    'x-ms-cosmos-internal-partition-id': 'REDACTED'
    'x-ms-gatewayversion': 'REDACTED'
    'Date': 'Wed, 30 Oct 2024 10:31:16 GMT'
2024-10-30 05:31:17,864 - INFO - Post 1g9w053 is not an image or video post, skipping
2024-10-30 05:31:17,864 - INFO - Checking post: 1fv4cfc - Score: 4576 - URL: https://www.reddit.com/gallery/1fv4cfc
2024-10-30 05:31:17,865 - INFO - Request URL: 'https://cosmossnoogram-centralus.documents.azure.com:443/dbs/ToDoList/colls/sent_posts/docs/'
Request method: 'POST'
Request headers:
    'Cache-Control': 'no-cache'
    'x-ms-version': 'REDACTED'
    'x-ms-documentdb-query-iscontinuationexpected': 'REDACTED'
    'x-ms-consistency-level': 'REDACTED'
    'x-ms-documentdb-isquery': 'REDACTED'
    'Content-Type': 'application/query+json'
    'x-ms-session-token': 'REDACTED'
    'x-ms-documentdb-query-enablecrosspartition': 'REDACTED'
    'x-ms-date': 'REDACTED'
    'authorization': 'REDACTED'
    'Accept': 'application/json'
    'x-ms-cosmos-correlated-activityid': 'REDACTED'
    'Content-Length': '107'
    'User-Agent': 'azsdk-python-cosmos/4.5.1 Python/3.12.4 (macOS-15.0.1-arm64-arm-64bit)'
A body is sent with the request
2024-10-30 05:31:17,934 - DEBUG - https://cosmossnoogram-centralus.documents.azure.com:443 "POST /dbs/ToDoList/colls/sent_posts/docs/ HTTP/11" 200 None
2024-10-30 05:31:17,934 - INFO - Response status: 200
Response headers:
    'Cache-Control': 'no-store, no-cache'
    'Pragma': 'no-cache'
    'Transfer-Encoding': 'chunked'
    'Content-Type': 'application/json'
    'Server': 'Microsoft-HTTPAPI/2.0'
    'Strict-Transport-Security': 'REDACTED'
    'x-ms-activity-id': 'REDACTED'
    'x-ms-last-state-change-utc': 'REDACTED'
    'x-ms-resource-quota': 'REDACTED'
    'x-ms-resource-usage': 'REDACTED'
    'x-ms-schemaversion': 'REDACTED'
    'lsn': 'REDACTED'
    'x-ms-item-count': 'REDACTED'
    'x-ms-request-charge': 'REDACTED'
    'x-ms-alt-content-path': 'REDACTED'
    'x-ms-content-path': 'REDACTED'
    'x-ms-documentdb-partitionkeyrangeid': 'REDACTED'
    'x-ms-xp-role': 'REDACTED'
    'x-ms-cosmos-query-execution-info': 'REDACTED'
    'x-ms-global-Committed-lsn': 'REDACTED'
    'x-ms-number-of-read-regions': 'REDACTED'
    'x-ms-transport-request-id': 'REDACTED'
    'x-ms-cosmos-llsn': 'REDACTED'
    'x-ms-session-token': 'REDACTED'
    'x-ms-request-duration-ms': 'REDACTED'
    'x-ms-serviceversion': 'REDACTED'
    'x-ms-cosmos-is-partition-key-delete-pending': 'REDACTED'
    'x-ms-cosmos-physical-partition-id': 'REDACTED'
    'x-ms-cosmos-internal-partition-id': 'REDACTED'
    'x-ms-gatewayversion': 'REDACTED'
    'Date': 'Wed, 30 Oct 2024 10:31:16 GMT'
2024-10-30 05:31:17,934 - INFO - Post 1fv4cfc is not an image or video post, skipping
2024-10-30 05:31:17,934 - INFO - Checking post: 1ganrp0 - Score: 4215 - URL: https://i.redd.it/ezatz8645lwd1.jpeg
2024-10-30 05:31:17,935 - INFO - Request URL: 'https://cosmossnoogram-centralus.documents.azure.com:443/dbs/ToDoList/colls/sent_posts/docs/'
Request method: 'POST'
Request headers:
    'Cache-Control': 'no-cache'
    'x-ms-version': 'REDACTED'
    'x-ms-documentdb-query-iscontinuationexpected': 'REDACTED'
    'x-ms-consistency-level': 'REDACTED'
    'x-ms-documentdb-isquery': 'REDACTED'
    'Content-Type': 'application/query+json'
    'x-ms-session-token': 'REDACTED'
    'x-ms-documentdb-query-enablecrosspartition': 'REDACTED'
    'x-ms-date': 'REDACTED'
    'authorization': 'REDACTED'
    'Accept': 'application/json'
    'x-ms-cosmos-correlated-activityid': 'REDACTED'
    'Content-Length': '107'
    'User-Agent': 'azsdk-python-cosmos/4.5.1 Python/3.12.4 (macOS-15.0.1-arm64-arm-64bit)'
A body is sent with the request
2024-10-30 05:31:18,000 - DEBUG - https://cosmossnoogram-centralus.documents.azure.com:443 "POST /dbs/ToDoList/colls/sent_posts/docs/ HTTP/11" 200 None
2024-10-30 05:31:18,000 - INFO - Response status: 200
Response headers:
    'Cache-Control': 'no-store, no-cache'
    'Pragma': 'no-cache'
    'Transfer-Encoding': 'chunked'
    'Content-Type': 'application/json'
    'Server': 'Microsoft-HTTPAPI/2.0'
    'Strict-Transport-Security': 'REDACTED'
    'x-ms-activity-id': 'REDACTED'
    'x-ms-last-state-change-utc': 'REDACTED'
    'x-ms-resource-quota': 'REDACTED'
    'x-ms-resource-usage': 'REDACTED'
    'x-ms-schemaversion': 'REDACTED'
    'lsn': 'REDACTED'
    'x-ms-item-count': 'REDACTED'
    'x-ms-request-charge': 'REDACTED'
    'x-ms-alt-content-path': 'REDACTED'
    'x-ms-content-path': 'REDACTED'
    'x-ms-documentdb-partitionkeyrangeid': 'REDACTED'
    'x-ms-xp-role': 'REDACTED'
    'x-ms-cosmos-query-execution-info': 'REDACTED'
    'x-ms-global-Committed-lsn': 'REDACTED'
    'x-ms-number-of-read-regions': 'REDACTED'
    'x-ms-transport-request-id': 'REDACTED'
    'x-ms-cosmos-llsn': 'REDACTED'
    'x-ms-session-token': 'REDACTED'
    'x-ms-request-duration-ms': 'REDACTED'
    'x-ms-serviceversion': 'REDACTED'
    'x-ms-cosmos-is-partition-key-delete-pending': 'REDACTED'
    'x-ms-cosmos-physical-partition-id': 'REDACTED'
    'x-ms-cosmos-internal-partition-id': 'REDACTED'
    'x-ms-gatewayversion': 'REDACTED'
    'Date': 'Wed, 30 Oct 2024 10:31:18 GMT'
2024-10-30 05:31:18,000 - INFO - Post 1ganrp0 is a duplicate, skipping
2024-10-30 05:31:18,000 - INFO - Checking post: 1gdrcjt - Score: 4059 - URL: https://www.redgifs.com/watch/unrealisticdefinitebarebirdbat
2024-10-30 05:31:18,001 - INFO - Post 1gdrcjt is a duplicate, skipping
2024-10-30 05:31:18,001 - INFO - Checking post: 1g30sx1 - Score: 3960 - URL: https://www.redgifs.com/watch/hardwarlikesunbittern
2024-10-30 05:31:18,001 - INFO - Post 1g30sx1 is a duplicate, skipping
2024-10-30 05:31:18,001 - INFO - Checking post: 1fs7839 - Score: 3849 - URL: https://www.reddit.com/gallery/1fs7839
2024-10-30 05:31:18,002 - INFO - Request URL: 'https://cosmossnoogram-centralus.documents.azure.com:443/dbs/ToDoList/colls/sent_posts/docs/'
Request method: 'POST'
Request headers:
    'Cache-Control': 'no-cache'
    'x-ms-version': 'REDACTED'
    'x-ms-documentdb-query-iscontinuationexpected': 'REDACTED'
    'x-ms-consistency-level': 'REDACTED'
    'x-ms-documentdb-isquery': 'REDACTED'
    'Content-Type': 'application/query+json'
    'x-ms-session-token': 'REDACTED'
    'x-ms-documentdb-query-enablecrosspartition': 'REDACTED'
    'x-ms-date': 'REDACTED'
    'authorization': 'REDACTED'
    'Accept': 'application/json'
    'x-ms-cosmos-correlated-activityid': 'REDACTED'
    'Content-Length': '107'
    'User-Agent': 'azsdk-python-cosmos/4.5.1 Python/3.12.4 (macOS-15.0.1-arm64-arm-64bit)'
A body is sent with the request
2024-10-30 05:31:18,071 - DEBUG - https://cosmossnoogram-centralus.documents.azure.com:443 "POST /dbs/ToDoList/colls/sent_posts/docs/ HTTP/11" 200 None
2024-10-30 05:31:18,072 - INFO - Response status: 200
Response headers:
    'Cache-Control': 'no-store, no-cache'
    'Pragma': 'no-cache'
    'Transfer-Encoding': 'chunked'
    'Content-Type': 'application/json'
    'Server': 'Microsoft-HTTPAPI/2.0'
    'Strict-Transport-Security': 'REDACTED'
    'x-ms-activity-id': 'REDACTED'
    'x-ms-last-state-change-utc': 'REDACTED'
    'x-ms-resource-quota': 'REDACTED'
    'x-ms-resource-usage': 'REDACTED'
    'x-ms-schemaversion': 'REDACTED'
    'lsn': 'REDACTED'
    'x-ms-item-count': 'REDACTED'
    'x-ms-request-charge': 'REDACTED'
    'x-ms-alt-content-path': 'REDACTED'
    'x-ms-content-path': 'REDACTED'
    'x-ms-documentdb-partitionkeyrangeid': 'REDACTED'
    'x-ms-xp-role': 'REDACTED'
    'x-ms-cosmos-query-execution-info': 'REDACTED'
    'x-ms-global-Committed-lsn': 'REDACTED'
    'x-ms-number-of-read-regions': 'REDACTED'
    'x-ms-transport-request-id': 'REDACTED'
    'x-ms-cosmos-llsn': 'REDACTED'
    'x-ms-session-token': 'REDACTED'
    'x-ms-request-duration-ms': 'REDACTED'
    'x-ms-serviceversion': 'REDACTED'
    'x-ms-cosmos-is-partition-key-delete-pending': 'REDACTED'
    'x-ms-cosmos-physical-partition-id': 'REDACTED'
    'x-ms-cosmos-internal-partition-id': 'REDACTED'
    'x-ms-gatewayversion': 'REDACTED'
    'Date': 'Wed, 30 Oct 2024 10:31:18 GMT'
2024-10-30 05:31:18,072 - INFO - Post 1fs7839 is not an image or video post, skipping
2024-10-30 05:31:18,072 - INFO - Checking post: 1g2rse9 - Score: 3769 - URL: https://i.redd.it/gzxs1aeshjud1.png
2024-10-30 05:31:18,073 - INFO - Post 1g2rse9 is a duplicate, skipping
2024-10-30 05:31:18,073 - INFO - Checking post: 1ge9loz - Score: 3729 - URL: https://www.redgifs.com/watch/deadlygregariouswoodchuck
2024-10-30 05:31:18,073 - INFO - Post 1ge9loz is a duplicate, skipping
2024-10-30 05:31:18,073 - INFO - Checking post: 1g0e966 - Score: 3640 - URL: https://www.reddit.com/gallery/1g0e966
2024-10-30 05:31:18,074 - INFO - Request URL: 'https://cosmossnoogram-centralus.documents.azure.com:443/dbs/ToDoList/colls/sent_posts/docs/'
Request method: 'POST'
Request headers:
    'Cache-Control': 'no-cache'
    'x-ms-version': 'REDACTED'
    'x-ms-documentdb-query-iscontinuationexpected': 'REDACTED'
    'x-ms-consistency-level': 'REDACTED'
    'x-ms-documentdb-isquery': 'REDACTED'
    'Content-Type': 'application/query+json'
    'x-ms-session-token': 'REDACTED'
    'x-ms-documentdb-query-enablecrosspartition': 'REDACTED'
    'x-ms-date': 'REDACTED'
    'authorization': 'REDACTED'
    'Accept': 'application/json'
    'x-ms-cosmos-correlated-activityid': 'REDACTED'
    'Content-Length': '107'
    'User-Agent': 'azsdk-python-cosmos/4.5.1 Python/3.12.4 (macOS-15.0.1-arm64-arm-64bit)'
A body is sent with the request
2024-10-30 05:31:18,124 - DEBUG - https://cosmossnoogram-centralus.documents.azure.com:443 "POST /dbs/ToDoList/colls/sent_posts/docs/ HTTP/11" 200 None
2024-10-30 05:31:18,124 - INFO - Response status: 200
Response headers:
    'Cache-Control': 'no-store, no-cache'
    'Pragma': 'no-cache'
    'Transfer-Encoding': 'chunked'
    'Content-Type': 'application/json'
    'Server': 'Microsoft-HTTPAPI/2.0'
    'Strict-Transport-Security': 'REDACTED'
    'x-ms-activity-id': 'REDACTED'
    'x-ms-last-state-change-utc': 'REDACTED'
    'x-ms-resource-quota': 'REDACTED'
    'x-ms-resource-usage': 'REDACTED'
    'x-ms-schemaversion': 'REDACTED'
    'lsn': 'REDACTED'
    'x-ms-item-count': 'REDACTED'
    'x-ms-request-charge': 'REDACTED'
    'x-ms-alt-content-path': 'REDACTED'
    'x-ms-content-path': 'REDACTED'
    'x-ms-documentdb-partitionkeyrangeid': 'REDACTED'
    'x-ms-xp-role': 'REDACTED'
    'x-ms-cosmos-query-execution-info': 'REDACTED'
    'x-ms-global-Committed-lsn': 'REDACTED'
    'x-ms-number-of-read-regions': 'REDACTED'
    'x-ms-transport-request-id': 'REDACTED'
    'x-ms-cosmos-llsn': 'REDACTED'
    'x-ms-session-token': 'REDACTED'
    'x-ms-request-duration-ms': 'REDACTED'
    'x-ms-serviceversion': 'REDACTED'
    'x-ms-cosmos-is-partition-key-delete-pending': 'REDACTED'
    'x-ms-cosmos-physical-partition-id': 'REDACTED'
    'x-ms-cosmos-internal-partition-id': 'REDACTED'
    'x-ms-gatewayversion': 'REDACTED'
    'Date': 'Wed, 30 Oct 2024 10:31:18 GMT'
2024-10-30 05:31:18,125 - INFO - Post 1g0e966 is not an image or video post, skipping
2024-10-30 05:31:18,125 - INFO - Checking post: 1gckgcy - Score: 3395 - URL: https://i.redd.it/njd0mbyjl3xd1.jpeg
2024-10-30 05:31:18,125 - INFO - Post 1gckgcy is a duplicate, skipping
2024-10-30 05:31:18,125 - INFO - Checking post: 1fznoil - Score: 3329 - URL: https://i.redd.it/eruk3694dptd1.jpeg
2024-10-30 05:31:18,126 - INFO - Post 1fznoil is a duplicate, skipping
2024-10-30 05:31:18,126 - INFO - Checking post: 1g3dsj7 - Score: 3184 - URL: https://i.redd.it/cg9oigznmpud1.jpeg
2024-10-30 05:31:18,126 - INFO - Post 1g3dsj7 is a duplicate, skipping
2024-10-30 05:31:18,126 - INFO - Checking post: 1g4dx9i - Score: 3139 - URL: https://i.redd.it/5kv3c8f3lyud1.jpeg
2024-10-30 05:31:18,127 - INFO - Request URL: 'https://cosmossnoogram-centralus.documents.azure.com:443/dbs/ToDoList/colls/sent_posts/docs/'
Request method: 'POST'
Request headers:
    'Cache-Control': 'no-cache'
    'x-ms-version': 'REDACTED'
    'x-ms-documentdb-query-iscontinuationexpected': 'REDACTED'
    'x-ms-consistency-level': 'REDACTED'
    'x-ms-documentdb-isquery': 'REDACTED'
    'Content-Type': 'application/query+json'
    'x-ms-session-token': 'REDACTED'
    'x-ms-documentdb-query-enablecrosspartition': 'REDACTED'
    'x-ms-date': 'REDACTED'
    'authorization': 'REDACTED'
    'Accept': 'application/json'
    'x-ms-cosmos-correlated-activityid': 'REDACTED'
    'Content-Length': '107'
    'User-Agent': 'azsdk-python-cosmos/4.5.1 Python/3.12.4 (macOS-15.0.1-arm64-arm-64bit)'
A body is sent with the request
2024-10-30 05:31:18,184 - DEBUG - https://cosmossnoogram-centralus.documents.azure.com:443 "POST /dbs/ToDoList/colls/sent_posts/docs/ HTTP/11" 200 None
2024-10-30 05:31:18,185 - INFO - Response status: 200
Response headers:
    'Cache-Control': 'no-store, no-cache'
    'Pragma': 'no-cache'
    'Transfer-Encoding': 'chunked'
    'Content-Type': 'application/json'
    'Server': 'Microsoft-HTTPAPI/2.0'
    'Strict-Transport-Security': 'REDACTED'
    'x-ms-activity-id': 'REDACTED'
    'x-ms-last-state-change-utc': 'REDACTED'
    'x-ms-resource-quota': 'REDACTED'
    'x-ms-resource-usage': 'REDACTED'
    'x-ms-schemaversion': 'REDACTED'
    'lsn': 'REDACTED'
    'x-ms-item-count': 'REDACTED'
    'x-ms-request-charge': 'REDACTED'
    'x-ms-alt-content-path': 'REDACTED'
    'x-ms-content-path': 'REDACTED'
    'x-ms-documentdb-partitionkeyrangeid': 'REDACTED'
    'x-ms-xp-role': 'REDACTED'
    'x-ms-cosmos-query-execution-info': 'REDACTED'
    'x-ms-global-Committed-lsn': 'REDACTED'
    'x-ms-number-of-read-regions': 'REDACTED'
    'x-ms-transport-request-id': 'REDACTED'
    'x-ms-cosmos-llsn': 'REDACTED'
    'x-ms-session-token': 'REDACTED'
    'x-ms-request-duration-ms': 'REDACTED'
    'x-ms-serviceversion': 'REDACTED'
    'x-ms-cosmos-is-partition-key-delete-pending': 'REDACTED'
    'x-ms-cosmos-physical-partition-id': 'REDACTED'
    'x-ms-cosmos-internal-partition-id': 'REDACTED'
    'x-ms-gatewayversion': 'REDACTED'
    'Date': 'Wed, 30 Oct 2024 10:31:18 GMT'
2024-10-30 05:31:18,185 - INFO - Post 1g4dx9i is a duplicate, skipping
2024-10-30 05:31:18,185 - INFO - Checking post: 1ftaz41 - Score: 3131 - URL: https://i.redd.it/2meejva1g1sd1.jpeg
2024-10-30 05:31:18,186 - INFO - Request URL: 'https://cosmossnoogram-centralus.documents.azure.com:443/dbs/ToDoList/colls/sent_posts/docs/'
Request method: 'POST'
Request headers:
    'Cache-Control': 'no-cache'
    'x-ms-version': 'REDACTED'
    'x-ms-documentdb-query-iscontinuationexpected': 'REDACTED'
    'x-ms-consistency-level': 'REDACTED'
    'x-ms-documentdb-isquery': 'REDACTED'
    'Content-Type': 'application/query+json'
    'x-ms-session-token': 'REDACTED'
    'x-ms-documentdb-query-enablecrosspartition': 'REDACTED'
    'x-ms-date': 'REDACTED'
    'authorization': 'REDACTED'
    'Accept': 'application/json'
    'x-ms-cosmos-correlated-activityid': 'REDACTED'
    'Content-Length': '107'
    'User-Agent': 'azsdk-python-cosmos/4.5.1 Python/3.12.4 (macOS-15.0.1-arm64-arm-64bit)'
A body is sent with the request
2024-10-30 05:31:18,235 - DEBUG - https://cosmossnoogram-centralus.documents.azure.com:443 "POST /dbs/ToDoList/colls/sent_posts/docs/ HTTP/11" 200 None
2024-10-30 05:31:18,235 - INFO - Response status: 200
Response headers:
    'Cache-Control': 'no-store, no-cache'
    'Pragma': 'no-cache'
    'Transfer-Encoding': 'chunked'
    'Content-Type': 'application/json'
    'Server': 'Microsoft-HTTPAPI/2.0'
    'Strict-Transport-Security': 'REDACTED'
    'x-ms-activity-id': 'REDACTED'
    'x-ms-last-state-change-utc': 'REDACTED'
    'x-ms-resource-quota': 'REDACTED'
    'x-ms-resource-usage': 'REDACTED'
    'x-ms-schemaversion': 'REDACTED'
    'lsn': 'REDACTED'
    'x-ms-item-count': 'REDACTED'
    'x-ms-request-charge': 'REDACTED'
    'x-ms-alt-content-path': 'REDACTED'
    'x-ms-content-path': 'REDACTED'
    'x-ms-documentdb-partitionkeyrangeid': 'REDACTED'
    'x-ms-xp-role': 'REDACTED'
    'x-ms-cosmos-query-execution-info': 'REDACTED'
    'x-ms-global-Committed-lsn': 'REDACTED'
    'x-ms-number-of-read-regions': 'REDACTED'
    'x-ms-transport-request-id': 'REDACTED'
    'x-ms-cosmos-llsn': 'REDACTED'
    'x-ms-session-token': 'REDACTED'
    'x-ms-request-duration-ms': 'REDACTED'
    'x-ms-serviceversion': 'REDACTED'
    'x-ms-cosmos-is-partition-key-delete-pending': 'REDACTED'
    'x-ms-cosmos-physical-partition-id': 'REDACTED'
    'x-ms-cosmos-internal-partition-id': 'REDACTED'
    'x-ms-gatewayversion': 'REDACTED'
    'Date': 'Wed, 30 Oct 2024 10:31:18 GMT'
2024-10-30 05:31:18,235 - INFO - Post 1ftaz41 is a duplicate, skipping
2024-10-30 05:31:18,235 - INFO - Checking post: 1gbi6rb - Score: 3129 - URL: https://i.redd.it/uzwse73yvswd1.jpeg
2024-10-30 05:31:18,236 - INFO - Request URL: 'https://cosmossnoogram-centralus.documents.azure.com:443/dbs/ToDoList/colls/sent_posts/docs/'
Request method: 'POST'
Request headers:
    'Cache-Control': 'no-cache'
    'x-ms-version': 'REDACTED'
    'x-ms-documentdb-query-iscontinuationexpected': 'REDACTED'
    'x-ms-consistency-level': 'REDACTED'
    'x-ms-documentdb-isquery': 'REDACTED'
    'Content-Type': 'application/query+json'
    'x-ms-session-token': 'REDACTED'
    'x-ms-documentdb-query-enablecrosspartition': 'REDACTED'
    'x-ms-date': 'REDACTED'
    'authorization': 'REDACTED'
    'Accept': 'application/json'
    'x-ms-cosmos-correlated-activityid': 'REDACTED'
    'Content-Length': '107'
    'User-Agent': 'azsdk-python-cosmos/4.5.1 Python/3.12.4 (macOS-15.0.1-arm64-arm-64bit)'
A body is sent with the request
2024-10-30 05:31:18,288 - DEBUG - https://cosmossnoogram-centralus.documents.azure.com:443 "POST /dbs/ToDoList/colls/sent_posts/docs/ HTTP/11" 200 None
2024-10-30 05:31:18,289 - INFO - Response status: 200
Response headers:
    'Cache-Control': 'no-store, no-cache'
    'Pragma': 'no-cache'
    'Transfer-Encoding': 'chunked'
    'Content-Type': 'application/json'
    'Server': 'Microsoft-HTTPAPI/2.0'
    'Strict-Transport-Security': 'REDACTED'
    'x-ms-activity-id': 'REDACTED'
    'x-ms-last-state-change-utc': 'REDACTED'
    'x-ms-resource-quota': 'REDACTED'
    'x-ms-resource-usage': 'REDACTED'
    'x-ms-schemaversion': 'REDACTED'
    'lsn': 'REDACTED'
    'x-ms-item-count': 'REDACTED'
    'x-ms-request-charge': 'REDACTED'
    'x-ms-alt-content-path': 'REDACTED'
    'x-ms-content-path': 'REDACTED'
    'x-ms-documentdb-partitionkeyrangeid': 'REDACTED'
    'x-ms-xp-role': 'REDACTED'
    'x-ms-cosmos-query-execution-info': 'REDACTED'
    'x-ms-global-Committed-lsn': 'REDACTED'
    'x-ms-number-of-read-regions': 'REDACTED'
    'x-ms-transport-request-id': 'REDACTED'
    'x-ms-cosmos-llsn': 'REDACTED'
    'x-ms-session-token': 'REDACTED'
    'x-ms-request-duration-ms': 'REDACTED'
    'x-ms-serviceversion': 'REDACTED'
    'x-ms-cosmos-is-partition-key-delete-pending': 'REDACTED'
    'x-ms-cosmos-physical-partition-id': 'REDACTED'
    'x-ms-cosmos-internal-partition-id': 'REDACTED'
    'x-ms-gatewayversion': 'REDACTED'
    'Date': 'Wed, 30 Oct 2024 10:31:18 GMT'
2024-10-30 05:31:18,289 - INFO - Found image post: 1gbi6rb with URL: https://i.redd.it/uzwse73yvswd1.jpeg
2024-10-30 05:31:18,290 - DEBUG - Starting new HTTPS connection (1): i.redd.it:443
2024-10-30 05:31:18,445 - DEBUG - https://i.redd.it:443 "GET /uzwse73yvswd1.jpeg HTTP/11" 200 2371964
2024-10-30 05:31:18,564 - INFO - Successfully downloaded media to downloads/videos/1gelyz1_20241030_053117_ba5c8ead.mp4
2024-10-30 05:31:18,565 - DEBUG - Using selector: KqueueSelector
2024-10-30 05:31:18,566 - INFO - Attempting to send video to Telegram - Path: downloads/videos/1gelyz1_20241030_053117_ba5c8ead.mp4
2024-10-30 05:31:18,567 - DEBUG - load_ssl_context verify=True cert=None trust_env=True http2=False
2024-10-30 05:31:18,567 - DEBUG - load_verify_locations cafile='/Users/joewilson/PythonProjects/Snoogram/venv/lib/python3.12/site-packages/certifi/cacert.pem'
2024-10-30 05:31:18,576 - DEBUG - load_ssl_context verify=True cert=None trust_env=True http2=False
2024-10-30 05:31:18,576 - DEBUG - load_verify_locations cafile='/Users/joewilson/PythonProjects/Snoogram/venv/lib/python3.12/site-packages/certifi/cacert.pem'
2024-10-30 05:31:18,585 - DEBUG - Entering: get_me
2024-10-30 05:31:18,585 - DEBUG - connect_tcp.started host='api.telegram.org' port=443 local_address=None timeout=5.0 socket_options=None
2024-10-30 05:31:18,707 - DEBUG - connect_tcp.complete return_value=<httpcore._backends.anyio.AnyIOStream object at 0x108a61c40>
2024-10-30 05:31:18,707 - DEBUG - start_tls.started ssl_context=<ssl.SSLContext object at 0x108a4c050> server_hostname='api.telegram.org' timeout=5.0
2024-10-30 05:31:18,714 - INFO - Successfully downloaded media to downloads/pics/1gbi6rb_20241030_053118_75043492.jpeg
2024-10-30 05:31:18,715 - DEBUG - Using selector: KqueueSelector
2024-10-30 05:31:18,716 - INFO - Attempting to send photo to Telegram - Path: downloads/pics/1gbi6rb_20241030_053118_75043492.jpeg
2024-10-30 05:31:18,716 - DEBUG - Entering: get_me
2024-10-30 05:31:18,716 - DEBUG - connect_tcp.started host='api.telegram.org' port=443 local_address=None timeout=5.0 socket_options=None
2024-10-30 05:31:18,840 - DEBUG - start_tls.complete return_value=<httpcore._backends.anyio.AnyIOStream object at 0x108f283b0>
2024-10-30 05:31:18,842 - DEBUG - send_request_headers.started request=<Request [b'POST']>
2024-10-30 05:31:18,843 - DEBUG - connect_tcp.complete return_value=<httpcore._backends.anyio.AnyIOStream object at 0x108c75010>
2024-10-30 05:31:18,843 - DEBUG - start_tls.started ssl_context=<ssl.SSLContext object at 0x108a4c050> server_hostname='api.telegram.org' timeout=5.0
2024-10-30 05:31:18,843 - DEBUG - send_request_headers.complete
2024-10-30 05:31:18,843 - DEBUG - send_request_body.started request=<Request [b'POST']>
2024-10-30 05:31:18,843 - DEBUG - send_request_body.complete
2024-10-30 05:31:18,843 - DEBUG - receive_response_headers.started request=<Request [b'POST']>
2024-10-30 05:31:18,971 - DEBUG - receive_response_headers.complete return_value=(b'HTTP/1.1', 200, b'OK', [(b'Server', b'nginx/1.18.0'), (b'Date', b'Wed, 30 Oct 2024 10:31:18 GMT'), (b'Content-Type', b'application/json'), (b'Content-Length', b'254'), (b'Connection', b'keep-alive'), (b'Strict-Transport-Security', b'max-age=31536000; includeSubDomains; preload'), (b'Access-Control-Allow-Origin', b'*'), (b'Access-Control-Allow-Methods', b'GET, POST, OPTIONS'), (b'Access-Control-Expose-Headers', b'Content-Length,Content-Type,Date,Server,Connection')])
2024-10-30 05:31:18,972 - INFO - HTTP Request: POST https://api.telegram.org/bot7867694458:AAEFLZjWPyd1p640mHENnBt479WRYfSavWg/getMe "HTTP/1.1 200 OK"
2024-10-30 05:31:18,973 - DEBUG - receive_response_body.started request=<Request [b'POST']>
2024-10-30 05:31:18,973 - DEBUG - receive_response_body.complete
2024-10-30 05:31:18,973 - DEBUG - response_closed.started
2024-10-30 05:31:18,973 - DEBUG - response_closed.complete
2024-10-30 05:31:18,974 - DEBUG - User(api_kwargs={'can_connect_to_business': False, 'has_main_web_app': False}, can_join_groups=True, can_read_all_group_messages=False, first_name='RedditBot', id=7867694458, is_bot=True, supports_inline_queries=False, username='RedditImage_bot')
2024-10-30 05:31:18,974 - DEBUG - Exiting: get_me
2024-10-30 05:31:18,975 - DEBUG - This Bot is already initialized.
2024-10-30 05:31:18,975 - DEBUG - Entering: send_video
2024-10-30 05:31:18,976 - DEBUG - start_tls.complete return_value=<httpcore._backends.anyio.AnyIOStream object at 0x108a5d910>
2024-10-30 05:31:18,977 - DEBUG - send_request_headers.started request=<Request [b'POST']>
2024-10-30 05:31:18,977 - DEBUG - send_request_headers.complete
2024-10-30 05:31:18,977 - DEBUG - send_request_body.started request=<Request [b'POST']>
2024-10-30 05:31:18,977 - DEBUG - send_request_body.complete
2024-10-30 05:31:18,977 - DEBUG - receive_response_headers.started request=<Request [b'POST']>
2024-10-30 05:31:19,002 - DEBUG - send_request_headers.started request=<Request [b'POST']>
2024-10-30 05:31:19,003 - DEBUG - send_request_headers.complete
2024-10-30 05:31:19,003 - DEBUG - send_request_body.started request=<Request [b'POST']>
2024-10-30 05:31:19,093 - DEBUG - receive_response_headers.complete return_value=(b'HTTP/1.1', 200, b'OK', [(b'Server', b'nginx/1.18.0'), (b'Date', b'Wed, 30 Oct 2024 10:31:19 GMT'), (b'Content-Type', b'application/json'), (b'Content-Length', b'254'), (b'Connection', b'keep-alive'), (b'Strict-Transport-Security', b'max-age=31536000; includeSubDomains; preload'), (b'Access-Control-Allow-Origin', b'*'), (b'Access-Control-Allow-Methods', b'GET, POST, OPTIONS'), (b'Access-Control-Expose-Headers', b'Content-Length,Content-Type,Date,Server,Connection')])
2024-10-30 05:31:19,093 - INFO - HTTP Request: POST https://api.telegram.org/bot7867694458:AAEFLZjWPyd1p640mHENnBt479WRYfSavWg/getMe "HTTP/1.1 200 OK"
2024-10-30 05:31:19,093 - DEBUG - receive_response_body.started request=<Request [b'POST']>
2024-10-30 05:31:19,094 - DEBUG - receive_response_body.complete
2024-10-30 05:31:19,094 - DEBUG - response_closed.started
2024-10-30 05:31:19,094 - DEBUG - response_closed.complete
2024-10-30 05:31:19,094 - DEBUG - User(api_kwargs={'can_connect_to_business': False, 'has_main_web_app': False}, can_join_groups=True, can_read_all_group_messages=False, first_name='RedditBot', id=7867694458, is_bot=True, supports_inline_queries=False, username='RedditImage_bot')
2024-10-30 05:31:19,094 - DEBUG - Exiting: get_me
2024-10-30 05:31:19,094 - DEBUG - This Updater is already initialized.
2024-10-30 05:31:19,094 - DEBUG - Entering: send_photo
2024-10-30 05:31:19,095 - DEBUG - send_request_headers.started request=<Request [b'POST']>
2024-10-30 05:31:19,095 - DEBUG - send_request_headers.complete
2024-10-30 05:31:19,095 - DEBUG - send_request_body.started request=<Request [b'POST']>
2024-10-30 05:31:19,936 - DEBUG - send_request_body.complete
2024-10-30 05:31:19,936 - DEBUG - receive_response_headers.started request=<Request [b'POST']>
2024-10-30 05:31:20,311 - DEBUG - receive_response_headers.complete return_value=(b'HTTP/1.1', 200, b'OK', [(b'Server', b'nginx/1.18.0'), (b'Date', b'Wed, 30 Oct 2024 10:31:20 GMT'), (b'Content-Type', b'application/json'), (b'Content-Length', b'1228'), (b'Connection', b'keep-alive'), (b'Strict-Transport-Security', b'max-age=31536000; includeSubDomains; preload'), (b'Access-Control-Allow-Origin', b'*'), (b'Access-Control-Allow-Methods', b'GET, POST, OPTIONS'), (b'Access-Control-Expose-Headers', b'Content-Length,Content-Type,Date,Server,Connection')])
2024-10-30 05:31:20,311 - INFO - HTTP Request: POST https://api.telegram.org/bot7867694458:AAEFLZjWPyd1p640mHENnBt479WRYfSavWg/sendPhoto "HTTP/1.1 200 OK"
2024-10-30 05:31:20,312 - DEBUG - receive_response_body.started request=<Request [b'POST']>
2024-10-30 05:31:20,312 - DEBUG - receive_response_body.complete
2024-10-30 05:31:20,312 - DEBUG - response_closed.started
2024-10-30 05:31:20,312 - DEBUG - response_closed.complete
2024-10-30 05:31:20,312 - DEBUG - Message(caption='From r/wifebutt: Thursday night wifebutt and football!\nUpvotes: 3,129', channel_chat_created=False, chat=Chat(id=-1002490380283, title='Reddit_Pic_Stream', type=<ChatType.CHANNEL>), date=datetime.datetime(2024, 10, 30, 10, 31, 20, tzinfo=<UTC>), delete_chat_photo=False, group_chat_created=False, message_id=254, photo=(PhotoSize(file_id='AgACAgEAAyEGAASUcC_7AAOaZyH6uC2oEw-KoZQHBhb5XwlLmlkAAkitMRsZEBFF-CyP8HyFv7gBAAMCAANzAAM2BA', file_size=1690, file_unique_id='AQADSK0xGxkQEUV4', height=90, width=62), PhotoSize(file_id='AgACAgEAAyEGAASUcC_7AAOaZyH6uC2oEw-KoZQHBhb5XwlLmlkAAkitMRsZEBFF-CyP8HyFv7gBAAMCAANtAAM2BA', file_size=23805, file_unique_id='AQADSK0xGxkQEUVy', height=320, width=221), PhotoSize(file_id='AgACAgEAAyEGAASUcC_7AAOaZyH6uC2oEw-KoZQHBhb5XwlLmlkAAkitMRsZEBFF-CyP8HyFv7gBAAMCAAN4AAM2BA', file_size=108880, file_unique_id='AQADSK0xGxkQEUV9', height=800, width=552), PhotoSize(file_id='AgACAgEAAyEGAASUcC_7AAOaZyH6uC2oEw-KoZQHBhb5XwlLmlkAAkitMRsZEBFF-CyP8HyFv7gBAAMCAAN5AAM2BA', file_size=243293, file_unique_id='AQADSK0xGxkQEUV-', height=1280, width=884), PhotoSize(file_id='AgACAgEAAyEGAASUcC_7AAOaZyH6uC2oEw-KoZQHBhb5XwlLmlkAAkitMRsZEBFF-CyP8HyFv7gBAAMCAAN3AAM2BA', file_size=762771, file_unique_id='AQADSK0xGxkQEUV8', height=2560, width=1768)), sender_chat=Chat(id=-1002490380283, title='Reddit_Pic_Stream', type=<ChatType.CHANNEL>), supergroup_chat_created=False)
2024-10-30 05:31:20,313 - DEBUG - Exiting: send_photo
2024-10-30 05:31:20,313 - DEBUG - close.started
2024-10-30 05:31:20,313 - DEBUG - close.complete
2024-10-30 05:31:20,313 - DEBUG - close.started
2024-10-30 05:31:20,313 - DEBUG - close.complete
2024-10-30 05:31:20,313 - DEBUG - This Bot is already shut down. Returning.
2024-10-30 05:31:20,313 - DEBUG - Shut down of Updater complete
2024-10-30 05:31:20,313 - INFO - Successfully sent photo to Telegram
2024-10-30 05:31:20,314 - ERROR - Error processing subreddit wifebutt: (sqlite3.OperationalError) attempt to write a readonly database
[SQL: INSERT INTO sent_post (post_id, subreddit_name, sent_at) VALUES (?, ?, ?)]
[parameters: ('1gbi6rb', 'wifebutt', '2024-10-30 10:31:20.314625')]
(Background on this error at: https://sqlalche.me/e/20/e3q8)
2024-10-30 05:31:20,316 - ERROR - Job "send_to_telegram (trigger: interval[0:01:00], next run at: 2024-10-30 05:32:16 CDT)" raised an exception
Traceback (most recent call last):
  File "/Users/joewilson/PythonProjects/Snoogram/venv/lib/python3.12/site-packages/sqlalchemy/engine/base.py", line 1967, in _exec_single_context
    self.dialect.do_execute(
  File "/Users/joewilson/PythonProjects/Snoogram/venv/lib/python3.12/site-packages/sqlalchemy/engine/default.py", line 941, in do_execute
    cursor.execute(statement, parameters)
sqlite3.OperationalError: attempt to write a readonly database

The above exception was the direct cause of the following exception:

Traceback (most recent call last):
  File "/Users/joewilson/PythonProjects/Snoogram/venv/lib/python3.12/site-packages/apscheduler/executors/base.py", line 125, in run_job
    retval = job.func(*job.args, **job.kwargs)
             ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/Users/joewilson/PythonProjects/Snoogram/backend/app.py", line 265, in send_to_telegram
    # Update last_check in Cosmos DB
                ^^^^^^^^^^^^^^^^^^^^^
  File "/Users/joewilson/PythonProjects/Snoogram/backend/db_operations.py", line 100, in add_sent_post
  File "/Users/joewilson/PythonProjects/Snoogram/venv/lib/python3.12/site-packages/sqlalchemy/orm/scoping.py", line 597, in commit
    return self._proxied.commit()
           ^^^^^^^^^^^^^^^^^^^^^^
  File "/Users/joewilson/PythonProjects/Snoogram/venv/lib/python3.12/site-packages/sqlalchemy/orm/session.py", line 2028, in commit
    trans.commit(_to_root=True)
  File "<string>", line 2, in commit
  File "/Users/joewilson/PythonProjects/Snoogram/venv/lib/python3.12/site-packages/sqlalchemy/orm/state_changes.py", line 139, in _go
    ret_value = fn(self, *arg, **kw)
                ^^^^^^^^^^^^^^^^^^^^
  File "/Users/joewilson/PythonProjects/Snoogram/venv/lib/python3.12/site-packages/sqlalchemy/orm/session.py", line 1313, in commit
    self._prepare_impl()
  File "<string>", line 2, in _prepare_impl
  File "/Users/joewilson/PythonProjects/Snoogram/venv/lib/python3.12/site-packages/sqlalchemy/orm/state_changes.py", line 139, in _go
    ret_value = fn(self, *arg, **kw)
                ^^^^^^^^^^^^^^^^^^^^
  File "/Users/joewilson/PythonProjects/Snoogram/venv/lib/python3.12/site-packages/sqlalchemy/orm/session.py", line 1288, in _prepare_impl
    self.session.flush()
  File "/Users/joewilson/PythonProjects/Snoogram/venv/lib/python3.12/site-packages/sqlalchemy/orm/session.py", line 4352, in flush
    self._flush(objects)
  File "/Users/joewilson/PythonProjects/Snoogram/venv/lib/python3.12/site-packages/sqlalchemy/orm/session.py", line 4487, in _flush
    with util.safe_reraise():
  File "/Users/joewilson/PythonProjects/Snoogram/venv/lib/python3.12/site-packages/sqlalchemy/util/langhelpers.py", line 146, in __exit__
    raise exc_value.with_traceback(exc_tb)
  File "/Users/joewilson/PythonProjects/Snoogram/venv/lib/python3.12/site-packages/sqlalchemy/orm/session.py", line 4448, in _flush
    flush_context.execute()
  File "/Users/joewilson/PythonProjects/Snoogram/venv/lib/python3.12/site-packages/sqlalchemy/orm/unitofwork.py", line 466, in execute
    rec.execute(self)
  File "/Users/joewilson/PythonProjects/Snoogram/venv/lib/python3.12/site-packages/sqlalchemy/orm/unitofwork.py", line 642, in execute
    util.preloaded.orm_persistence.save_obj(
  File "/Users/joewilson/PythonProjects/Snoogram/venv/lib/python3.12/site-packages/sqlalchemy/orm/persistence.py", line 93, in save_obj
    _emit_insert_statements(
  File "/Users/joewilson/PythonProjects/Snoogram/venv/lib/python3.12/site-packages/sqlalchemy/orm/persistence.py", line 1233, in _emit_insert_statements
    result = connection.execute(
             ^^^^^^^^^^^^^^^^^^^
  File "/Users/joewilson/PythonProjects/Snoogram/venv/lib/python3.12/site-packages/sqlalchemy/engine/base.py", line 1418, in execute
    return meth(
           ^^^^^
  File "/Users/joewilson/PythonProjects/Snoogram/venv/lib/python3.12/site-packages/sqlalchemy/sql/elements.py", line 515, in _execute_on_connection
    return connection._execute_clauseelement(
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/Users/joewilson/PythonProjects/Snoogram/venv/lib/python3.12/site-packages/sqlalchemy/engine/base.py", line 1640, in _execute_clauseelement
    ret = self._execute_context(
          ^^^^^^^^^^^^^^^^^^^^^^
  File "/Users/joewilson/PythonProjects/Snoogram/venv/lib/python3.12/site-packages/sqlalchemy/engine/base.py", line 1846, in _execute_context
    return self._exec_single_context(
           ^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/Users/joewilson/PythonProjects/Snoogram/venv/lib/python3.12/site-packages/sqlalchemy/engine/base.py", line 1986, in _exec_single_context
    self._handle_dbapi_exception(
  File "/Users/joewilson/PythonProjects/Snoogram/venv/lib/python3.12/site-packages/sqlalchemy/engine/base.py", line 2355, in _handle_dbapi_exception
    raise sqlalchemy_exception.with_traceback(exc_info[2]) from e
  File "/Users/joewilson/PythonProjects/Snoogram/venv/lib/python3.12/site-packages/sqlalchemy/engine/base.py", line 1967, in _exec_single_context
    self.dialect.do_execute(
  File "/Users/joewilson/PythonProjects/Snoogram/venv/lib/python3.12/site-packages/sqlalchemy/engine/default.py", line 941, in do_execute
    cursor.execute(statement, parameters)
sqlalchemy.exc.OperationalError: (sqlite3.OperationalError) attempt to write a readonly database
[SQL: INSERT INTO sent_post (post_id, subreddit_name, sent_at) VALUES (?, ?, ?)]
[parameters: ('1gbi6rb', 'wifebutt', '2024-10-30 10:31:20.314625')]
(Background on this error at: https://sqlalche.me/e/20/e3q8)
2024-10-30 05:31:39,013 - DEBUG - send_request_body.failed exception=WriteError(ClosedResourceError())
2024-10-30 05:31:39,016 - DEBUG - response_closed.started
2024-10-30 05:31:39,016 - DEBUG - response_closed.complete
2024-10-30 05:31:39,021 - DEBUG - This Application is already shut down. Returning.
2024-10-30 05:31:39,021 - ERROR - Failed to send video to Telegram: httpx.WriteError: 
2024-10-30 05:31:39,022 - ERROR - Error sending video post 1gelyz1: httpx.WriteError: 
2024-10-30 05:31:39,024 - INFO - Checking post: 1gejrnl - Score: 2590 - URL: https://v3.redgifs.com/watch/graydefensivepika
2024-10-30 05:31:39,030 - INFO - Request URL: 'https://cosmossnoogram-centralus.documents.azure.com:443/dbs/ToDoList/colls/sent_posts/docs/'
Request method: 'POST'
Request headers:
    'Cache-Control': 'no-cache'
    'x-ms-version': 'REDACTED'
    'x-ms-documentdb-query-iscontinuationexpected': 'REDACTED'
    'x-ms-consistency-level': 'REDACTED'
    'x-ms-documentdb-isquery': 'REDACTED'
    'Content-Type': 'application/query+json'
    'x-ms-session-token': 'REDACTED'
    'x-ms-documentdb-query-enablecrosspartition': 'REDACTED'
    'x-ms-date': 'REDACTED'
    'authorization': 'REDACTED'
    'Accept': 'application/json'
    'x-ms-cosmos-correlated-activityid': 'REDACTED'
    'Content-Length': '107'
    'User-Agent': 'azsdk-python-cosmos/4.5.1 Python/3.12.4 (macOS-15.0.1-arm64-arm-64bit)'
A body is sent with the request
2024-10-30 05:31:39,064 - DEBUG - https://cosmossnoogram-centralus.documents.azure.com:443 "POST /dbs/ToDoList/colls/sent_posts/docs/ HTTP/11" 200 None
2024-10-30 05:31:39,064 - INFO - Response status: 200
Response headers:
    'Cache-Control': 'no-store, no-cache'
    'Pragma': 'no-cache'
    'Transfer-Encoding': 'chunked'
    'Content-Type': 'application/json'
    'Server': 'Microsoft-HTTPAPI/2.0'
    'Strict-Transport-Security': 'REDACTED'
    'x-ms-activity-id': 'REDACTED'
    'x-ms-last-state-change-utc': 'REDACTED'
    'x-ms-resource-quota': 'REDACTED'
    'x-ms-resource-usage': 'REDACTED'
    'x-ms-schemaversion': 'REDACTED'
    'lsn': 'REDACTED'
    'x-ms-item-count': 'REDACTED'
    'x-ms-request-charge': 'REDACTED'
    'x-ms-alt-content-path': 'REDACTED'
    'x-ms-content-path': 'REDACTED'
    'x-ms-quorum-acked-lsn': 'REDACTED'
    'x-ms-current-write-quorum': 'REDACTED'
    'x-ms-current-replica-set-size': 'REDACTED'
    'x-ms-documentdb-partitionkeyrangeid': 'REDACTED'
    'x-ms-xp-role': 'REDACTED'
    'x-ms-cosmos-query-execution-info': 'REDACTED'
    'x-ms-global-Committed-lsn': 'REDACTED'
    'x-ms-number-of-read-regions': 'REDACTED'
    'x-ms-transport-request-id': 'REDACTED'
    'x-ms-cosmos-llsn': 'REDACTED'
    'x-ms-cosmos-quorum-acked-llsn': 'REDACTED'
    'x-ms-session-token': 'REDACTED'
    'x-ms-request-duration-ms': 'REDACTED'
    'x-ms-serviceversion': 'REDACTED'
    'x-ms-cosmos-is-partition-key-delete-pending': 'REDACTED'
    'x-ms-cosmos-physical-partition-id': 'REDACTED'
    'x-ms-cosmos-internal-partition-id': 'REDACTED'
    'x-ms-gatewayversion': 'REDACTED'
    'Date': 'Wed, 30 Oct 2024 10:31:38 GMT'
2024-10-30 05:31:39,065 - INFO - Post 1gejrnl is a duplicate, skipping
2024-10-30 05:31:39,065 - INFO - Checking post: 1gelw33 - Score: 2310 - URL: https://www.redgifs.com/watch/drydarkgraysable
2024-10-30 05:31:39,065 - INFO - Post 1gelw33 is a duplicate, skipping
2024-10-30 05:31:39,065 - INFO - Checking post: 1gevvp0 - Score: 1196 - URL: https://www.redgifs.com/watch/medicalplumhen
2024-10-30 05:31:39,065 - INFO - Post 1gevvp0 is a duplicate, skipping
2024-10-30 05:31:39,065 - INFO - Checking post: 1gesoj7 - Score: 753 - URL: https://www.redgifs.com/watch/lightgreytrickydragonfly
2024-10-30 05:31:39,066 - INFO - Post 1gesoj7 is a duplicate, skipping
2024-10-30 05:31:39,066 - INFO - Checking post: 1geuuqp - Score: 439 - URL: https://www.redgifs.com/watch/cheerfulbeigebagworm
2024-10-30 05:31:39,066 - INFO - Post 1geuuqp is a duplicate, skipping
2024-10-30 05:31:39,066 - INFO - Checking post: 1geakrb - Score: 396 - URL: https://www.redgifs.com/watch/illinformedthickgalapagoshawk
2024-10-30 05:31:39,066 - INFO - Post 1geakrb is a duplicate, skipping
2024-10-30 05:31:39,066 - INFO - Checking post: 1gerubz - Score: 370 - URL: https://v3.redgifs.com/watch/trickysquarepseudodynerusquadrisectus
2024-10-30 05:31:39,066 - INFO - Post 1gerubz is a duplicate, skipping
2024-10-30 05:31:39,066 - INFO - Checking post: 1getxhl - Score: 340 - URL: https://www.redgifs.com/watch/purpledemandingboaconstrictor
2024-10-30 05:31:39,066 - INFO - Post 1getxhl is a duplicate, skipping
2024-10-30 05:31:39,066 - INFO - Checking post: 1ge9gol - Score: 278 - URL: https://v3.redgifs.com/watch/circulardeeppinkamericanbulldog
2024-10-30 05:31:39,067 - INFO - Request URL: 'https://cosmossnoogram-centralus.documents.azure.com:443/dbs/ToDoList/colls/sent_posts/docs/'
Request method: 'POST'
Request headers:
    'Cache-Control': 'no-cache'
    'x-ms-version': 'REDACTED'
    'x-ms-documentdb-query-iscontinuationexpected': 'REDACTED'
    'x-ms-consistency-level': 'REDACTED'
    'x-ms-documentdb-isquery': 'REDACTED'
    'Content-Type': 'application/query+json'
    'x-ms-session-token': 'REDACTED'
    'x-ms-documentdb-query-enablecrosspartition': 'REDACTED'
    'x-ms-date': 'REDACTED'
    'authorization': 'REDACTED'
    'Accept': 'application/json'
    'x-ms-cosmos-correlated-activityid': 'REDACTED'
    'Content-Length': '107'
    'User-Agent': 'azsdk-python-cosmos/4.5.1 Python/3.12.4 (macOS-15.0.1-arm64-arm-64bit)'
A body is sent with the request
2024-10-30 05:31:39,099 - DEBUG - https://cosmossnoogram-centralus.documents.azure.com:443 "POST /dbs/ToDoList/colls/sent_posts/docs/ HTTP/11" 200 None
2024-10-30 05:31:39,100 - INFO - Response status: 200
Response headers:
    'Cache-Control': 'no-store, no-cache'
    'Pragma': 'no-cache'
    'Transfer-Encoding': 'chunked'
    'Content-Type': 'application/json'
    'Server': 'Microsoft-HTTPAPI/2.0'
    'Strict-Transport-Security': 'REDACTED'
    'x-ms-activity-id': 'REDACTED'
    'x-ms-last-state-change-utc': 'REDACTED'
    'x-ms-resource-quota': 'REDACTED'
    'x-ms-resource-usage': 'REDACTED'
    'x-ms-schemaversion': 'REDACTED'
    'lsn': 'REDACTED'
    'x-ms-item-count': 'REDACTED'
    'x-ms-request-charge': 'REDACTED'
    'x-ms-alt-content-path': 'REDACTED'
    'x-ms-content-path': 'REDACTED'
    'x-ms-documentdb-partitionkeyrangeid': 'REDACTED'
    'x-ms-xp-role': 'REDACTED'
    'x-ms-cosmos-query-execution-info': 'REDACTED'
    'x-ms-global-Committed-lsn': 'REDACTED'
    'x-ms-number-of-read-regions': 'REDACTED'
    'x-ms-transport-request-id': 'REDACTED'
    'x-ms-cosmos-llsn': 'REDACTED'
    'x-ms-session-token': 'REDACTED'
    'x-ms-request-duration-ms': 'REDACTED'
    'x-ms-serviceversion': 'REDACTED'
    'x-ms-cosmos-is-partition-key-delete-pending': 'REDACTED'
    'x-ms-cosmos-physical-partition-id': 'REDACTED'
    'x-ms-cosmos-internal-partition-id': 'REDACTED'
    'x-ms-gatewayversion': 'REDACTED'
    'Date': 'Wed, 30 Oct 2024 10:31:38 GMT'
2024-10-30 05:31:39,100 - INFO - Found video post: 1ge9gol
2024-10-30 05:31:39,100 - DEBUG - Starting new HTTPS connection (1): api.redgifs.com:443
2024-10-30 05:31:39,215 - DEBUG - https://api.redgifs.com:443 "GET /v2/gifs/circulardeeppinkamericanbulldog HTTP/11" 200 None
2024-10-30 05:31:39,217 - DEBUG - Starting new HTTPS connection (1): files.redgifs.com:443
2024-10-30 05:31:39,441 - DEBUG - https://files.redgifs.com:443 "GET /CircularDeeppinkAmericanbulldog.mp4 HTTP/11" 200 61415883
2024-10-30 05:31:40,813 - INFO - Successfully downloaded media to downloads/videos/1ge9gol_20241030_053139_fff8ab71.mp4
2024-10-30 05:31:40,815 - DEBUG - Using selector: KqueueSelector
2024-10-30 05:31:40,816 - INFO - Attempting to send video to Telegram - Path: downloads/videos/1ge9gol_20241030_053139_fff8ab71.mp4
2024-10-30 05:31:40,817 - DEBUG - load_ssl_context verify=True cert=None trust_env=True http2=False
2024-10-30 05:31:40,817 - DEBUG - load_verify_locations cafile='/Users/joewilson/PythonProjects/Snoogram/venv/lib/python3.12/site-packages/certifi/cacert.pem'
2024-10-30 05:31:40,827 - DEBUG - load_ssl_context verify=True cert=None trust_env=True http2=False
2024-10-30 05:31:40,827 - DEBUG - load_verify_locations cafile='/Users/joewilson/PythonProjects/Snoogram/venv/lib/python3.12/site-packages/certifi/cacert.pem'
2024-10-30 05:31:40,835 - DEBUG - Entering: get_me
2024-10-30 05:31:40,835 - DEBUG - connect_tcp.started host='api.telegram.org' port=443 local_address=None timeout=5.0 socket_options=None
2024-10-30 05:31:40,959 - DEBUG - connect_tcp.complete return_value=<httpcore._backends.anyio.AnyIOStream object at 0x108c747a0>
2024-10-30 05:31:40,959 - DEBUG - start_tls.started ssl_context=<ssl.SSLContext object at 0x108e364d0> server_hostname='api.telegram.org' timeout=5.0
2024-10-30 05:31:41,093 - DEBUG - start_tls.complete return_value=<httpcore._backends.anyio.AnyIOStream object at 0x108f29cd0>
2024-10-30 05:31:41,093 - DEBUG - send_request_headers.started request=<Request [b'POST']>
2024-10-30 05:31:41,094 - DEBUG - send_request_headers.complete
2024-10-30 05:31:41,094 - DEBUG - send_request_body.started request=<Request [b'POST']>
2024-10-30 05:31:41,094 - DEBUG - send_request_body.complete
2024-10-30 05:31:41,094 - DEBUG - receive_response_headers.started request=<Request [b'POST']>
2024-10-30 05:31:41,219 - DEBUG - receive_response_headers.complete return_value=(b'HTTP/1.1', 200, b'OK', [(b'Server', b'nginx/1.18.0'), (b'Date', b'Wed, 30 Oct 2024 10:31:41 GMT'), (b'Content-Type', b'application/json'), (b'Content-Length', b'254'), (b'Connection', b'keep-alive'), (b'Strict-Transport-Security', b'max-age=31536000; includeSubDomains; preload'), (b'Access-Control-Allow-Origin', b'*'), (b'Access-Control-Allow-Methods', b'GET, POST, OPTIONS'), (b'Access-Control-Expose-Headers', b'Content-Length,Content-Type,Date,Server,Connection')])
2024-10-30 05:31:41,219 - INFO - HTTP Request: POST https://api.telegram.org/bot7867694458:AAEFLZjWPyd1p640mHENnBt479WRYfSavWg/getMe "HTTP/1.1 200 OK"
2024-10-30 05:31:41,219 - DEBUG - receive_response_body.started request=<Request [b'POST']>
2024-10-30 05:31:41,220 - DEBUG - receive_response_body.complete
2024-10-30 05:31:41,220 - DEBUG - response_closed.started
2024-10-30 05:31:41,220 - DEBUG - response_closed.complete
2024-10-30 05:31:41,220 - DEBUG - User(api_kwargs={'can_connect_to_business': False, 'has_main_web_app': False}, can_join_groups=True, can_read_all_group_messages=False, first_name='RedditBot', id=7867694458, is_bot=True, supports_inline_queries=False, username='RedditImage_bot')
2024-10-30 05:31:41,220 - DEBUG - Exiting: get_me
2024-10-30 05:31:41,220 - DEBUG - This Bot is already initialized.
2024-10-30 05:31:41,220 - DEBUG - Entering: send_video
2024-10-30 05:31:41,246 - DEBUG - send_request_headers.started request=<Request [b'POST']>
2024-10-30 05:31:41,247 - DEBUG - send_request_headers.complete
2024-10-30 05:31:41,248 - DEBUG - send_request_body.started request=<Request [b'POST']>
2024-10-30 05:31:45,259 - DEBUG - send_request_body.complete
2024-10-30 05:31:45,260 - DEBUG - receive_response_headers.started request=<Request [b'POST']>
2024-10-30 05:31:45,260 - DEBUG - receive_response_headers.complete return_value=(b'HTTP/1.1', 413, b'Request Entity Too Large', [(b'Server', b'nginx/1.18.0'), (b'Date', b'Wed, 30 Oct 2024 10:31:41 GMT'), (b'Content-Type', b'application/json'), (b'Content-Length', b'70'), (b'Connection', b'close'), (b'Strict-Transport-Security', b'max-age=31536000; includeSubDomains; preload'), (b'Access-Control-Allow-Origin', b'*'), (b'Access-Control-Expose-Headers', b'Content-Length,Content-Type,Date,Server,Connection')])
2024-10-30 05:31:45,260 - INFO - HTTP Request: POST https://api.telegram.org/bot7867694458:AAEFLZjWPyd1p640mHENnBt479WRYfSavWg/sendVideo "HTTP/1.1 413 Request Entity Too Large"
2024-10-30 05:31:45,260 - DEBUG - receive_response_body.started request=<Request [b'POST']>
2024-10-30 05:31:45,260 - DEBUG - receive_response_body.complete
2024-10-30 05:31:45,260 - DEBUG - response_closed.started
2024-10-30 05:31:45,260 - DEBUG - response_closed.complete
2024-10-30 05:31:45,261 - DEBUG - This Bot is already shut down. Returning.
2024-10-30 05:31:45,261 - DEBUG - Shut down of Updater complete
2024-10-30 05:31:45,261 - ERROR - Failed to send video to Telegram: Request Entity Too Large (413)
2024-10-30 05:31:45,261 - ERROR - Error sending video post 1ge9gol: Request Entity Too Large (413)
2024-10-30 05:31:45,261 - INFO - Checking post: 1ge98kx - Score: 256 - URL: https://www.redgifs.com/watch/frontspecificspittlebug
2024-10-30 05:31:45,263 - INFO - Post 1ge98kx is a duplicate, skipping
2024-10-30 05:31:45,263 - INFO - Checking post: 1geqscs - Score: 241 - URL: https://www.redgifs.com/watch/previousweequeensnake
2024-10-30 05:31:45,264 - INFO - Request URL: 'https://cosmossnoogram-centralus.documents.azure.com:443/dbs/ToDoList/colls/sent_posts/docs/'
Request method: 'POST'
Request headers:
    'Cache-Control': 'no-cache'
    'x-ms-version': 'REDACTED'
    'x-ms-documentdb-query-iscontinuationexpected': 'REDACTED'
    'x-ms-consistency-level': 'REDACTED'
    'x-ms-documentdb-isquery': 'REDACTED'
    'Content-Type': 'application/query+json'
    'x-ms-session-token': 'REDACTED'
    'x-ms-documentdb-query-enablecrosspartition': 'REDACTED'
    'x-ms-date': 'REDACTED'
    'authorization': 'REDACTED'
    'Accept': 'application/json'
    'x-ms-cosmos-correlated-activityid': 'REDACTED'
    'Content-Length': '107'
    'User-Agent': 'azsdk-python-cosmos/4.5.1 Python/3.12.4 (macOS-15.0.1-arm64-arm-64bit)'
A body is sent with the request
2024-10-30 05:31:45,343 - DEBUG - https://cosmossnoogram-centralus.documents.azure.com:443 "POST /dbs/ToDoList/colls/sent_posts/docs/ HTTP/11" 200 None
2024-10-30 05:31:45,343 - INFO - Response status: 200
Response headers:
    'Cache-Control': 'no-store, no-cache'
    'Pragma': 'no-cache'
    'Transfer-Encoding': 'chunked'
    'Content-Type': 'application/json'
    'Server': 'Microsoft-HTTPAPI/2.0'
    'Strict-Transport-Security': 'REDACTED'
    'x-ms-activity-id': 'REDACTED'
    'x-ms-last-state-change-utc': 'REDACTED'
    'x-ms-resource-quota': 'REDACTED'
    'x-ms-resource-usage': 'REDACTED'
    'x-ms-schemaversion': 'REDACTED'
    'lsn': 'REDACTED'
    'x-ms-item-count': 'REDACTED'
    'x-ms-request-charge': 'REDACTED'
    'x-ms-alt-content-path': 'REDACTED'
    'x-ms-content-path': 'REDACTED'
    'x-ms-documentdb-partitionkeyrangeid': 'REDACTED'
    'x-ms-xp-role': 'REDACTED'
    'x-ms-cosmos-query-execution-info': 'REDACTED'
    'x-ms-global-Committed-lsn': 'REDACTED'
    'x-ms-number-of-read-regions': 'REDACTED'
    'x-ms-transport-request-id': 'REDACTED'
    'x-ms-cosmos-llsn': 'REDACTED'
    'x-ms-session-token': 'REDACTED'
    'x-ms-request-duration-ms': 'REDACTED'
    'x-ms-serviceversion': 'REDACTED'
    'x-ms-cosmos-is-partition-key-delete-pending': 'REDACTED'
    'x-ms-cosmos-physical-partition-id': 'REDACTED'
    'x-ms-cosmos-internal-partition-id': 'REDACTED'
    'x-ms-gatewayversion': 'REDACTED'
    'Date': 'Wed, 30 Oct 2024 10:31:44 GMT'
2024-10-30 05:31:45,343 - INFO - Found video post: 1geqscs
2024-10-30 05:31:45,344 - DEBUG - Starting new HTTPS connection (1): api.redgifs.com:443
2024-10-30 05:31:45,548 - DEBUG - https://api.redgifs.com:443 "GET /v2/gifs/previousweequeensnake HTTP/11" 200 None
2024-10-30 05:31:45,551 - DEBUG - Starting new HTTPS connection (1): files.redgifs.com:443
2024-10-30 05:31:45,630 - DEBUG - https://files.redgifs.com:443 "GET /PreviousWeeQueensnake.mp4 HTTP/11" 200 50070206
2024-10-30 05:31:47,061 - INFO - Successfully downloaded media to downloads/videos/1geqscs_20241030_053145_2fd81a4e.mp4
2024-10-30 05:31:47,062 - DEBUG - Using selector: KqueueSelector
2024-10-30 05:31:47,062 - INFO - Attempting to send video to Telegram - Path: downloads/videos/1geqscs_20241030_053145_2fd81a4e.mp4
2024-10-30 05:31:47,063 - DEBUG - load_ssl_context verify=True cert=None trust_env=True http2=False
2024-10-30 05:31:47,063 - DEBUG - load_verify_locations cafile='/Users/joewilson/PythonProjects/Snoogram/venv/lib/python3.12/site-packages/certifi/cacert.pem'
2024-10-30 05:31:47,070 - DEBUG - load_ssl_context verify=True cert=None trust_env=True http2=False
2024-10-30 05:31:47,070 - DEBUG - load_verify_locations cafile='/Users/joewilson/PythonProjects/Snoogram/venv/lib/python3.12/site-packages/certifi/cacert.pem'
2024-10-30 05:31:47,075 - DEBUG - Entering: get_me
2024-10-30 05:31:47,076 - DEBUG - connect_tcp.started host='api.telegram.org' port=443 local_address=None timeout=5.0 socket_options=None
2024-10-30 05:31:47,197 - DEBUG - connect_tcp.complete return_value=<httpcore._backends.anyio.AnyIOStream object at 0x108c74350>
2024-10-30 05:31:47,197 - DEBUG - start_tls.started ssl_context=<ssl.SSLContext object at 0x108ef4cd0> server_hostname='api.telegram.org' timeout=5.0
2024-10-30 05:31:47,336 - DEBUG - start_tls.complete return_value=<httpcore._backends.anyio.AnyIOStream object at 0x108c753d0>
2024-10-30 05:31:47,337 - DEBUG - send_request_headers.started request=<Request [b'POST']>
2024-10-30 05:31:47,337 - DEBUG - send_request_headers.complete
2024-10-30 05:31:47,337 - DEBUG - send_request_body.started request=<Request [b'POST']>
2024-10-30 05:31:47,337 - DEBUG - send_request_body.complete
2024-10-30 05:31:47,337 - DEBUG - receive_response_headers.started request=<Request [b'POST']>
2024-10-30 05:31:47,456 - DEBUG - receive_response_headers.complete return_value=(b'HTTP/1.1', 200, b'OK', [(b'Server', b'nginx/1.18.0'), (b'Date', b'Wed, 30 Oct 2024 10:31:47 GMT'), (b'Content-Type', b'application/json'), (b'Content-Length', b'254'), (b'Connection', b'keep-alive'), (b'Strict-Transport-Security', b'max-age=31536000; includeSubDomains; preload'), (b'Access-Control-Allow-Origin', b'*'), (b'Access-Control-Allow-Methods', b'GET, POST, OPTIONS'), (b'Access-Control-Expose-Headers', b'Content-Length,Content-Type,Date,Server,Connection')])
2024-10-30 05:31:47,456 - INFO - HTTP Request: POST https://api.telegram.org/bot7867694458:AAEFLZjWPyd1p640mHENnBt479WRYfSavWg/getMe "HTTP/1.1 200 OK"
2024-10-30 05:31:47,456 - DEBUG - receive_response_body.started request=<Request [b'POST']>
2024-10-30 05:31:47,456 - DEBUG - receive_response_body.complete
2024-10-30 05:31:47,456 - DEBUG - response_closed.started
2024-10-30 05:31:47,456 - DEBUG - response_closed.complete
2024-10-30 05:31:47,457 - DEBUG - User(api_kwargs={'can_connect_to_business': False, 'has_main_web_app': False}, can_join_groups=True, can_read_all_group_messages=False, first_name='RedditBot', id=7867694458, is_bot=True, supports_inline_queries=False, username='RedditImage_bot')
2024-10-30 05:31:47,457 - DEBUG - Exiting: get_me
2024-10-30 05:31:47,457 - DEBUG - This Bot is already initialized.
2024-10-30 05:31:47,457 - DEBUG - Entering: send_video
2024-10-30 05:31:47,468 - DEBUG - send_request_headers.started request=<Request [b'POST']>
2024-10-30 05:31:47,469 - DEBUG - send_request_headers.complete
2024-10-30 05:31:47,469 - DEBUG - send_request_body.started request=<Request [b'POST']>
2024-10-30 05:31:51,961 - DEBUG - send_request_body.complete
2024-10-30 05:31:51,964 - DEBUG - receive_response_headers.started request=<Request [b'POST']>
2024-10-30 05:31:54,683 - DEBUG - receive_response_headers.complete return_value=(b'HTTP/1.1', 200, b'OK', [(b'Server', b'nginx/1.18.0'), (b'Date', b'Wed, 30 Oct 2024 10:31:54 GMT'), (b'Content-Type', b'application/json'), (b'Content-Length', b'602'), (b'Connection', b'keep-alive'), (b'Strict-Transport-Security', b'max-age=31536000; includeSubDomains; preload'), (b'Access-Control-Allow-Origin', b'*'), (b'Access-Control-Allow-Methods', b'GET, POST, OPTIONS'), (b'Access-Control-Expose-Headers', b'Content-Length,Content-Type,Date,Server,Connection')])
2024-10-30 05:31:54,683 - INFO - HTTP Request: POST https://api.telegram.org/bot7867694458:AAEFLZjWPyd1p640mHENnBt479WRYfSavWg/sendVideo "HTTP/1.1 200 OK"
2024-10-30 05:31:54,683 - DEBUG - receive_response_body.started request=<Request [b'POST']>
2024-10-30 05:31:54,684 - DEBUG - receive_response_body.complete
2024-10-30 05:31:54,684 - DEBUG - response_closed.started
2024-10-30 05:31:54,684 - DEBUG - response_closed.complete
2024-10-30 05:31:54,684 - DEBUG - Message(caption='From r/girlsfinishingthejob: I love when he covers my titties with his hot cum ðŸ¥°\nUpvotes: 241', channel_chat_created=False, chat=Chat(id=-1002490380283, title='Reddit_Pic_Stream', type=<ChatType.CHANNEL>), date=datetime.datetime(2024, 10, 30, 10, 31, 54, tzinfo=<UTC>), delete_chat_photo=False, group_chat_created=False, message_id=256, sender_chat=Chat(id=-1002490380283, title='Reddit_Pic_Stream', type=<ChatType.CHANNEL>), supergroup_chat_created=False, video=Video(duration=0, file_id='BAACAgEAAyEGAASUcC_7AAIBAAFnIgsaLUqYFkrxMatT0xR4yTvQ4wACvQQAAhkQEUULqzDseZu6aDYE', file_name='1geqscs_20241030_053145_2fd81a4e.mp4', file_size=50070206, file_unique_id='AgADvQQAAhkQEUU', height=320, mime_type='video/mp4', width=320))
2024-10-30 05:31:54,685 - DEBUG - Exiting: send_video
2024-10-30 05:31:54,685 - DEBUG - close.started
2024-10-30 05:31:54,685 - DEBUG - close.complete
2024-10-30 05:31:54,685 - DEBUG - This Bot is already shut down. Returning.
2024-10-30 05:31:54,685 - DEBUG - Shut down of Updater complete
2024-10-30 05:31:54,685 - INFO - Successfully sent video to Telegram
2024-10-30 05:31:54,687 - ERROR - Error processing subreddit girlsfinishingthejob: (sqlite3.OperationalError) attempt to write a readonly database
[SQL: INSERT INTO sent_post (post_id, subreddit_name, sent_at) VALUES (?, ?, ?)]
[parameters: ('1geqscs', 'girlsfinishingthejob', '2024-10-30 10:31:54.686717')]
(Background on this error at: https://sqlalche.me/e/20/e3q8)
2024-10-30 05:31:54,689 - ERROR - Job "send_to_telegram (trigger: interval[0:01:00], next run at: 2024-10-30 05:32:16 CDT)" raised an exception
Traceback (most recent call last):
  File "/Users/joewilson/PythonProjects/Snoogram/venv/lib/python3.12/site-packages/sqlalchemy/engine/base.py", line 1967, in _exec_single_context
    self.dialect.do_execute(
  File "/Users/joewilson/PythonProjects/Snoogram/venv/lib/python3.12/site-packages/sqlalchemy/engine/default.py", line 941, in do_execute
    cursor.execute(statement, parameters)
sqlite3.OperationalError: attempt to write a readonly database

The above exception was the direct cause of the following exception:

Traceback (most recent call last):
  File "/Users/joewilson/PythonProjects/Snoogram/venv/lib/python3.12/site-packages/apscheduler/executors/base.py", line 125, in run_job
    retval = job.func(*job.args, **job.kwargs)
             ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/Users/joewilson/PythonProjects/Snoogram/backend/app.py", line 265, in send_to_telegram
    # Update last_check in Cosmos DB
                ^^^^^^^^^^^^^^^^^^^^^
  File "/Users/joewilson/PythonProjects/Snoogram/backend/db_operations.py", line 100, in add_sent_post
  File "/Users/joewilson/PythonProjects/Snoogram/venv/lib/python3.12/site-packages/sqlalchemy/orm/scoping.py", line 597, in commit
    return self._proxied.commit()
           ^^^^^^^^^^^^^^^^^^^^^^
  File "/Users/joewilson/PythonProjects/Snoogram/venv/lib/python3.12/site-packages/sqlalchemy/orm/session.py", line 2028, in commit
    trans.commit(_to_root=True)
  File "<string>", line 2, in commit
  File "/Users/joewilson/PythonProjects/Snoogram/venv/lib/python3.12/site-packages/sqlalchemy/orm/state_changes.py", line 139, in _go
    ret_value = fn(self, *arg, **kw)
                ^^^^^^^^^^^^^^^^^^^^
  File "/Users/joewilson/PythonProjects/Snoogram/venv/lib/python3.12/site-packages/sqlalchemy/orm/session.py", line 1313, in commit
    self._prepare_impl()
  File "<string>", line 2, in _prepare_impl
  File "/Users/joewilson/PythonProjects/Snoogram/venv/lib/python3.12/site-packages/sqlalchemy/orm/state_changes.py", line 139, in _go
    ret_value = fn(self, *arg, **kw)
                ^^^^^^^^^^^^^^^^^^^^
  File "/Users/joewilson/PythonProjects/Snoogram/venv/lib/python3.12/site-packages/sqlalchemy/orm/session.py", line 1288, in _prepare_impl
    self.session.flush()
  File "/Users/joewilson/PythonProjects/Snoogram/venv/lib/python3.12/site-packages/sqlalchemy/orm/session.py", line 4352, in flush
    self._flush(objects)
  File "/Users/joewilson/PythonProjects/Snoogram/venv/lib/python3.12/site-packages/sqlalchemy/orm/session.py", line 4487, in _flush
    with util.safe_reraise():
  File "/Users/joewilson/PythonProjects/Snoogram/venv/lib/python3.12/site-packages/sqlalchemy/util/langhelpers.py", line 146, in __exit__
    raise exc_value.with_traceback(exc_tb)
  File "/Users/joewilson/PythonProjects/Snoogram/venv/lib/python3.12/site-packages/sqlalchemy/orm/session.py", line 4448, in _flush
    flush_context.execute()
  File "/Users/joewilson/PythonProjects/Snoogram/venv/lib/python3.12/site-packages/sqlalchemy/orm/unitofwork.py", line 466, in execute
    rec.execute(self)
  File "/Users/joewilson/PythonProjects/Snoogram/venv/lib/python3.12/site-packages/sqlalchemy/orm/unitofwork.py", line 642, in execute
    util.preloaded.orm_persistence.save_obj(
  File "/Users/joewilson/PythonProjects/Snoogram/venv/lib/python3.12/site-packages/sqlalchemy/orm/persistence.py", line 93, in save_obj
    _emit_insert_statements(
  File "/Users/joewilson/PythonProjects/Snoogram/venv/lib/python3.12/site-packages/sqlalchemy/orm/persistence.py", line 1233, in _emit_insert_statements
    result = connection.execute(
             ^^^^^^^^^^^^^^^^^^^
  File "/Users/joewilson/PythonProjects/Snoogram/venv/lib/python3.12/site-packages/sqlalchemy/engine/base.py", line 1418, in execute
    return meth(
           ^^^^^
  File "/Users/joewilson/PythonProjects/Snoogram/venv/lib/python3.12/site-packages/sqlalchemy/sql/elements.py", line 515, in _execute_on_connection
    return connection._execute_clauseelement(
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/Users/joewilson/PythonProjects/Snoogram/venv/lib/python3.12/site-packages/sqlalchemy/engine/base.py", line 1640, in _execute_clauseelement
    ret = self._execute_context(
          ^^^^^^^^^^^^^^^^^^^^^^
  File "/Users/joewilson/PythonProjects/Snoogram/venv/lib/python3.12/site-packages/sqlalchemy/engine/base.py", line 1846, in _execute_context
    return self._exec_single_context(
           ^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/Users/joewilson/PythonProjects/Snoogram/venv/lib/python3.12/site-packages/sqlalchemy/engine/base.py", line 1986, in _exec_single_context
    self._handle_dbapi_exception(
  File "/Users/joewilson/PythonProjects/Snoogram/venv/lib/python3.12/site-packages/sqlalchemy/engine/base.py", line 2355, in _handle_dbapi_exception
    raise sqlalchemy_exception.with_traceback(exc_info[2]) from e
  File "/Users/joewilson/PythonProjects/Snoogram/venv/lib/python3.12/site-packages/sqlalchemy/engine/base.py", line 1967, in _exec_single_context
    self.dialect.do_execute(
  File "/Users/joewilson/PythonProjects/Snoogram/venv/lib/python3.12/site-packages/sqlalchemy/engine/default.py", line 941, in do_execute
    cursor.execute(statement, parameters)
sqlalchemy.exc.OperationalError: (sqlite3.OperationalError) attempt to write a readonly database
[SQL: INSERT INTO sent_post (post_id, subreddit_name, sent_at) VALUES (?, ?, ?)]
[parameters: ('1geqscs', 'girlsfinishingthejob', '2024-10-30 10:31:54.686717')]
(Background on this error at: https://sqlalche.me/e/20/e3q8)
2024-10-30 05:32:16,974 - DEBUG - Looking for jobs to run
2024-10-30 05:32:16,976 - DEBUG - Next wakeup is due at 2024-10-30 05:33:16.969826-05:00 (in 59.993831 seconds)
2024-10-30 05:32:16,976 - INFO - Running job "send_to_telegram (trigger: interval[0:01:00], next run at: 2024-10-30 05:33:16 CDT)" (scheduled at 2024-10-30 05:32:16.969826-05:00)
2024-10-30 05:32:16,976 - INFO - Running job "send_to_telegram (trigger: interval[0:01:00], next run at: 2024-10-30 05:33:16 CDT)" (scheduled at 2024-10-30 05:32:16.970029-05:00)
2024-10-30 05:32:16,976 - INFO - Processing subreddit: girlsfinishingthejob
2024-10-30 05:32:16,976 - INFO - Processing subreddit: wifebutt
2024-10-30 05:32:16,977 - INFO - Fetching top posts of the day
2024-10-30 05:32:16,977 - INFO - Fetching top posts of the month
2024-10-30 05:32:16,978 - DEBUG - Fetching: GET https://oauth.reddit.com/r/girlsfinishingthejob/top at 1730284336.978015
2024-10-30 05:32:16,978 - DEBUG - Fetching: GET https://oauth.reddit.com/r/wifebutt/top at 1730284336.978216
2024-10-30 05:32:16,978 - DEBUG - Data: None
2024-10-30 05:32:16,978 - DEBUG - Data: None
2024-10-30 05:32:16,978 - DEBUG - Params: {'limit': 50, 'raw_json': 1, 't': 'day'}
2024-10-30 05:32:16,978 - DEBUG - Params: {'limit': 50, 'raw_json': 1, 't': 'month'}
2024-10-30 05:32:17,321 - DEBUG - https://oauth.reddit.com:443 "GET /r/girlsfinishingthejob/top?t=day&limit=50&raw_json=1 HTTP/11" 200 24109
2024-10-30 05:32:17,326 - DEBUG - Response: 200 (24109 bytes) (rst-0:rem-149.0:used-1 ratelimit) at 1730284337.3266182
2024-10-30 05:32:17,390 - INFO - Checking post: 1gelyz1 - Score: 7115 - URL: https://www.redgifs.com/watch/uttersvelteamphibian
2024-10-30 05:32:17,394 - INFO - Request URL: 'https://cosmossnoogram-centralus.documents.azure.com:443/dbs/ToDoList/colls/sent_posts/docs/'
Request method: 'POST'
Request headers:
    'Cache-Control': 'no-cache'
    'x-ms-version': 'REDACTED'
    'x-ms-documentdb-query-iscontinuationexpected': 'REDACTED'
    'x-ms-consistency-level': 'REDACTED'
    'x-ms-documentdb-isquery': 'REDACTED'
    'Content-Type': 'application/query+json'
    'x-ms-session-token': 'REDACTED'
    'x-ms-documentdb-query-enablecrosspartition': 'REDACTED'
    'x-ms-date': 'REDACTED'
    'authorization': 'REDACTED'
    'Accept': 'application/json'
    'x-ms-cosmos-correlated-activityid': 'REDACTED'
    'Content-Length': '107'
    'User-Agent': 'azsdk-python-cosmos/4.5.1 Python/3.12.4 (macOS-15.0.1-arm64-arm-64bit)'
A body is sent with the request
2024-10-30 05:32:17,427 - DEBUG - https://cosmossnoogram-centralus.documents.azure.com:443 "POST /dbs/ToDoList/colls/sent_posts/docs/ HTTP/11" 200 None
2024-10-30 05:32:17,428 - INFO - Response status: 200
Response headers:
    'Cache-Control': 'no-store, no-cache'
    'Pragma': 'no-cache'
    'Transfer-Encoding': 'chunked'
    'Content-Type': 'application/json'
    'Server': 'Microsoft-HTTPAPI/2.0'
    'Strict-Transport-Security': 'REDACTED'
    'x-ms-activity-id': 'REDACTED'
    'x-ms-last-state-change-utc': 'REDACTED'
    'x-ms-resource-quota': 'REDACTED'
    'x-ms-resource-usage': 'REDACTED'
    'x-ms-schemaversion': 'REDACTED'
    'lsn': 'REDACTED'
    'x-ms-item-count': 'REDACTED'
    'x-ms-request-charge': 'REDACTED'
    'x-ms-alt-content-path': 'REDACTED'
    'x-ms-content-path': 'REDACTED'
    'x-ms-documentdb-partitionkeyrangeid': 'REDACTED'
    'x-ms-xp-role': 'REDACTED'
    'x-ms-cosmos-query-execution-info': 'REDACTED'
    'x-ms-global-Committed-lsn': 'REDACTED'
    'x-ms-number-of-read-regions': 'REDACTED'
    'x-ms-transport-request-id': 'REDACTED'
    'x-ms-cosmos-llsn': 'REDACTED'
    'x-ms-session-token': 'REDACTED'
    'x-ms-request-duration-ms': 'REDACTED'
    'x-ms-serviceversion': 'REDACTED'
    'x-ms-cosmos-is-partition-key-delete-pending': 'REDACTED'
    'x-ms-cosmos-physical-partition-id': 'REDACTED'
    'x-ms-cosmos-internal-partition-id': 'REDACTED'
    'x-ms-gatewayversion': 'REDACTED'
    'Date': 'Wed, 30 Oct 2024 10:32:16 GMT'
2024-10-30 05:32:17,428 - INFO - Found video post: 1gelyz1
2024-10-30 05:32:17,429 - DEBUG - Starting new HTTPS connection (1): api.redgifs.com:443
2024-10-30 05:32:17,523 - DEBUG - https://api.redgifs.com:443 "GET /v2/gifs/uttersvelteamphibian HTTP/11" 200 None
2024-10-30 05:32:17,525 - DEBUG - Starting new HTTPS connection (1): files.redgifs.com:443
2024-10-30 05:32:17,588 - DEBUG - https://files.redgifs.com:443 "GET /UtterSvelteAmphibian.mp4 HTTP/11" 200 42980012
2024-10-30 05:32:17,735 - DEBUG - https://oauth.reddit.com:443 "GET /r/wifebutt/top?t=month&limit=50&raw_json=1 HTTP/11" 200 49255
2024-10-30 05:32:17,761 - DEBUG - Response: 200 (49255 bytes) (rst-0:rem-148.0:used-2 ratelimit) at 1730284337.7619698
2024-10-30 05:32:17,767 - INFO - Checking post: 1g9w053 - Score: 5355 - URL: https://www.reddit.com/gallery/1g9w053
2024-10-30 05:32:17,768 - INFO - Request URL: 'https://cosmossnoogram-centralus.documents.azure.com:443/dbs/ToDoList/colls/sent_posts/docs/'
Request method: 'POST'
Request headers:
    'Cache-Control': 'no-cache'
    'x-ms-version': 'REDACTED'
    'x-ms-documentdb-query-iscontinuationexpected': 'REDACTED'
    'x-ms-consistency-level': 'REDACTED'
    'x-ms-documentdb-isquery': 'REDACTED'
    'Content-Type': 'application/query+json'
    'x-ms-session-token': 'REDACTED'
    'x-ms-documentdb-query-enablecrosspartition': 'REDACTED'
    'x-ms-date': 'REDACTED'
    'authorization': 'REDACTED'
    'Accept': 'application/json'
    'x-ms-cosmos-correlated-activityid': 'REDACTED'
    'Content-Length': '107'
    'User-Agent': 'azsdk-python-cosmos/4.5.1 Python/3.12.4 (macOS-15.0.1-arm64-arm-64bit)'
A body is sent with the request
2024-10-30 05:32:17,816 - DEBUG - https://cosmossnoogram-centralus.documents.azure.com:443 "POST /dbs/ToDoList/colls/sent_posts/docs/ HTTP/11" 200 None
2024-10-30 05:32:17,816 - INFO - Response status: 200
Response headers:
    'Cache-Control': 'no-store, no-cache'
    'Pragma': 'no-cache'
    'Transfer-Encoding': 'chunked'
    'Content-Type': 'application/json'
    'Server': 'Microsoft-HTTPAPI/2.0'
    'Strict-Transport-Security': 'REDACTED'
    'x-ms-activity-id': 'REDACTED'
    'x-ms-last-state-change-utc': 'REDACTED'
    'x-ms-resource-quota': 'REDACTED'
    'x-ms-resource-usage': 'REDACTED'
    'x-ms-schemaversion': 'REDACTED'
    'lsn': 'REDACTED'
    'x-ms-item-count': 'REDACTED'
    'x-ms-request-charge': 'REDACTED'
    'x-ms-alt-content-path': 'REDACTED'
    'x-ms-content-path': 'REDACTED'
    'x-ms-documentdb-partitionkeyrangeid': 'REDACTED'
    'x-ms-xp-role': 'REDACTED'
    'x-ms-cosmos-query-execution-info': 'REDACTED'
    'x-ms-global-Committed-lsn': 'REDACTED'
    'x-ms-number-of-read-regions': 'REDACTED'
    'x-ms-transport-request-id': 'REDACTED'
    'x-ms-cosmos-llsn': 'REDACTED'
    'x-ms-session-token': 'REDACTED'
    'x-ms-request-duration-ms': 'REDACTED'
    'x-ms-serviceversion': 'REDACTED'
    'x-ms-cosmos-is-partition-key-delete-pending': 'REDACTED'
    'x-ms-cosmos-physical-partition-id': 'REDACTED'
    'x-ms-cosmos-internal-partition-id': 'REDACTED'
    'x-ms-gatewayversion': 'REDACTED'
    'Date': 'Wed, 30 Oct 2024 10:32:17 GMT'
2024-10-30 05:32:17,816 - INFO - Post 1g9w053 is not an image or video post, skipping
2024-10-30 05:32:17,816 - INFO - Checking post: 1fv4cfc - Score: 4582 - URL: https://www.reddit.com/gallery/1fv4cfc
2024-10-30 05:32:17,817 - INFO - Request URL: 'https://cosmossnoogram-centralus.documents.azure.com:443/dbs/ToDoList/colls/sent_posts/docs/'
Request method: 'POST'
Request headers:
    'Cache-Control': 'no-cache'
    'x-ms-version': 'REDACTED'
    'x-ms-documentdb-query-iscontinuationexpected': 'REDACTED'
    'x-ms-consistency-level': 'REDACTED'
    'x-ms-documentdb-isquery': 'REDACTED'
    'Content-Type': 'application/query+json'
    'x-ms-session-token': 'REDACTED'
    'x-ms-documentdb-query-enablecrosspartition': 'REDACTED'
    'x-ms-date': 'REDACTED'
    'authorization': 'REDACTED'
    'Accept': 'application/json'
    'x-ms-cosmos-correlated-activityid': 'REDACTED'
    'Content-Length': '107'
    'User-Agent': 'azsdk-python-cosmos/4.5.1 Python/3.12.4 (macOS-15.0.1-arm64-arm-64bit)'
A body is sent with the request
2024-10-30 05:32:17,863 - DEBUG - https://cosmossnoogram-centralus.documents.azure.com:443 "POST /dbs/ToDoList/colls/sent_posts/docs/ HTTP/11" 200 None
2024-10-30 05:32:17,864 - INFO - Response status: 200
Response headers:
    'Cache-Control': 'no-store, no-cache'
    'Pragma': 'no-cache'
    'Transfer-Encoding': 'chunked'
    'Content-Type': 'application/json'
    'Server': 'Microsoft-HTTPAPI/2.0'
    'Strict-Transport-Security': 'REDACTED'
    'x-ms-activity-id': 'REDACTED'
    'x-ms-last-state-change-utc': 'REDACTED'
    'x-ms-resource-quota': 'REDACTED'
    'x-ms-resource-usage': 'REDACTED'
    'x-ms-schemaversion': 'REDACTED'
    'lsn': 'REDACTED'
    'x-ms-item-count': 'REDACTED'
    'x-ms-request-charge': 'REDACTED'
    'x-ms-alt-content-path': 'REDACTED'
    'x-ms-content-path': 'REDACTED'
    'x-ms-documentdb-partitionkeyrangeid': 'REDACTED'
    'x-ms-xp-role': 'REDACTED'
    'x-ms-cosmos-query-execution-info': 'REDACTED'
    'x-ms-global-Committed-lsn': 'REDACTED'
    'x-ms-number-of-read-regions': 'REDACTED'
    'x-ms-transport-request-id': 'REDACTED'
    'x-ms-cosmos-llsn': 'REDACTED'
    'x-ms-session-token': 'REDACTED'
    'x-ms-request-duration-ms': 'REDACTED'
    'x-ms-serviceversion': 'REDACTED'
    'x-ms-cosmos-is-partition-key-delete-pending': 'REDACTED'
    'x-ms-cosmos-physical-partition-id': 'REDACTED'
    'x-ms-cosmos-internal-partition-id': 'REDACTED'
    'x-ms-gatewayversion': 'REDACTED'
    'Date': 'Wed, 30 Oct 2024 10:32:17 GMT'
2024-10-30 05:32:17,864 - INFO - Post 1fv4cfc is not an image or video post, skipping
2024-10-30 05:32:17,864 - INFO - Checking post: 1ganrp0 - Score: 4215 - URL: https://i.redd.it/ezatz8645lwd1.jpeg
2024-10-30 05:32:17,865 - INFO - Request URL: 'https://cosmossnoogram-centralus.documents.azure.com:443/dbs/ToDoList/colls/sent_posts/docs/'
Request method: 'POST'
Request headers:
    'Cache-Control': 'no-cache'
    'x-ms-version': 'REDACTED'
    'x-ms-documentdb-query-iscontinuationexpected': 'REDACTED'
    'x-ms-consistency-level': 'REDACTED'
    'x-ms-documentdb-isquery': 'REDACTED'
    'Content-Type': 'application/query+json'
    'x-ms-session-token': 'REDACTED'
    'x-ms-documentdb-query-enablecrosspartition': 'REDACTED'
    'x-ms-date': 'REDACTED'
    'authorization': 'REDACTED'
    'Accept': 'application/json'
    'x-ms-cosmos-correlated-activityid': 'REDACTED'
    'Content-Length': '107'
    'User-Agent': 'azsdk-python-cosmos/4.5.1 Python/3.12.4 (macOS-15.0.1-arm64-arm-64bit)'
A body is sent with the request
2024-10-30 05:32:17,915 - DEBUG - https://cosmossnoogram-centralus.documents.azure.com:443 "POST /dbs/ToDoList/colls/sent_posts/docs/ HTTP/11" 200 None
2024-10-30 05:32:17,915 - INFO - Response status: 200
Response headers:
    'Cache-Control': 'no-store, no-cache'
    'Pragma': 'no-cache'
    'Transfer-Encoding': 'chunked'
    'Content-Type': 'application/json'
    'Server': 'Microsoft-HTTPAPI/2.0'
    'Strict-Transport-Security': 'REDACTED'
    'x-ms-activity-id': 'REDACTED'
    'x-ms-last-state-change-utc': 'REDACTED'
    'x-ms-resource-quota': 'REDACTED'
    'x-ms-resource-usage': 'REDACTED'
    'x-ms-schemaversion': 'REDACTED'
    'lsn': 'REDACTED'
    'x-ms-item-count': 'REDACTED'
    'x-ms-request-charge': 'REDACTED'
    'x-ms-alt-content-path': 'REDACTED'
    'x-ms-content-path': 'REDACTED'
    'x-ms-documentdb-partitionkeyrangeid': 'REDACTED'
    'x-ms-xp-role': 'REDACTED'
    'x-ms-cosmos-query-execution-info': 'REDACTED'
    'x-ms-global-Committed-lsn': 'REDACTED'
    'x-ms-number-of-read-regions': 'REDACTED'
    'x-ms-transport-request-id': 'REDACTED'
    'x-ms-cosmos-llsn': 'REDACTED'
    'x-ms-session-token': 'REDACTED'
    'x-ms-request-duration-ms': 'REDACTED'
    'x-ms-serviceversion': 'REDACTED'
    'x-ms-cosmos-is-partition-key-delete-pending': 'REDACTED'
    'x-ms-cosmos-physical-partition-id': 'REDACTED'
    'x-ms-cosmos-internal-partition-id': 'REDACTED'
    'x-ms-gatewayversion': 'REDACTED'
    'Date': 'Wed, 30 Oct 2024 10:32:17 GMT'
2024-10-30 05:32:17,915 - INFO - Post 1ganrp0 is a duplicate, skipping
2024-10-30 05:32:17,915 - INFO - Checking post: 1gdrcjt - Score: 4066 - URL: https://www.redgifs.com/watch/unrealisticdefinitebarebirdbat
2024-10-30 05:32:17,916 - INFO - Post 1gdrcjt is a duplicate, skipping
2024-10-30 05:32:17,916 - INFO - Checking post: 1g30sx1 - Score: 3957 - URL: https://www.redgifs.com/watch/hardwarlikesunbittern
2024-10-30 05:32:17,916 - INFO - Post 1g30sx1 is a duplicate, skipping
2024-10-30 05:32:17,916 - INFO - Checking post: 1fs7839 - Score: 3855 - URL: https://www.reddit.com/gallery/1fs7839
2024-10-30 05:32:17,917 - INFO - Request URL: 'https://cosmossnoogram-centralus.documents.azure.com:443/dbs/ToDoList/colls/sent_posts/docs/'
Request method: 'POST'
Request headers:
    'Cache-Control': 'no-cache'
    'x-ms-version': 'REDACTED'
    'x-ms-documentdb-query-iscontinuationexpected': 'REDACTED'
    'x-ms-consistency-level': 'REDACTED'
    'x-ms-documentdb-isquery': 'REDACTED'
    'Content-Type': 'application/query+json'
    'x-ms-session-token': 'REDACTED'
    'x-ms-documentdb-query-enablecrosspartition': 'REDACTED'
    'x-ms-date': 'REDACTED'
    'authorization': 'REDACTED'
    'Accept': 'application/json'
    'x-ms-cosmos-correlated-activityid': 'REDACTED'
    'Content-Length': '107'
    'User-Agent': 'azsdk-python-cosmos/4.5.1 Python/3.12.4 (macOS-15.0.1-arm64-arm-64bit)'
A body is sent with the request
2024-10-30 05:32:17,971 - DEBUG - https://cosmossnoogram-centralus.documents.azure.com:443 "POST /dbs/ToDoList/colls/sent_posts/docs/ HTTP/11" 200 None
2024-10-30 05:32:17,971 - INFO - Response status: 200
Response headers:
    'Cache-Control': 'no-store, no-cache'
    'Pragma': 'no-cache'
    'Transfer-Encoding': 'chunked'
    'Content-Type': 'application/json'
    'Server': 'Microsoft-HTTPAPI/2.0'
    'Strict-Transport-Security': 'REDACTED'
    'x-ms-activity-id': 'REDACTED'
    'x-ms-last-state-change-utc': 'REDACTED'
    'x-ms-resource-quota': 'REDACTED'
    'x-ms-resource-usage': 'REDACTED'
    'x-ms-schemaversion': 'REDACTED'
    'lsn': 'REDACTED'
    'x-ms-item-count': 'REDACTED'
    'x-ms-request-charge': 'REDACTED'
    'x-ms-alt-content-path': 'REDACTED'
    'x-ms-content-path': 'REDACTED'
    'x-ms-documentdb-partitionkeyrangeid': 'REDACTED'
    'x-ms-xp-role': 'REDACTED'
    'x-ms-cosmos-query-execution-info': 'REDACTED'
    'x-ms-global-Committed-lsn': 'REDACTED'
    'x-ms-number-of-read-regions': 'REDACTED'
    'x-ms-transport-request-id': 'REDACTED'
    'x-ms-cosmos-llsn': 'REDACTED'
    'x-ms-session-token': 'REDACTED'
    'x-ms-request-duration-ms': 'REDACTED'
    'x-ms-serviceversion': 'REDACTED'
    'x-ms-cosmos-is-partition-key-delete-pending': 'REDACTED'
    'x-ms-cosmos-physical-partition-id': 'REDACTED'
    'x-ms-cosmos-internal-partition-id': 'REDACTED'
    'x-ms-gatewayversion': 'REDACTED'
    'Date': 'Wed, 30 Oct 2024 10:32:17 GMT'
2024-10-30 05:32:17,971 - INFO - Post 1fs7839 is not an image or video post, skipping
2024-10-30 05:32:17,971 - INFO - Checking post: 1g2rse9 - Score: 3768 - URL: https://i.redd.it/gzxs1aeshjud1.png
2024-10-30 05:32:17,972 - INFO - Post 1g2rse9 is a duplicate, skipping
2024-10-30 05:32:17,972 - INFO - Checking post: 1ge9loz - Score: 3720 - URL: https://www.redgifs.com/watch/deadlygregariouswoodchuck
2024-10-30 05:32:17,972 - INFO - Post 1ge9loz is a duplicate, skipping
2024-10-30 05:32:17,972 - INFO - Checking post: 1g0e966 - Score: 3640 - URL: https://www.reddit.com/gallery/1g0e966
2024-10-30 05:32:17,973 - INFO - Request URL: 'https://cosmossnoogram-centralus.documents.azure.com:443/dbs/ToDoList/colls/sent_posts/docs/'
Request method: 'POST'
Request headers:
    'Cache-Control': 'no-cache'
    'x-ms-version': 'REDACTED'
    'x-ms-documentdb-query-iscontinuationexpected': 'REDACTED'
    'x-ms-consistency-level': 'REDACTED'
    'x-ms-documentdb-isquery': 'REDACTED'
    'Content-Type': 'application/query+json'
    'x-ms-session-token': 'REDACTED'
    'x-ms-documentdb-query-enablecrosspartition': 'REDACTED'
    'x-ms-date': 'REDACTED'
    'authorization': 'REDACTED'
    'Accept': 'application/json'
    'x-ms-cosmos-correlated-activityid': 'REDACTED'
    'Content-Length': '107'
    'User-Agent': 'azsdk-python-cosmos/4.5.1 Python/3.12.4 (macOS-15.0.1-arm64-arm-64bit)'
A body is sent with the request
2024-10-30 05:32:18,039 - DEBUG - https://cosmossnoogram-centralus.documents.azure.com:443 "POST /dbs/ToDoList/colls/sent_posts/docs/ HTTP/11" 200 None
2024-10-30 05:32:18,039 - INFO - Response status: 200
Response headers:
    'Cache-Control': 'no-store, no-cache'
    'Pragma': 'no-cache'
    'Transfer-Encoding': 'chunked'
    'Content-Type': 'application/json'
    'Server': 'Microsoft-HTTPAPI/2.0'
    'Strict-Transport-Security': 'REDACTED'
    'x-ms-activity-id': 'REDACTED'
    'x-ms-last-state-change-utc': 'REDACTED'
    'x-ms-resource-quota': 'REDACTED'
    'x-ms-resource-usage': 'REDACTED'
    'x-ms-schemaversion': 'REDACTED'
    'lsn': 'REDACTED'
    'x-ms-item-count': 'REDACTED'
    'x-ms-request-charge': 'REDACTED'
    'x-ms-alt-content-path': 'REDACTED'
    'x-ms-content-path': 'REDACTED'
    'x-ms-documentdb-partitionkeyrangeid': 'REDACTED'
    'x-ms-xp-role': 'REDACTED'
    'x-ms-cosmos-query-execution-info': 'REDACTED'
    'x-ms-global-Committed-lsn': 'REDACTED'
    'x-ms-number-of-read-regions': 'REDACTED'
    'x-ms-transport-request-id': 'REDACTED'
    'x-ms-cosmos-llsn': 'REDACTED'
    'x-ms-session-token': 'REDACTED'
    'x-ms-request-duration-ms': 'REDACTED'
    'x-ms-serviceversion': 'REDACTED'
    'x-ms-cosmos-is-partition-key-delete-pending': 'REDACTED'
    'x-ms-cosmos-physical-partition-id': 'REDACTED'
    'x-ms-cosmos-internal-partition-id': 'REDACTED'
    'x-ms-gatewayversion': 'REDACTED'
    'Date': 'Wed, 30 Oct 2024 10:32:17 GMT'
2024-10-30 05:32:18,039 - INFO - Post 1g0e966 is not an image or video post, skipping
2024-10-30 05:32:18,039 - INFO - Checking post: 1gckgcy - Score: 3396 - URL: https://i.redd.it/njd0mbyjl3xd1.jpeg
2024-10-30 05:32:18,040 - INFO - Post 1gckgcy is a duplicate, skipping
2024-10-30 05:32:18,040 - INFO - Checking post: 1fznoil - Score: 3339 - URL: https://i.redd.it/eruk3694dptd1.jpeg
2024-10-30 05:32:18,040 - INFO - Post 1fznoil is a duplicate, skipping
2024-10-30 05:32:18,040 - INFO - Checking post: 1g3dsj7 - Score: 3184 - URL: https://i.redd.it/cg9oigznmpud1.jpeg
2024-10-30 05:32:18,041 - INFO - Post 1g3dsj7 is a duplicate, skipping
2024-10-30 05:32:18,041 - INFO - Checking post: 1g4dx9i - Score: 3133 - URL: https://i.redd.it/5kv3c8f3lyud1.jpeg
2024-10-30 05:32:18,041 - INFO - Request URL: 'https://cosmossnoogram-centralus.documents.azure.com:443/dbs/ToDoList/colls/sent_posts/docs/'
Request method: 'POST'
Request headers:
    'Cache-Control': 'no-cache'
    'x-ms-version': 'REDACTED'
    'x-ms-documentdb-query-iscontinuationexpected': 'REDACTED'
    'x-ms-consistency-level': 'REDACTED'
    'x-ms-documentdb-isquery': 'REDACTED'
    'Content-Type': 'application/query+json'
    'x-ms-session-token': 'REDACTED'
    'x-ms-documentdb-query-enablecrosspartition': 'REDACTED'
    'x-ms-date': 'REDACTED'
    'authorization': 'REDACTED'
    'Accept': 'application/json'
    'x-ms-cosmos-correlated-activityid': 'REDACTED'
    'Content-Length': '107'
    'User-Agent': 'azsdk-python-cosmos/4.5.1 Python/3.12.4 (macOS-15.0.1-arm64-arm-64bit)'
A body is sent with the request
2024-10-30 05:32:18,102 - DEBUG - https://cosmossnoogram-centralus.documents.azure.com:443 "POST /dbs/ToDoList/colls/sent_posts/docs/ HTTP/11" 200 None
2024-10-30 05:32:18,103 - INFO - Response status: 200
Response headers:
    'Cache-Control': 'no-store, no-cache'
    'Pragma': 'no-cache'
    'Transfer-Encoding': 'chunked'
    'Content-Type': 'application/json'
    'Server': 'Microsoft-HTTPAPI/2.0'
    'Strict-Transport-Security': 'REDACTED'
    'x-ms-activity-id': 'REDACTED'
    'x-ms-last-state-change-utc': 'REDACTED'
    'x-ms-resource-quota': 'REDACTED'
    'x-ms-resource-usage': 'REDACTED'
    'x-ms-schemaversion': 'REDACTED'
    'lsn': 'REDACTED'
    'x-ms-item-count': 'REDACTED'
    'x-ms-request-charge': 'REDACTED'
    'x-ms-alt-content-path': 'REDACTED'
    'x-ms-content-path': 'REDACTED'
    'x-ms-quorum-acked-lsn': 'REDACTED'
    'x-ms-current-write-quorum': 'REDACTED'
    'x-ms-current-replica-set-size': 'REDACTED'
    'x-ms-documentdb-partitionkeyrangeid': 'REDACTED'
    'x-ms-xp-role': 'REDACTED'
    'x-ms-cosmos-query-execution-info': 'REDACTED'
    'x-ms-global-Committed-lsn': 'REDACTED'
    'x-ms-number-of-read-regions': 'REDACTED'
    'x-ms-transport-request-id': 'REDACTED'
    'x-ms-cosmos-llsn': 'REDACTED'
    'x-ms-cosmos-quorum-acked-llsn': 'REDACTED'
    'x-ms-session-token': 'REDACTED'
    'x-ms-request-duration-ms': 'REDACTED'
    'x-ms-serviceversion': 'REDACTED'
    'x-ms-cosmos-is-partition-key-delete-pending': 'REDACTED'
    'x-ms-cosmos-physical-partition-id': 'REDACTED'
    'x-ms-cosmos-internal-partition-id': 'REDACTED'
    'x-ms-gatewayversion': 'REDACTED'
    'Date': 'Wed, 30 Oct 2024 10:32:17 GMT'
2024-10-30 05:32:18,103 - INFO - Post 1g4dx9i is a duplicate, skipping
2024-10-30 05:32:18,103 - INFO - Checking post: 1ftaz41 - Score: 3128 - URL: https://i.redd.it/2meejva1g1sd1.jpeg
2024-10-30 05:32:18,104 - INFO - Request URL: 'https://cosmossnoogram-centralus.documents.azure.com:443/dbs/ToDoList/colls/sent_posts/docs/'
Request method: 'POST'
Request headers:
    'Cache-Control': 'no-cache'
    'x-ms-version': 'REDACTED'
    'x-ms-documentdb-query-iscontinuationexpected': 'REDACTED'
    'x-ms-consistency-level': 'REDACTED'
    'x-ms-documentdb-isquery': 'REDACTED'
    'Content-Type': 'application/query+json'
    'x-ms-session-token': 'REDACTED'
    'x-ms-documentdb-query-enablecrosspartition': 'REDACTED'
    'x-ms-date': 'REDACTED'
    'authorization': 'REDACTED'
    'Accept': 'application/json'
    'x-ms-cosmos-correlated-activityid': 'REDACTED'
    'Content-Length': '107'
    'User-Agent': 'azsdk-python-cosmos/4.5.1 Python/3.12.4 (macOS-15.0.1-arm64-arm-64bit)'
A body is sent with the request
2024-10-30 05:32:18,169 - DEBUG - https://cosmossnoogram-centralus.documents.azure.com:443 "POST /dbs/ToDoList/colls/sent_posts/docs/ HTTP/11" 200 None
2024-10-30 05:32:18,169 - INFO - Response status: 200
Response headers:
    'Cache-Control': 'no-store, no-cache'
    'Pragma': 'no-cache'
    'Transfer-Encoding': 'chunked'
    'Content-Type': 'application/json'
    'Server': 'Microsoft-HTTPAPI/2.0'
    'Strict-Transport-Security': 'REDACTED'
    'x-ms-activity-id': 'REDACTED'
    'x-ms-last-state-change-utc': 'REDACTED'
    'x-ms-resource-quota': 'REDACTED'
    'x-ms-resource-usage': 'REDACTED'
    'x-ms-schemaversion': 'REDACTED'
    'lsn': 'REDACTED'
    'x-ms-item-count': 'REDACTED'
    'x-ms-request-charge': 'REDACTED'
    'x-ms-alt-content-path': 'REDACTED'
    'x-ms-content-path': 'REDACTED'
    'x-ms-documentdb-partitionkeyrangeid': 'REDACTED'
    'x-ms-xp-role': 'REDACTED'
    'x-ms-cosmos-query-execution-info': 'REDACTED'
    'x-ms-global-Committed-lsn': 'REDACTED'
    'x-ms-number-of-read-regions': 'REDACTED'
    'x-ms-transport-request-id': 'REDACTED'
    'x-ms-cosmos-llsn': 'REDACTED'
    'x-ms-session-token': 'REDACTED'
    'x-ms-request-duration-ms': 'REDACTED'
    'x-ms-serviceversion': 'REDACTED'
    'x-ms-cosmos-is-partition-key-delete-pending': 'REDACTED'
    'x-ms-cosmos-physical-partition-id': 'REDACTED'
    'x-ms-cosmos-internal-partition-id': 'REDACTED'
    'x-ms-gatewayversion': 'REDACTED'
    'Date': 'Wed, 30 Oct 2024 10:32:17 GMT'
2024-10-30 05:32:18,169 - INFO - Post 1ftaz41 is a duplicate, skipping
2024-10-30 05:32:18,169 - INFO - Checking post: 1ge2oko - Score: 3128 - URL: https://i.redd.it/3vk9ocmf6ixd1.jpeg
2024-10-30 05:32:18,170 - INFO - Request URL: 'https://cosmossnoogram-centralus.documents.azure.com:443/dbs/ToDoList/colls/sent_posts/docs/'
Request method: 'POST'
Request headers:
    'Cache-Control': 'no-cache'
    'x-ms-version': 'REDACTED'
    'x-ms-documentdb-query-iscontinuationexpected': 'REDACTED'
    'x-ms-consistency-level': 'REDACTED'
    'x-ms-documentdb-isquery': 'REDACTED'
    'Content-Type': 'application/query+json'
    'x-ms-session-token': 'REDACTED'
    'x-ms-documentdb-query-enablecrosspartition': 'REDACTED'
    'x-ms-date': 'REDACTED'
    'authorization': 'REDACTED'
    'Accept': 'application/json'
    'x-ms-cosmos-correlated-activityid': 'REDACTED'
    'Content-Length': '107'
    'User-Agent': 'azsdk-python-cosmos/4.5.1 Python/3.12.4 (macOS-15.0.1-arm64-arm-64bit)'
A body is sent with the request
2024-10-30 05:32:18,219 - DEBUG - https://cosmossnoogram-centralus.documents.azure.com:443 "POST /dbs/ToDoList/colls/sent_posts/docs/ HTTP/11" 200 None
2024-10-30 05:32:18,219 - INFO - Response status: 200
Response headers:
    'Cache-Control': 'no-store, no-cache'
    'Pragma': 'no-cache'
    'Transfer-Encoding': 'chunked'
    'Content-Type': 'application/json'
    'Server': 'Microsoft-HTTPAPI/2.0'
    'Strict-Transport-Security': 'REDACTED'
    'x-ms-activity-id': 'REDACTED'
    'x-ms-last-state-change-utc': 'REDACTED'
    'x-ms-resource-quota': 'REDACTED'
    'x-ms-resource-usage': 'REDACTED'
    'x-ms-schemaversion': 'REDACTED'
    'lsn': 'REDACTED'
    'x-ms-item-count': 'REDACTED'
    'x-ms-request-charge': 'REDACTED'
    'x-ms-alt-content-path': 'REDACTED'
    'x-ms-content-path': 'REDACTED'
    'x-ms-documentdb-partitionkeyrangeid': 'REDACTED'
    'x-ms-xp-role': 'REDACTED'
    'x-ms-cosmos-query-execution-info': 'REDACTED'
    'x-ms-global-Committed-lsn': 'REDACTED'
    'x-ms-number-of-read-regions': 'REDACTED'
    'x-ms-transport-request-id': 'REDACTED'
    'x-ms-cosmos-llsn': 'REDACTED'
    'x-ms-session-token': 'REDACTED'
    'x-ms-request-duration-ms': 'REDACTED'
    'x-ms-serviceversion': 'REDACTED'
    'x-ms-cosmos-is-partition-key-delete-pending': 'REDACTED'
    'x-ms-cosmos-physical-partition-id': 'REDACTED'
    'x-ms-cosmos-internal-partition-id': 'REDACTED'
    'x-ms-gatewayversion': 'REDACTED'
    'Date': 'Wed, 30 Oct 2024 10:32:17 GMT'
2024-10-30 05:32:18,219 - INFO - Found image post: 1ge2oko with URL: https://i.redd.it/3vk9ocmf6ixd1.jpeg
2024-10-30 05:32:18,220 - DEBUG - Starting new HTTPS connection (1): i.redd.it:443
2024-10-30 05:32:18,450 - DEBUG - https://i.redd.it:443 "GET /3vk9ocmf6ixd1.jpeg HTTP/11" 200 2942027
2024-10-30 05:32:18,659 - INFO - Successfully downloaded media to downloads/videos/1gelyz1_20241030_053217_ba5c8ead.mp4
2024-10-30 05:32:18,661 - DEBUG - Using selector: KqueueSelector
2024-10-30 05:32:18,661 - INFO - Attempting to send video to Telegram - Path: downloads/videos/1gelyz1_20241030_053217_ba5c8ead.mp4
2024-10-30 05:32:18,662 - DEBUG - load_ssl_context verify=True cert=None trust_env=True http2=False
2024-10-30 05:32:18,662 - DEBUG - load_verify_locations cafile='/Users/joewilson/PythonProjects/Snoogram/venv/lib/python3.12/site-packages/certifi/cacert.pem'
2024-10-30 05:32:18,670 - DEBUG - load_ssl_context verify=True cert=None trust_env=True http2=False
2024-10-30 05:32:18,671 - DEBUG - load_verify_locations cafile='/Users/joewilson/PythonProjects/Snoogram/venv/lib/python3.12/site-packages/certifi/cacert.pem'
2024-10-30 05:32:18,679 - DEBUG - Entering: get_me
2024-10-30 05:32:18,679 - DEBUG - connect_tcp.started host='api.telegram.org' port=443 local_address=None timeout=5.0 socket_options=None
2024-10-30 05:32:18,757 - INFO - Successfully downloaded media to downloads/pics/1ge2oko_20241030_053218_c0dedffe.jpeg
2024-10-30 05:32:18,758 - DEBUG - Using selector: KqueueSelector
2024-10-30 05:32:18,758 - INFO - Attempting to send photo to Telegram - Path: downloads/pics/1ge2oko_20241030_053218_c0dedffe.jpeg
2024-10-30 05:32:18,758 - DEBUG - Entering: get_me
2024-10-30 05:32:18,758 - DEBUG - connect_tcp.started host='api.telegram.org' port=443 local_address=None timeout=5.0 socket_options=None
2024-10-30 05:32:18,810 - DEBUG - connect_tcp.complete return_value=<httpcore._backends.anyio.AnyIOStream object at 0x108c77ce0>
2024-10-30 05:32:18,810 - DEBUG - start_tls.started ssl_context=<ssl.SSLContext object at 0x108e362d0> server_hostname='api.telegram.org' timeout=5.0
2024-10-30 05:32:18,880 - DEBUG - connect_tcp.complete return_value=<httpcore._backends.anyio.AnyIOStream object at 0x108d9dc10>
2024-10-30 05:32:18,880 - DEBUG - start_tls.started ssl_context=<ssl.SSLContext object at 0x108e362d0> server_hostname='api.telegram.org' timeout=5.0
2024-10-30 05:32:18,938 - DEBUG - start_tls.complete return_value=<httpcore._backends.anyio.AnyIOStream object at 0x108c74890>
2024-10-30 05:32:18,939 - DEBUG - send_request_headers.started request=<Request [b'POST']>
2024-10-30 05:32:18,939 - DEBUG - send_request_headers.complete
2024-10-30 05:32:18,939 - DEBUG - send_request_body.started request=<Request [b'POST']>
2024-10-30 05:32:18,939 - DEBUG - send_request_body.complete
2024-10-30 05:32:18,939 - DEBUG - receive_response_headers.started request=<Request [b'POST']>
2024-10-30 05:32:19,014 - DEBUG - start_tls.complete return_value=<httpcore._backends.anyio.AnyIOStream object at 0x108ed3620>
2024-10-30 05:32:19,014 - DEBUG - send_request_headers.started request=<Request [b'POST']>
2024-10-30 05:32:19,014 - DEBUG - send_request_headers.complete
2024-10-30 05:32:19,014 - DEBUG - send_request_body.started request=<Request [b'POST']>
2024-10-30 05:32:19,014 - DEBUG - send_request_body.complete
2024-10-30 05:32:19,014 - DEBUG - receive_response_headers.started request=<Request [b'POST']>
2024-10-30 05:32:19,050 - DEBUG - receive_response_headers.complete return_value=(b'HTTP/1.1', 200, b'OK', [(b'Server', b'nginx/1.18.0'), (b'Date', b'Wed, 30 Oct 2024 10:32:19 GMT'), (b'Content-Type', b'application/json'), (b'Content-Length', b'254'), (b'Connection', b'keep-alive'), (b'Strict-Transport-Security', b'max-age=31536000; includeSubDomains; preload'), (b'Access-Control-Allow-Origin', b'*'), (b'Access-Control-Allow-Methods', b'GET, POST, OPTIONS'), (b'Access-Control-Expose-Headers', b'Content-Length,Content-Type,Date,Server,Connection')])
2024-10-30 05:32:19,051 - INFO - HTTP Request: POST https://api.telegram.org/bot7867694458:AAEFLZjWPyd1p640mHENnBt479WRYfSavWg/getMe "HTTP/1.1 200 OK"
2024-10-30 05:32:19,051 - DEBUG - receive_response_body.started request=<Request [b'POST']>
2024-10-30 05:32:19,051 - DEBUG - receive_response_body.complete
2024-10-30 05:32:19,051 - DEBUG - response_closed.started
2024-10-30 05:32:19,051 - DEBUG - response_closed.complete
2024-10-30 05:32:19,051 - DEBUG - User(api_kwargs={'can_connect_to_business': False, 'has_main_web_app': False}, can_join_groups=True, can_read_all_group_messages=False, first_name='RedditBot', id=7867694458, is_bot=True, supports_inline_queries=False, username='RedditImage_bot')
2024-10-30 05:32:19,052 - DEBUG - Exiting: get_me
2024-10-30 05:32:19,052 - DEBUG - This Bot is already initialized.
2024-10-30 05:32:19,052 - DEBUG - Entering: send_video
2024-10-30 05:32:19,060 - DEBUG - send_request_headers.started request=<Request [b'POST']>
2024-10-30 05:32:19,061 - DEBUG - send_request_headers.complete
2024-10-30 05:32:19,061 - DEBUG - send_request_body.started request=<Request [b'POST']>
2024-10-30 05:32:19,139 - DEBUG - receive_response_headers.complete return_value=(b'HTTP/1.1', 200, b'OK', [(b'Server', b'nginx/1.18.0'), (b'Date', b'Wed, 30 Oct 2024 10:32:19 GMT'), (b'Content-Type', b'application/json'), (b'Content-Length', b'254'), (b'Connection', b'keep-alive'), (b'Strict-Transport-Security', b'max-age=31536000; includeSubDomains; preload'), (b'Access-Control-Allow-Origin', b'*'), (b'Access-Control-Allow-Methods', b'GET, POST, OPTIONS'), (b'Access-Control-Expose-Headers', b'Content-Length,Content-Type,Date,Server,Connection')])
2024-10-30 05:32:19,139 - INFO - HTTP Request: POST https://api.telegram.org/bot7867694458:AAEFLZjWPyd1p640mHENnBt479WRYfSavWg/getMe "HTTP/1.1 200 OK"
2024-10-30 05:32:19,139 - DEBUG - receive_response_body.started request=<Request [b'POST']>
2024-10-30 05:32:19,139 - DEBUG - receive_response_body.complete
2024-10-30 05:32:19,139 - DEBUG - response_closed.started
2024-10-30 05:32:19,139 - DEBUG - response_closed.complete
2024-10-30 05:32:19,139 - DEBUG - User(api_kwargs={'can_connect_to_business': False, 'has_main_web_app': False}, can_join_groups=True, can_read_all_group_messages=False, first_name='RedditBot', id=7867694458, is_bot=True, supports_inline_queries=False, username='RedditImage_bot')
2024-10-30 05:32:19,139 - DEBUG - Exiting: get_me
2024-10-30 05:32:19,140 - DEBUG - This Updater is already initialized.
2024-10-30 05:32:19,140 - DEBUG - Entering: send_photo
2024-10-30 05:32:19,140 - DEBUG - send_request_headers.started request=<Request [b'POST']>
2024-10-30 05:32:19,141 - DEBUG - send_request_headers.complete
2024-10-30 05:32:19,141 - DEBUG - send_request_body.started request=<Request [b'POST']>
2024-10-30 05:32:20,044 - DEBUG - send_request_body.complete
2024-10-30 05:32:20,044 - DEBUG - receive_response_headers.started request=<Request [b'POST']>
2024-10-30 05:32:20,963 - DEBUG - receive_response_headers.complete return_value=(b'HTTP/1.1', 200, b'OK', [(b'Server', b'nginx/1.18.0'), (b'Date', b'Wed, 30 Oct 2024 10:32:20 GMT'), (b'Content-Type', b'application/json'), (b'Content-Length', b'1213'), (b'Connection', b'keep-alive'), (b'Strict-Transport-Security', b'max-age=31536000; includeSubDomains; preload'), (b'Access-Control-Allow-Origin', b'*'), (b'Access-Control-Allow-Methods', b'GET, POST, OPTIONS'), (b'Access-Control-Expose-Headers', b'Content-Length,Content-Type,Date,Server,Connection')])
2024-10-30 05:32:20,964 - INFO - HTTP Request: POST https://api.telegram.org/bot7867694458:AAEFLZjWPyd1p640mHENnBt479WRYfSavWg/sendPhoto "HTTP/1.1 200 OK"
2024-10-30 05:32:20,964 - DEBUG - receive_response_body.started request=<Request [b'POST']>
2024-10-30 05:32:20,965 - DEBUG - receive_response_body.complete
2024-10-30 05:32:20,965 - DEBUG - response_closed.started
2024-10-30 05:32:20,965 - DEBUG - response_closed.complete
2024-10-30 05:32:20,968 - DEBUG - Message(caption='From r/wifebutt: Fresh morning Wifebutt\nUpvotes: 3,128', channel_chat_created=False, chat=Chat(id=-1002490380283, title='Reddit_Pic_Stream', type=<ChatType.CHANNEL>), date=datetime.datetime(2024, 10, 30, 10, 32, 20, tzinfo=<UTC>), delete_chat_photo=False, group_chat_created=False, message_id=257, photo=(PhotoSize(file_id='AgACAgEAAyEGAASUcC_7AAOZZyH6uPME2ny7Ln2nX6zcZxEOxyoAAketMRsZEBFFtveidIwWN04BAAMCAANzAAM2BA', file_size=1506, file_unique_id='AQADR60xGxkQEUV4', height=90, width=67), PhotoSize(file_id='AgACAgEAAyEGAASUcC_7AAOZZyH6uPME2ny7Ln2nX6zcZxEOxyoAAketMRsZEBFFtveidIwWN04BAAMCAANtAAM2BA', file_size=23685, file_unique_id='AQADR60xGxkQEUVy', height=320, width=240), PhotoSize(file_id='AgACAgEAAyEGAASUcC_7AAOZZyH6uPME2ny7Ln2nX6zcZxEOxyoAAketMRsZEBFFtveidIwWN04BAAMCAAN4AAM2BA', file_size=120875, file_unique_id='AQADR60xGxkQEUV9', height=800, width=600), PhotoSize(file_id='AgACAgEAAyEGAASUcC_7AAOZZyH6uPME2ny7Ln2nX6zcZxEOxyoAAketMRsZEBFFtveidIwWN04BAAMCAAN5AAM2BA', file_size=286149, file_unique_id='AQADR60xGxkQEUV-', height=1280, width=960), PhotoSize(file_id='AgACAgEAAyEGAASUcC_7AAOZZyH6uPME2ny7Ln2nX6zcZxEOxyoAAketMRsZEBFFtveidIwWN04BAAMCAAN3AAM2BA', file_size=958648, file_unique_id='AQADR60xGxkQEUV8', height=2560, width=1920)), sender_chat=Chat(id=-1002490380283, title='Reddit_Pic_Stream', type=<ChatType.CHANNEL>), supergroup_chat_created=False)
2024-10-30 05:32:20,969 - DEBUG - Exiting: send_photo
2024-10-30 05:32:20,969 - DEBUG - close.started
2024-10-30 05:32:20,970 - DEBUG - close.complete
2024-10-30 05:32:20,970 - DEBUG - close.started
2024-10-30 05:32:20,970 - DEBUG - close.complete
2024-10-30 05:32:20,970 - DEBUG - This Bot is already shut down. Returning.
2024-10-30 05:32:20,970 - DEBUG - Shut down of Updater complete
2024-10-30 05:32:20,970 - INFO - Successfully sent photo to Telegram
2024-10-30 05:32:20,973 - ERROR - Error processing subreddit wifebutt: (sqlite3.OperationalError) attempt to write a readonly database
[SQL: INSERT INTO sent_post (post_id, subreddit_name, sent_at) VALUES (?, ?, ?)]
[parameters: ('1ge2oko', 'wifebutt', '2024-10-30 10:32:20.972681')]
(Background on this error at: https://sqlalche.me/e/20/e3q8)
2024-10-30 05:32:20,975 - ERROR - Job "send_to_telegram (trigger: interval[0:01:00], next run at: 2024-10-30 05:33:16 CDT)" raised an exception
Traceback (most recent call last):
  File "/Users/joewilson/PythonProjects/Snoogram/venv/lib/python3.12/site-packages/sqlalchemy/engine/base.py", line 1967, in _exec_single_context
    self.dialect.do_execute(
  File "/Users/joewilson/PythonProjects/Snoogram/venv/lib/python3.12/site-packages/sqlalchemy/engine/default.py", line 941, in do_execute
    cursor.execute(statement, parameters)
sqlite3.OperationalError: attempt to write a readonly database

The above exception was the direct cause of the following exception:

Traceback (most recent call last):
  File "/Users/joewilson/PythonProjects/Snoogram/venv/lib/python3.12/site-packages/apscheduler/executors/base.py", line 125, in run_job
    retval = job.func(*job.args, **job.kwargs)
             ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/Users/joewilson/PythonProjects/Snoogram/backend/app.py", line 265, in send_to_telegram
    # Update last_check in Cosmos DB
                ^^^^^^^^^^^^^^^^^^^^^
  File "/Users/joewilson/PythonProjects/Snoogram/backend/db_operations.py", line 100, in add_sent_post
  File "/Users/joewilson/PythonProjects/Snoogram/venv/lib/python3.12/site-packages/sqlalchemy/orm/scoping.py", line 597, in commit
    return self._proxied.commit()
           ^^^^^^^^^^^^^^^^^^^^^^
  File "/Users/joewilson/PythonProjects/Snoogram/venv/lib/python3.12/site-packages/sqlalchemy/orm/session.py", line 2028, in commit
    trans.commit(_to_root=True)
  File "<string>", line 2, in commit
  File "/Users/joewilson/PythonProjects/Snoogram/venv/lib/python3.12/site-packages/sqlalchemy/orm/state_changes.py", line 139, in _go
    ret_value = fn(self, *arg, **kw)
                ^^^^^^^^^^^^^^^^^^^^
  File "/Users/joewilson/PythonProjects/Snoogram/venv/lib/python3.12/site-packages/sqlalchemy/orm/session.py", line 1313, in commit
    self._prepare_impl()
  File "<string>", line 2, in _prepare_impl
  File "/Users/joewilson/PythonProjects/Snoogram/venv/lib/python3.12/site-packages/sqlalchemy/orm/state_changes.py", line 139, in _go
    ret_value = fn(self, *arg, **kw)
                ^^^^^^^^^^^^^^^^^^^^
  File "/Users/joewilson/PythonProjects/Snoogram/venv/lib/python3.12/site-packages/sqlalchemy/orm/session.py", line 1288, in _prepare_impl
    self.session.flush()
  File "/Users/joewilson/PythonProjects/Snoogram/venv/lib/python3.12/site-packages/sqlalchemy/orm/session.py", line 4352, in flush
    self._flush(objects)
  File "/Users/joewilson/PythonProjects/Snoogram/venv/lib/python3.12/site-packages/sqlalchemy/orm/session.py", line 4487, in _flush
    with util.safe_reraise():
  File "/Users/joewilson/PythonProjects/Snoogram/venv/lib/python3.12/site-packages/sqlalchemy/util/langhelpers.py", line 146, in __exit__
    raise exc_value.with_traceback(exc_tb)
  File "/Users/joewilson/PythonProjects/Snoogram/venv/lib/python3.12/site-packages/sqlalchemy/orm/session.py", line 4448, in _flush
    flush_context.execute()
  File "/Users/joewilson/PythonProjects/Snoogram/venv/lib/python3.12/site-packages/sqlalchemy/orm/unitofwork.py", line 466, in execute
    rec.execute(self)
  File "/Users/joewilson/PythonProjects/Snoogram/venv/lib/python3.12/site-packages/sqlalchemy/orm/unitofwork.py", line 642, in execute
    util.preloaded.orm_persistence.save_obj(
  File "/Users/joewilson/PythonProjects/Snoogram/venv/lib/python3.12/site-packages/sqlalchemy/orm/persistence.py", line 93, in save_obj
    _emit_insert_statements(
  File "/Users/joewilson/PythonProjects/Snoogram/venv/lib/python3.12/site-packages/sqlalchemy/orm/persistence.py", line 1233, in _emit_insert_statements
    result = connection.execute(
             ^^^^^^^^^^^^^^^^^^^
  File "/Users/joewilson/PythonProjects/Snoogram/venv/lib/python3.12/site-packages/sqlalchemy/engine/base.py", line 1418, in execute
    return meth(
           ^^^^^
  File "/Users/joewilson/PythonProjects/Snoogram/venv/lib/python3.12/site-packages/sqlalchemy/sql/elements.py", line 515, in _execute_on_connection
    return connection._execute_clauseelement(
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/Users/joewilson/PythonProjects/Snoogram/venv/lib/python3.12/site-packages/sqlalchemy/engine/base.py", line 1640, in _execute_clauseelement
    ret = self._execute_context(
          ^^^^^^^^^^^^^^^^^^^^^^
  File "/Users/joewilson/PythonProjects/Snoogram/venv/lib/python3.12/site-packages/sqlalchemy/engine/base.py", line 1846, in _execute_context
    return self._exec_single_context(
           ^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/Users/joewilson/PythonProjects/Snoogram/venv/lib/python3.12/site-packages/sqlalchemy/engine/base.py", line 1986, in _exec_single_context
    self._handle_dbapi_exception(
  File "/Users/joewilson/PythonProjects/Snoogram/venv/lib/python3.12/site-packages/sqlalchemy/engine/base.py", line 2355, in _handle_dbapi_exception
    raise sqlalchemy_exception.with_traceback(exc_info[2]) from e
  File "/Users/joewilson/PythonProjects/Snoogram/venv/lib/python3.12/site-packages/sqlalchemy/engine/base.py", line 1967, in _exec_single_context
    self.dialect.do_execute(
  File "/Users/joewilson/PythonProjects/Snoogram/venv/lib/python3.12/site-packages/sqlalchemy/engine/default.py", line 941, in do_execute
    cursor.execute(statement, parameters)
sqlalchemy.exc.OperationalError: (sqlite3.OperationalError) attempt to write a readonly database
[SQL: INSERT INTO sent_post (post_id, subreddit_name, sent_at) VALUES (?, ?, ?)]
[parameters: ('1ge2oko', 'wifebutt', '2024-10-30 10:32:20.972681')]
(Background on this error at: https://sqlalche.me/e/20/e3q8)
2024-10-30 05:32:39,069 - DEBUG - send_request_body.failed exception=WriteError(ClosedResourceError())
2024-10-30 05:32:39,070 - DEBUG - response_closed.started
2024-10-30 05:32:39,070 - DEBUG - response_closed.complete
2024-10-30 05:32:39,071 - DEBUG - This Application is already shut down. Returning.
2024-10-30 05:32:39,071 - ERROR - Failed to send video to Telegram: httpx.WriteError: 
2024-10-30 05:32:39,072 - ERROR - Error sending video post 1gelyz1: httpx.WriteError: 
2024-10-30 05:32:39,072 - INFO - Checking post: 1gejrnl - Score: 2588 - URL: https://v3.redgifs.com/watch/graydefensivepika
2024-10-30 05:32:39,077 - INFO - Request URL: 'https://cosmossnoogram-centralus.documents.azure.com:443/dbs/ToDoList/colls/sent_posts/docs/'
Request method: 'POST'
Request headers:
    'Cache-Control': 'no-cache'
    'x-ms-version': 'REDACTED'
    'x-ms-documentdb-query-iscontinuationexpected': 'REDACTED'
    'x-ms-consistency-level': 'REDACTED'
    'x-ms-documentdb-isquery': 'REDACTED'
    'Content-Type': 'application/query+json'
    'x-ms-session-token': 'REDACTED'
    'x-ms-documentdb-query-enablecrosspartition': 'REDACTED'
    'x-ms-date': 'REDACTED'
    'authorization': 'REDACTED'
    'Accept': 'application/json'
    'x-ms-cosmos-correlated-activityid': 'REDACTED'
    'Content-Length': '107'
    'User-Agent': 'azsdk-python-cosmos/4.5.1 Python/3.12.4 (macOS-15.0.1-arm64-arm-64bit)'
A body is sent with the request
2024-10-30 05:32:39,122 - DEBUG - https://cosmossnoogram-centralus.documents.azure.com:443 "POST /dbs/ToDoList/colls/sent_posts/docs/ HTTP/11" 200 None
2024-10-30 05:32:39,122 - INFO - Response status: 200
Response headers:
    'Cache-Control': 'no-store, no-cache'
    'Pragma': 'no-cache'
    'Transfer-Encoding': 'chunked'
    'Content-Type': 'application/json'
    'Server': 'Microsoft-HTTPAPI/2.0'
    'Strict-Transport-Security': 'REDACTED'
    'x-ms-activity-id': 'REDACTED'
    'x-ms-last-state-change-utc': 'REDACTED'
    'x-ms-resource-quota': 'REDACTED'
    'x-ms-resource-usage': 'REDACTED'
    'x-ms-schemaversion': 'REDACTED'
    'lsn': 'REDACTED'
    'x-ms-item-count': 'REDACTED'
    'x-ms-request-charge': 'REDACTED'
    'x-ms-alt-content-path': 'REDACTED'
    'x-ms-content-path': 'REDACTED'
    'x-ms-documentdb-partitionkeyrangeid': 'REDACTED'
    'x-ms-xp-role': 'REDACTED'
    'x-ms-cosmos-query-execution-info': 'REDACTED'
    'x-ms-global-Committed-lsn': 'REDACTED'
    'x-ms-number-of-read-regions': 'REDACTED'
    'x-ms-transport-request-id': 'REDACTED'
    'x-ms-cosmos-llsn': 'REDACTED'
    'x-ms-session-token': 'REDACTED'
    'x-ms-request-duration-ms': 'REDACTED'
    'x-ms-serviceversion': 'REDACTED'
    'x-ms-cosmos-is-partition-key-delete-pending': 'REDACTED'
    'x-ms-cosmos-physical-partition-id': 'REDACTED'
    'x-ms-cosmos-internal-partition-id': 'REDACTED'
    'x-ms-gatewayversion': 'REDACTED'
    'Date': 'Wed, 30 Oct 2024 10:32:38 GMT'
2024-10-30 05:32:39,122 - INFO - Post 1gejrnl is a duplicate, skipping
2024-10-30 05:32:39,123 - INFO - Checking post: 1gelw33 - Score: 2310 - URL: https://www.redgifs.com/watch/drydarkgraysable
2024-10-30 05:32:39,123 - INFO - Post 1gelw33 is a duplicate, skipping
2024-10-30 05:32:39,123 - INFO - Checking post: 1gevvp0 - Score: 1195 - URL: https://www.redgifs.com/watch/medicalplumhen
2024-10-30 05:32:39,123 - INFO - Post 1gevvp0 is a duplicate, skipping
2024-10-30 05:32:39,123 - INFO - Checking post: 1gesoj7 - Score: 755 - URL: https://www.redgifs.com/watch/lightgreytrickydragonfly
2024-10-30 05:32:39,124 - INFO - Post 1gesoj7 is a duplicate, skipping
2024-10-30 05:32:39,124 - INFO - Checking post: 1geuuqp - Score: 439 - URL: https://www.redgifs.com/watch/cheerfulbeigebagworm
2024-10-30 05:32:39,124 - INFO - Post 1geuuqp is a duplicate, skipping
2024-10-30 05:32:39,124 - INFO - Checking post: 1geakrb - Score: 393 - URL: https://www.redgifs.com/watch/illinformedthickgalapagoshawk
2024-10-30 05:32:39,124 - INFO - Post 1geakrb is a duplicate, skipping
2024-10-30 05:32:39,124 - INFO - Checking post: 1gerubz - Score: 363 - URL: https://v3.redgifs.com/watch/trickysquarepseudodynerusquadrisectus
2024-10-30 05:32:39,125 - INFO - Post 1gerubz is a duplicate, skipping
2024-10-30 05:32:39,125 - INFO - Checking post: 1getxhl - Score: 344 - URL: https://www.redgifs.com/watch/purpledemandingboaconstrictor
2024-10-30 05:32:39,125 - INFO - Post 1getxhl is a duplicate, skipping
2024-10-30 05:32:39,125 - INFO - Checking post: 1ge9gol - Score: 278 - URL: https://v3.redgifs.com/watch/circulardeeppinkamericanbulldog
2024-10-30 05:32:39,126 - INFO - Request URL: 'https://cosmossnoogram-centralus.documents.azure.com:443/dbs/ToDoList/colls/sent_posts/docs/'
Request method: 'POST'
Request headers:
    'Cache-Control': 'no-cache'
    'x-ms-version': 'REDACTED'
    'x-ms-documentdb-query-iscontinuationexpected': 'REDACTED'
    'x-ms-consistency-level': 'REDACTED'
    'x-ms-documentdb-isquery': 'REDACTED'
    'Content-Type': 'application/query+json'
    'x-ms-session-token': 'REDACTED'
    'x-ms-documentdb-query-enablecrosspartition': 'REDACTED'
    'x-ms-date': 'REDACTED'
    'authorization': 'REDACTED'
    'Accept': 'application/json'
    'x-ms-cosmos-correlated-activityid': 'REDACTED'
    'Content-Length': '107'
    'User-Agent': 'azsdk-python-cosmos/4.5.1 Python/3.12.4 (macOS-15.0.1-arm64-arm-64bit)'
A body is sent with the request
2024-10-30 05:32:39,156 - DEBUG - https://cosmossnoogram-centralus.documents.azure.com:443 "POST /dbs/ToDoList/colls/sent_posts/docs/ HTTP/11" 200 None
2024-10-30 05:32:39,156 - INFO - Response status: 200
Response headers:
    'Cache-Control': 'no-store, no-cache'
    'Pragma': 'no-cache'
    'Transfer-Encoding': 'chunked'
    'Content-Type': 'application/json'
    'Server': 'Microsoft-HTTPAPI/2.0'
    'Strict-Transport-Security': 'REDACTED'
    'x-ms-activity-id': 'REDACTED'
    'x-ms-last-state-change-utc': 'REDACTED'
    'x-ms-resource-quota': 'REDACTED'
    'x-ms-resource-usage': 'REDACTED'
    'x-ms-schemaversion': 'REDACTED'
    'lsn': 'REDACTED'
    'x-ms-item-count': 'REDACTED'
    'x-ms-request-charge': 'REDACTED'
    'x-ms-alt-content-path': 'REDACTED'
    'x-ms-content-path': 'REDACTED'
    'x-ms-documentdb-partitionkeyrangeid': 'REDACTED'
    'x-ms-xp-role': 'REDACTED'
    'x-ms-cosmos-query-execution-info': 'REDACTED'
    'x-ms-global-Committed-lsn': 'REDACTED'
    'x-ms-number-of-read-regions': 'REDACTED'
    'x-ms-transport-request-id': 'REDACTED'
    'x-ms-cosmos-llsn': 'REDACTED'
    'x-ms-session-token': 'REDACTED'
    'x-ms-request-duration-ms': 'REDACTED'
    'x-ms-serviceversion': 'REDACTED'
    'x-ms-cosmos-is-partition-key-delete-pending': 'REDACTED'
    'x-ms-cosmos-physical-partition-id': 'REDACTED'
    'x-ms-cosmos-internal-partition-id': 'REDACTED'
    'x-ms-gatewayversion': 'REDACTED'
    'Date': 'Wed, 30 Oct 2024 10:32:38 GMT'
2024-10-30 05:32:39,156 - INFO - Found video post: 1ge9gol
2024-10-30 05:32:39,157 - DEBUG - Starting new HTTPS connection (1): api.redgifs.com:443
2024-10-30 05:32:39,275 - DEBUG - https://api.redgifs.com:443 "GET /v2/gifs/circulardeeppinkamericanbulldog HTTP/11" 200 None
2024-10-30 05:32:39,282 - DEBUG - Starting new HTTPS connection (1): files.redgifs.com:443
2024-10-30 05:32:39,355 - DEBUG - https://files.redgifs.com:443 "GET /CircularDeeppinkAmericanbulldog.mp4 HTTP/11" 200 61415883
2024-10-30 05:32:40,995 - INFO - Successfully downloaded media to downloads/videos/1ge9gol_20241030_053239_fff8ab71.mp4
2024-10-30 05:32:40,996 - DEBUG - Using selector: KqueueSelector
2024-10-30 05:32:40,996 - INFO - Attempting to send video to Telegram - Path: downloads/videos/1ge9gol_20241030_053239_fff8ab71.mp4
2024-10-30 05:32:40,997 - DEBUG - load_ssl_context verify=True cert=None trust_env=True http2=False
2024-10-30 05:32:40,997 - DEBUG - load_verify_locations cafile='/Users/joewilson/PythonProjects/Snoogram/venv/lib/python3.12/site-packages/certifi/cacert.pem'
2024-10-30 05:32:41,018 - DEBUG - load_ssl_context verify=True cert=None trust_env=True http2=False
2024-10-30 05:32:41,019 - DEBUG - load_verify_locations cafile='/Users/joewilson/PythonProjects/Snoogram/venv/lib/python3.12/site-packages/certifi/cacert.pem'
2024-10-30 05:32:41,027 - DEBUG - Entering: get_me
2024-10-30 05:32:41,027 - DEBUG - connect_tcp.started host='api.telegram.org' port=443 local_address=None timeout=5.0 socket_options=None
2024-10-30 05:32:41,153 - DEBUG - connect_tcp.complete return_value=<httpcore._backends.anyio.AnyIOStream object at 0x108a5f4d0>
2024-10-30 05:32:41,153 - DEBUG - start_tls.started ssl_context=<ssl.SSLContext object at 0x108e37350> server_hostname='api.telegram.org' timeout=5.0
2024-10-30 05:32:41,291 - DEBUG - start_tls.complete return_value=<httpcore._backends.anyio.AnyIOStream object at 0x108a5f3b0>
2024-10-30 05:32:41,291 - DEBUG - send_request_headers.started request=<Request [b'POST']>
2024-10-30 05:32:41,291 - DEBUG - send_request_headers.complete
2024-10-30 05:32:41,291 - DEBUG - send_request_body.started request=<Request [b'POST']>
2024-10-30 05:32:41,291 - DEBUG - send_request_body.complete
2024-10-30 05:32:41,291 - DEBUG - receive_response_headers.started request=<Request [b'POST']>
2024-10-30 05:32:41,409 - DEBUG - receive_response_headers.complete return_value=(b'HTTP/1.1', 200, b'OK', [(b'Server', b'nginx/1.18.0'), (b'Date', b'Wed, 30 Oct 2024 10:32:41 GMT'), (b'Content-Type', b'application/json'), (b'Content-Length', b'254'), (b'Connection', b'keep-alive'), (b'Strict-Transport-Security', b'max-age=31536000; includeSubDomains; preload'), (b'Access-Control-Allow-Origin', b'*'), (b'Access-Control-Allow-Methods', b'GET, POST, OPTIONS'), (b'Access-Control-Expose-Headers', b'Content-Length,Content-Type,Date,Server,Connection')])
2024-10-30 05:32:41,410 - INFO - HTTP Request: POST https://api.telegram.org/bot7867694458:AAEFLZjWPyd1p640mHENnBt479WRYfSavWg/getMe "HTTP/1.1 200 OK"
2024-10-30 05:32:41,410 - DEBUG - receive_response_body.started request=<Request [b'POST']>
2024-10-30 05:32:41,411 - DEBUG - receive_response_body.complete
2024-10-30 05:32:41,411 - DEBUG - response_closed.started
2024-10-30 05:32:41,411 - DEBUG - response_closed.complete
2024-10-30 05:32:41,412 - DEBUG - User(api_kwargs={'can_connect_to_business': False, 'has_main_web_app': False}, can_join_groups=True, can_read_all_group_messages=False, first_name='RedditBot', id=7867694458, is_bot=True, supports_inline_queries=False, username='RedditImage_bot')
2024-10-30 05:32:41,412 - DEBUG - Exiting: get_me
2024-10-30 05:32:41,412 - DEBUG - This Bot is already initialized.
2024-10-30 05:32:41,412 - DEBUG - Entering: send_video
2024-10-30 05:32:41,448 - DEBUG - send_request_headers.started request=<Request [b'POST']>
2024-10-30 05:32:41,449 - DEBUG - send_request_headers.complete
2024-10-30 05:32:41,449 - DEBUG - send_request_body.started request=<Request [b'POST']>
2024-10-30 05:32:45,550 - DEBUG - send_request_body.complete
2024-10-30 05:32:45,551 - DEBUG - receive_response_headers.started request=<Request [b'POST']>
2024-10-30 05:32:45,551 - DEBUG - receive_response_headers.complete return_value=(b'HTTP/1.1', 413, b'Request Entity Too Large', [(b'Server', b'nginx/1.18.0'), (b'Date', b'Wed, 30 Oct 2024 10:32:41 GMT'), (b'Content-Type', b'application/json'), (b'Content-Length', b'70'), (b'Connection', b'close'), (b'Strict-Transport-Security', b'max-age=31536000; includeSubDomains; preload'), (b'Access-Control-Allow-Origin', b'*'), (b'Access-Control-Expose-Headers', b'Content-Length,Content-Type,Date,Server,Connection')])
2024-10-30 05:32:45,552 - INFO - HTTP Request: POST https://api.telegram.org/bot7867694458:AAEFLZjWPyd1p640mHENnBt479WRYfSavWg/sendVideo "HTTP/1.1 413 Request Entity Too Large"
2024-10-30 05:32:45,552 - DEBUG - receive_response_body.started request=<Request [b'POST']>
2024-10-30 05:32:45,552 - DEBUG - receive_response_body.complete
2024-10-30 05:32:45,552 - DEBUG - response_closed.started
2024-10-30 05:32:45,552 - DEBUG - response_closed.complete
2024-10-30 05:32:45,552 - DEBUG - This Bot is already shut down. Returning.
2024-10-30 05:32:45,553 - DEBUG - Shut down of Updater complete
2024-10-30 05:32:45,553 - ERROR - Failed to send video to Telegram: Request Entity Too Large (413)
2024-10-30 05:32:45,553 - ERROR - Error sending video post 1ge9gol: Request Entity Too Large (413)
2024-10-30 05:32:45,553 - INFO - Checking post: 1ge98kx - Score: 259 - URL: https://www.redgifs.com/watch/frontspecificspittlebug
2024-10-30 05:32:45,554 - INFO - Post 1ge98kx is a duplicate, skipping
2024-10-30 05:32:45,554 - INFO - Checking post: 1geqscs - Score: 240 - URL: https://www.redgifs.com/watch/previousweequeensnake
2024-10-30 05:32:45,555 - INFO - Request URL: 'https://cosmossnoogram-centralus.documents.azure.com:443/dbs/ToDoList/colls/sent_posts/docs/'
Request method: 'POST'
Request headers:
    'Cache-Control': 'no-cache'
    'x-ms-version': 'REDACTED'
    'x-ms-documentdb-query-iscontinuationexpected': 'REDACTED'
    'x-ms-consistency-level': 'REDACTED'
    'x-ms-documentdb-isquery': 'REDACTED'
    'Content-Type': 'application/query+json'
    'x-ms-session-token': 'REDACTED'
    'x-ms-documentdb-query-enablecrosspartition': 'REDACTED'
    'x-ms-date': 'REDACTED'
    'authorization': 'REDACTED'
    'Accept': 'application/json'
    'x-ms-cosmos-correlated-activityid': 'REDACTED'
    'Content-Length': '107'
    'User-Agent': 'azsdk-python-cosmos/4.5.1 Python/3.12.4 (macOS-15.0.1-arm64-arm-64bit)'
A body is sent with the request
2024-10-30 05:32:45,613 - DEBUG - https://cosmossnoogram-centralus.documents.azure.com:443 "POST /dbs/ToDoList/colls/sent_posts/docs/ HTTP/11" 200 None
2024-10-30 05:32:45,614 - INFO - Response status: 200
Response headers:
    'Cache-Control': 'no-store, no-cache'
    'Pragma': 'no-cache'
    'Transfer-Encoding': 'chunked'
    'Content-Type': 'application/json'
    'Server': 'Microsoft-HTTPAPI/2.0'
    'Strict-Transport-Security': 'REDACTED'
    'x-ms-activity-id': 'REDACTED'
    'x-ms-last-state-change-utc': 'REDACTED'
    'x-ms-resource-quota': 'REDACTED'
    'x-ms-resource-usage': 'REDACTED'
    'x-ms-schemaversion': 'REDACTED'
    'lsn': 'REDACTED'
    'x-ms-item-count': 'REDACTED'
    'x-ms-request-charge': 'REDACTED'
    'x-ms-alt-content-path': 'REDACTED'
    'x-ms-content-path': 'REDACTED'
    'x-ms-documentdb-partitionkeyrangeid': 'REDACTED'
    'x-ms-xp-role': 'REDACTED'
    'x-ms-cosmos-query-execution-info': 'REDACTED'
    'x-ms-global-Committed-lsn': 'REDACTED'
    'x-ms-number-of-read-regions': 'REDACTED'
    'x-ms-transport-request-id': 'REDACTED'
    'x-ms-cosmos-llsn': 'REDACTED'
    'x-ms-session-token': 'REDACTED'
    'x-ms-request-duration-ms': 'REDACTED'
    'x-ms-serviceversion': 'REDACTED'
    'x-ms-cosmos-is-partition-key-delete-pending': 'REDACTED'
    'x-ms-cosmos-physical-partition-id': 'REDACTED'
    'x-ms-cosmos-internal-partition-id': 'REDACTED'
    'x-ms-gatewayversion': 'REDACTED'
    'Date': 'Wed, 30 Oct 2024 10:32:44 GMT'
2024-10-30 05:32:45,614 - INFO - Found video post: 1geqscs
2024-10-30 05:32:45,616 - DEBUG - Starting new HTTPS connection (1): api.redgifs.com:443
2024-10-30 05:32:45,717 - DEBUG - https://api.redgifs.com:443 "GET /v2/gifs/previousweequeensnake HTTP/11" 200 None
2024-10-30 05:32:45,719 - DEBUG - Starting new HTTPS connection (1): files.redgifs.com:443
2024-10-30 05:32:45,790 - DEBUG - https://files.redgifs.com:443 "GET /PreviousWeeQueensnake.mp4 HTTP/11" 200 50070206
2024-10-30 05:32:46,933 - INFO - Successfully downloaded media to downloads/videos/1geqscs_20241030_053245_2fd81a4e.mp4
2024-10-30 05:32:46,934 - DEBUG - Using selector: KqueueSelector
2024-10-30 05:32:46,934 - INFO - Attempting to send video to Telegram - Path: downloads/videos/1geqscs_20241030_053245_2fd81a4e.mp4
2024-10-30 05:32:46,934 - DEBUG - load_ssl_context verify=True cert=None trust_env=True http2=False
2024-10-30 05:32:46,935 - DEBUG - load_verify_locations cafile='/Users/joewilson/PythonProjects/Snoogram/venv/lib/python3.12/site-packages/certifi/cacert.pem'
2024-10-30 05:32:46,941 - DEBUG - load_ssl_context verify=True cert=None trust_env=True http2=False
2024-10-30 05:32:46,941 - DEBUG - load_verify_locations cafile='/Users/joewilson/PythonProjects/Snoogram/venv/lib/python3.12/site-packages/certifi/cacert.pem'
2024-10-30 05:32:46,946 - DEBUG - Entering: get_me
2024-10-30 05:32:46,946 - DEBUG - connect_tcp.started host='api.telegram.org' port=443 local_address=None timeout=5.0 socket_options=None
2024-10-30 05:32:47,068 - DEBUG - connect_tcp.complete return_value=<httpcore._backends.anyio.AnyIOStream object at 0x108f37410>
2024-10-30 05:32:47,068 - DEBUG - start_tls.started ssl_context=<ssl.SSLContext object at 0x108e1d950> server_hostname='api.telegram.org' timeout=5.0
2024-10-30 05:32:47,199 - DEBUG - start_tls.complete return_value=<httpcore._backends.anyio.AnyIOStream object at 0x108f34350>
2024-10-30 05:32:47,200 - DEBUG - send_request_headers.started request=<Request [b'POST']>
2024-10-30 05:32:47,200 - DEBUG - send_request_headers.complete
2024-10-30 05:32:47,200 - DEBUG - send_request_body.started request=<Request [b'POST']>
2024-10-30 05:32:47,200 - DEBUG - send_request_body.complete
2024-10-30 05:32:47,200 - DEBUG - receive_response_headers.started request=<Request [b'POST']>
2024-10-30 05:32:47,318 - DEBUG - receive_response_headers.complete return_value=(b'HTTP/1.1', 200, b'OK', [(b'Server', b'nginx/1.18.0'), (b'Date', b'Wed, 30 Oct 2024 10:32:47 GMT'), (b'Content-Type', b'application/json'), (b'Content-Length', b'254'), (b'Connection', b'keep-alive'), (b'Strict-Transport-Security', b'max-age=31536000; includeSubDomains; preload'), (b'Access-Control-Allow-Origin', b'*'), (b'Access-Control-Allow-Methods', b'GET, POST, OPTIONS'), (b'Access-Control-Expose-Headers', b'Content-Length,Content-Type,Date,Server,Connection')])
2024-10-30 05:32:47,319 - INFO - HTTP Request: POST https://api.telegram.org/bot7867694458:AAEFLZjWPyd1p640mHENnBt479WRYfSavWg/getMe "HTTP/1.1 200 OK"
2024-10-30 05:32:47,319 - DEBUG - receive_response_body.started request=<Request [b'POST']>
2024-10-30 05:32:47,320 - DEBUG - receive_response_body.complete
2024-10-30 05:32:47,320 - DEBUG - response_closed.started
2024-10-30 05:32:47,320 - DEBUG - response_closed.complete
2024-10-30 05:32:47,320 - DEBUG - User(api_kwargs={'can_connect_to_business': False, 'has_main_web_app': False}, can_join_groups=True, can_read_all_group_messages=False, first_name='RedditBot', id=7867694458, is_bot=True, supports_inline_queries=False, username='RedditImage_bot')
2024-10-30 05:32:47,321 - DEBUG - Exiting: get_me
2024-10-30 05:32:47,321 - DEBUG - This Bot is already initialized.
2024-10-30 05:32:47,321 - DEBUG - Entering: send_video
2024-10-30 05:32:47,338 - DEBUG - send_request_headers.started request=<Request [b'POST']>
2024-10-30 05:32:47,339 - DEBUG - send_request_headers.complete
2024-10-30 05:32:47,339 - DEBUG - send_request_body.started request=<Request [b'POST']>
2024-10-30 05:32:50,491 - DEBUG - send_request_body.complete
2024-10-30 05:32:50,491 - DEBUG - receive_response_headers.started request=<Request [b'POST']>
2024-10-30 05:32:53,044 - DEBUG - receive_response_headers.complete return_value=(b'HTTP/1.1', 200, b'OK', [(b'Server', b'nginx/1.18.0'), (b'Date', b'Wed, 30 Oct 2024 10:32:53 GMT'), (b'Content-Type', b'application/json'), (b'Content-Length', b'602'), (b'Connection', b'keep-alive'), (b'Strict-Transport-Security', b'max-age=31536000; includeSubDomains; preload'), (b'Access-Control-Allow-Origin', b'*'), (b'Access-Control-Allow-Methods', b'GET, POST, OPTIONS'), (b'Access-Control-Expose-Headers', b'Content-Length,Content-Type,Date,Server,Connection')])
2024-10-30 05:32:53,044 - INFO - HTTP Request: POST https://api.telegram.org/bot7867694458:AAEFLZjWPyd1p640mHENnBt479WRYfSavWg/sendVideo "HTTP/1.1 200 OK"
2024-10-30 05:32:53,045 - DEBUG - receive_response_body.started request=<Request [b'POST']>
2024-10-30 05:32:53,045 - DEBUG - receive_response_body.complete
2024-10-30 05:32:53,045 - DEBUG - response_closed.started
2024-10-30 05:32:53,045 - DEBUG - response_closed.complete
2024-10-30 05:32:53,045 - DEBUG - Message(caption='From r/girlsfinishingthejob: I love when he covers my titties with his hot cum ðŸ¥°\nUpvotes: 240', channel_chat_created=False, chat=Chat(id=-1002490380283, title='Reddit_Pic_Stream', type=<ChatType.CHANNEL>), date=datetime.datetime(2024, 10, 30, 10, 32, 52, tzinfo=<UTC>), delete_chat_photo=False, group_chat_created=False, message_id=258, sender_chat=Chat(id=-1002490380283, title='Reddit_Pic_Stream', type=<ChatType.CHANNEL>), supergroup_chat_created=False, video=Video(duration=0, file_id='BAACAgEAAyEGAASUcC_7AAIBAmciC1TtgKK9bTWM4gABtK0H97USiQACvgQAAhkQEUUupwSDAgYXoTYE', file_name='1geqscs_20241030_053245_2fd81a4e.mp4', file_size=50070206, file_unique_id='AgADvgQAAhkQEUU', height=320, mime_type='video/mp4', width=320))
2024-10-30 05:32:53,046 - DEBUG - Exiting: send_video
2024-10-30 05:32:53,046 - DEBUG - close.started
2024-10-30 05:32:53,046 - DEBUG - close.complete
2024-10-30 05:32:53,046 - DEBUG - This Bot is already shut down. Returning.
2024-10-30 05:32:53,046 - DEBUG - Shut down of Updater complete
2024-10-30 05:32:53,046 - INFO - Successfully sent video to Telegram
2024-10-30 05:32:53,049 - ERROR - Error processing subreddit girlsfinishingthejob: (sqlite3.OperationalError) attempt to write a readonly database
[SQL: INSERT INTO sent_post (post_id, subreddit_name, sent_at) VALUES (?, ?, ?)]
[parameters: ('1geqscs', 'girlsfinishingthejob', '2024-10-30 10:32:53.048225')]
(Background on this error at: https://sqlalche.me/e/20/e3q8)
2024-10-30 05:32:53,050 - ERROR - Job "send_to_telegram (trigger: interval[0:01:00], next run at: 2024-10-30 05:33:16 CDT)" raised an exception
Traceback (most recent call last):
  File "/Users/joewilson/PythonProjects/Snoogram/venv/lib/python3.12/site-packages/sqlalchemy/engine/base.py", line 1967, in _exec_single_context
    self.dialect.do_execute(
  File "/Users/joewilson/PythonProjects/Snoogram/venv/lib/python3.12/site-packages/sqlalchemy/engine/default.py", line 941, in do_execute
    cursor.execute(statement, parameters)
sqlite3.OperationalError: attempt to write a readonly database

The above exception was the direct cause of the following exception:

Traceback (most recent call last):
  File "/Users/joewilson/PythonProjects/Snoogram/venv/lib/python3.12/site-packages/apscheduler/executors/base.py", line 125, in run_job
    retval = job.func(*job.args, **job.kwargs)
             ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/Users/joewilson/PythonProjects/Snoogram/backend/app.py", line 265, in send_to_telegram
    # Update last_check in Cosmos DB
                ^^^^^^^^^^^^^^^^^^^^^
  File "/Users/joewilson/PythonProjects/Snoogram/backend/db_operations.py", line 100, in add_sent_post
  File "/Users/joewilson/PythonProjects/Snoogram/venv/lib/python3.12/site-packages/sqlalchemy/orm/scoping.py", line 597, in commit
    return self._proxied.commit()
           ^^^^^^^^^^^^^^^^^^^^^^
  File "/Users/joewilson/PythonProjects/Snoogram/venv/lib/python3.12/site-packages/sqlalchemy/orm/session.py", line 2028, in commit
    trans.commit(_to_root=True)
  File "<string>", line 2, in commit
  File "/Users/joewilson/PythonProjects/Snoogram/venv/lib/python3.12/site-packages/sqlalchemy/orm/state_changes.py", line 139, in _go
    ret_value = fn(self, *arg, **kw)
                ^^^^^^^^^^^^^^^^^^^^
  File "/Users/joewilson/PythonProjects/Snoogram/venv/lib/python3.12/site-packages/sqlalchemy/orm/session.py", line 1313, in commit
    self._prepare_impl()
  File "<string>", line 2, in _prepare_impl
  File "/Users/joewilson/PythonProjects/Snoogram/venv/lib/python3.12/site-packages/sqlalchemy/orm/state_changes.py", line 139, in _go
    ret_value = fn(self, *arg, **kw)
                ^^^^^^^^^^^^^^^^^^^^
  File "/Users/joewilson/PythonProjects/Snoogram/venv/lib/python3.12/site-packages/sqlalchemy/orm/session.py", line 1288, in _prepare_impl
    self.session.flush()
  File "/Users/joewilson/PythonProjects/Snoogram/venv/lib/python3.12/site-packages/sqlalchemy/orm/session.py", line 4352, in flush
    self._flush(objects)
  File "/Users/joewilson/PythonProjects/Snoogram/venv/lib/python3.12/site-packages/sqlalchemy/orm/session.py", line 4487, in _flush
    with util.safe_reraise():
  File "/Users/joewilson/PythonProjects/Snoogram/venv/lib/python3.12/site-packages/sqlalchemy/util/langhelpers.py", line 146, in __exit__
    raise exc_value.with_traceback(exc_tb)
  File "/Users/joewilson/PythonProjects/Snoogram/venv/lib/python3.12/site-packages/sqlalchemy/orm/session.py", line 4448, in _flush
    flush_context.execute()
  File "/Users/joewilson/PythonProjects/Snoogram/venv/lib/python3.12/site-packages/sqlalchemy/orm/unitofwork.py", line 466, in execute
    rec.execute(self)
  File "/Users/joewilson/PythonProjects/Snoogram/venv/lib/python3.12/site-packages/sqlalchemy/orm/unitofwork.py", line 642, in execute
    util.preloaded.orm_persistence.save_obj(
  File "/Users/joewilson/PythonProjects/Snoogram/venv/lib/python3.12/site-packages/sqlalchemy/orm/persistence.py", line 93, in save_obj
    _emit_insert_statements(
  File "/Users/joewilson/PythonProjects/Snoogram/venv/lib/python3.12/site-packages/sqlalchemy/orm/persistence.py", line 1233, in _emit_insert_statements
    result = connection.execute(
             ^^^^^^^^^^^^^^^^^^^
  File "/Users/joewilson/PythonProjects/Snoogram/venv/lib/python3.12/site-packages/sqlalchemy/engine/base.py", line 1418, in execute
    return meth(
           ^^^^^
  File "/Users/joewilson/PythonProjects/Snoogram/venv/lib/python3.12/site-packages/sqlalchemy/sql/elements.py", line 515, in _execute_on_connection
    return connection._execute_clauseelement(
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/Users/joewilson/PythonProjects/Snoogram/venv/lib/python3.12/site-packages/sqlalchemy/engine/base.py", line 1640, in _execute_clauseelement
    ret = self._execute_context(
          ^^^^^^^^^^^^^^^^^^^^^^
  File "/Users/joewilson/PythonProjects/Snoogram/venv/lib/python3.12/site-packages/sqlalchemy/engine/base.py", line 1846, in _execute_context
    return self._exec_single_context(
           ^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/Users/joewilson/PythonProjects/Snoogram/venv/lib/python3.12/site-packages/sqlalchemy/engine/base.py", line 1986, in _exec_single_context
    self._handle_dbapi_exception(
  File "/Users/joewilson/PythonProjects/Snoogram/venv/lib/python3.12/site-packages/sqlalchemy/engine/base.py", line 2355, in _handle_dbapi_exception
    raise sqlalchemy_exception.with_traceback(exc_info[2]) from e
  File "/Users/joewilson/PythonProjects/Snoogram/venv/lib/python3.12/site-packages/sqlalchemy/engine/base.py", line 1967, in _exec_single_context
    self.dialect.do_execute(
  File "/Users/joewilson/PythonProjects/Snoogram/venv/lib/python3.12/site-packages/sqlalchemy/engine/default.py", line 941, in do_execute
    cursor.execute(statement, parameters)
sqlalchemy.exc.OperationalError: (sqlite3.OperationalError) attempt to write a readonly database
[SQL: INSERT INTO sent_post (post_id, subreddit_name, sent_at) VALUES (?, ?, ?)]
[parameters: ('1geqscs', 'girlsfinishingthejob', '2024-10-30 10:32:53.048225')]
(Background on this error at: https://sqlalche.me/e/20/e3q8)
2024-10-30 05:33:16,976 - DEBUG - Looking for jobs to run
2024-10-30 05:33:16,979 - DEBUG - Next wakeup is due at 2024-10-30 05:34:16.969826-05:00 (in 59.990616 seconds)
2024-10-30 05:33:16,979 - INFO - Running job "send_to_telegram (trigger: interval[0:01:00], next run at: 2024-10-30 05:34:16 CDT)" (scheduled at 2024-10-30 05:33:16.969826-05:00)
2024-10-30 05:33:16,979 - INFO - Running job "send_to_telegram (trigger: interval[0:01:00], next run at: 2024-10-30 05:34:16 CDT)" (scheduled at 2024-10-30 05:33:16.970029-05:00)
2024-10-30 05:33:16,980 - INFO - Processing subreddit: girlsfinishingthejob
2024-10-30 05:33:16,980 - INFO - Processing subreddit: wifebutt
2024-10-30 05:33:16,980 - INFO - Fetching top posts of the day
2024-10-30 05:33:16,980 - INFO - Fetching top posts of the month
2024-10-30 05:33:16,982 - DEBUG - Fetching: GET https://oauth.reddit.com/r/girlsfinishingthejob/top at 1730284396.9820821
2024-10-30 05:33:16,982 - DEBUG - Fetching: GET https://oauth.reddit.com/r/wifebutt/top at 1730284396.982303
2024-10-30 05:33:16,982 - DEBUG - Data: None
2024-10-30 05:33:16,982 - DEBUG - Data: None
2024-10-30 05:33:16,982 - DEBUG - Params: {'limit': 50, 'raw_json': 1, 't': 'day'}
2024-10-30 05:33:16,982 - DEBUG - Params: {'limit': 50, 'raw_json': 1, 't': 'month'}
2024-10-30 05:33:17,391 - DEBUG - https://oauth.reddit.com:443 "GET /r/girlsfinishingthejob/top?t=day&limit=50&raw_json=1 HTTP/11" 200 24135
2024-10-30 05:33:17,392 - DEBUG - Response: 200 (24135 bytes) (rst-0:rem-148.0:used-2 ratelimit) at 1730284397.392885
2024-10-30 05:33:17,470 - INFO - Checking post: 1gelyz1 - Score: 7113 - URL: https://www.redgifs.com/watch/uttersvelteamphibian
2024-10-30 05:33:17,475 - INFO - Request URL: 'https://cosmossnoogram-centralus.documents.azure.com:443/dbs/ToDoList/colls/sent_posts/docs/'
Request method: 'POST'
Request headers:
    'Cache-Control': 'no-cache'
    'x-ms-version': 'REDACTED'
    'x-ms-documentdb-query-iscontinuationexpected': 'REDACTED'
    'x-ms-consistency-level': 'REDACTED'
    'x-ms-documentdb-isquery': 'REDACTED'
    'Content-Type': 'application/query+json'
    'x-ms-session-token': 'REDACTED'
    'x-ms-documentdb-query-enablecrosspartition': 'REDACTED'
    'x-ms-date': 'REDACTED'
    'authorization': 'REDACTED'
    'Accept': 'application/json'
    'x-ms-cosmos-correlated-activityid': 'REDACTED'
    'Content-Length': '107'
    'User-Agent': 'azsdk-python-cosmos/4.5.1 Python/3.12.4 (macOS-15.0.1-arm64-arm-64bit)'
A body is sent with the request
2024-10-30 05:33:17,589 - DEBUG - https://cosmossnoogram-centralus.documents.azure.com:443 "POST /dbs/ToDoList/colls/sent_posts/docs/ HTTP/11" 200 None
2024-10-30 05:33:17,589 - INFO - Response status: 200
Response headers:
    'Cache-Control': 'no-store, no-cache'
    'Pragma': 'no-cache'
    'Transfer-Encoding': 'chunked'
    'Content-Type': 'application/json'
    'Server': 'Microsoft-HTTPAPI/2.0'
    'Strict-Transport-Security': 'REDACTED'
    'x-ms-activity-id': 'REDACTED'
    'x-ms-last-state-change-utc': 'REDACTED'
    'x-ms-resource-quota': 'REDACTED'
    'x-ms-resource-usage': 'REDACTED'
    'x-ms-schemaversion': 'REDACTED'
    'lsn': 'REDACTED'
    'x-ms-item-count': 'REDACTED'
    'x-ms-request-charge': 'REDACTED'
    'x-ms-alt-content-path': 'REDACTED'
    'x-ms-content-path': 'REDACTED'
    'x-ms-quorum-acked-lsn': 'REDACTED'
    'x-ms-current-write-quorum': 'REDACTED'
    'x-ms-current-replica-set-size': 'REDACTED'
    'x-ms-documentdb-partitionkeyrangeid': 'REDACTED'
    'x-ms-xp-role': 'REDACTED'
    'x-ms-cosmos-query-execution-info': 'REDACTED'
    'x-ms-global-Committed-lsn': 'REDACTED'
    'x-ms-number-of-read-regions': 'REDACTED'
    'x-ms-transport-request-id': 'REDACTED'
    'x-ms-cosmos-llsn': 'REDACTED'
    'x-ms-cosmos-quorum-acked-llsn': 'REDACTED'
    'x-ms-session-token': 'REDACTED'
    'x-ms-request-duration-ms': 'REDACTED'
    'x-ms-serviceversion': 'REDACTED'
    'x-ms-cosmos-is-partition-key-delete-pending': 'REDACTED'
    'x-ms-cosmos-physical-partition-id': 'REDACTED'
    'x-ms-cosmos-internal-partition-id': 'REDACTED'
    'x-ms-gatewayversion': 'REDACTED'
    'Date': 'Wed, 30 Oct 2024 10:33:16 GMT'
2024-10-30 05:33:17,589 - INFO - Found video post: 1gelyz1
2024-10-30 05:33:17,590 - DEBUG - Starting new HTTPS connection (1): api.redgifs.com:443
2024-10-30 05:33:17,652 - DEBUG - https://oauth.reddit.com:443 "GET /r/wifebutt/top?t=month&limit=50&raw_json=1 HTTP/11" 200 49249
2024-10-30 05:33:17,666 - DEBUG - Response: 200 (49249 bytes) (rst-0:rem-149.0:used-1 ratelimit) at 1730284397.6665092
2024-10-30 05:33:17,672 - INFO - Checking post: 1g9w053 - Score: 5356 - URL: https://www.reddit.com/gallery/1g9w053
2024-10-30 05:33:17,673 - INFO - Request URL: 'https://cosmossnoogram-centralus.documents.azure.com:443/dbs/ToDoList/colls/sent_posts/docs/'
Request method: 'POST'
Request headers:
    'Cache-Control': 'no-cache'
    'x-ms-version': 'REDACTED'
    'x-ms-documentdb-query-iscontinuationexpected': 'REDACTED'
    'x-ms-consistency-level': 'REDACTED'
    'x-ms-documentdb-isquery': 'REDACTED'
    'Content-Type': 'application/query+json'
    'x-ms-session-token': 'REDACTED'
    'x-ms-documentdb-query-enablecrosspartition': 'REDACTED'
    'x-ms-date': 'REDACTED'
    'authorization': 'REDACTED'
    'Accept': 'application/json'
    'x-ms-cosmos-correlated-activityid': 'REDACTED'
    'Content-Length': '107'
    'User-Agent': 'azsdk-python-cosmos/4.5.1 Python/3.12.4 (macOS-15.0.1-arm64-arm-64bit)'
A body is sent with the request
2024-10-30 05:33:17,813 - DEBUG - https://cosmossnoogram-centralus.documents.azure.com:443 "POST /dbs/ToDoList/colls/sent_posts/docs/ HTTP/11" 200 None
2024-10-30 05:33:17,813 - INFO - Response status: 200
Response headers:
    'Cache-Control': 'no-store, no-cache'
    'Pragma': 'no-cache'
    'Transfer-Encoding': 'chunked'
    'Content-Type': 'application/json'
    'Server': 'Microsoft-HTTPAPI/2.0'
    'Strict-Transport-Security': 'REDACTED'
    'x-ms-activity-id': 'REDACTED'
    'x-ms-last-state-change-utc': 'REDACTED'
    'x-ms-resource-quota': 'REDACTED'
    'x-ms-resource-usage': 'REDACTED'
    'x-ms-schemaversion': 'REDACTED'
    'lsn': 'REDACTED'
    'x-ms-item-count': 'REDACTED'
    'x-ms-request-charge': 'REDACTED'
    'x-ms-alt-content-path': 'REDACTED'
    'x-ms-content-path': 'REDACTED'
    'x-ms-documentdb-partitionkeyrangeid': 'REDACTED'
    'x-ms-xp-role': 'REDACTED'
    'x-ms-cosmos-query-execution-info': 'REDACTED'
    'x-ms-global-Committed-lsn': 'REDACTED'
    'x-ms-number-of-read-regions': 'REDACTED'
    'x-ms-transport-request-id': 'REDACTED'
    'x-ms-cosmos-llsn': 'REDACTED'
    'x-ms-session-token': 'REDACTED'
    'x-ms-request-duration-ms': 'REDACTED'
    'x-ms-serviceversion': 'REDACTED'
    'x-ms-cosmos-is-partition-key-delete-pending': 'REDACTED'
    'x-ms-cosmos-physical-partition-id': 'REDACTED'
    'x-ms-cosmos-internal-partition-id': 'REDACTED'
    'x-ms-gatewayversion': 'REDACTED'
    'Date': 'Wed, 30 Oct 2024 10:33:16 GMT'
2024-10-30 05:33:17,813 - INFO - Post 1g9w053 is not an image or video post, skipping
2024-10-30 05:33:17,813 - INFO - Checking post: 1fv4cfc - Score: 4575 - URL: https://www.reddit.com/gallery/1fv4cfc
2024-10-30 05:33:17,814 - INFO - Request URL: 'https://cosmossnoogram-centralus.documents.azure.com:443/dbs/ToDoList/colls/sent_posts/docs/'
Request method: 'POST'
Request headers:
    'Cache-Control': 'no-cache'
    'x-ms-version': 'REDACTED'
    'x-ms-documentdb-query-iscontinuationexpected': 'REDACTED'
    'x-ms-consistency-level': 'REDACTED'
    'x-ms-documentdb-isquery': 'REDACTED'
    'Content-Type': 'application/query+json'
    'x-ms-session-token': 'REDACTED'
    'x-ms-documentdb-query-enablecrosspartition': 'REDACTED'
    'x-ms-date': 'REDACTED'
    'authorization': 'REDACTED'
    'Accept': 'application/json'
    'x-ms-cosmos-correlated-activityid': 'REDACTED'
    'Content-Length': '107'
    'User-Agent': 'azsdk-python-cosmos/4.5.1 Python/3.12.4 (macOS-15.0.1-arm64-arm-64bit)'
A body is sent with the request
2024-10-30 05:33:17,943 - DEBUG - https://cosmossnoogram-centralus.documents.azure.com:443 "POST /dbs/ToDoList/colls/sent_posts/docs/ HTTP/11" 200 None
2024-10-30 05:33:17,943 - DEBUG - https://api.redgifs.com:443 "GET /v2/gifs/uttersvelteamphibian HTTP/11" 200 None
2024-10-30 05:33:17,944 - INFO - Response status: 200
Response headers:
    'Cache-Control': 'no-store, no-cache'
    'Pragma': 'no-cache'
    'Transfer-Encoding': 'chunked'
    'Content-Type': 'application/json'
    'Server': 'Microsoft-HTTPAPI/2.0'
    'Strict-Transport-Security': 'REDACTED'
    'x-ms-activity-id': 'REDACTED'
    'x-ms-last-state-change-utc': 'REDACTED'
    'x-ms-resource-quota': 'REDACTED'
    'x-ms-resource-usage': 'REDACTED'
    'x-ms-schemaversion': 'REDACTED'
    'lsn': 'REDACTED'
    'x-ms-item-count': 'REDACTED'
    'x-ms-request-charge': 'REDACTED'
    'x-ms-alt-content-path': 'REDACTED'
    'x-ms-content-path': 'REDACTED'
    'x-ms-quorum-acked-lsn': 'REDACTED'
    'x-ms-current-write-quorum': 'REDACTED'
    'x-ms-current-replica-set-size': 'REDACTED'
    'x-ms-documentdb-partitionkeyrangeid': 'REDACTED'
    'x-ms-xp-role': 'REDACTED'
    'x-ms-cosmos-query-execution-info': 'REDACTED'
    'x-ms-global-Committed-lsn': 'REDACTED'
    'x-ms-number-of-read-regions': 'REDACTED'
    'x-ms-transport-request-id': 'REDACTED'
    'x-ms-cosmos-llsn': 'REDACTED'
    'x-ms-cosmos-quorum-acked-llsn': 'REDACTED'
    'x-ms-session-token': 'REDACTED'
    'x-ms-request-duration-ms': 'REDACTED'
    'x-ms-serviceversion': 'REDACTED'
    'x-ms-cosmos-is-partition-key-delete-pending': 'REDACTED'
    'x-ms-cosmos-physical-partition-id': 'REDACTED'
    'x-ms-cosmos-internal-partition-id': 'REDACTED'
    'x-ms-gatewayversion': 'REDACTED'
    'Date': 'Wed, 30 Oct 2024 10:33:17 GMT'
2024-10-30 05:33:17,949 - INFO - Post 1fv4cfc is not an image or video post, skipping
2024-10-30 05:33:17,949 - INFO - Checking post: 1ganrp0 - Score: 4215 - URL: https://i.redd.it/ezatz8645lwd1.jpeg
2024-10-30 05:33:17,950 - INFO - Request URL: 'https://cosmossnoogram-centralus.documents.azure.com:443/dbs/ToDoList/colls/sent_posts/docs/'
Request method: 'POST'
Request headers:
    'Cache-Control': 'no-cache'
    'x-ms-version': 'REDACTED'
    'x-ms-documentdb-query-iscontinuationexpected': 'REDACTED'
    'x-ms-consistency-level': 'REDACTED'
    'x-ms-documentdb-isquery': 'REDACTED'
    'Content-Type': 'application/query+json'
    'x-ms-session-token': 'REDACTED'
    'x-ms-documentdb-query-enablecrosspartition': 'REDACTED'
    'x-ms-date': 'REDACTED'
    'authorization': 'REDACTED'
    'Accept': 'application/json'
    'x-ms-cosmos-correlated-activityid': 'REDACTED'
    'Content-Length': '107'
    'User-Agent': 'azsdk-python-cosmos/4.5.1 Python/3.12.4 (macOS-15.0.1-arm64-arm-64bit)'
A body is sent with the request
2024-10-30 05:33:17,950 - DEBUG - Starting new HTTPS connection (1): files.redgifs.com:443
2024-10-30 05:33:18,081 - DEBUG - https://cosmossnoogram-centralus.documents.azure.com:443 "POST /dbs/ToDoList/colls/sent_posts/docs/ HTTP/11" 200 None
2024-10-30 05:33:18,083 - INFO - Response status: 200
Response headers:
    'Cache-Control': 'no-store, no-cache'
    'Pragma': 'no-cache'
    'Transfer-Encoding': 'chunked'
    'Content-Type': 'application/json'
    'Server': 'Microsoft-HTTPAPI/2.0'
    'Strict-Transport-Security': 'REDACTED'
    'x-ms-activity-id': 'REDACTED'
    'x-ms-last-state-change-utc': 'REDACTED'
    'x-ms-resource-quota': 'REDACTED'
    'x-ms-resource-usage': 'REDACTED'
    'x-ms-schemaversion': 'REDACTED'
    'lsn': 'REDACTED'
    'x-ms-item-count': 'REDACTED'
    'x-ms-request-charge': 'REDACTED'
    'x-ms-alt-content-path': 'REDACTED'
    'x-ms-content-path': 'REDACTED'
    'x-ms-documentdb-partitionkeyrangeid': 'REDACTED'
    'x-ms-xp-role': 'REDACTED'
    'x-ms-cosmos-query-execution-info': 'REDACTED'
    'x-ms-global-Committed-lsn': 'REDACTED'
    'x-ms-number-of-read-regions': 'REDACTED'
    'x-ms-transport-request-id': 'REDACTED'
    'x-ms-cosmos-llsn': 'REDACTED'
    'x-ms-session-token': 'REDACTED'
    'x-ms-request-duration-ms': 'REDACTED'
    'x-ms-serviceversion': 'REDACTED'
    'x-ms-cosmos-is-partition-key-delete-pending': 'REDACTED'
    'x-ms-cosmos-physical-partition-id': 'REDACTED'
    'x-ms-cosmos-internal-partition-id': 'REDACTED'
    'x-ms-gatewayversion': 'REDACTED'
    'Date': 'Wed, 30 Oct 2024 10:33:17 GMT'
2024-10-30 05:33:18,083 - INFO - Post 1ganrp0 is a duplicate, skipping
2024-10-30 05:33:18,084 - INFO - Checking post: 1gdrcjt - Score: 4065 - URL: https://www.redgifs.com/watch/unrealisticdefinitebarebirdbat
2024-10-30 05:33:18,086 - INFO - Post 1gdrcjt is a duplicate, skipping
2024-10-30 05:33:18,086 - INFO - Checking post: 1g30sx1 - Score: 3959 - URL: https://www.redgifs.com/watch/hardwarlikesunbittern
2024-10-30 05:33:18,087 - INFO - Post 1g30sx1 is a duplicate, skipping
2024-10-30 05:33:18,087 - INFO - Checking post: 1fs7839 - Score: 3855 - URL: https://www.reddit.com/gallery/1fs7839
2024-10-30 05:33:18,088 - INFO - Request URL: 'https://cosmossnoogram-centralus.documents.azure.com:443/dbs/ToDoList/colls/sent_posts/docs/'
Request method: 'POST'
Request headers:
    'Cache-Control': 'no-cache'
    'x-ms-version': 'REDACTED'
    'x-ms-documentdb-query-iscontinuationexpected': 'REDACTED'
    'x-ms-consistency-level': 'REDACTED'
    'x-ms-documentdb-isquery': 'REDACTED'
    'Content-Type': 'application/query+json'
    'x-ms-session-token': 'REDACTED'
    'x-ms-documentdb-query-enablecrosspartition': 'REDACTED'
    'x-ms-date': 'REDACTED'
    'authorization': 'REDACTED'
    'Accept': 'application/json'
    'x-ms-cosmos-correlated-activityid': 'REDACTED'
    'Content-Length': '107'
    'User-Agent': 'azsdk-python-cosmos/4.5.1 Python/3.12.4 (macOS-15.0.1-arm64-arm-64bit)'
A body is sent with the request
2024-10-30 05:33:18,199 - DEBUG - https://files.redgifs.com:443 "GET /UtterSvelteAmphibian.mp4 HTTP/11" 200 42980012
2024-10-30 05:33:18,200 - DEBUG - https://cosmossnoogram-centralus.documents.azure.com:443 "POST /dbs/ToDoList/colls/sent_posts/docs/ HTTP/11" 200 None
2024-10-30 05:33:18,201 - INFO - Response status: 200
Response headers:
    'Cache-Control': 'no-store, no-cache'
    'Pragma': 'no-cache'
    'Transfer-Encoding': 'chunked'
    'Content-Type': 'application/json'
    'Server': 'Microsoft-HTTPAPI/2.0'
    'Strict-Transport-Security': 'REDACTED'
    'x-ms-activity-id': 'REDACTED'
    'x-ms-last-state-change-utc': 'REDACTED'
    'x-ms-resource-quota': 'REDACTED'
    'x-ms-resource-usage': 'REDACTED'
    'x-ms-schemaversion': 'REDACTED'
    'lsn': 'REDACTED'
    'x-ms-item-count': 'REDACTED'
    'x-ms-request-charge': 'REDACTED'
    'x-ms-alt-content-path': 'REDACTED'
    'x-ms-content-path': 'REDACTED'
    'x-ms-documentdb-partitionkeyrangeid': 'REDACTED'
    'x-ms-xp-role': 'REDACTED'
    'x-ms-cosmos-query-execution-info': 'REDACTED'
    'x-ms-global-Committed-lsn': 'REDACTED'
    'x-ms-number-of-read-regions': 'REDACTED'
    'x-ms-transport-request-id': 'REDACTED'
    'x-ms-cosmos-llsn': 'REDACTED'
    'x-ms-session-token': 'REDACTED'
    'x-ms-request-duration-ms': 'REDACTED'
    'x-ms-serviceversion': 'REDACTED'
    'x-ms-cosmos-is-partition-key-delete-pending': 'REDACTED'
    'x-ms-cosmos-physical-partition-id': 'REDACTED'
    'x-ms-cosmos-internal-partition-id': 'REDACTED'
    'x-ms-gatewayversion': 'REDACTED'
    'Date': 'Wed, 30 Oct 2024 10:33:17 GMT'
2024-10-30 05:33:18,201 - INFO - Post 1fs7839 is not an image or video post, skipping
2024-10-30 05:33:18,201 - INFO - Checking post: 1g2rse9 - Score: 3771 - URL: https://i.redd.it/gzxs1aeshjud1.png
2024-10-30 05:33:18,201 - INFO - Post 1g2rse9 is a duplicate, skipping
2024-10-30 05:33:18,202 - INFO - Checking post: 1ge9loz - Score: 3724 - URL: https://www.redgifs.com/watch/deadlygregariouswoodchuck
2024-10-30 05:33:18,202 - INFO - Post 1ge9loz is a duplicate, skipping
2024-10-30 05:33:18,202 - INFO - Checking post: 1g0e966 - Score: 3633 - URL: https://www.reddit.com/gallery/1g0e966
2024-10-30 05:33:18,203 - INFO - Request URL: 'https://cosmossnoogram-centralus.documents.azure.com:443/dbs/ToDoList/colls/sent_posts/docs/'
Request method: 'POST'
Request headers:
    'Cache-Control': 'no-cache'
    'x-ms-version': 'REDACTED'
    'x-ms-documentdb-query-iscontinuationexpected': 'REDACTED'
    'x-ms-consistency-level': 'REDACTED'
    'x-ms-documentdb-isquery': 'REDACTED'
    'Content-Type': 'application/query+json'
    'x-ms-session-token': 'REDACTED'
    'x-ms-documentdb-query-enablecrosspartition': 'REDACTED'
    'x-ms-date': 'REDACTED'
    'authorization': 'REDACTED'
    'Accept': 'application/json'
    'x-ms-cosmos-correlated-activityid': 'REDACTED'
    'Content-Length': '107'
    'User-Agent': 'azsdk-python-cosmos/4.5.1 Python/3.12.4 (macOS-15.0.1-arm64-arm-64bit)'
A body is sent with the request
2024-10-30 05:33:18,257 - DEBUG - https://cosmossnoogram-centralus.documents.azure.com:443 "POST /dbs/ToDoList/colls/sent_posts/docs/ HTTP/11" 200 None
2024-10-30 05:33:18,257 - INFO - Response status: 200
Response headers:
    'Cache-Control': 'no-store, no-cache'
    'Pragma': 'no-cache'
    'Transfer-Encoding': 'chunked'
    'Content-Type': 'application/json'
    'Server': 'Microsoft-HTTPAPI/2.0'
    'Strict-Transport-Security': 'REDACTED'
    'x-ms-activity-id': 'REDACTED'
    'x-ms-last-state-change-utc': 'REDACTED'
    'x-ms-resource-quota': 'REDACTED'
    'x-ms-resource-usage': 'REDACTED'
    'x-ms-schemaversion': 'REDACTED'
    'lsn': 'REDACTED'
    'x-ms-item-count': 'REDACTED'
    'x-ms-request-charge': 'REDACTED'
    'x-ms-alt-content-path': 'REDACTED'
    'x-ms-content-path': 'REDACTED'
    'x-ms-documentdb-partitionkeyrangeid': 'REDACTED'
    'x-ms-xp-role': 'REDACTED'
    'x-ms-cosmos-query-execution-info': 'REDACTED'
    'x-ms-global-Committed-lsn': 'REDACTED'
    'x-ms-number-of-read-regions': 'REDACTED'
    'x-ms-transport-request-id': 'REDACTED'
    'x-ms-cosmos-llsn': 'REDACTED'
    'x-ms-session-token': 'REDACTED'
    'x-ms-request-duration-ms': 'REDACTED'
    'x-ms-serviceversion': 'REDACTED'
    'x-ms-cosmos-is-partition-key-delete-pending': 'REDACTED'
    'x-ms-cosmos-physical-partition-id': 'REDACTED'
    'x-ms-cosmos-internal-partition-id': 'REDACTED'
    'x-ms-gatewayversion': 'REDACTED'
    'Date': 'Wed, 30 Oct 2024 10:33:17 GMT'
2024-10-30 05:33:18,258 - INFO - Post 1g0e966 is not an image or video post, skipping
2024-10-30 05:33:18,258 - INFO - Checking post: 1gckgcy - Score: 3394 - URL: https://i.redd.it/njd0mbyjl3xd1.jpeg
2024-10-30 05:33:18,258 - INFO - Post 1gckgcy is a duplicate, skipping
2024-10-30 05:33:18,258 - INFO - Checking post: 1fznoil - Score: 3332 - URL: https://i.redd.it/eruk3694dptd1.jpeg
2024-10-30 05:33:18,258 - INFO - Post 1fznoil is a duplicate, skipping
2024-10-30 05:33:18,258 - INFO - Checking post: 1g3dsj7 - Score: 3180 - URL: https://i.redd.it/cg9oigznmpud1.jpeg
2024-10-30 05:33:18,258 - INFO - Post 1g3dsj7 is a duplicate, skipping
2024-10-30 05:33:18,258 - INFO - Checking post: 1g4dx9i - Score: 3141 - URL: https://i.redd.it/5kv3c8f3lyud1.jpeg
2024-10-30 05:33:18,259 - INFO - Request URL: 'https://cosmossnoogram-centralus.documents.azure.com:443/dbs/ToDoList/colls/sent_posts/docs/'
Request method: 'POST'
Request headers:
    'Cache-Control': 'no-cache'
    'x-ms-version': 'REDACTED'
    'x-ms-documentdb-query-iscontinuationexpected': 'REDACTED'
    'x-ms-consistency-level': 'REDACTED'
    'x-ms-documentdb-isquery': 'REDACTED'
    'Content-Type': 'application/query+json'
    'x-ms-session-token': 'REDACTED'
    'x-ms-documentdb-query-enablecrosspartition': 'REDACTED'
    'x-ms-date': 'REDACTED'
    'authorization': 'REDACTED'
    'Accept': 'application/json'
    'x-ms-cosmos-correlated-activityid': 'REDACTED'
    'Content-Length': '107'
    'User-Agent': 'azsdk-python-cosmos/4.5.1 Python/3.12.4 (macOS-15.0.1-arm64-arm-64bit)'
A body is sent with the request
2024-10-30 05:33:18,289 - DEBUG - https://cosmossnoogram-centralus.documents.azure.com:443 "POST /dbs/ToDoList/colls/sent_posts/docs/ HTTP/11" 200 None
2024-10-30 05:33:18,289 - INFO - Response status: 200
Response headers:
    'Cache-Control': 'no-store, no-cache'
    'Pragma': 'no-cache'
    'Transfer-Encoding': 'chunked'
    'Content-Type': 'application/json'
    'Server': 'Microsoft-HTTPAPI/2.0'
    'Strict-Transport-Security': 'REDACTED'
    'x-ms-activity-id': 'REDACTED'
    'x-ms-last-state-change-utc': 'REDACTED'
    'x-ms-resource-quota': 'REDACTED'
    'x-ms-resource-usage': 'REDACTED'
    'x-ms-schemaversion': 'REDACTED'
    'lsn': 'REDACTED'
    'x-ms-item-count': 'REDACTED'
    'x-ms-request-charge': 'REDACTED'
    'x-ms-alt-content-path': 'REDACTED'
    'x-ms-content-path': 'REDACTED'
    'x-ms-documentdb-partitionkeyrangeid': 'REDACTED'
    'x-ms-xp-role': 'REDACTED'
    'x-ms-cosmos-query-execution-info': 'REDACTED'
    'x-ms-global-Committed-lsn': 'REDACTED'
    'x-ms-number-of-read-regions': 'REDACTED'
    'x-ms-transport-request-id': 'REDACTED'
    'x-ms-cosmos-llsn': 'REDACTED'
    'x-ms-session-token': 'REDACTED'
    'x-ms-request-duration-ms': 'REDACTED'
    'x-ms-serviceversion': 'REDACTED'
    'x-ms-cosmos-is-partition-key-delete-pending': 'REDACTED'
    'x-ms-cosmos-physical-partition-id': 'REDACTED'
    'x-ms-cosmos-internal-partition-id': 'REDACTED'
    'x-ms-gatewayversion': 'REDACTED'
    'Date': 'Wed, 30 Oct 2024 10:33:17 GMT'
2024-10-30 05:33:18,289 - INFO - Post 1g4dx9i is a duplicate, skipping
2024-10-30 05:33:18,289 - INFO - Checking post: 1ftaz41 - Score: 3132 - URL: https://i.redd.it/2meejva1g1sd1.jpeg
2024-10-30 05:33:18,290 - INFO - Request URL: 'https://cosmossnoogram-centralus.documents.azure.com:443/dbs/ToDoList/colls/sent_posts/docs/'
Request method: 'POST'
Request headers:
    'Cache-Control': 'no-cache'
    'x-ms-version': 'REDACTED'
    'x-ms-documentdb-query-iscontinuationexpected': 'REDACTED'
    'x-ms-consistency-level': 'REDACTED'
    'x-ms-documentdb-isquery': 'REDACTED'
    'Content-Type': 'application/query+json'
    'x-ms-session-token': 'REDACTED'
    'x-ms-documentdb-query-enablecrosspartition': 'REDACTED'
    'x-ms-date': 'REDACTED'
    'authorization': 'REDACTED'
    'Accept': 'application/json'
    'x-ms-cosmos-correlated-activityid': 'REDACTED'
    'Content-Length': '107'
    'User-Agent': 'azsdk-python-cosmos/4.5.1 Python/3.12.4 (macOS-15.0.1-arm64-arm-64bit)'
A body is sent with the request
2024-10-30 05:33:18,331 - DEBUG - https://cosmossnoogram-centralus.documents.azure.com:443 "POST /dbs/ToDoList/colls/sent_posts/docs/ HTTP/11" 200 None
2024-10-30 05:33:18,331 - INFO - Response status: 200
Response headers:
    'Cache-Control': 'no-store, no-cache'
    'Pragma': 'no-cache'
    'Transfer-Encoding': 'chunked'
    'Content-Type': 'application/json'
    'Server': 'Microsoft-HTTPAPI/2.0'
    'Strict-Transport-Security': 'REDACTED'
    'x-ms-activity-id': 'REDACTED'
    'x-ms-last-state-change-utc': 'REDACTED'
    'x-ms-resource-quota': 'REDACTED'
    'x-ms-resource-usage': 'REDACTED'
    'x-ms-schemaversion': 'REDACTED'
    'lsn': 'REDACTED'
    'x-ms-item-count': 'REDACTED'
    'x-ms-request-charge': 'REDACTED'
    'x-ms-alt-content-path': 'REDACTED'
    'x-ms-content-path': 'REDACTED'
    'x-ms-documentdb-partitionkeyrangeid': 'REDACTED'
    'x-ms-xp-role': 'REDACTED'
    'x-ms-cosmos-query-execution-info': 'REDACTED'
    'x-ms-global-Committed-lsn': 'REDACTED'
    'x-ms-number-of-read-regions': 'REDACTED'
    'x-ms-transport-request-id': 'REDACTED'
    'x-ms-cosmos-llsn': 'REDACTED'
    'x-ms-session-token': 'REDACTED'
    'x-ms-request-duration-ms': 'REDACTED'
    'x-ms-serviceversion': 'REDACTED'
    'x-ms-cosmos-is-partition-key-delete-pending': 'REDACTED'
    'x-ms-cosmos-physical-partition-id': 'REDACTED'
    'x-ms-cosmos-internal-partition-id': 'REDACTED'
    'x-ms-gatewayversion': 'REDACTED'
    'Date': 'Wed, 30 Oct 2024 10:33:17 GMT'
2024-10-30 05:33:18,331 - INFO - Post 1ftaz41 is a duplicate, skipping
2024-10-30 05:33:18,332 - INFO - Checking post: 1gbi6rb - Score: 3127 - URL: https://i.redd.it/uzwse73yvswd1.jpeg
2024-10-30 05:33:18,332 - INFO - Request URL: 'https://cosmossnoogram-centralus.documents.azure.com:443/dbs/ToDoList/colls/sent_posts/docs/'
Request method: 'POST'
Request headers:
    'Cache-Control': 'no-cache'
    'x-ms-version': 'REDACTED'
    'x-ms-documentdb-query-iscontinuationexpected': 'REDACTED'
    'x-ms-consistency-level': 'REDACTED'
    'x-ms-documentdb-isquery': 'REDACTED'
    'Content-Type': 'application/query+json'
    'x-ms-session-token': 'REDACTED'
    'x-ms-documentdb-query-enablecrosspartition': 'REDACTED'
    'x-ms-date': 'REDACTED'
    'authorization': 'REDACTED'
    'Accept': 'application/json'
    'x-ms-cosmos-correlated-activityid': 'REDACTED'
    'Content-Length': '107'
    'User-Agent': 'azsdk-python-cosmos/4.5.1 Python/3.12.4 (macOS-15.0.1-arm64-arm-64bit)'
A body is sent with the request
2024-10-30 05:33:18,371 - DEBUG - https://cosmossnoogram-centralus.documents.azure.com:443 "POST /dbs/ToDoList/colls/sent_posts/docs/ HTTP/11" 200 None
2024-10-30 05:33:18,394 - INFO - Response status: 200
Response headers:
    'Cache-Control': 'no-store, no-cache'
    'Pragma': 'no-cache'
    'Transfer-Encoding': 'chunked'
    'Content-Type': 'application/json'
    'Server': 'Microsoft-HTTPAPI/2.0'
    'Strict-Transport-Security': 'REDACTED'
    'x-ms-activity-id': 'REDACTED'
    'x-ms-last-state-change-utc': 'REDACTED'
    'x-ms-resource-quota': 'REDACTED'
    'x-ms-resource-usage': 'REDACTED'
    'x-ms-schemaversion': 'REDACTED'
    'lsn': 'REDACTED'
    'x-ms-item-count': 'REDACTED'
    'x-ms-request-charge': 'REDACTED'
    'x-ms-alt-content-path': 'REDACTED'
    'x-ms-content-path': 'REDACTED'
    'x-ms-documentdb-partitionkeyrangeid': 'REDACTED'
    'x-ms-xp-role': 'REDACTED'
    'x-ms-cosmos-query-execution-info': 'REDACTED'
    'x-ms-global-Committed-lsn': 'REDACTED'
    'x-ms-number-of-read-regions': 'REDACTED'
    'x-ms-transport-request-id': 'REDACTED'
    'x-ms-cosmos-llsn': 'REDACTED'
    'x-ms-session-token': 'REDACTED'
    'x-ms-request-duration-ms': 'REDACTED'
    'x-ms-serviceversion': 'REDACTED'
    'x-ms-cosmos-is-partition-key-delete-pending': 'REDACTED'
    'x-ms-cosmos-physical-partition-id': 'REDACTED'
    'x-ms-cosmos-internal-partition-id': 'REDACTED'
    'x-ms-gatewayversion': 'REDACTED'
    'Date': 'Wed, 30 Oct 2024 10:33:17 GMT'
2024-10-30 05:33:18,394 - INFO - Found image post: 1gbi6rb with URL: https://i.redd.it/uzwse73yvswd1.jpeg
2024-10-30 05:33:18,395 - DEBUG - Starting new HTTPS connection (1): i.redd.it:443
2024-10-30 05:33:18,494 - DEBUG - https://i.redd.it:443 "GET /uzwse73yvswd1.jpeg HTTP/11" 200 2371964
2024-10-30 05:33:18,844 - INFO - Successfully downloaded media to downloads/pics/1gbi6rb_20241030_053318_75043492.jpeg
2024-10-30 05:33:18,847 - DEBUG - Using selector: KqueueSelector
2024-10-30 05:33:18,847 - INFO - Attempting to send photo to Telegram - Path: downloads/pics/1gbi6rb_20241030_053318_75043492.jpeg
2024-10-30 05:33:18,848 - DEBUG - load_ssl_context verify=True cert=None trust_env=True http2=False
2024-10-30 05:33:18,849 - DEBUG - load_verify_locations cafile='/Users/joewilson/PythonProjects/Snoogram/venv/lib/python3.12/site-packages/certifi/cacert.pem'
2024-10-30 05:33:18,858 - DEBUG - load_ssl_context verify=True cert=None trust_env=True http2=False
2024-10-30 05:33:18,858 - DEBUG - load_verify_locations cafile='/Users/joewilson/PythonProjects/Snoogram/venv/lib/python3.12/site-packages/certifi/cacert.pem'
2024-10-30 05:33:18,867 - DEBUG - Entering: get_me
2024-10-30 05:33:18,867 - DEBUG - connect_tcp.started host='api.telegram.org' port=443 local_address=None timeout=5.0 socket_options=None
2024-10-30 05:33:19,009 - DEBUG - connect_tcp.complete return_value=<httpcore._backends.anyio.AnyIOStream object at 0x108c74fb0>
2024-10-30 05:33:19,009 - DEBUG - start_tls.started ssl_context=<ssl.SSLContext object at 0x108e51750> server_hostname='api.telegram.org' timeout=5.0
2024-10-30 05:33:19,161 - DEBUG - start_tls.complete return_value=<httpcore._backends.anyio.AnyIOStream object at 0x108c77950>
2024-10-30 05:33:19,162 - DEBUG - send_request_headers.started request=<Request [b'POST']>
2024-10-30 05:33:19,163 - DEBUG - send_request_headers.complete
2024-10-30 05:33:19,163 - DEBUG - send_request_body.started request=<Request [b'POST']>
2024-10-30 05:33:19,163 - DEBUG - send_request_body.complete
2024-10-30 05:33:19,163 - DEBUG - receive_response_headers.started request=<Request [b'POST']>
2024-10-30 05:33:19,231 - INFO - Successfully downloaded media to downloads/videos/1gelyz1_20241030_053317_ba5c8ead.mp4
2024-10-30 05:33:19,234 - DEBUG - Using selector: KqueueSelector
2024-10-30 05:33:19,234 - INFO - Attempting to send video to Telegram - Path: downloads/videos/1gelyz1_20241030_053317_ba5c8ead.mp4
2024-10-30 05:33:19,234 - DEBUG - Entering: get_me
2024-10-30 05:33:19,235 - DEBUG - connect_tcp.started host='api.telegram.org' port=443 local_address=None timeout=5.0 socket_options=None
2024-10-30 05:33:19,292 - DEBUG - receive_response_headers.complete return_value=(b'HTTP/1.1', 200, b'OK', [(b'Server', b'nginx/1.18.0'), (b'Date', b'Wed, 30 Oct 2024 10:33:19 GMT'), (b'Content-Type', b'application/json'), (b'Content-Length', b'254'), (b'Connection', b'keep-alive'), (b'Strict-Transport-Security', b'max-age=31536000; includeSubDomains; preload'), (b'Access-Control-Allow-Origin', b'*'), (b'Access-Control-Allow-Methods', b'GET, POST, OPTIONS'), (b'Access-Control-Expose-Headers', b'Content-Length,Content-Type,Date,Server,Connection')])
2024-10-30 05:33:19,293 - INFO - HTTP Request: POST https://api.telegram.org/bot7867694458:AAEFLZjWPyd1p640mHENnBt479WRYfSavWg/getMe "HTTP/1.1 200 OK"
2024-10-30 05:33:19,293 - DEBUG - receive_response_body.started request=<Request [b'POST']>
2024-10-30 05:33:19,293 - DEBUG - receive_response_body.complete
2024-10-30 05:33:19,294 - DEBUG - response_closed.started
2024-10-30 05:33:19,294 - DEBUG - response_closed.complete
2024-10-30 05:33:19,295 - DEBUG - User(api_kwargs={'can_connect_to_business': False, 'has_main_web_app': False}, can_join_groups=True, can_read_all_group_messages=False, first_name='RedditBot', id=7867694458, is_bot=True, supports_inline_queries=False, username='RedditImage_bot')
2024-10-30 05:33:19,295 - DEBUG - Exiting: get_me
2024-10-30 05:33:19,295 - DEBUG - This Bot is already initialized.
2024-10-30 05:33:19,296 - DEBUG - Entering: send_photo
2024-10-30 05:33:19,299 - DEBUG - send_request_headers.started request=<Request [b'POST']>
2024-10-30 05:33:19,299 - DEBUG - send_request_headers.complete
2024-10-30 05:33:19,299 - DEBUG - send_request_body.started request=<Request [b'POST']>
2024-10-30 05:33:19,360 - DEBUG - connect_tcp.complete return_value=<httpcore._backends.anyio.AnyIOStream object at 0x108ed2120>
2024-10-30 05:33:19,360 - DEBUG - start_tls.started ssl_context=<ssl.SSLContext object at 0x108e51750> server_hostname='api.telegram.org' timeout=5.0
2024-10-30 05:33:19,492 - DEBUG - start_tls.complete return_value=<httpcore._backends.anyio.AnyIOStream object at 0x108ed07d0>
2024-10-30 05:33:19,493 - DEBUG - send_request_headers.started request=<Request [b'POST']>
2024-10-30 05:33:19,493 - DEBUG - send_request_headers.complete
2024-10-30 05:33:19,493 - DEBUG - send_request_body.started request=<Request [b'POST']>
2024-10-30 05:33:19,493 - DEBUG - send_request_body.complete
2024-10-30 05:33:19,493 - DEBUG - receive_response_headers.started request=<Request [b'POST']>
2024-10-30 05:33:19,617 - DEBUG - receive_response_headers.complete return_value=(b'HTTP/1.1', 200, b'OK', [(b'Server', b'nginx/1.18.0'), (b'Date', b'Wed, 30 Oct 2024 10:33:19 GMT'), (b'Content-Type', b'application/json'), (b'Content-Length', b'254'), (b'Connection', b'keep-alive'), (b'Strict-Transport-Security', b'max-age=31536000; includeSubDomains; preload'), (b'Access-Control-Allow-Origin', b'*'), (b'Access-Control-Allow-Methods', b'GET, POST, OPTIONS'), (b'Access-Control-Expose-Headers', b'Content-Length,Content-Type,Date,Server,Connection')])
2024-10-30 05:33:19,618 - INFO - HTTP Request: POST https://api.telegram.org/bot7867694458:AAEFLZjWPyd1p640mHENnBt479WRYfSavWg/getMe "HTTP/1.1 200 OK"
2024-10-30 05:33:19,618 - DEBUG - receive_response_body.started request=<Request [b'POST']>
2024-10-30 05:33:19,619 - DEBUG - receive_response_body.complete
2024-10-30 05:33:19,619 - DEBUG - response_closed.started
2024-10-30 05:33:19,619 - DEBUG - response_closed.complete
2024-10-30 05:33:19,619 - DEBUG - User(api_kwargs={'can_connect_to_business': False, 'has_main_web_app': False}, can_join_groups=True, can_read_all_group_messages=False, first_name='RedditBot', id=7867694458, is_bot=True, supports_inline_queries=False, username='RedditImage_bot')
2024-10-30 05:33:19,619 - DEBUG - Exiting: get_me
2024-10-30 05:33:19,620 - DEBUG - This Updater is already initialized.
2024-10-30 05:33:19,620 - DEBUG - Entering: send_video
2024-10-30 05:33:19,635 - DEBUG - send_request_headers.started request=<Request [b'POST']>
2024-10-30 05:33:19,635 - DEBUG - send_request_headers.complete
2024-10-30 05:33:19,635 - DEBUG - send_request_body.started request=<Request [b'POST']>
2024-10-30 05:33:20,146 - DEBUG - send_request_body.complete
2024-10-30 05:33:20,146 - DEBUG - receive_response_headers.started request=<Request [b'POST']>
2024-10-30 05:33:20,560 - DEBUG - receive_response_headers.complete return_value=(b'HTTP/1.1', 200, b'OK', [(b'Server', b'nginx/1.18.0'), (b'Date', b'Wed, 30 Oct 2024 10:33:20 GMT'), (b'Content-Type', b'application/json'), (b'Content-Length', b'1228'), (b'Connection', b'keep-alive'), (b'Strict-Transport-Security', b'max-age=31536000; includeSubDomains; preload'), (b'Access-Control-Allow-Origin', b'*'), (b'Access-Control-Allow-Methods', b'GET, POST, OPTIONS'), (b'Access-Control-Expose-Headers', b'Content-Length,Content-Type,Date,Server,Connection')])
2024-10-30 05:33:20,560 - INFO - HTTP Request: POST https://api.telegram.org/bot7867694458:AAEFLZjWPyd1p640mHENnBt479WRYfSavWg/sendPhoto "HTTP/1.1 200 OK"
2024-10-30 05:33:20,561 - DEBUG - receive_response_body.started request=<Request [b'POST']>
2024-10-30 05:33:20,561 - DEBUG - receive_response_body.complete
2024-10-30 05:33:20,561 - DEBUG - response_closed.started
2024-10-30 05:33:20,561 - DEBUG - response_closed.complete
2024-10-30 05:33:20,561 - DEBUG - Message(caption='From r/wifebutt: Thursday night wifebutt and football!\nUpvotes: 3,127', channel_chat_created=False, chat=Chat(id=-1002490380283, title='Reddit_Pic_Stream', type=<ChatType.CHANNEL>), date=datetime.datetime(2024, 10, 30, 10, 33, 20, tzinfo=<UTC>), delete_chat_photo=False, group_chat_created=False, message_id=260, photo=(PhotoSize(file_id='AgACAgEAAyEGAASUcC_7AAOaZyH6uC2oEw-KoZQHBhb5XwlLmlkAAkitMRsZEBFF-CyP8HyFv7gBAAMCAANzAAM2BA', file_size=1690, file_unique_id='AQADSK0xGxkQEUV4', height=90, width=62), PhotoSize(file_id='AgACAgEAAyEGAASUcC_7AAOaZyH6uC2oEw-KoZQHBhb5XwlLmlkAAkitMRsZEBFF-CyP8HyFv7gBAAMCAANtAAM2BA', file_size=23805, file_unique_id='AQADSK0xGxkQEUVy', height=320, width=221), PhotoSize(file_id='AgACAgEAAyEGAASUcC_7AAOaZyH6uC2oEw-KoZQHBhb5XwlLmlkAAkitMRsZEBFF-CyP8HyFv7gBAAMCAAN4AAM2BA', file_size=108880, file_unique_id='AQADSK0xGxkQEUV9', height=800, width=552), PhotoSize(file_id='AgACAgEAAyEGAASUcC_7AAOaZyH6uC2oEw-KoZQHBhb5XwlLmlkAAkitMRsZEBFF-CyP8HyFv7gBAAMCAAN5AAM2BA', file_size=243293, file_unique_id='AQADSK0xGxkQEUV-', height=1280, width=884), PhotoSize(file_id='AgACAgEAAyEGAASUcC_7AAOaZyH6uC2oEw-KoZQHBhb5XwlLmlkAAkitMRsZEBFF-CyP8HyFv7gBAAMCAAN3AAM2BA', file_size=762771, file_unique_id='AQADSK0xGxkQEUV8', height=2560, width=1768)), sender_chat=Chat(id=-1002490380283, title='Reddit_Pic_Stream', type=<ChatType.CHANNEL>), supergroup_chat_created=False)
2024-10-30 05:33:20,562 - DEBUG - Exiting: send_photo
2024-10-30 05:33:20,562 - DEBUG - close.started
2024-10-30 05:33:20,562 - DEBUG - close.complete
2024-10-30 05:33:20,562 - DEBUG - close.started
2024-10-30 05:33:20,562 - DEBUG - close.complete
2024-10-30 05:33:20,562 - DEBUG - This Bot is already shut down. Returning.
2024-10-30 05:33:20,562 - DEBUG - Shut down of Updater complete
2024-10-30 05:33:20,562 - INFO - Successfully sent photo to Telegram
2024-10-30 05:33:20,564 - ERROR - Error processing subreddit wifebutt: (sqlite3.OperationalError) attempt to write a readonly database
[SQL: INSERT INTO sent_post (post_id, subreddit_name, sent_at) VALUES (?, ?, ?)]
[parameters: ('1gbi6rb', 'wifebutt', '2024-10-30 10:33:20.564136')]
(Background on this error at: https://sqlalche.me/e/20/e3q8)
2024-10-30 05:33:20,566 - ERROR - Job "send_to_telegram (trigger: interval[0:01:00], next run at: 2024-10-30 05:34:16 CDT)" raised an exception
Traceback (most recent call last):
  File "/Users/joewilson/PythonProjects/Snoogram/venv/lib/python3.12/site-packages/sqlalchemy/engine/base.py", line 1967, in _exec_single_context
    self.dialect.do_execute(
  File "/Users/joewilson/PythonProjects/Snoogram/venv/lib/python3.12/site-packages/sqlalchemy/engine/default.py", line 941, in do_execute
    cursor.execute(statement, parameters)
sqlite3.OperationalError: attempt to write a readonly database

The above exception was the direct cause of the following exception:

Traceback (most recent call last):
  File "/Users/joewilson/PythonProjects/Snoogram/venv/lib/python3.12/site-packages/apscheduler/executors/base.py", line 125, in run_job
    retval = job.func(*job.args, **job.kwargs)
             ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/Users/joewilson/PythonProjects/Snoogram/backend/app.py", line 265, in send_to_telegram
    # Update last_check in Cosmos DB
                ^^^^^^^^^^^^^^^^^^^^^
  File "/Users/joewilson/PythonProjects/Snoogram/backend/db_operations.py", line 100, in add_sent_post
  File "/Users/joewilson/PythonProjects/Snoogram/venv/lib/python3.12/site-packages/sqlalchemy/orm/scoping.py", line 597, in commit
    return self._proxied.commit()
           ^^^^^^^^^^^^^^^^^^^^^^
  File "/Users/joewilson/PythonProjects/Snoogram/venv/lib/python3.12/site-packages/sqlalchemy/orm/session.py", line 2028, in commit
    trans.commit(_to_root=True)
  File "<string>", line 2, in commit
  File "/Users/joewilson/PythonProjects/Snoogram/venv/lib/python3.12/site-packages/sqlalchemy/orm/state_changes.py", line 139, in _go
    ret_value = fn(self, *arg, **kw)
                ^^^^^^^^^^^^^^^^^^^^
  File "/Users/joewilson/PythonProjects/Snoogram/venv/lib/python3.12/site-packages/sqlalchemy/orm/session.py", line 1313, in commit
    self._prepare_impl()
  File "<string>", line 2, in _prepare_impl
  File "/Users/joewilson/PythonProjects/Snoogram/venv/lib/python3.12/site-packages/sqlalchemy/orm/state_changes.py", line 139, in _go
    ret_value = fn(self, *arg, **kw)
                ^^^^^^^^^^^^^^^^^^^^
  File "/Users/joewilson/PythonProjects/Snoogram/venv/lib/python3.12/site-packages/sqlalchemy/orm/session.py", line 1288, in _prepare_impl
    self.session.flush()
  File "/Users/joewilson/PythonProjects/Snoogram/venv/lib/python3.12/site-packages/sqlalchemy/orm/session.py", line 4352, in flush
    self._flush(objects)
  File "/Users/joewilson/PythonProjects/Snoogram/venv/lib/python3.12/site-packages/sqlalchemy/orm/session.py", line 4487, in _flush
    with util.safe_reraise():
  File "/Users/joewilson/PythonProjects/Snoogram/venv/lib/python3.12/site-packages/sqlalchemy/util/langhelpers.py", line 146, in __exit__
    raise exc_value.with_traceback(exc_tb)
  File "/Users/joewilson/PythonProjects/Snoogram/venv/lib/python3.12/site-packages/sqlalchemy/orm/session.py", line 4448, in _flush
    flush_context.execute()
  File "/Users/joewilson/PythonProjects/Snoogram/venv/lib/python3.12/site-packages/sqlalchemy/orm/unitofwork.py", line 466, in execute
    rec.execute(self)
  File "/Users/joewilson/PythonProjects/Snoogram/venv/lib/python3.12/site-packages/sqlalchemy/orm/unitofwork.py", line 642, in execute
    util.preloaded.orm_persistence.save_obj(
  File "/Users/joewilson/PythonProjects/Snoogram/venv/lib/python3.12/site-packages/sqlalchemy/orm/persistence.py", line 93, in save_obj
    _emit_insert_statements(
  File "/Users/joewilson/PythonProjects/Snoogram/venv/lib/python3.12/site-packages/sqlalchemy/orm/persistence.py", line 1233, in _emit_insert_statements
    result = connection.execute(
             ^^^^^^^^^^^^^^^^^^^
  File "/Users/joewilson/PythonProjects/Snoogram/venv/lib/python3.12/site-packages/sqlalchemy/engine/base.py", line 1418, in execute
    return meth(
           ^^^^^
  File "/Users/joewilson/PythonProjects/Snoogram/venv/lib/python3.12/site-packages/sqlalchemy/sql/elements.py", line 515, in _execute_on_connection
    return connection._execute_clauseelement(
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/Users/joewilson/PythonProjects/Snoogram/venv/lib/python3.12/site-packages/sqlalchemy/engine/base.py", line 1640, in _execute_clauseelement
    ret = self._execute_context(
          ^^^^^^^^^^^^^^^^^^^^^^
  File "/Users/joewilson/PythonProjects/Snoogram/venv/lib/python3.12/site-packages/sqlalchemy/engine/base.py", line 1846, in _execute_context
    return self._exec_single_context(
           ^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/Users/joewilson/PythonProjects/Snoogram/venv/lib/python3.12/site-packages/sqlalchemy/engine/base.py", line 1986, in _exec_single_context
    self._handle_dbapi_exception(
  File "/Users/joewilson/PythonProjects/Snoogram/venv/lib/python3.12/site-packages/sqlalchemy/engine/base.py", line 2355, in _handle_dbapi_exception
    raise sqlalchemy_exception.with_traceback(exc_info[2]) from e
  File "/Users/joewilson/PythonProjects/Snoogram/venv/lib/python3.12/site-packages/sqlalchemy/engine/base.py", line 1967, in _exec_single_context
    self.dialect.do_execute(
  File "/Users/joewilson/PythonProjects/Snoogram/venv/lib/python3.12/site-packages/sqlalchemy/engine/default.py", line 941, in do_execute
    cursor.execute(statement, parameters)
sqlalchemy.exc.OperationalError: (sqlite3.OperationalError) attempt to write a readonly database
[SQL: INSERT INTO sent_post (post_id, subreddit_name, sent_at) VALUES (?, ?, ?)]
[parameters: ('1gbi6rb', 'wifebutt', '2024-10-30 10:33:20.564136')]
(Background on this error at: https://sqlalche.me/e/20/e3q8)
2024-10-30 05:33:39,650 - DEBUG - send_request_body.failed exception=WriteError(ClosedResourceError())
2024-10-30 05:33:39,652 - DEBUG - response_closed.started
2024-10-30 05:33:39,652 - DEBUG - response_closed.complete
2024-10-30 05:33:39,653 - DEBUG - This Application is already shut down. Returning.
2024-10-30 05:33:39,653 - ERROR - Failed to send video to Telegram: httpx.WriteError: 
2024-10-30 05:33:39,655 - ERROR - Error sending video post 1gelyz1: httpx.WriteError: 
2024-10-30 05:33:39,655 - INFO - Checking post: 1gejrnl - Score: 2593 - URL: https://v3.redgifs.com/watch/graydefensivepika
2024-10-30 05:33:39,664 - INFO - Request URL: 'https://cosmossnoogram-centralus.documents.azure.com:443/dbs/ToDoList/colls/sent_posts/docs/'
Request method: 'POST'
Request headers:
    'Cache-Control': 'no-cache'
    'x-ms-version': 'REDACTED'
    'x-ms-documentdb-query-iscontinuationexpected': 'REDACTED'
    'x-ms-consistency-level': 'REDACTED'
    'x-ms-documentdb-isquery': 'REDACTED'
    'Content-Type': 'application/query+json'
    'x-ms-session-token': 'REDACTED'
    'x-ms-documentdb-query-enablecrosspartition': 'REDACTED'
    'x-ms-date': 'REDACTED'
    'authorization': 'REDACTED'
    'Accept': 'application/json'
    'x-ms-cosmos-correlated-activityid': 'REDACTED'
    'Content-Length': '107'
    'User-Agent': 'azsdk-python-cosmos/4.5.1 Python/3.12.4 (macOS-15.0.1-arm64-arm-64bit)'
A body is sent with the request
2024-10-30 05:33:39,699 - DEBUG - https://cosmossnoogram-centralus.documents.azure.com:443 "POST /dbs/ToDoList/colls/sent_posts/docs/ HTTP/11" 200 None
2024-10-30 05:33:39,699 - INFO - Response status: 200
Response headers:
    'Cache-Control': 'no-store, no-cache'
    'Pragma': 'no-cache'
    'Transfer-Encoding': 'chunked'
    'Content-Type': 'application/json'
    'Server': 'Microsoft-HTTPAPI/2.0'
    'Strict-Transport-Security': 'REDACTED'
    'x-ms-activity-id': 'REDACTED'
    'x-ms-last-state-change-utc': 'REDACTED'
    'x-ms-resource-quota': 'REDACTED'
    'x-ms-resource-usage': 'REDACTED'
    'x-ms-schemaversion': 'REDACTED'
    'lsn': 'REDACTED'
    'x-ms-item-count': 'REDACTED'
    'x-ms-request-charge': 'REDACTED'
    'x-ms-alt-content-path': 'REDACTED'
    'x-ms-content-path': 'REDACTED'
    'x-ms-quorum-acked-lsn': 'REDACTED'
    'x-ms-current-write-quorum': 'REDACTED'
    'x-ms-current-replica-set-size': 'REDACTED'
    'x-ms-documentdb-partitionkeyrangeid': 'REDACTED'
    'x-ms-xp-role': 'REDACTED'
    'x-ms-cosmos-query-execution-info': 'REDACTED'
    'x-ms-global-Committed-lsn': 'REDACTED'
    'x-ms-number-of-read-regions': 'REDACTED'
    'x-ms-transport-request-id': 'REDACTED'
    'x-ms-cosmos-llsn': 'REDACTED'
    'x-ms-cosmos-quorum-acked-llsn': 'REDACTED'
    'x-ms-session-token': 'REDACTED'
    'x-ms-request-duration-ms': 'REDACTED'
    'x-ms-serviceversion': 'REDACTED'
    'x-ms-cosmos-is-partition-key-delete-pending': 'REDACTED'
    'x-ms-cosmos-physical-partition-id': 'REDACTED'
    'x-ms-cosmos-internal-partition-id': 'REDACTED'
    'x-ms-gatewayversion': 'REDACTED'
    'Date': 'Wed, 30 Oct 2024 10:33:39 GMT'
2024-10-30 05:33:39,700 - INFO - Post 1gejrnl is a duplicate, skipping
2024-10-30 05:33:39,700 - INFO - Checking post: 1gelw33 - Score: 2312 - URL: https://www.redgifs.com/watch/drydarkgraysable
2024-10-30 05:33:39,700 - INFO - Post 1gelw33 is a duplicate, skipping
2024-10-30 05:33:39,700 - INFO - Checking post: 1gevvp0 - Score: 1199 - URL: https://www.redgifs.com/watch/medicalplumhen
2024-10-30 05:33:39,701 - INFO - Post 1gevvp0 is a duplicate, skipping
2024-10-30 05:33:39,701 - INFO - Checking post: 1gesoj7 - Score: 755 - URL: https://www.redgifs.com/watch/lightgreytrickydragonfly
2024-10-30 05:33:39,701 - INFO - Post 1gesoj7 is a duplicate, skipping
2024-10-30 05:33:39,701 - INFO - Checking post: 1geuuqp - Score: 445 - URL: https://www.redgifs.com/watch/cheerfulbeigebagworm
2024-10-30 05:33:39,701 - INFO - Post 1geuuqp is a duplicate, skipping
2024-10-30 05:33:39,701 - INFO - Checking post: 1geakrb - Score: 391 - URL: https://www.redgifs.com/watch/illinformedthickgalapagoshawk
2024-10-30 05:33:39,701 - INFO - Post 1geakrb is a duplicate, skipping
2024-10-30 05:33:39,701 - INFO - Checking post: 1gerubz - Score: 364 - URL: https://v3.redgifs.com/watch/trickysquarepseudodynerusquadrisectus
2024-10-30 05:33:39,701 - INFO - Post 1gerubz is a duplicate, skipping
2024-10-30 05:33:39,702 - INFO - Checking post: 1getxhl - Score: 342 - URL: https://www.redgifs.com/watch/purpledemandingboaconstrictor
2024-10-30 05:33:39,702 - INFO - Post 1getxhl is a duplicate, skipping
2024-10-30 05:33:39,702 - INFO - Checking post: 1ge9gol - Score: 274 - URL: https://v3.redgifs.com/watch/circulardeeppinkamericanbulldog
2024-10-30 05:33:39,702 - INFO - Request URL: 'https://cosmossnoogram-centralus.documents.azure.com:443/dbs/ToDoList/colls/sent_posts/docs/'
Request method: 'POST'
Request headers:
    'Cache-Control': 'no-cache'
    'x-ms-version': 'REDACTED'
    'x-ms-documentdb-query-iscontinuationexpected': 'REDACTED'
    'x-ms-consistency-level': 'REDACTED'
    'x-ms-documentdb-isquery': 'REDACTED'
    'Content-Type': 'application/query+json'
    'x-ms-session-token': 'REDACTED'
    'x-ms-documentdb-query-enablecrosspartition': 'REDACTED'
    'x-ms-date': 'REDACTED'
    'authorization': 'REDACTED'
    'Accept': 'application/json'
    'x-ms-cosmos-correlated-activityid': 'REDACTED'
    'Content-Length': '107'
    'User-Agent': 'azsdk-python-cosmos/4.5.1 Python/3.12.4 (macOS-15.0.1-arm64-arm-64bit)'
A body is sent with the request
2024-10-30 05:33:39,732 - DEBUG - https://cosmossnoogram-centralus.documents.azure.com:443 "POST /dbs/ToDoList/colls/sent_posts/docs/ HTTP/11" 200 None
2024-10-30 05:33:39,732 - INFO - Response status: 200
Response headers:
    'Cache-Control': 'no-store, no-cache'
    'Pragma': 'no-cache'
    'Transfer-Encoding': 'chunked'
    'Content-Type': 'application/json'
    'Server': 'Microsoft-HTTPAPI/2.0'
    'Strict-Transport-Security': 'REDACTED'
    'x-ms-activity-id': 'REDACTED'
    'x-ms-last-state-change-utc': 'REDACTED'
    'x-ms-resource-quota': 'REDACTED'
    'x-ms-resource-usage': 'REDACTED'
    'x-ms-schemaversion': 'REDACTED'
    'lsn': 'REDACTED'
    'x-ms-item-count': 'REDACTED'
    'x-ms-request-charge': 'REDACTED'
    'x-ms-alt-content-path': 'REDACTED'
    'x-ms-content-path': 'REDACTED'
    'x-ms-documentdb-partitionkeyrangeid': 'REDACTED'
    'x-ms-xp-role': 'REDACTED'
    'x-ms-cosmos-query-execution-info': 'REDACTED'
    'x-ms-global-Committed-lsn': 'REDACTED'
    'x-ms-number-of-read-regions': 'REDACTED'
    'x-ms-transport-request-id': 'REDACTED'
    'x-ms-cosmos-llsn': 'REDACTED'
    'x-ms-session-token': 'REDACTED'
    'x-ms-request-duration-ms': 'REDACTED'
    'x-ms-serviceversion': 'REDACTED'
    'x-ms-cosmos-is-partition-key-delete-pending': 'REDACTED'
    'x-ms-cosmos-physical-partition-id': 'REDACTED'
    'x-ms-cosmos-internal-partition-id': 'REDACTED'
    'x-ms-gatewayversion': 'REDACTED'
    'Date': 'Wed, 30 Oct 2024 10:33:39 GMT'
2024-10-30 05:33:39,732 - INFO - Found video post: 1ge9gol
2024-10-30 05:33:39,733 - DEBUG - Starting new HTTPS connection (1): api.redgifs.com:443
2024-10-30 05:33:39,827 - DEBUG - https://api.redgifs.com:443 "GET /v2/gifs/circulardeeppinkamericanbulldog HTTP/11" 200 None
2024-10-30 05:33:39,832 - DEBUG - Starting new HTTPS connection (1): files.redgifs.com:443
2024-10-30 05:33:39,906 - DEBUG - https://files.redgifs.com:443 "GET /CircularDeeppinkAmericanbulldog.mp4 HTTP/11" 200 61415883
2024-10-30 05:33:41,959 - INFO - Successfully downloaded media to downloads/videos/1ge9gol_20241030_053339_fff8ab71.mp4
2024-10-30 05:33:41,962 - DEBUG - Using selector: KqueueSelector
2024-10-30 05:33:41,963 - INFO - Attempting to send video to Telegram - Path: downloads/videos/1ge9gol_20241030_053339_fff8ab71.mp4
2024-10-30 05:33:41,964 - DEBUG - load_ssl_context verify=True cert=None trust_env=True http2=False
2024-10-30 05:33:41,965 - DEBUG - load_verify_locations cafile='/Users/joewilson/PythonProjects/Snoogram/venv/lib/python3.12/site-packages/certifi/cacert.pem'
2024-10-30 05:33:41,974 - DEBUG - load_ssl_context verify=True cert=None trust_env=True http2=False
2024-10-30 05:33:41,974 - DEBUG - load_verify_locations cafile='/Users/joewilson/PythonProjects/Snoogram/venv/lib/python3.12/site-packages/certifi/cacert.pem'
2024-10-30 05:33:41,981 - DEBUG - Entering: get_me
2024-10-30 05:33:41,982 - DEBUG - connect_tcp.started host='api.telegram.org' port=443 local_address=None timeout=5.0 socket_options=None
2024-10-30 05:33:42,110 - DEBUG - connect_tcp.complete return_value=<httpcore._backends.anyio.AnyIOStream object at 0x108cedf10>
2024-10-30 05:33:42,110 - DEBUG - start_tls.started ssl_context=<ssl.SSLContext object at 0x1089bdcd0> server_hostname='api.telegram.org' timeout=5.0
2024-10-30 05:33:42,246 - DEBUG - start_tls.complete return_value=<httpcore._backends.anyio.AnyIOStream object at 0x108ced940>
2024-10-30 05:33:42,246 - DEBUG - send_request_headers.started request=<Request [b'POST']>
2024-10-30 05:33:42,246 - DEBUG - send_request_headers.complete
2024-10-30 05:33:42,246 - DEBUG - send_request_body.started request=<Request [b'POST']>
2024-10-30 05:33:42,246 - DEBUG - send_request_body.complete
2024-10-30 05:33:42,246 - DEBUG - receive_response_headers.started request=<Request [b'POST']>
2024-10-30 05:33:42,365 - DEBUG - receive_response_headers.complete return_value=(b'HTTP/1.1', 200, b'OK', [(b'Server', b'nginx/1.18.0'), (b'Date', b'Wed, 30 Oct 2024 10:33:42 GMT'), (b'Content-Type', b'application/json'), (b'Content-Length', b'254'), (b'Connection', b'keep-alive'), (b'Strict-Transport-Security', b'max-age=31536000; includeSubDomains; preload'), (b'Access-Control-Allow-Origin', b'*'), (b'Access-Control-Allow-Methods', b'GET, POST, OPTIONS'), (b'Access-Control-Expose-Headers', b'Content-Length,Content-Type,Date,Server,Connection')])
2024-10-30 05:33:42,366 - INFO - HTTP Request: POST https://api.telegram.org/bot7867694458:AAEFLZjWPyd1p640mHENnBt479WRYfSavWg/getMe "HTTP/1.1 200 OK"
2024-10-30 05:33:42,366 - DEBUG - receive_response_body.started request=<Request [b'POST']>
2024-10-30 05:33:42,366 - DEBUG - receive_response_body.complete
2024-10-30 05:33:42,367 - DEBUG - response_closed.started
2024-10-30 05:33:42,367 - DEBUG - response_closed.complete
2024-10-30 05:33:42,367 - DEBUG - User(api_kwargs={'can_connect_to_business': False, 'has_main_web_app': False}, can_join_groups=True, can_read_all_group_messages=False, first_name='RedditBot', id=7867694458, is_bot=True, supports_inline_queries=False, username='RedditImage_bot')
2024-10-30 05:33:42,367 - DEBUG - Exiting: get_me
2024-10-30 05:33:42,368 - DEBUG - This Bot is already initialized.
2024-10-30 05:33:42,368 - DEBUG - Entering: send_video
2024-10-30 05:33:42,383 - DEBUG - send_request_headers.started request=<Request [b'POST']>
2024-10-30 05:33:42,384 - DEBUG - send_request_headers.complete
2024-10-30 05:33:42,384 - DEBUG - send_request_body.started request=<Request [b'POST']>
2024-10-30 05:33:46,489 - DEBUG - send_request_body.complete
2024-10-30 05:33:46,490 - DEBUG - receive_response_headers.started request=<Request [b'POST']>
2024-10-30 05:33:46,490 - DEBUG - receive_response_headers.complete return_value=(b'HTTP/1.1', 413, b'Request Entity Too Large', [(b'Server', b'nginx/1.18.0'), (b'Date', b'Wed, 30 Oct 2024 10:33:42 GMT'), (b'Content-Type', b'application/json'), (b'Content-Length', b'70'), (b'Connection', b'close'), (b'Strict-Transport-Security', b'max-age=31536000; includeSubDomains; preload'), (b'Access-Control-Allow-Origin', b'*'), (b'Access-Control-Expose-Headers', b'Content-Length,Content-Type,Date,Server,Connection')])
2024-10-30 05:33:46,491 - INFO - HTTP Request: POST https://api.telegram.org/bot7867694458:AAEFLZjWPyd1p640mHENnBt479WRYfSavWg/sendVideo "HTTP/1.1 413 Request Entity Too Large"
2024-10-30 05:33:46,491 - DEBUG - receive_response_body.started request=<Request [b'POST']>
2024-10-30 05:33:46,491 - DEBUG - receive_response_body.complete
2024-10-30 05:33:46,491 - DEBUG - response_closed.started
2024-10-30 05:33:46,491 - DEBUG - response_closed.complete
2024-10-30 05:33:46,492 - DEBUG - This Bot is already shut down. Returning.
2024-10-30 05:33:46,492 - DEBUG - Shut down of Updater complete
2024-10-30 05:33:46,492 - ERROR - Failed to send video to Telegram: Request Entity Too Large (413)
2024-10-30 05:33:46,492 - ERROR - Error sending video post 1ge9gol: Request Entity Too Large (413)
2024-10-30 05:33:46,492 - INFO - Checking post: 1ge98kx - Score: 256 - URL: https://www.redgifs.com/watch/frontspecificspittlebug
2024-10-30 05:33:46,493 - INFO - Post 1ge98kx is a duplicate, skipping
2024-10-30 05:33:46,493 - INFO - Checking post: 1geqscs - Score: 237 - URL: https://www.redgifs.com/watch/previousweequeensnake
2024-10-30 05:33:46,494 - INFO - Request URL: 'https://cosmossnoogram-centralus.documents.azure.com:443/dbs/ToDoList/colls/sent_posts/docs/'
Request method: 'POST'
Request headers:
    'Cache-Control': 'no-cache'
    'x-ms-version': 'REDACTED'
    'x-ms-documentdb-query-iscontinuationexpected': 'REDACTED'
    'x-ms-consistency-level': 'REDACTED'
    'x-ms-documentdb-isquery': 'REDACTED'
    'Content-Type': 'application/query+json'
    'x-ms-session-token': 'REDACTED'
    'x-ms-documentdb-query-enablecrosspartition': 'REDACTED'
    'x-ms-date': 'REDACTED'
    'authorization': 'REDACTED'
    'Accept': 'application/json'
    'x-ms-cosmos-correlated-activityid': 'REDACTED'
    'Content-Length': '107'
    'User-Agent': 'azsdk-python-cosmos/4.5.1 Python/3.12.4 (macOS-15.0.1-arm64-arm-64bit)'
A body is sent with the request
2024-10-30 05:33:46,564 - DEBUG - https://cosmossnoogram-centralus.documents.azure.com:443 "POST /dbs/ToDoList/colls/sent_posts/docs/ HTTP/11" 200 None
2024-10-30 05:33:46,564 - INFO - Response status: 200
Response headers:
    'Cache-Control': 'no-store, no-cache'
    'Pragma': 'no-cache'
    'Transfer-Encoding': 'chunked'
    'Content-Type': 'application/json'
    'Server': 'Microsoft-HTTPAPI/2.0'
    'Strict-Transport-Security': 'REDACTED'
    'x-ms-activity-id': 'REDACTED'
    'x-ms-last-state-change-utc': 'REDACTED'
    'x-ms-resource-quota': 'REDACTED'
    'x-ms-resource-usage': 'REDACTED'
    'x-ms-schemaversion': 'REDACTED'
    'lsn': 'REDACTED'
    'x-ms-item-count': 'REDACTED'
    'x-ms-request-charge': 'REDACTED'
    'x-ms-alt-content-path': 'REDACTED'
    'x-ms-content-path': 'REDACTED'
    'x-ms-documentdb-partitionkeyrangeid': 'REDACTED'
    'x-ms-xp-role': 'REDACTED'
    'x-ms-cosmos-query-execution-info': 'REDACTED'
    'x-ms-global-Committed-lsn': 'REDACTED'
    'x-ms-number-of-read-regions': 'REDACTED'
    'x-ms-transport-request-id': 'REDACTED'
    'x-ms-cosmos-llsn': 'REDACTED'
    'x-ms-session-token': 'REDACTED'
    'x-ms-request-duration-ms': 'REDACTED'
    'x-ms-serviceversion': 'REDACTED'
    'x-ms-cosmos-is-partition-key-delete-pending': 'REDACTED'
    'x-ms-cosmos-physical-partition-id': 'REDACTED'
    'x-ms-cosmos-internal-partition-id': 'REDACTED'
    'x-ms-gatewayversion': 'REDACTED'
    'Date': 'Wed, 30 Oct 2024 10:33:45 GMT'
2024-10-30 05:33:46,565 - INFO - Found video post: 1geqscs
2024-10-30 05:33:46,566 - DEBUG - Starting new HTTPS connection (1): api.redgifs.com:443
2024-10-30 05:33:46,665 - DEBUG - https://api.redgifs.com:443 "GET /v2/gifs/previousweequeensnake HTTP/11" 200 None
2024-10-30 05:33:46,670 - DEBUG - Starting new HTTPS connection (1): files.redgifs.com:443
2024-10-30 05:33:46,745 - DEBUG - https://files.redgifs.com:443 "GET /PreviousWeeQueensnake.mp4 HTTP/11" 200 50070206
2024-10-30 05:33:47,841 - INFO - Successfully downloaded media to downloads/videos/1geqscs_20241030_053346_2fd81a4e.mp4
2024-10-30 05:33:47,842 - DEBUG - Using selector: KqueueSelector
2024-10-30 05:33:47,843 - INFO - Attempting to send video to Telegram - Path: downloads/videos/1geqscs_20241030_053346_2fd81a4e.mp4
2024-10-30 05:33:47,843 - DEBUG - load_ssl_context verify=True cert=None trust_env=True http2=False
2024-10-30 05:33:47,844 - DEBUG - load_verify_locations cafile='/Users/joewilson/PythonProjects/Snoogram/venv/lib/python3.12/site-packages/certifi/cacert.pem'
2024-10-30 05:33:47,852 - DEBUG - load_ssl_context verify=True cert=None trust_env=True http2=False
2024-10-30 05:33:47,852 - DEBUG - load_verify_locations cafile='/Users/joewilson/PythonProjects/Snoogram/venv/lib/python3.12/site-packages/certifi/cacert.pem'
2024-10-30 05:33:47,859 - DEBUG - Entering: get_me
2024-10-30 05:33:47,860 - DEBUG - connect_tcp.started host='api.telegram.org' port=443 local_address=None timeout=5.0 socket_options=None
2024-10-30 05:33:47,983 - DEBUG - connect_tcp.complete return_value=<httpcore._backends.anyio.AnyIOStream object at 0x108eaeb10>
2024-10-30 05:33:47,983 - DEBUG - start_tls.started ssl_context=<ssl.SSLContext object at 0x108cb7750> server_hostname='api.telegram.org' timeout=5.0
2024-10-30 05:33:48,115 - DEBUG - start_tls.complete return_value=<httpcore._backends.anyio.AnyIOStream object at 0x108cec8c0>
2024-10-30 05:33:48,116 - DEBUG - send_request_headers.started request=<Request [b'POST']>
2024-10-30 05:33:48,116 - DEBUG - send_request_headers.complete
2024-10-30 05:33:48,116 - DEBUG - send_request_body.started request=<Request [b'POST']>
2024-10-30 05:33:48,116 - DEBUG - send_request_body.complete
2024-10-30 05:33:48,116 - DEBUG - receive_response_headers.started request=<Request [b'POST']>
2024-10-30 05:33:48,233 - DEBUG - receive_response_headers.complete return_value=(b'HTTP/1.1', 200, b'OK', [(b'Server', b'nginx/1.18.0'), (b'Date', b'Wed, 30 Oct 2024 10:33:48 GMT'), (b'Content-Type', b'application/json'), (b'Content-Length', b'254'), (b'Connection', b'keep-alive'), (b'Strict-Transport-Security', b'max-age=31536000; includeSubDomains; preload'), (b'Access-Control-Allow-Origin', b'*'), (b'Access-Control-Allow-Methods', b'GET, POST, OPTIONS'), (b'Access-Control-Expose-Headers', b'Content-Length,Content-Type,Date,Server,Connection')])
2024-10-30 05:33:48,234 - INFO - HTTP Request: POST https://api.telegram.org/bot7867694458:AAEFLZjWPyd1p640mHENnBt479WRYfSavWg/getMe "HTTP/1.1 200 OK"
2024-10-30 05:33:48,235 - DEBUG - receive_response_body.started request=<Request [b'POST']>
2024-10-30 05:33:48,235 - DEBUG - receive_response_body.complete
2024-10-30 05:33:48,235 - DEBUG - response_closed.started
2024-10-30 05:33:48,235 - DEBUG - response_closed.complete
2024-10-30 05:33:48,236 - DEBUG - User(api_kwargs={'can_connect_to_business': False, 'has_main_web_app': False}, can_join_groups=True, can_read_all_group_messages=False, first_name='RedditBot', id=7867694458, is_bot=True, supports_inline_queries=False, username='RedditImage_bot')
2024-10-30 05:33:48,236 - DEBUG - Exiting: get_me
2024-10-30 05:33:48,236 - DEBUG - This Bot is already initialized.
2024-10-30 05:33:48,236 - DEBUG - Entering: send_video
2024-10-30 05:33:48,253 - DEBUG - send_request_headers.started request=<Request [b'POST']>
2024-10-30 05:33:48,253 - DEBUG - send_request_headers.complete
2024-10-30 05:33:48,253 - DEBUG - send_request_body.started request=<Request [b'POST']>
2024-10-30 05:33:52,193 - DEBUG - send_request_body.complete
2024-10-30 05:33:52,194 - DEBUG - receive_response_headers.started request=<Request [b'POST']>
2024-10-30 05:33:55,004 - DEBUG - receive_response_headers.complete return_value=(b'HTTP/1.1', 200, b'OK', [(b'Server', b'nginx/1.18.0'), (b'Date', b'Wed, 30 Oct 2024 10:33:54 GMT'), (b'Content-Type', b'application/json'), (b'Content-Length', b'602'), (b'Connection', b'keep-alive'), (b'Strict-Transport-Security', b'max-age=31536000; includeSubDomains; preload'), (b'Access-Control-Allow-Origin', b'*'), (b'Access-Control-Allow-Methods', b'GET, POST, OPTIONS'), (b'Access-Control-Expose-Headers', b'Content-Length,Content-Type,Date,Server,Connection')])
2024-10-30 05:33:55,005 - INFO - HTTP Request: POST https://api.telegram.org/bot7867694458:AAEFLZjWPyd1p640mHENnBt479WRYfSavWg/sendVideo "HTTP/1.1 200 OK"
2024-10-30 05:33:55,005 - DEBUG - receive_response_body.started request=<Request [b'POST']>
2024-10-30 05:33:55,005 - DEBUG - receive_response_body.complete
2024-10-30 05:33:55,005 - DEBUG - response_closed.started
2024-10-30 05:33:55,005 - DEBUG - response_closed.complete
2024-10-30 05:33:55,007 - DEBUG - Message(caption='From r/girlsfinishingthejob: I love when he covers my titties with his hot cum ðŸ¥°\nUpvotes: 237', channel_chat_created=False, chat=Chat(id=-1002490380283, title='Reddit_Pic_Stream', type=<ChatType.CHANNEL>), date=datetime.datetime(2024, 10, 30, 10, 33, 54, tzinfo=<UTC>), delete_chat_photo=False, group_chat_created=False, message_id=262, sender_chat=Chat(id=-1002490380283, title='Reddit_Pic_Stream', type=<ChatType.CHANNEL>), supergroup_chat_created=False, video=Video(duration=0, file_id='BAACAgEAAyEGAASUcC_7AAIBBmciC5LZ9YVnk4Gz30m9AAH9rNihsgACwAQAAhkQEUWEFmERuudyaDYE', file_name='1geqscs_20241030_053346_2fd81a4e.mp4', file_size=50070206, file_unique_id='AgADwAQAAhkQEUU', height=320, mime_type='video/mp4', width=320))
2024-10-30 05:33:55,007 - DEBUG - Exiting: send_video
2024-10-30 05:33:55,007 - DEBUG - close.started
2024-10-30 05:33:55,007 - DEBUG - close.complete
2024-10-30 05:33:55,007 - DEBUG - This Bot is already shut down. Returning.
2024-10-30 05:33:55,007 - DEBUG - Shut down of Updater complete
2024-10-30 05:33:55,007 - INFO - Successfully sent video to Telegram
2024-10-30 05:33:55,012 - ERROR - Error processing subreddit girlsfinishingthejob: (sqlite3.OperationalError) attempt to write a readonly database
[SQL: INSERT INTO sent_post (post_id, subreddit_name, sent_at) VALUES (?, ?, ?)]
[parameters: ('1geqscs', 'girlsfinishingthejob', '2024-10-30 10:33:55.010969')]
(Background on this error at: https://sqlalche.me/e/20/e3q8)
2024-10-30 05:33:55,014 - ERROR - Job "send_to_telegram (trigger: interval[0:01:00], next run at: 2024-10-30 05:34:16 CDT)" raised an exception
Traceback (most recent call last):
  File "/Users/joewilson/PythonProjects/Snoogram/venv/lib/python3.12/site-packages/sqlalchemy/engine/base.py", line 1967, in _exec_single_context
    self.dialect.do_execute(
  File "/Users/joewilson/PythonProjects/Snoogram/venv/lib/python3.12/site-packages/sqlalchemy/engine/default.py", line 941, in do_execute
    cursor.execute(statement, parameters)
sqlite3.OperationalError: attempt to write a readonly database

The above exception was the direct cause of the following exception:

Traceback (most recent call last):
  File "/Users/joewilson/PythonProjects/Snoogram/venv/lib/python3.12/site-packages/apscheduler/executors/base.py", line 125, in run_job
    retval = job.func(*job.args, **job.kwargs)
             ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/Users/joewilson/PythonProjects/Snoogram/backend/app.py", line 265, in send_to_telegram
    # Update last_check in Cosmos DB
                ^^^^^^^^^^^^^^^^^^^^^
  File "/Users/joewilson/PythonProjects/Snoogram/backend/db_operations.py", line 100, in add_sent_post
  File "/Users/joewilson/PythonProjects/Snoogram/venv/lib/python3.12/site-packages/sqlalchemy/orm/scoping.py", line 597, in commit
    return self._proxied.commit()
           ^^^^^^^^^^^^^^^^^^^^^^
  File "/Users/joewilson/PythonProjects/Snoogram/venv/lib/python3.12/site-packages/sqlalchemy/orm/session.py", line 2028, in commit
    trans.commit(_to_root=True)
  File "<string>", line 2, in commit
  File "/Users/joewilson/PythonProjects/Snoogram/venv/lib/python3.12/site-packages/sqlalchemy/orm/state_changes.py", line 139, in _go
    ret_value = fn(self, *arg, **kw)
                ^^^^^^^^^^^^^^^^^^^^
  File "/Users/joewilson/PythonProjects/Snoogram/venv/lib/python3.12/site-packages/sqlalchemy/orm/session.py", line 1313, in commit
    self._prepare_impl()
  File "<string>", line 2, in _prepare_impl
  File "/Users/joewilson/PythonProjects/Snoogram/venv/lib/python3.12/site-packages/sqlalchemy/orm/state_changes.py", line 139, in _go
    ret_value = fn(self, *arg, **kw)
                ^^^^^^^^^^^^^^^^^^^^
  File "/Users/joewilson/PythonProjects/Snoogram/venv/lib/python3.12/site-packages/sqlalchemy/orm/session.py", line 1288, in _prepare_impl
    self.session.flush()
  File "/Users/joewilson/PythonProjects/Snoogram/venv/lib/python3.12/site-packages/sqlalchemy/orm/session.py", line 4352, in flush
    self._flush(objects)
  File "/Users/joewilson/PythonProjects/Snoogram/venv/lib/python3.12/site-packages/sqlalchemy/orm/session.py", line 4487, in _flush
    with util.safe_reraise():
  File "/Users/joewilson/PythonProjects/Snoogram/venv/lib/python3.12/site-packages/sqlalchemy/util/langhelpers.py", line 146, in __exit__
    raise exc_value.with_traceback(exc_tb)
  File "/Users/joewilson/PythonProjects/Snoogram/venv/lib/python3.12/site-packages/sqlalchemy/orm/session.py", line 4448, in _flush
    flush_context.execute()
  File "/Users/joewilson/PythonProjects/Snoogram/venv/lib/python3.12/site-packages/sqlalchemy/orm/unitofwork.py", line 466, in execute
    rec.execute(self)
  File "/Users/joewilson/PythonProjects/Snoogram/venv/lib/python3.12/site-packages/sqlalchemy/orm/unitofwork.py", line 642, in execute
    util.preloaded.orm_persistence.save_obj(
  File "/Users/joewilson/PythonProjects/Snoogram/venv/lib/python3.12/site-packages/sqlalchemy/orm/persistence.py", line 93, in save_obj
    _emit_insert_statements(
  File "/Users/joewilson/PythonProjects/Snoogram/venv/lib/python3.12/site-packages/sqlalchemy/orm/persistence.py", line 1233, in _emit_insert_statements
    result = connection.execute(
             ^^^^^^^^^^^^^^^^^^^
  File "/Users/joewilson/PythonProjects/Snoogram/venv/lib/python3.12/site-packages/sqlalchemy/engine/base.py", line 1418, in execute
    return meth(
           ^^^^^
  File "/Users/joewilson/PythonProjects/Snoogram/venv/lib/python3.12/site-packages/sqlalchemy/sql/elements.py", line 515, in _execute_on_connection
    return connection._execute_clauseelement(
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/Users/joewilson/PythonProjects/Snoogram/venv/lib/python3.12/site-packages/sqlalchemy/engine/base.py", line 1640, in _execute_clauseelement
    ret = self._execute_context(
          ^^^^^^^^^^^^^^^^^^^^^^
  File "/Users/joewilson/PythonProjects/Snoogram/venv/lib/python3.12/site-packages/sqlalchemy/engine/base.py", line 1846, in _execute_context
    return self._exec_single_context(
           ^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/Users/joewilson/PythonProjects/Snoogram/venv/lib/python3.12/site-packages/sqlalchemy/engine/base.py", line 1986, in _exec_single_context
    self._handle_dbapi_exception(
  File "/Users/joewilson/PythonProjects/Snoogram/venv/lib/python3.12/site-packages/sqlalchemy/engine/base.py", line 2355, in _handle_dbapi_exception
    raise sqlalchemy_exception.with_traceback(exc_info[2]) from e
  File "/Users/joewilson/PythonProjects/Snoogram/venv/lib/python3.12/site-packages/sqlalchemy/engine/base.py", line 1967, in _exec_single_context
    self.dialect.do_execute(
  File "/Users/joewilson/PythonProjects/Snoogram/venv/lib/python3.12/site-packages/sqlalchemy/engine/default.py", line 941, in do_execute
    cursor.execute(statement, parameters)
sqlalchemy.exc.OperationalError: (sqlite3.OperationalError) attempt to write a readonly database
[SQL: INSERT INTO sent_post (post_id, subreddit_name, sent_at) VALUES (?, ?, ?)]
[parameters: ('1geqscs', 'girlsfinishingthejob', '2024-10-30 10:33:55.010969')]
(Background on this error at: https://sqlalche.me/e/20/e3q8)
2024-10-30 05:34:16,975 - DEBUG - Looking for jobs to run
2024-10-30 05:34:16,977 - DEBUG - Next wakeup is due at 2024-10-30 05:35:16.969826-05:00 (in 59.992600 seconds)
2024-10-30 05:34:16,977 - INFO - Running job "send_to_telegram (trigger: interval[0:01:00], next run at: 2024-10-30 05:35:16 CDT)" (scheduled at 2024-10-30 05:34:16.969826-05:00)
2024-10-30 05:34:16,977 - INFO - Running job "send_to_telegram (trigger: interval[0:01:00], next run at: 2024-10-30 05:35:16 CDT)" (scheduled at 2024-10-30 05:34:16.970029-05:00)
2024-10-30 05:34:16,978 - INFO - Processing subreddit: girlsfinishingthejob
2024-10-30 05:34:16,978 - INFO - Processing subreddit: wifebutt
2024-10-30 05:34:16,978 - INFO - Fetching top posts of the day
2024-10-30 05:34:16,979 - INFO - Fetching top posts of the month
2024-10-30 05:34:16,980 - DEBUG - Fetching: GET https://oauth.reddit.com/r/girlsfinishingthejob/top at 1730284456.980166
2024-10-30 05:34:16,980 - DEBUG - Fetching: GET https://oauth.reddit.com/r/wifebutt/top at 1730284456.9804978
2024-10-30 05:34:16,980 - DEBUG - Data: None
2024-10-30 05:34:16,980 - DEBUG - Data: None
2024-10-30 05:34:16,980 - DEBUG - Params: {'limit': 50, 'raw_json': 1, 't': 'day'}
2024-10-30 05:34:16,981 - DEBUG - Params: {'limit': 50, 'raw_json': 1, 't': 'month'}
2024-10-30 05:34:17,338 - DEBUG - https://oauth.reddit.com:443 "GET /r/girlsfinishingthejob/top?t=day&limit=50&raw_json=1 HTTP/11" 200 24111
2024-10-30 05:34:17,349 - DEBUG - Response: 200 (24111 bytes) (rst-0:rem-149.0:used-1 ratelimit) at 1730284457.349499
2024-10-30 05:34:17,449 - INFO - Checking post: 1gelyz1 - Score: 7112 - URL: https://www.redgifs.com/watch/uttersvelteamphibian
2024-10-30 05:34:17,455 - INFO - Request URL: 'https://cosmossnoogram-centralus.documents.azure.com:443/dbs/ToDoList/colls/sent_posts/docs/'
Request method: 'POST'
Request headers:
    'Cache-Control': 'no-cache'
    'x-ms-version': 'REDACTED'
    'x-ms-documentdb-query-iscontinuationexpected': 'REDACTED'
    'x-ms-consistency-level': 'REDACTED'
    'x-ms-documentdb-isquery': 'REDACTED'
    'Content-Type': 'application/query+json'
    'x-ms-session-token': 'REDACTED'
    'x-ms-documentdb-query-enablecrosspartition': 'REDACTED'
    'x-ms-date': 'REDACTED'
    'authorization': 'REDACTED'
    'Accept': 'application/json'
    'x-ms-cosmos-correlated-activityid': 'REDACTED'
    'Content-Length': '107'
    'User-Agent': 'azsdk-python-cosmos/4.5.1 Python/3.12.4 (macOS-15.0.1-arm64-arm-64bit)'
A body is sent with the request
2024-10-30 05:34:17,485 - DEBUG - https://cosmossnoogram-centralus.documents.azure.com:443 "POST /dbs/ToDoList/colls/sent_posts/docs/ HTTP/11" 200 None
2024-10-30 05:34:17,485 - INFO - Response status: 200
Response headers:
    'Cache-Control': 'no-store, no-cache'
    'Pragma': 'no-cache'
    'Transfer-Encoding': 'chunked'
    'Content-Type': 'application/json'
    'Server': 'Microsoft-HTTPAPI/2.0'
    'Strict-Transport-Security': 'REDACTED'
    'x-ms-activity-id': 'REDACTED'
    'x-ms-last-state-change-utc': 'REDACTED'
    'x-ms-resource-quota': 'REDACTED'
    'x-ms-resource-usage': 'REDACTED'
    'x-ms-schemaversion': 'REDACTED'
    'lsn': 'REDACTED'
    'x-ms-item-count': 'REDACTED'
    'x-ms-request-charge': 'REDACTED'
    'x-ms-alt-content-path': 'REDACTED'
    'x-ms-content-path': 'REDACTED'
    'x-ms-documentdb-partitionkeyrangeid': 'REDACTED'
    'x-ms-xp-role': 'REDACTED'
    'x-ms-cosmos-query-execution-info': 'REDACTED'
    'x-ms-global-Committed-lsn': 'REDACTED'
    'x-ms-number-of-read-regions': 'REDACTED'
    'x-ms-transport-request-id': 'REDACTED'
    'x-ms-cosmos-llsn': 'REDACTED'
    'x-ms-session-token': 'REDACTED'
    'x-ms-request-duration-ms': 'REDACTED'
    'x-ms-serviceversion': 'REDACTED'
    'x-ms-cosmos-is-partition-key-delete-pending': 'REDACTED'
    'x-ms-cosmos-physical-partition-id': 'REDACTED'
    'x-ms-cosmos-internal-partition-id': 'REDACTED'
    'x-ms-gatewayversion': 'REDACTED'
    'Date': 'Wed, 30 Oct 2024 10:34:16 GMT'
2024-10-30 05:34:17,485 - INFO - Found video post: 1gelyz1
2024-10-30 05:34:17,486 - DEBUG - Starting new HTTPS connection (1): api.redgifs.com:443
2024-10-30 05:34:17,581 - DEBUG - https://api.redgifs.com:443 "GET /v2/gifs/uttersvelteamphibian HTTP/11" 200 None
2024-10-30 05:34:17,585 - DEBUG - Starting new HTTPS connection (1): files.redgifs.com:443
2024-10-30 05:34:17,656 - DEBUG - https://files.redgifs.com:443 "GET /UtterSvelteAmphibian.mp4 HTTP/11" 200 42980012
2024-10-30 05:34:17,784 - DEBUG - https://oauth.reddit.com:443 "GET /r/wifebutt/top?t=month&limit=50&raw_json=1 HTTP/11" 200 49227
2024-10-30 05:34:17,821 - DEBUG - Response: 200 (49227 bytes) (rst-0:rem-148.0:used-2 ratelimit) at 1730284457.821069
2024-10-30 05:34:17,829 - INFO - Checking post: 1g9w053 - Score: 5348 - URL: https://www.reddit.com/gallery/1g9w053
2024-10-30 05:34:17,830 - INFO - Request URL: 'https://cosmossnoogram-centralus.documents.azure.com:443/dbs/ToDoList/colls/sent_posts/docs/'
Request method: 'POST'
Request headers:
    'Cache-Control': 'no-cache'
    'x-ms-version': 'REDACTED'
    'x-ms-documentdb-query-iscontinuationexpected': 'REDACTED'
    'x-ms-consistency-level': 'REDACTED'
    'x-ms-documentdb-isquery': 'REDACTED'
    'Content-Type': 'application/query+json'
    'x-ms-session-token': 'REDACTED'
    'x-ms-documentdb-query-enablecrosspartition': 'REDACTED'
    'x-ms-date': 'REDACTED'
    'authorization': 'REDACTED'
    'Accept': 'application/json'
    'x-ms-cosmos-correlated-activityid': 'REDACTED'
    'Content-Length': '107'
    'User-Agent': 'azsdk-python-cosmos/4.5.1 Python/3.12.4 (macOS-15.0.1-arm64-arm-64bit)'
A body is sent with the request
2024-10-30 05:34:17,872 - DEBUG - https://cosmossnoogram-centralus.documents.azure.com:443 "POST /dbs/ToDoList/colls/sent_posts/docs/ HTTP/11" 200 None
2024-10-30 05:34:17,873 - INFO - Response status: 200
Response headers:
    'Cache-Control': 'no-store, no-cache'
    'Pragma': 'no-cache'
    'Transfer-Encoding': 'chunked'
    'Content-Type': 'application/json'
    'Server': 'Microsoft-HTTPAPI/2.0'
    'Strict-Transport-Security': 'REDACTED'
    'x-ms-activity-id': 'REDACTED'
    'x-ms-last-state-change-utc': 'REDACTED'
    'x-ms-resource-quota': 'REDACTED'
    'x-ms-resource-usage': 'REDACTED'
    'x-ms-schemaversion': 'REDACTED'
    'lsn': 'REDACTED'
    'x-ms-item-count': 'REDACTED'
    'x-ms-request-charge': 'REDACTED'
    'x-ms-alt-content-path': 'REDACTED'
    'x-ms-content-path': 'REDACTED'
    'x-ms-documentdb-partitionkeyrangeid': 'REDACTED'
    'x-ms-xp-role': 'REDACTED'
    'x-ms-cosmos-query-execution-info': 'REDACTED'
    'x-ms-global-Committed-lsn': 'REDACTED'
    'x-ms-number-of-read-regions': 'REDACTED'
    'x-ms-transport-request-id': 'REDACTED'
    'x-ms-cosmos-llsn': 'REDACTED'
    'x-ms-session-token': 'REDACTED'
    'x-ms-request-duration-ms': 'REDACTED'
    'x-ms-serviceversion': 'REDACTED'
    'x-ms-cosmos-is-partition-key-delete-pending': 'REDACTED'
    'x-ms-cosmos-physical-partition-id': 'REDACTED'
    'x-ms-cosmos-internal-partition-id': 'REDACTED'
    'x-ms-gatewayversion': 'REDACTED'
    'Date': 'Wed, 30 Oct 2024 10:34:17 GMT'
2024-10-30 05:34:17,873 - INFO - Post 1g9w053 is not an image or video post, skipping
2024-10-30 05:34:17,873 - INFO - Checking post: 1fv4cfc - Score: 4572 - URL: https://www.reddit.com/gallery/1fv4cfc
2024-10-30 05:34:17,874 - INFO - Request URL: 'https://cosmossnoogram-centralus.documents.azure.com:443/dbs/ToDoList/colls/sent_posts/docs/'
Request method: 'POST'
Request headers:
    'Cache-Control': 'no-cache'
    'x-ms-version': 'REDACTED'
    'x-ms-documentdb-query-iscontinuationexpected': 'REDACTED'
    'x-ms-consistency-level': 'REDACTED'
    'x-ms-documentdb-isquery': 'REDACTED'
    'Content-Type': 'application/query+json'
    'x-ms-session-token': 'REDACTED'
    'x-ms-documentdb-query-enablecrosspartition': 'REDACTED'
    'x-ms-date': 'REDACTED'
    'authorization': 'REDACTED'
    'Accept': 'application/json'
    'x-ms-cosmos-correlated-activityid': 'REDACTED'
    'Content-Length': '107'
    'User-Agent': 'azsdk-python-cosmos/4.5.1 Python/3.12.4 (macOS-15.0.1-arm64-arm-64bit)'
A body is sent with the request
2024-10-30 05:34:17,920 - DEBUG - https://cosmossnoogram-centralus.documents.azure.com:443 "POST /dbs/ToDoList/colls/sent_posts/docs/ HTTP/11" 200 None
2024-10-30 05:34:17,920 - INFO - Response status: 200
Response headers:
    'Cache-Control': 'no-store, no-cache'
    'Pragma': 'no-cache'
    'Transfer-Encoding': 'chunked'
    'Content-Type': 'application/json'
    'Server': 'Microsoft-HTTPAPI/2.0'
    'Strict-Transport-Security': 'REDACTED'
    'x-ms-activity-id': 'REDACTED'
    'x-ms-last-state-change-utc': 'REDACTED'
    'x-ms-resource-quota': 'REDACTED'
    'x-ms-resource-usage': 'REDACTED'
    'x-ms-schemaversion': 'REDACTED'
    'lsn': 'REDACTED'
    'x-ms-item-count': 'REDACTED'
    'x-ms-request-charge': 'REDACTED'
    'x-ms-alt-content-path': 'REDACTED'
    'x-ms-content-path': 'REDACTED'
    'x-ms-documentdb-partitionkeyrangeid': 'REDACTED'
    'x-ms-xp-role': 'REDACTED'
    'x-ms-cosmos-query-execution-info': 'REDACTED'
    'x-ms-global-Committed-lsn': 'REDACTED'
    'x-ms-number-of-read-regions': 'REDACTED'
    'x-ms-transport-request-id': 'REDACTED'
    'x-ms-cosmos-llsn': 'REDACTED'
    'x-ms-session-token': 'REDACTED'
    'x-ms-request-duration-ms': 'REDACTED'
    'x-ms-serviceversion': 'REDACTED'
    'x-ms-cosmos-is-partition-key-delete-pending': 'REDACTED'
    'x-ms-cosmos-physical-partition-id': 'REDACTED'
    'x-ms-cosmos-internal-partition-id': 'REDACTED'
    'x-ms-gatewayversion': 'REDACTED'
    'Date': 'Wed, 30 Oct 2024 10:34:17 GMT'
2024-10-30 05:34:17,920 - INFO - Post 1fv4cfc is not an image or video post, skipping
2024-10-30 05:34:17,920 - INFO - Checking post: 1ganrp0 - Score: 4208 - URL: https://i.redd.it/ezatz8645lwd1.jpeg
2024-10-30 05:34:17,921 - INFO - Request URL: 'https://cosmossnoogram-centralus.documents.azure.com:443/dbs/ToDoList/colls/sent_posts/docs/'
Request method: 'POST'
Request headers:
    'Cache-Control': 'no-cache'
    'x-ms-version': 'REDACTED'
    'x-ms-documentdb-query-iscontinuationexpected': 'REDACTED'
    'x-ms-consistency-level': 'REDACTED'
    'x-ms-documentdb-isquery': 'REDACTED'
    'Content-Type': 'application/query+json'
    'x-ms-session-token': 'REDACTED'
    'x-ms-documentdb-query-enablecrosspartition': 'REDACTED'
    'x-ms-date': 'REDACTED'
    'authorization': 'REDACTED'
    'Accept': 'application/json'
    'x-ms-cosmos-correlated-activityid': 'REDACTED'
    'Content-Length': '107'
    'User-Agent': 'azsdk-python-cosmos/4.5.1 Python/3.12.4 (macOS-15.0.1-arm64-arm-64bit)'
A body is sent with the request
2024-10-30 05:34:17,957 - DEBUG - https://cosmossnoogram-centralus.documents.azure.com:443 "POST /dbs/ToDoList/colls/sent_posts/docs/ HTTP/11" 200 None
2024-10-30 05:34:17,957 - INFO - Response status: 200
Response headers:
    'Cache-Control': 'no-store, no-cache'
    'Pragma': 'no-cache'
    'Transfer-Encoding': 'chunked'
    'Content-Type': 'application/json'
    'Server': 'Microsoft-HTTPAPI/2.0'
    'Strict-Transport-Security': 'REDACTED'
    'x-ms-activity-id': 'REDACTED'
    'x-ms-last-state-change-utc': 'REDACTED'
    'x-ms-resource-quota': 'REDACTED'
    'x-ms-resource-usage': 'REDACTED'
    'x-ms-schemaversion': 'REDACTED'
    'lsn': 'REDACTED'
    'x-ms-item-count': 'REDACTED'
    'x-ms-request-charge': 'REDACTED'
    'x-ms-alt-content-path': 'REDACTED'
    'x-ms-content-path': 'REDACTED'
    'x-ms-documentdb-partitionkeyrangeid': 'REDACTED'
    'x-ms-xp-role': 'REDACTED'
    'x-ms-cosmos-query-execution-info': 'REDACTED'
    'x-ms-global-Committed-lsn': 'REDACTED'
    'x-ms-number-of-read-regions': 'REDACTED'
    'x-ms-transport-request-id': 'REDACTED'
    'x-ms-cosmos-llsn': 'REDACTED'
    'x-ms-session-token': 'REDACTED'
    'x-ms-request-duration-ms': 'REDACTED'
    'x-ms-serviceversion': 'REDACTED'
    'x-ms-cosmos-is-partition-key-delete-pending': 'REDACTED'
    'x-ms-cosmos-physical-partition-id': 'REDACTED'
    'x-ms-cosmos-internal-partition-id': 'REDACTED'
    'x-ms-gatewayversion': 'REDACTED'
    'Date': 'Wed, 30 Oct 2024 10:34:17 GMT'
2024-10-30 05:34:17,958 - INFO - Post 1ganrp0 is a duplicate, skipping
2024-10-30 05:34:17,958 - INFO - Checking post: 1gdrcjt - Score: 4066 - URL: https://www.redgifs.com/watch/unrealisticdefinitebarebirdbat
2024-10-30 05:34:17,958 - INFO - Post 1gdrcjt is a duplicate, skipping
2024-10-30 05:34:17,958 - INFO - Checking post: 1g30sx1 - Score: 3957 - URL: https://www.redgifs.com/watch/hardwarlikesunbittern
2024-10-30 05:34:17,959 - INFO - Post 1g30sx1 is a duplicate, skipping
2024-10-30 05:34:17,959 - INFO - Checking post: 1fs7839 - Score: 3855 - URL: https://www.reddit.com/gallery/1fs7839
2024-10-30 05:34:17,959 - INFO - Request URL: 'https://cosmossnoogram-centralus.documents.azure.com:443/dbs/ToDoList/colls/sent_posts/docs/'
Request method: 'POST'
Request headers:
    'Cache-Control': 'no-cache'
    'x-ms-version': 'REDACTED'
    'x-ms-documentdb-query-iscontinuationexpected': 'REDACTED'
    'x-ms-consistency-level': 'REDACTED'
    'x-ms-documentdb-isquery': 'REDACTED'
    'Content-Type': 'application/query+json'
    'x-ms-session-token': 'REDACTED'
    'x-ms-documentdb-query-enablecrosspartition': 'REDACTED'
    'x-ms-date': 'REDACTED'
    'authorization': 'REDACTED'
    'Accept': 'application/json'
    'x-ms-cosmos-correlated-activityid': 'REDACTED'
    'Content-Length': '107'
    'User-Agent': 'azsdk-python-cosmos/4.5.1 Python/3.12.4 (macOS-15.0.1-arm64-arm-64bit)'
A body is sent with the request
2024-10-30 05:34:17,995 - DEBUG - https://cosmossnoogram-centralus.documents.azure.com:443 "POST /dbs/ToDoList/colls/sent_posts/docs/ HTTP/11" 200 None
2024-10-30 05:34:17,996 - INFO - Response status: 200
Response headers:
    'Cache-Control': 'no-store, no-cache'
    'Pragma': 'no-cache'
    'Transfer-Encoding': 'chunked'
    'Content-Type': 'application/json'
    'Server': 'Microsoft-HTTPAPI/2.0'
    'Strict-Transport-Security': 'REDACTED'
    'x-ms-activity-id': 'REDACTED'
    'x-ms-last-state-change-utc': 'REDACTED'
    'x-ms-resource-quota': 'REDACTED'
    'x-ms-resource-usage': 'REDACTED'
    'x-ms-schemaversion': 'REDACTED'
    'lsn': 'REDACTED'
    'x-ms-item-count': 'REDACTED'
    'x-ms-request-charge': 'REDACTED'
    'x-ms-alt-content-path': 'REDACTED'
    'x-ms-content-path': 'REDACTED'
    'x-ms-documentdb-partitionkeyrangeid': 'REDACTED'
    'x-ms-xp-role': 'REDACTED'
    'x-ms-cosmos-query-execution-info': 'REDACTED'
    'x-ms-global-Committed-lsn': 'REDACTED'
    'x-ms-number-of-read-regions': 'REDACTED'
    'x-ms-transport-request-id': 'REDACTED'
    'x-ms-cosmos-llsn': 'REDACTED'
    'x-ms-session-token': 'REDACTED'
    'x-ms-request-duration-ms': 'REDACTED'
    'x-ms-serviceversion': 'REDACTED'
    'x-ms-cosmos-is-partition-key-delete-pending': 'REDACTED'
    'x-ms-cosmos-physical-partition-id': 'REDACTED'
    'x-ms-cosmos-internal-partition-id': 'REDACTED'
    'x-ms-gatewayversion': 'REDACTED'
    'Date': 'Wed, 30 Oct 2024 10:34:17 GMT'
2024-10-30 05:34:17,996 - INFO - Post 1fs7839 is not an image or video post, skipping
2024-10-30 05:34:17,996 - INFO - Checking post: 1g2rse9 - Score: 3770 - URL: https://i.redd.it/gzxs1aeshjud1.png
2024-10-30 05:34:17,996 - INFO - Post 1g2rse9 is a duplicate, skipping
2024-10-30 05:34:17,996 - INFO - Checking post: 1ge9loz - Score: 3723 - URL: https://www.redgifs.com/watch/deadlygregariouswoodchuck
2024-10-30 05:34:17,996 - INFO - Post 1ge9loz is a duplicate, skipping
2024-10-30 05:34:17,997 - INFO - Checking post: 1g0e966 - Score: 3635 - URL: https://www.reddit.com/gallery/1g0e966
2024-10-30 05:34:17,997 - INFO - Request URL: 'https://cosmossnoogram-centralus.documents.azure.com:443/dbs/ToDoList/colls/sent_posts/docs/'
Request method: 'POST'
Request headers:
    'Cache-Control': 'no-cache'
    'x-ms-version': 'REDACTED'
    'x-ms-documentdb-query-iscontinuationexpected': 'REDACTED'
    'x-ms-consistency-level': 'REDACTED'
    'x-ms-documentdb-isquery': 'REDACTED'
    'Content-Type': 'application/query+json'
    'x-ms-session-token': 'REDACTED'
    'x-ms-documentdb-query-enablecrosspartition': 'REDACTED'
    'x-ms-date': 'REDACTED'
    'authorization': 'REDACTED'
    'Accept': 'application/json'
    'x-ms-cosmos-correlated-activityid': 'REDACTED'
    'Content-Length': '107'
    'User-Agent': 'azsdk-python-cosmos/4.5.1 Python/3.12.4 (macOS-15.0.1-arm64-arm-64bit)'
A body is sent with the request
2024-10-30 05:34:18,038 - DEBUG - https://cosmossnoogram-centralus.documents.azure.com:443 "POST /dbs/ToDoList/colls/sent_posts/docs/ HTTP/11" 200 None
2024-10-30 05:34:18,039 - INFO - Response status: 200
Response headers:
    'Cache-Control': 'no-store, no-cache'
    'Pragma': 'no-cache'
    'Transfer-Encoding': 'chunked'
    'Content-Type': 'application/json'
    'Server': 'Microsoft-HTTPAPI/2.0'
    'Strict-Transport-Security': 'REDACTED'
    'x-ms-activity-id': 'REDACTED'
    'x-ms-last-state-change-utc': 'REDACTED'
    'x-ms-resource-quota': 'REDACTED'
    'x-ms-resource-usage': 'REDACTED'
    'x-ms-schemaversion': 'REDACTED'
    'lsn': 'REDACTED'
    'x-ms-item-count': 'REDACTED'
    'x-ms-request-charge': 'REDACTED'
    'x-ms-alt-content-path': 'REDACTED'
    'x-ms-content-path': 'REDACTED'
    'x-ms-documentdb-partitionkeyrangeid': 'REDACTED'
    'x-ms-xp-role': 'REDACTED'
    'x-ms-cosmos-query-execution-info': 'REDACTED'
    'x-ms-global-Committed-lsn': 'REDACTED'
    'x-ms-number-of-read-regions': 'REDACTED'
    'x-ms-transport-request-id': 'REDACTED'
    'x-ms-cosmos-llsn': 'REDACTED'
    'x-ms-session-token': 'REDACTED'
    'x-ms-request-duration-ms': 'REDACTED'
    'x-ms-serviceversion': 'REDACTED'
    'x-ms-cosmos-is-partition-key-delete-pending': 'REDACTED'
    'x-ms-cosmos-physical-partition-id': 'REDACTED'
    'x-ms-cosmos-internal-partition-id': 'REDACTED'
    'x-ms-gatewayversion': 'REDACTED'
    'Date': 'Wed, 30 Oct 2024 10:34:17 GMT'
2024-10-30 05:34:18,039 - INFO - Post 1g0e966 is not an image or video post, skipping
2024-10-30 05:34:18,039 - INFO - Checking post: 1gckgcy - Score: 3399 - URL: https://i.redd.it/njd0mbyjl3xd1.jpeg
2024-10-30 05:34:18,040 - INFO - Post 1gckgcy is a duplicate, skipping
2024-10-30 05:34:18,040 - INFO - Checking post: 1fznoil - Score: 3336 - URL: https://i.redd.it/eruk3694dptd1.jpeg
2024-10-30 05:34:18,040 - INFO - Post 1fznoil is a duplicate, skipping
2024-10-30 05:34:18,040 - INFO - Checking post: 1g3dsj7 - Score: 3183 - URL: https://i.redd.it/cg9oigznmpud1.jpeg
2024-10-30 05:34:18,041 - INFO - Post 1g3dsj7 is a duplicate, skipping
2024-10-30 05:34:18,041 - INFO - Checking post: 1g4dx9i - Score: 3136 - URL: https://i.redd.it/5kv3c8f3lyud1.jpeg
2024-10-30 05:34:18,041 - INFO - Request URL: 'https://cosmossnoogram-centralus.documents.azure.com:443/dbs/ToDoList/colls/sent_posts/docs/'
Request method: 'POST'
Request headers:
    'Cache-Control': 'no-cache'
    'x-ms-version': 'REDACTED'
    'x-ms-documentdb-query-iscontinuationexpected': 'REDACTED'
    'x-ms-consistency-level': 'REDACTED'
    'x-ms-documentdb-isquery': 'REDACTED'
    'Content-Type': 'application/query+json'
    'x-ms-session-token': 'REDACTED'
    'x-ms-documentdb-query-enablecrosspartition': 'REDACTED'
    'x-ms-date': 'REDACTED'
    'authorization': 'REDACTED'
    'Accept': 'application/json'
    'x-ms-cosmos-correlated-activityid': 'REDACTED'
    'Content-Length': '107'
    'User-Agent': 'azsdk-python-cosmos/4.5.1 Python/3.12.4 (macOS-15.0.1-arm64-arm-64bit)'
A body is sent with the request
2024-10-30 05:34:18,091 - DEBUG - https://cosmossnoogram-centralus.documents.azure.com:443 "POST /dbs/ToDoList/colls/sent_posts/docs/ HTTP/11" 200 None
2024-10-30 05:34:18,091 - INFO - Response status: 200
Response headers:
    'Cache-Control': 'no-store, no-cache'
    'Pragma': 'no-cache'
    'Transfer-Encoding': 'chunked'
    'Content-Type': 'application/json'
    'Server': 'Microsoft-HTTPAPI/2.0'
    'Strict-Transport-Security': 'REDACTED'
    'x-ms-activity-id': 'REDACTED'
    'x-ms-last-state-change-utc': 'REDACTED'
    'x-ms-resource-quota': 'REDACTED'
    'x-ms-resource-usage': 'REDACTED'
    'x-ms-schemaversion': 'REDACTED'
    'lsn': 'REDACTED'
    'x-ms-item-count': 'REDACTED'
    'x-ms-request-charge': 'REDACTED'
    'x-ms-alt-content-path': 'REDACTED'
    'x-ms-content-path': 'REDACTED'
    'x-ms-documentdb-partitionkeyrangeid': 'REDACTED'
    'x-ms-xp-role': 'REDACTED'
    'x-ms-cosmos-query-execution-info': 'REDACTED'
    'x-ms-global-Committed-lsn': 'REDACTED'
    'x-ms-number-of-read-regions': 'REDACTED'
    'x-ms-transport-request-id': 'REDACTED'
    'x-ms-cosmos-llsn': 'REDACTED'
    'x-ms-session-token': 'REDACTED'
    'x-ms-request-duration-ms': 'REDACTED'
    'x-ms-serviceversion': 'REDACTED'
    'x-ms-cosmos-is-partition-key-delete-pending': 'REDACTED'
    'x-ms-cosmos-physical-partition-id': 'REDACTED'
    'x-ms-cosmos-internal-partition-id': 'REDACTED'
    'x-ms-gatewayversion': 'REDACTED'
    'Date': 'Wed, 30 Oct 2024 10:34:17 GMT'
2024-10-30 05:34:18,092 - INFO - Post 1g4dx9i is a duplicate, skipping
2024-10-30 05:34:18,092 - INFO - Checking post: 1ftaz41 - Score: 3134 - URL: https://i.redd.it/2meejva1g1sd1.jpeg
2024-10-30 05:34:18,093 - INFO - Request URL: 'https://cosmossnoogram-centralus.documents.azure.com:443/dbs/ToDoList/colls/sent_posts/docs/'
Request method: 'POST'
Request headers:
    'Cache-Control': 'no-cache'
    'x-ms-version': 'REDACTED'
    'x-ms-documentdb-query-iscontinuationexpected': 'REDACTED'
    'x-ms-consistency-level': 'REDACTED'
    'x-ms-documentdb-isquery': 'REDACTED'
    'Content-Type': 'application/query+json'
    'x-ms-session-token': 'REDACTED'
    'x-ms-documentdb-query-enablecrosspartition': 'REDACTED'
    'x-ms-date': 'REDACTED'
    'authorization': 'REDACTED'
    'Accept': 'application/json'
    'x-ms-cosmos-correlated-activityid': 'REDACTED'
    'Content-Length': '107'
    'User-Agent': 'azsdk-python-cosmos/4.5.1 Python/3.12.4 (macOS-15.0.1-arm64-arm-64bit)'
A body is sent with the request
2024-10-30 05:34:18,131 - DEBUG - https://cosmossnoogram-centralus.documents.azure.com:443 "POST /dbs/ToDoList/colls/sent_posts/docs/ HTTP/11" 200 None
2024-10-30 05:34:18,131 - INFO - Response status: 200
Response headers:
    'Cache-Control': 'no-store, no-cache'
    'Pragma': 'no-cache'
    'Transfer-Encoding': 'chunked'
    'Content-Type': 'application/json'
    'Server': 'Microsoft-HTTPAPI/2.0'
    'Strict-Transport-Security': 'REDACTED'
    'x-ms-activity-id': 'REDACTED'
    'x-ms-last-state-change-utc': 'REDACTED'
    'x-ms-resource-quota': 'REDACTED'
    'x-ms-resource-usage': 'REDACTED'
    'x-ms-schemaversion': 'REDACTED'
    'lsn': 'REDACTED'
    'x-ms-item-count': 'REDACTED'
    'x-ms-request-charge': 'REDACTED'
    'x-ms-alt-content-path': 'REDACTED'
    'x-ms-content-path': 'REDACTED'
    'x-ms-documentdb-partitionkeyrangeid': 'REDACTED'
    'x-ms-xp-role': 'REDACTED'
    'x-ms-cosmos-query-execution-info': 'REDACTED'
    'x-ms-global-Committed-lsn': 'REDACTED'
    'x-ms-number-of-read-regions': 'REDACTED'
    'x-ms-transport-request-id': 'REDACTED'
    'x-ms-cosmos-llsn': 'REDACTED'
    'x-ms-session-token': 'REDACTED'
    'x-ms-request-duration-ms': 'REDACTED'
    'x-ms-serviceversion': 'REDACTED'
    'x-ms-cosmos-is-partition-key-delete-pending': 'REDACTED'
    'x-ms-cosmos-physical-partition-id': 'REDACTED'
    'x-ms-cosmos-internal-partition-id': 'REDACTED'
    'x-ms-gatewayversion': 'REDACTED'
    'Date': 'Wed, 30 Oct 2024 10:34:17 GMT'
2024-10-30 05:34:18,131 - INFO - Post 1ftaz41 is a duplicate, skipping
2024-10-30 05:34:18,131 - INFO - Checking post: 1ge2oko - Score: 3131 - URL: https://i.redd.it/3vk9ocmf6ixd1.jpeg
2024-10-30 05:34:18,132 - INFO - Request URL: 'https://cosmossnoogram-centralus.documents.azure.com:443/dbs/ToDoList/colls/sent_posts/docs/'
Request method: 'POST'
Request headers:
    'Cache-Control': 'no-cache'
    'x-ms-version': 'REDACTED'
    'x-ms-documentdb-query-iscontinuationexpected': 'REDACTED'
    'x-ms-consistency-level': 'REDACTED'
    'x-ms-documentdb-isquery': 'REDACTED'
    'Content-Type': 'application/query+json'
    'x-ms-session-token': 'REDACTED'
    'x-ms-documentdb-query-enablecrosspartition': 'REDACTED'
    'x-ms-date': 'REDACTED'
    'authorization': 'REDACTED'
    'Accept': 'application/json'
    'x-ms-cosmos-correlated-activityid': 'REDACTED'
    'Content-Length': '107'
    'User-Agent': 'azsdk-python-cosmos/4.5.1 Python/3.12.4 (macOS-15.0.1-arm64-arm-64bit)'
A body is sent with the request
2024-10-30 05:34:18,173 - DEBUG - https://cosmossnoogram-centralus.documents.azure.com:443 "POST /dbs/ToDoList/colls/sent_posts/docs/ HTTP/11" 200 None
2024-10-30 05:34:18,173 - INFO - Response status: 200
Response headers:
    'Cache-Control': 'no-store, no-cache'
    'Pragma': 'no-cache'
    'Transfer-Encoding': 'chunked'
    'Content-Type': 'application/json'
    'Server': 'Microsoft-HTTPAPI/2.0'
    'Strict-Transport-Security': 'REDACTED'
    'x-ms-activity-id': 'REDACTED'
    'x-ms-last-state-change-utc': 'REDACTED'
    'x-ms-resource-quota': 'REDACTED'
    'x-ms-resource-usage': 'REDACTED'
    'x-ms-schemaversion': 'REDACTED'
    'lsn': 'REDACTED'
    'x-ms-item-count': 'REDACTED'
    'x-ms-request-charge': 'REDACTED'
    'x-ms-alt-content-path': 'REDACTED'
    'x-ms-content-path': 'REDACTED'
    'x-ms-documentdb-partitionkeyrangeid': 'REDACTED'
    'x-ms-xp-role': 'REDACTED'
    'x-ms-cosmos-query-execution-info': 'REDACTED'
    'x-ms-global-Committed-lsn': 'REDACTED'
    'x-ms-number-of-read-regions': 'REDACTED'
    'x-ms-transport-request-id': 'REDACTED'
    'x-ms-cosmos-llsn': 'REDACTED'
    'x-ms-session-token': 'REDACTED'
    'x-ms-request-duration-ms': 'REDACTED'
    'x-ms-serviceversion': 'REDACTED'
    'x-ms-cosmos-is-partition-key-delete-pending': 'REDACTED'
    'x-ms-cosmos-physical-partition-id': 'REDACTED'
    'x-ms-cosmos-internal-partition-id': 'REDACTED'
    'x-ms-gatewayversion': 'REDACTED'
    'Date': 'Wed, 30 Oct 2024 10:34:17 GMT'
2024-10-30 05:34:18,173 - INFO - Post 1ge2oko is a duplicate, skipping
2024-10-30 05:34:18,173 - INFO - Checking post: 1gbi6rb - Score: 3130 - URL: https://i.redd.it/uzwse73yvswd1.jpeg
2024-10-30 05:34:18,174 - INFO - Request URL: 'https://cosmossnoogram-centralus.documents.azure.com:443/dbs/ToDoList/colls/sent_posts/docs/'
Request method: 'POST'
Request headers:
    'Cache-Control': 'no-cache'
    'x-ms-version': 'REDACTED'
    'x-ms-documentdb-query-iscontinuationexpected': 'REDACTED'
    'x-ms-consistency-level': 'REDACTED'
    'x-ms-documentdb-isquery': 'REDACTED'
    'Content-Type': 'application/query+json'
    'x-ms-session-token': 'REDACTED'
    'x-ms-documentdb-query-enablecrosspartition': 'REDACTED'
    'x-ms-date': 'REDACTED'
    'authorization': 'REDACTED'
    'Accept': 'application/json'
    'x-ms-cosmos-correlated-activityid': 'REDACTED'
    'Content-Length': '107'
    'User-Agent': 'azsdk-python-cosmos/4.5.1 Python/3.12.4 (macOS-15.0.1-arm64-arm-64bit)'
A body is sent with the request
2024-10-30 05:34:18,212 - DEBUG - https://cosmossnoogram-centralus.documents.azure.com:443 "POST /dbs/ToDoList/colls/sent_posts/docs/ HTTP/11" 200 None
2024-10-30 05:34:18,213 - INFO - Response status: 200
Response headers:
    'Cache-Control': 'no-store, no-cache'
    'Pragma': 'no-cache'
    'Transfer-Encoding': 'chunked'
    'Content-Type': 'application/json'
    'Server': 'Microsoft-HTTPAPI/2.0'
    'Strict-Transport-Security': 'REDACTED'
    'x-ms-activity-id': 'REDACTED'
    'x-ms-last-state-change-utc': 'REDACTED'
    'x-ms-resource-quota': 'REDACTED'
    'x-ms-resource-usage': 'REDACTED'
    'x-ms-schemaversion': 'REDACTED'
    'lsn': 'REDACTED'
    'x-ms-item-count': 'REDACTED'
    'x-ms-request-charge': 'REDACTED'
    'x-ms-alt-content-path': 'REDACTED'
    'x-ms-content-path': 'REDACTED'
    'x-ms-quorum-acked-lsn': 'REDACTED'
    'x-ms-current-write-quorum': 'REDACTED'
    'x-ms-current-replica-set-size': 'REDACTED'
    'x-ms-documentdb-partitionkeyrangeid': 'REDACTED'
    'x-ms-xp-role': 'REDACTED'
    'x-ms-cosmos-query-execution-info': 'REDACTED'
    'x-ms-global-Committed-lsn': 'REDACTED'
    'x-ms-number-of-read-regions': 'REDACTED'
    'x-ms-transport-request-id': 'REDACTED'
    'x-ms-cosmos-llsn': 'REDACTED'
    'x-ms-cosmos-quorum-acked-llsn': 'REDACTED'
    'x-ms-session-token': 'REDACTED'
    'x-ms-request-duration-ms': 'REDACTED'
    'x-ms-serviceversion': 'REDACTED'
    'x-ms-cosmos-is-partition-key-delete-pending': 'REDACTED'
    'x-ms-cosmos-physical-partition-id': 'REDACTED'
    'x-ms-cosmos-internal-partition-id': 'REDACTED'
    'x-ms-gatewayversion': 'REDACTED'
    'Date': 'Wed, 30 Oct 2024 10:34:17 GMT'
2024-10-30 05:34:18,213 - INFO - Found image post: 1gbi6rb with URL: https://i.redd.it/uzwse73yvswd1.jpeg
2024-10-30 05:34:18,214 - DEBUG - Starting new HTTPS connection (1): i.redd.it:443
2024-10-30 05:34:18,477 - DEBUG - https://i.redd.it:443 "GET /uzwse73yvswd1.jpeg HTTP/11" 200 2371964
2024-10-30 05:34:18,493 - INFO - Successfully downloaded media to downloads/videos/1gelyz1_20241030_053417_ba5c8ead.mp4
2024-10-30 05:34:18,495 - DEBUG - Using selector: KqueueSelector
2024-10-30 05:34:18,495 - INFO - Attempting to send video to Telegram - Path: downloads/videos/1gelyz1_20241030_053417_ba5c8ead.mp4
2024-10-30 05:34:18,496 - DEBUG - load_ssl_context verify=True cert=None trust_env=True http2=False
2024-10-30 05:34:18,497 - DEBUG - load_verify_locations cafile='/Users/joewilson/PythonProjects/Snoogram/venv/lib/python3.12/site-packages/certifi/cacert.pem'
2024-10-30 05:34:18,506 - DEBUG - load_ssl_context verify=True cert=None trust_env=True http2=False
2024-10-30 05:34:18,506 - DEBUG - load_verify_locations cafile='/Users/joewilson/PythonProjects/Snoogram/venv/lib/python3.12/site-packages/certifi/cacert.pem'
2024-10-30 05:34:18,516 - DEBUG - Entering: get_me
2024-10-30 05:34:18,517 - DEBUG - connect_tcp.started host='api.telegram.org' port=443 local_address=None timeout=5.0 socket_options=None
2024-10-30 05:34:18,592 - INFO - Successfully downloaded media to downloads/pics/1gbi6rb_20241030_053418_75043492.jpeg
2024-10-30 05:34:18,594 - DEBUG - Using selector: KqueueSelector
2024-10-30 05:34:18,594 - INFO - Attempting to send photo to Telegram - Path: downloads/pics/1gbi6rb_20241030_053418_75043492.jpeg
2024-10-30 05:34:18,594 - DEBUG - Entering: get_me
2024-10-30 05:34:18,594 - DEBUG - connect_tcp.started host='api.telegram.org' port=443 local_address=None timeout=5.0 socket_options=None
2024-10-30 05:34:18,643 - DEBUG - connect_tcp.complete return_value=<httpcore._backends.anyio.AnyIOStream object at 0x108c750d0>
2024-10-30 05:34:18,644 - DEBUG - start_tls.started ssl_context=<ssl.SSLContext object at 0x108ef72d0> server_hostname='api.telegram.org' timeout=5.0
2024-10-30 05:34:18,721 - DEBUG - connect_tcp.complete return_value=<httpcore._backends.anyio.AnyIOStream object at 0x108c76f30>
2024-10-30 05:34:18,721 - DEBUG - start_tls.started ssl_context=<ssl.SSLContext object at 0x108ef72d0> server_hostname='api.telegram.org' timeout=5.0
2024-10-30 05:34:18,781 - DEBUG - start_tls.complete return_value=<httpcore._backends.anyio.AnyIOStream object at 0x108d9df70>
2024-10-30 05:34:18,782 - DEBUG - send_request_headers.started request=<Request [b'POST']>
2024-10-30 05:34:18,783 - DEBUG - send_request_headers.complete
2024-10-30 05:34:18,783 - DEBUG - send_request_body.started request=<Request [b'POST']>
2024-10-30 05:34:18,783 - DEBUG - send_request_body.complete
2024-10-30 05:34:18,783 - DEBUG - receive_response_headers.started request=<Request [b'POST']>
2024-10-30 05:34:18,859 - DEBUG - start_tls.complete return_value=<httpcore._backends.anyio.AnyIOStream object at 0x108eaca40>
2024-10-30 05:34:18,860 - DEBUG - send_request_headers.started request=<Request [b'POST']>
2024-10-30 05:34:18,861 - DEBUG - send_request_headers.complete
2024-10-30 05:34:18,861 - DEBUG - send_request_body.started request=<Request [b'POST']>
2024-10-30 05:34:18,861 - DEBUG - send_request_body.complete
2024-10-30 05:34:18,861 - DEBUG - receive_response_headers.started request=<Request [b'POST']>
2024-10-30 05:34:18,904 - DEBUG - receive_response_headers.complete return_value=(b'HTTP/1.1', 200, b'OK', [(b'Server', b'nginx/1.18.0'), (b'Date', b'Wed, 30 Oct 2024 10:34:18 GMT'), (b'Content-Type', b'application/json'), (b'Content-Length', b'254'), (b'Connection', b'keep-alive'), (b'Strict-Transport-Security', b'max-age=31536000; includeSubDomains; preload'), (b'Access-Control-Allow-Origin', b'*'), (b'Access-Control-Allow-Methods', b'GET, POST, OPTIONS'), (b'Access-Control-Expose-Headers', b'Content-Length,Content-Type,Date,Server,Connection')])
2024-10-30 05:34:18,905 - INFO - HTTP Request: POST https://api.telegram.org/bot7867694458:AAEFLZjWPyd1p640mHENnBt479WRYfSavWg/getMe "HTTP/1.1 200 OK"
2024-10-30 05:34:18,905 - DEBUG - receive_response_body.started request=<Request [b'POST']>
2024-10-30 05:34:18,905 - DEBUG - receive_response_body.complete
2024-10-30 05:34:18,906 - DEBUG - response_closed.started
2024-10-30 05:34:18,906 - DEBUG - response_closed.complete
2024-10-30 05:34:18,906 - DEBUG - User(api_kwargs={'can_connect_to_business': False, 'has_main_web_app': False}, can_join_groups=True, can_read_all_group_messages=False, first_name='RedditBot', id=7867694458, is_bot=True, supports_inline_queries=False, username='RedditImage_bot')
2024-10-30 05:34:18,907 - DEBUG - Exiting: get_me
2024-10-30 05:34:18,907 - DEBUG - This Bot is already initialized.
2024-10-30 05:34:18,907 - DEBUG - Entering: send_video
2024-10-30 05:34:18,920 - DEBUG - send_request_headers.started request=<Request [b'POST']>
2024-10-30 05:34:18,920 - DEBUG - send_request_headers.complete
2024-10-30 05:34:18,920 - DEBUG - send_request_body.started request=<Request [b'POST']>
2024-10-30 05:34:18,979 - DEBUG - receive_response_headers.complete return_value=(b'HTTP/1.1', 200, b'OK', [(b'Server', b'nginx/1.18.0'), (b'Date', b'Wed, 30 Oct 2024 10:34:18 GMT'), (b'Content-Type', b'application/json'), (b'Content-Length', b'254'), (b'Connection', b'keep-alive'), (b'Strict-Transport-Security', b'max-age=31536000; includeSubDomains; preload'), (b'Access-Control-Allow-Origin', b'*'), (b'Access-Control-Allow-Methods', b'GET, POST, OPTIONS'), (b'Access-Control-Expose-Headers', b'Content-Length,Content-Type,Date,Server,Connection')])
2024-10-30 05:34:18,979 - INFO - HTTP Request: POST https://api.telegram.org/bot7867694458:AAEFLZjWPyd1p640mHENnBt479WRYfSavWg/getMe "HTTP/1.1 200 OK"
2024-10-30 05:34:18,979 - DEBUG - receive_response_body.started request=<Request [b'POST']>
2024-10-30 05:34:18,979 - DEBUG - receive_response_body.complete
2024-10-30 05:34:18,979 - DEBUG - response_closed.started
2024-10-30 05:34:18,979 - DEBUG - response_closed.complete
2024-10-30 05:34:18,980 - DEBUG - User(api_kwargs={'can_connect_to_business': False, 'has_main_web_app': False}, can_join_groups=True, can_read_all_group_messages=False, first_name='RedditBot', id=7867694458, is_bot=True, supports_inline_queries=False, username='RedditImage_bot')
2024-10-30 05:34:18,980 - DEBUG - Exiting: get_me
2024-10-30 05:34:18,980 - DEBUG - This Updater is already initialized.
2024-10-30 05:34:18,980 - DEBUG - Entering: send_photo
2024-10-30 05:34:18,981 - DEBUG - send_request_headers.started request=<Request [b'POST']>
2024-10-30 05:34:18,981 - DEBUG - send_request_headers.complete
2024-10-30 05:34:18,981 - DEBUG - send_request_body.started request=<Request [b'POST']>
2024-10-30 05:34:19,833 - DEBUG - send_request_body.complete
2024-10-30 05:34:19,833 - DEBUG - receive_response_headers.started request=<Request [b'POST']>
2024-10-30 05:34:20,172 - DEBUG - receive_response_headers.complete return_value=(b'HTTP/1.1', 200, b'OK', [(b'Server', b'nginx/1.18.0'), (b'Date', b'Wed, 30 Oct 2024 10:34:20 GMT'), (b'Content-Type', b'application/json'), (b'Content-Length', b'1228'), (b'Connection', b'keep-alive'), (b'Strict-Transport-Security', b'max-age=31536000; includeSubDomains; preload'), (b'Access-Control-Allow-Origin', b'*'), (b'Access-Control-Allow-Methods', b'GET, POST, OPTIONS'), (b'Access-Control-Expose-Headers', b'Content-Length,Content-Type,Date,Server,Connection')])
2024-10-30 05:34:20,172 - INFO - HTTP Request: POST https://api.telegram.org/bot7867694458:AAEFLZjWPyd1p640mHENnBt479WRYfSavWg/sendPhoto "HTTP/1.1 200 OK"
2024-10-30 05:34:20,172 - DEBUG - receive_response_body.started request=<Request [b'POST']>
2024-10-30 05:34:20,172 - DEBUG - receive_response_body.complete
2024-10-30 05:34:20,172 - DEBUG - response_closed.started
2024-10-30 05:34:20,172 - DEBUG - response_closed.complete
2024-10-30 05:34:20,173 - DEBUG - Message(caption='From r/wifebutt: Thursday night wifebutt and football!\nUpvotes: 3,130', channel_chat_created=False, chat=Chat(id=-1002490380283, title='Reddit_Pic_Stream', type=<ChatType.CHANNEL>), date=datetime.datetime(2024, 10, 30, 10, 34, 20, tzinfo=<UTC>), delete_chat_photo=False, group_chat_created=False, message_id=263, photo=(PhotoSize(file_id='AgACAgEAAyEGAASUcC_7AAOaZyH6uC2oEw-KoZQHBhb5XwlLmlkAAkitMRsZEBFF-CyP8HyFv7gBAAMCAANzAAM2BA', file_size=1690, file_unique_id='AQADSK0xGxkQEUV4', height=90, width=62), PhotoSize(file_id='AgACAgEAAyEGAASUcC_7AAOaZyH6uC2oEw-KoZQHBhb5XwlLmlkAAkitMRsZEBFF-CyP8HyFv7gBAAMCAANtAAM2BA', file_size=23805, file_unique_id='AQADSK0xGxkQEUVy', height=320, width=221), PhotoSize(file_id='AgACAgEAAyEGAASUcC_7AAOaZyH6uC2oEw-KoZQHBhb5XwlLmlkAAkitMRsZEBFF-CyP8HyFv7gBAAMCAAN4AAM2BA', file_size=108880, file_unique_id='AQADSK0xGxkQEUV9', height=800, width=552), PhotoSize(file_id='AgACAgEAAyEGAASUcC_7AAOaZyH6uC2oEw-KoZQHBhb5XwlLmlkAAkitMRsZEBFF-CyP8HyFv7gBAAMCAAN5AAM2BA', file_size=243293, file_unique_id='AQADSK0xGxkQEUV-', height=1280, width=884), PhotoSize(file_id='AgACAgEAAyEGAASUcC_7AAOaZyH6uC2oEw-KoZQHBhb5XwlLmlkAAkitMRsZEBFF-CyP8HyFv7gBAAMCAAN3AAM2BA', file_size=762771, file_unique_id='AQADSK0xGxkQEUV8', height=2560, width=1768)), sender_chat=Chat(id=-1002490380283, title='Reddit_Pic_Stream', type=<ChatType.CHANNEL>), supergroup_chat_created=False)
2024-10-30 05:34:20,173 - DEBUG - Exiting: send_photo
2024-10-30 05:34:20,173 - DEBUG - close.started
2024-10-30 05:34:20,173 - DEBUG - close.complete
2024-10-30 05:34:20,174 - DEBUG - close.started
2024-10-30 05:34:20,174 - DEBUG - close.complete
2024-10-30 05:34:20,174 - DEBUG - This Bot is already shut down. Returning.
2024-10-30 05:34:20,174 - DEBUG - Shut down of Updater complete
2024-10-30 05:34:20,174 - INFO - Successfully sent photo to Telegram
2024-10-30 05:34:20,175 - ERROR - Error processing subreddit wifebutt: (sqlite3.OperationalError) attempt to write a readonly database
[SQL: INSERT INTO sent_post (post_id, subreddit_name, sent_at) VALUES (?, ?, ?)]
[parameters: ('1gbi6rb', 'wifebutt', '2024-10-30 10:34:20.175305')]
(Background on this error at: https://sqlalche.me/e/20/e3q8)
2024-10-30 05:34:20,176 - ERROR - Job "send_to_telegram (trigger: interval[0:01:00], next run at: 2024-10-30 05:35:16 CDT)" raised an exception
Traceback (most recent call last):
  File "/Users/joewilson/PythonProjects/Snoogram/venv/lib/python3.12/site-packages/sqlalchemy/engine/base.py", line 1967, in _exec_single_context
    self.dialect.do_execute(
  File "/Users/joewilson/PythonProjects/Snoogram/venv/lib/python3.12/site-packages/sqlalchemy/engine/default.py", line 941, in do_execute
    cursor.execute(statement, parameters)
sqlite3.OperationalError: attempt to write a readonly database

The above exception was the direct cause of the following exception:

Traceback (most recent call last):
  File "/Users/joewilson/PythonProjects/Snoogram/venv/lib/python3.12/site-packages/apscheduler/executors/base.py", line 125, in run_job
    retval = job.func(*job.args, **job.kwargs)
             ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/Users/joewilson/PythonProjects/Snoogram/backend/app.py", line 265, in send_to_telegram
    # Update last_check in Cosmos DB
                ^^^^^^^^^^^^^^^^^^^^^
  File "/Users/joewilson/PythonProjects/Snoogram/backend/db_operations.py", line 100, in add_sent_post
  File "/Users/joewilson/PythonProjects/Snoogram/venv/lib/python3.12/site-packages/sqlalchemy/orm/scoping.py", line 597, in commit
    return self._proxied.commit()
           ^^^^^^^^^^^^^^^^^^^^^^
  File "/Users/joewilson/PythonProjects/Snoogram/venv/lib/python3.12/site-packages/sqlalchemy/orm/session.py", line 2028, in commit
    trans.commit(_to_root=True)
  File "<string>", line 2, in commit
  File "/Users/joewilson/PythonProjects/Snoogram/venv/lib/python3.12/site-packages/sqlalchemy/orm/state_changes.py", line 139, in _go
    ret_value = fn(self, *arg, **kw)
                ^^^^^^^^^^^^^^^^^^^^
  File "/Users/joewilson/PythonProjects/Snoogram/venv/lib/python3.12/site-packages/sqlalchemy/orm/session.py", line 1313, in commit
    self._prepare_impl()
  File "<string>", line 2, in _prepare_impl
  File "/Users/joewilson/PythonProjects/Snoogram/venv/lib/python3.12/site-packages/sqlalchemy/orm/state_changes.py", line 139, in _go
    ret_value = fn(self, *arg, **kw)
                ^^^^^^^^^^^^^^^^^^^^
  File "/Users/joewilson/PythonProjects/Snoogram/venv/lib/python3.12/site-packages/sqlalchemy/orm/session.py", line 1288, in _prepare_impl
    self.session.flush()
  File "/Users/joewilson/PythonProjects/Snoogram/venv/lib/python3.12/site-packages/sqlalchemy/orm/session.py", line 4352, in flush
    self._flush(objects)
  File "/Users/joewilson/PythonProjects/Snoogram/venv/lib/python3.12/site-packages/sqlalchemy/orm/session.py", line 4487, in _flush
    with util.safe_reraise():
  File "/Users/joewilson/PythonProjects/Snoogram/venv/lib/python3.12/site-packages/sqlalchemy/util/langhelpers.py", line 146, in __exit__
    raise exc_value.with_traceback(exc_tb)
  File "/Users/joewilson/PythonProjects/Snoogram/venv/lib/python3.12/site-packages/sqlalchemy/orm/session.py", line 4448, in _flush
    flush_context.execute()
  File "/Users/joewilson/PythonProjects/Snoogram/venv/lib/python3.12/site-packages/sqlalchemy/orm/unitofwork.py", line 466, in execute
    rec.execute(self)
  File "/Users/joewilson/PythonProjects/Snoogram/venv/lib/python3.12/site-packages/sqlalchemy/orm/unitofwork.py", line 642, in execute
    util.preloaded.orm_persistence.save_obj(
  File "/Users/joewilson/PythonProjects/Snoogram/venv/lib/python3.12/site-packages/sqlalchemy/orm/persistence.py", line 93, in save_obj
    _emit_insert_statements(
  File "/Users/joewilson/PythonProjects/Snoogram/venv/lib/python3.12/site-packages/sqlalchemy/orm/persistence.py", line 1233, in _emit_insert_statements
    result = connection.execute(
             ^^^^^^^^^^^^^^^^^^^
  File "/Users/joewilson/PythonProjects/Snoogram/venv/lib/python3.12/site-packages/sqlalchemy/engine/base.py", line 1418, in execute
    return meth(
           ^^^^^
  File "/Users/joewilson/PythonProjects/Snoogram/venv/lib/python3.12/site-packages/sqlalchemy/sql/elements.py", line 515, in _execute_on_connection
    return connection._execute_clauseelement(
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/Users/joewilson/PythonProjects/Snoogram/venv/lib/python3.12/site-packages/sqlalchemy/engine/base.py", line 1640, in _execute_clauseelement
    ret = self._execute_context(
          ^^^^^^^^^^^^^^^^^^^^^^
  File "/Users/joewilson/PythonProjects/Snoogram/venv/lib/python3.12/site-packages/sqlalchemy/engine/base.py", line 1846, in _execute_context
    return self._exec_single_context(
           ^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/Users/joewilson/PythonProjects/Snoogram/venv/lib/python3.12/site-packages/sqlalchemy/engine/base.py", line 1986, in _exec_single_context
    self._handle_dbapi_exception(
  File "/Users/joewilson/PythonProjects/Snoogram/venv/lib/python3.12/site-packages/sqlalchemy/engine/base.py", line 2355, in _handle_dbapi_exception
    raise sqlalchemy_exception.with_traceback(exc_info[2]) from e
  File "/Users/joewilson/PythonProjects/Snoogram/venv/lib/python3.12/site-packages/sqlalchemy/engine/base.py", line 1967, in _exec_single_context
    self.dialect.do_execute(
  File "/Users/joewilson/PythonProjects/Snoogram/venv/lib/python3.12/site-packages/sqlalchemy/engine/default.py", line 941, in do_execute
    cursor.execute(statement, parameters)
sqlalchemy.exc.OperationalError: (sqlite3.OperationalError) attempt to write a readonly database
[SQL: INSERT INTO sent_post (post_id, subreddit_name, sent_at) VALUES (?, ?, ?)]
[parameters: ('1gbi6rb', 'wifebutt', '2024-10-30 10:34:20.175305')]
(Background on this error at: https://sqlalche.me/e/20/e3q8)
2024-10-30 05:34:38,931 - DEBUG - send_request_body.failed exception=WriteError(ClosedResourceError())
2024-10-30 05:34:38,932 - DEBUG - response_closed.started
2024-10-30 05:34:38,932 - DEBUG - response_closed.complete
2024-10-30 05:34:38,933 - DEBUG - This Application is already shut down. Returning.
2024-10-30 05:34:38,933 - ERROR - Failed to send video to Telegram: httpx.WriteError: 
2024-10-30 05:34:38,934 - ERROR - Error sending video post 1gelyz1: httpx.WriteError: 
2024-10-30 05:34:38,934 - INFO - Checking post: 1gejrnl - Score: 2584 - URL: https://v3.redgifs.com/watch/graydefensivepika
2024-10-30 05:34:38,940 - INFO - Request URL: 'https://cosmossnoogram-centralus.documents.azure.com:443/dbs/ToDoList/colls/sent_posts/docs/'
Request method: 'POST'
Request headers:
    'Cache-Control': 'no-cache'
    'x-ms-version': 'REDACTED'
    'x-ms-documentdb-query-iscontinuationexpected': 'REDACTED'
    'x-ms-consistency-level': 'REDACTED'
    'x-ms-documentdb-isquery': 'REDACTED'
    'Content-Type': 'application/query+json'
    'x-ms-session-token': 'REDACTED'
    'x-ms-documentdb-query-enablecrosspartition': 'REDACTED'
    'x-ms-date': 'REDACTED'
    'authorization': 'REDACTED'
    'Accept': 'application/json'
    'x-ms-cosmos-correlated-activityid': 'REDACTED'
    'Content-Length': '107'
    'User-Agent': 'azsdk-python-cosmos/4.5.1 Python/3.12.4 (macOS-15.0.1-arm64-arm-64bit)'
A body is sent with the request
2024-10-30 05:34:38,975 - DEBUG - https://cosmossnoogram-centralus.documents.azure.com:443 "POST /dbs/ToDoList/colls/sent_posts/docs/ HTTP/11" 200 None
2024-10-30 05:34:38,975 - INFO - Response status: 200
Response headers:
    'Cache-Control': 'no-store, no-cache'
    'Pragma': 'no-cache'
    'Transfer-Encoding': 'chunked'
    'Content-Type': 'application/json'
    'Server': 'Microsoft-HTTPAPI/2.0'
    'Strict-Transport-Security': 'REDACTED'
    'x-ms-activity-id': 'REDACTED'
    'x-ms-last-state-change-utc': 'REDACTED'
    'x-ms-resource-quota': 'REDACTED'
    'x-ms-resource-usage': 'REDACTED'
    'x-ms-schemaversion': 'REDACTED'
    'lsn': 'REDACTED'
    'x-ms-item-count': 'REDACTED'
    'x-ms-request-charge': 'REDACTED'
    'x-ms-alt-content-path': 'REDACTED'
    'x-ms-content-path': 'REDACTED'
    'x-ms-documentdb-partitionkeyrangeid': 'REDACTED'
    'x-ms-xp-role': 'REDACTED'
    'x-ms-cosmos-query-execution-info': 'REDACTED'
    'x-ms-global-Committed-lsn': 'REDACTED'
    'x-ms-number-of-read-regions': 'REDACTED'
    'x-ms-transport-request-id': 'REDACTED'
    'x-ms-cosmos-llsn': 'REDACTED'
    'x-ms-session-token': 'REDACTED'
    'x-ms-request-duration-ms': 'REDACTED'
    'x-ms-serviceversion': 'REDACTED'
    'x-ms-cosmos-is-partition-key-delete-pending': 'REDACTED'
    'x-ms-cosmos-physical-partition-id': 'REDACTED'
    'x-ms-cosmos-internal-partition-id': 'REDACTED'
    'x-ms-gatewayversion': 'REDACTED'
    'Date': 'Wed, 30 Oct 2024 10:34:38 GMT'
2024-10-30 05:34:38,975 - INFO - Post 1gejrnl is a duplicate, skipping
2024-10-30 05:34:38,975 - INFO - Checking post: 1gelw33 - Score: 2309 - URL: https://www.redgifs.com/watch/drydarkgraysable
2024-10-30 05:34:38,976 - INFO - Post 1gelw33 is a duplicate, skipping
2024-10-30 05:34:38,976 - INFO - Checking post: 1gevvp0 - Score: 1205 - URL: https://www.redgifs.com/watch/medicalplumhen
2024-10-30 05:34:38,976 - INFO - Post 1gevvp0 is a duplicate, skipping
2024-10-30 05:34:38,976 - INFO - Checking post: 1gesoj7 - Score: 752 - URL: https://www.redgifs.com/watch/lightgreytrickydragonfly
2024-10-30 05:34:38,977 - INFO - Post 1gesoj7 is a duplicate, skipping
2024-10-30 05:34:38,977 - INFO - Checking post: 1geuuqp - Score: 444 - URL: https://www.redgifs.com/watch/cheerfulbeigebagworm
2024-10-30 05:34:38,977 - INFO - Post 1geuuqp is a duplicate, skipping
2024-10-30 05:34:38,977 - INFO - Checking post: 1geakrb - Score: 396 - URL: https://www.redgifs.com/watch/illinformedthickgalapagoshawk
2024-10-30 05:34:38,977 - INFO - Post 1geakrb is a duplicate, skipping
2024-10-30 05:34:38,977 - INFO - Checking post: 1gerubz - Score: 358 - URL: https://v3.redgifs.com/watch/trickysquarepseudodynerusquadrisectus
2024-10-30 05:34:38,978 - INFO - Post 1gerubz is a duplicate, skipping
2024-10-30 05:34:38,978 - INFO - Checking post: 1getxhl - Score: 336 - URL: https://www.redgifs.com/watch/purpledemandingboaconstrictor
2024-10-30 05:34:38,978 - INFO - Post 1getxhl is a duplicate, skipping
2024-10-30 05:34:38,978 - INFO - Checking post: 1ge9gol - Score: 277 - URL: https://v3.redgifs.com/watch/circulardeeppinkamericanbulldog
2024-10-30 05:34:38,978 - INFO - Request URL: 'https://cosmossnoogram-centralus.documents.azure.com:443/dbs/ToDoList/colls/sent_posts/docs/'
Request method: 'POST'
Request headers:
    'Cache-Control': 'no-cache'
    'x-ms-version': 'REDACTED'
    'x-ms-documentdb-query-iscontinuationexpected': 'REDACTED'
    'x-ms-consistency-level': 'REDACTED'
    'x-ms-documentdb-isquery': 'REDACTED'
    'Content-Type': 'application/query+json'
    'x-ms-session-token': 'REDACTED'
    'x-ms-documentdb-query-enablecrosspartition': 'REDACTED'
    'x-ms-date': 'REDACTED'
    'authorization': 'REDACTED'
    'Accept': 'application/json'
    'x-ms-cosmos-correlated-activityid': 'REDACTED'
    'Content-Length': '107'
    'User-Agent': 'azsdk-python-cosmos/4.5.1 Python/3.12.4 (macOS-15.0.1-arm64-arm-64bit)'
A body is sent with the request
2024-10-30 05:34:39,010 - DEBUG - https://cosmossnoogram-centralus.documents.azure.com:443 "POST /dbs/ToDoList/colls/sent_posts/docs/ HTTP/11" 200 None
2024-10-30 05:34:39,010 - INFO - Response status: 200
Response headers:
    'Cache-Control': 'no-store, no-cache'
    'Pragma': 'no-cache'
    'Transfer-Encoding': 'chunked'
    'Content-Type': 'application/json'
    'Server': 'Microsoft-HTTPAPI/2.0'
    'Strict-Transport-Security': 'REDACTED'
    'x-ms-activity-id': 'REDACTED'
    'x-ms-last-state-change-utc': 'REDACTED'
    'x-ms-resource-quota': 'REDACTED'
    'x-ms-resource-usage': 'REDACTED'
    'x-ms-schemaversion': 'REDACTED'
    'lsn': 'REDACTED'
    'x-ms-item-count': 'REDACTED'
    'x-ms-request-charge': 'REDACTED'
    'x-ms-alt-content-path': 'REDACTED'
    'x-ms-content-path': 'REDACTED'
    'x-ms-documentdb-partitionkeyrangeid': 'REDACTED'
    'x-ms-xp-role': 'REDACTED'
    'x-ms-cosmos-query-execution-info': 'REDACTED'
    'x-ms-global-Committed-lsn': 'REDACTED'
    'x-ms-number-of-read-regions': 'REDACTED'
    'x-ms-transport-request-id': 'REDACTED'
    'x-ms-cosmos-llsn': 'REDACTED'
    'x-ms-session-token': 'REDACTED'
    'x-ms-request-duration-ms': 'REDACTED'
    'x-ms-serviceversion': 'REDACTED'
    'x-ms-cosmos-is-partition-key-delete-pending': 'REDACTED'
    'x-ms-cosmos-physical-partition-id': 'REDACTED'
    'x-ms-cosmos-internal-partition-id': 'REDACTED'
    'x-ms-gatewayversion': 'REDACTED'
    'Date': 'Wed, 30 Oct 2024 10:34:38 GMT'
2024-10-30 05:34:39,011 - INFO - Found video post: 1ge9gol
2024-10-30 05:34:39,012 - DEBUG - Starting new HTTPS connection (1): api.redgifs.com:443
2024-10-30 05:34:39,123 - DEBUG - https://api.redgifs.com:443 "GET /v2/gifs/circulardeeppinkamericanbulldog HTTP/11" 200 None
2024-10-30 05:34:39,126 - DEBUG - Starting new HTTPS connection (1): files.redgifs.com:443
2024-10-30 05:34:39,196 - DEBUG - https://files.redgifs.com:443 "GET /CircularDeeppinkAmericanbulldog.mp4 HTTP/11" 200 61415883
2024-10-30 05:34:40,388 - INFO - Successfully downloaded media to downloads/videos/1ge9gol_20241030_053439_fff8ab71.mp4
2024-10-30 05:34:40,390 - DEBUG - Using selector: KqueueSelector
2024-10-30 05:34:40,390 - INFO - Attempting to send video to Telegram - Path: downloads/videos/1ge9gol_20241030_053439_fff8ab71.mp4
2024-10-30 05:34:40,391 - DEBUG - load_ssl_context verify=True cert=None trust_env=True http2=False
2024-10-30 05:34:40,391 - DEBUG - load_verify_locations cafile='/Users/joewilson/PythonProjects/Snoogram/venv/lib/python3.12/site-packages/certifi/cacert.pem'
2024-10-30 05:34:40,399 - DEBUG - load_ssl_context verify=True cert=None trust_env=True http2=False
2024-10-30 05:34:40,400 - DEBUG - load_verify_locations cafile='/Users/joewilson/PythonProjects/Snoogram/venv/lib/python3.12/site-packages/certifi/cacert.pem'
2024-10-30 05:34:40,407 - DEBUG - Entering: get_me
2024-10-30 05:34:40,407 - DEBUG - connect_tcp.started host='api.telegram.org' port=443 local_address=None timeout=5.0 socket_options=None
2024-10-30 05:34:40,521 - DEBUG - connect_tcp.complete return_value=<httpcore._backends.anyio.AnyIOStream object at 0x108c74230>
2024-10-30 05:34:40,522 - DEBUG - start_tls.started ssl_context=<ssl.SSLContext object at 0x108e371d0> server_hostname='api.telegram.org' timeout=5.0
2024-10-30 05:34:40,646 - DEBUG - start_tls.complete return_value=<httpcore._backends.anyio.AnyIOStream object at 0x108c76ff0>
2024-10-30 05:34:40,647 - DEBUG - send_request_headers.started request=<Request [b'POST']>
2024-10-30 05:34:40,647 - DEBUG - send_request_headers.complete
2024-10-30 05:34:40,647 - DEBUG - send_request_body.started request=<Request [b'POST']>
2024-10-30 05:34:40,647 - DEBUG - send_request_body.complete
2024-10-30 05:34:40,648 - DEBUG - receive_response_headers.started request=<Request [b'POST']>
2024-10-30 05:34:40,756 - DEBUG - receive_response_headers.complete return_value=(b'HTTP/1.1', 200, b'OK', [(b'Server', b'nginx/1.18.0'), (b'Date', b'Wed, 30 Oct 2024 10:34:40 GMT'), (b'Content-Type', b'application/json'), (b'Content-Length', b'254'), (b'Connection', b'keep-alive'), (b'Strict-Transport-Security', b'max-age=31536000; includeSubDomains; preload'), (b'Access-Control-Allow-Origin', b'*'), (b'Access-Control-Allow-Methods', b'GET, POST, OPTIONS'), (b'Access-Control-Expose-Headers', b'Content-Length,Content-Type,Date,Server,Connection')])
2024-10-30 05:34:40,757 - INFO - HTTP Request: POST https://api.telegram.org/bot7867694458:AAEFLZjWPyd1p640mHENnBt479WRYfSavWg/getMe "HTTP/1.1 200 OK"
2024-10-30 05:34:40,758 - DEBUG - receive_response_body.started request=<Request [b'POST']>
2024-10-30 05:34:40,758 - DEBUG - receive_response_body.complete
2024-10-30 05:34:40,758 - DEBUG - response_closed.started
2024-10-30 05:34:40,758 - DEBUG - response_closed.complete
2024-10-30 05:34:40,759 - DEBUG - User(api_kwargs={'can_connect_to_business': False, 'has_main_web_app': False}, can_join_groups=True, can_read_all_group_messages=False, first_name='RedditBot', id=7867694458, is_bot=True, supports_inline_queries=False, username='RedditImage_bot')
2024-10-30 05:34:40,759 - DEBUG - Exiting: get_me
2024-10-30 05:34:40,759 - DEBUG - This Bot is already initialized.
2024-10-30 05:34:40,759 - DEBUG - Entering: send_video
2024-10-30 05:34:40,783 - DEBUG - send_request_headers.started request=<Request [b'POST']>
2024-10-30 05:34:40,783 - DEBUG - send_request_headers.complete
2024-10-30 05:34:40,783 - DEBUG - send_request_body.started request=<Request [b'POST']>
2024-10-30 05:34:44,411 - DEBUG - send_request_body.complete
2024-10-30 05:34:44,411 - DEBUG - receive_response_headers.started request=<Request [b'POST']>
2024-10-30 05:34:44,412 - DEBUG - receive_response_headers.complete return_value=(b'HTTP/1.1', 413, b'Request Entity Too Large', [(b'Server', b'nginx/1.18.0'), (b'Date', b'Wed, 30 Oct 2024 10:34:40 GMT'), (b'Content-Type', b'application/json'), (b'Content-Length', b'70'), (b'Connection', b'close'), (b'Strict-Transport-Security', b'max-age=31536000; includeSubDomains; preload'), (b'Access-Control-Allow-Origin', b'*'), (b'Access-Control-Expose-Headers', b'Content-Length,Content-Type,Date,Server,Connection')])
2024-10-30 05:34:44,413 - INFO - HTTP Request: POST https://api.telegram.org/bot7867694458:AAEFLZjWPyd1p640mHENnBt479WRYfSavWg/sendVideo "HTTP/1.1 413 Request Entity Too Large"
2024-10-30 05:34:44,413 - DEBUG - receive_response_body.started request=<Request [b'POST']>
2024-10-30 05:34:44,413 - DEBUG - receive_response_body.complete
2024-10-30 05:34:44,413 - DEBUG - response_closed.started
2024-10-30 05:34:44,414 - DEBUG - response_closed.complete
2024-10-30 05:34:44,414 - DEBUG - This Bot is already shut down. Returning.
2024-10-30 05:34:44,414 - DEBUG - Shut down of Updater complete
2024-10-30 05:34:44,414 - ERROR - Failed to send video to Telegram: Request Entity Too Large (413)
2024-10-30 05:34:44,415 - ERROR - Error sending video post 1ge9gol: Request Entity Too Large (413)
2024-10-30 05:34:44,415 - INFO - Checking post: 1ge98kx - Score: 253 - URL: https://www.redgifs.com/watch/frontspecificspittlebug
2024-10-30 05:34:44,416 - INFO - Post 1ge98kx is a duplicate, skipping
2024-10-30 05:34:44,416 - INFO - Checking post: 1geqscs - Score: 241 - URL: https://www.redgifs.com/watch/previousweequeensnake
2024-10-30 05:34:44,416 - INFO - Request URL: 'https://cosmossnoogram-centralus.documents.azure.com:443/dbs/ToDoList/colls/sent_posts/docs/'
Request method: 'POST'
Request headers:
    'Cache-Control': 'no-cache'
    'x-ms-version': 'REDACTED'
    'x-ms-documentdb-query-iscontinuationexpected': 'REDACTED'
    'x-ms-consistency-level': 'REDACTED'
    'x-ms-documentdb-isquery': 'REDACTED'
    'Content-Type': 'application/query+json'
    'x-ms-session-token': 'REDACTED'
    'x-ms-documentdb-query-enablecrosspartition': 'REDACTED'
    'x-ms-date': 'REDACTED'
    'authorization': 'REDACTED'
    'Accept': 'application/json'
    'x-ms-cosmos-correlated-activityid': 'REDACTED'
    'Content-Length': '107'
    'User-Agent': 'azsdk-python-cosmos/4.5.1 Python/3.12.4 (macOS-15.0.1-arm64-arm-64bit)'
A body is sent with the request
2024-10-30 05:34:44,450 - DEBUG - https://cosmossnoogram-centralus.documents.azure.com:443 "POST /dbs/ToDoList/colls/sent_posts/docs/ HTTP/11" 200 None
2024-10-30 05:34:44,451 - INFO - Response status: 200
Response headers:
    'Cache-Control': 'no-store, no-cache'
    'Pragma': 'no-cache'
    'Transfer-Encoding': 'chunked'
    'Content-Type': 'application/json'
    'Server': 'Microsoft-HTTPAPI/2.0'
    'Strict-Transport-Security': 'REDACTED'
    'x-ms-activity-id': 'REDACTED'
    'x-ms-last-state-change-utc': 'REDACTED'
    'x-ms-resource-quota': 'REDACTED'
    'x-ms-resource-usage': 'REDACTED'
    'x-ms-schemaversion': 'REDACTED'
    'lsn': 'REDACTED'
    'x-ms-item-count': 'REDACTED'
    'x-ms-request-charge': 'REDACTED'
    'x-ms-alt-content-path': 'REDACTED'
    'x-ms-content-path': 'REDACTED'
    'x-ms-documentdb-partitionkeyrangeid': 'REDACTED'
    'x-ms-xp-role': 'REDACTED'
    'x-ms-cosmos-query-execution-info': 'REDACTED'
    'x-ms-global-Committed-lsn': 'REDACTED'
    'x-ms-number-of-read-regions': 'REDACTED'
    'x-ms-transport-request-id': 'REDACTED'
    'x-ms-cosmos-llsn': 'REDACTED'
    'x-ms-session-token': 'REDACTED'
    'x-ms-request-duration-ms': 'REDACTED'
    'x-ms-serviceversion': 'REDACTED'
    'x-ms-cosmos-is-partition-key-delete-pending': 'REDACTED'
    'x-ms-cosmos-physical-partition-id': 'REDACTED'
    'x-ms-cosmos-internal-partition-id': 'REDACTED'
    'x-ms-gatewayversion': 'REDACTED'
    'Date': 'Wed, 30 Oct 2024 10:34:44 GMT'
2024-10-30 05:34:44,451 - INFO - Found video post: 1geqscs
2024-10-30 05:34:44,453 - DEBUG - Starting new HTTPS connection (1): api.redgifs.com:443
2024-10-30 05:34:44,569 - DEBUG - https://api.redgifs.com:443 "GET /v2/gifs/previousweequeensnake HTTP/11" 200 None
2024-10-30 05:34:44,573 - DEBUG - Starting new HTTPS connection (1): files.redgifs.com:443
2024-10-30 05:34:44,654 - DEBUG - https://files.redgifs.com:443 "GET /PreviousWeeQueensnake.mp4 HTTP/11" 200 50070206
2024-10-30 05:34:45,706 - INFO - Successfully downloaded media to downloads/videos/1geqscs_20241030_053444_2fd81a4e.mp4
2024-10-30 05:34:45,707 - DEBUG - Using selector: KqueueSelector
2024-10-30 05:34:45,707 - INFO - Attempting to send video to Telegram - Path: downloads/videos/1geqscs_20241030_053444_2fd81a4e.mp4
2024-10-30 05:34:45,708 - DEBUG - load_ssl_context verify=True cert=None trust_env=True http2=False
2024-10-30 05:34:45,708 - DEBUG - load_verify_locations cafile='/Users/joewilson/PythonProjects/Snoogram/venv/lib/python3.12/site-packages/certifi/cacert.pem'
2024-10-30 05:34:45,714 - DEBUG - load_ssl_context verify=True cert=None trust_env=True http2=False
2024-10-30 05:34:45,714 - DEBUG - load_verify_locations cafile='/Users/joewilson/PythonProjects/Snoogram/venv/lib/python3.12/site-packages/certifi/cacert.pem'
2024-10-30 05:34:45,720 - DEBUG - Entering: get_me
2024-10-30 05:34:45,720 - DEBUG - connect_tcp.started host='api.telegram.org' port=443 local_address=None timeout=5.0 socket_options=None
2024-10-30 05:34:45,842 - DEBUG - connect_tcp.complete return_value=<httpcore._backends.anyio.AnyIOStream object at 0x108eaca10>
2024-10-30 05:34:45,842 - DEBUG - start_tls.started ssl_context=<ssl.SSLContext object at 0x108cb5150> server_hostname='api.telegram.org' timeout=5.0
2024-10-30 05:34:45,970 - DEBUG - start_tls.complete return_value=<httpcore._backends.anyio.AnyIOStream object at 0x108eaeb40>
2024-10-30 05:34:45,971 - DEBUG - send_request_headers.started request=<Request [b'POST']>
2024-10-30 05:34:45,971 - DEBUG - send_request_headers.complete
2024-10-30 05:34:45,971 - DEBUG - send_request_body.started request=<Request [b'POST']>
2024-10-30 05:34:45,971 - DEBUG - send_request_body.complete
2024-10-30 05:34:45,971 - DEBUG - receive_response_headers.started request=<Request [b'POST']>
2024-10-30 05:34:46,086 - DEBUG - receive_response_headers.complete return_value=(b'HTTP/1.1', 200, b'OK', [(b'Server', b'nginx/1.18.0'), (b'Date', b'Wed, 30 Oct 2024 10:34:46 GMT'), (b'Content-Type', b'application/json'), (b'Content-Length', b'254'), (b'Connection', b'keep-alive'), (b'Strict-Transport-Security', b'max-age=31536000; includeSubDomains; preload'), (b'Access-Control-Allow-Origin', b'*'), (b'Access-Control-Allow-Methods', b'GET, POST, OPTIONS'), (b'Access-Control-Expose-Headers', b'Content-Length,Content-Type,Date,Server,Connection')])
2024-10-30 05:34:46,087 - INFO - HTTP Request: POST https://api.telegram.org/bot7867694458:AAEFLZjWPyd1p640mHENnBt479WRYfSavWg/getMe "HTTP/1.1 200 OK"
2024-10-30 05:34:46,087 - DEBUG - receive_response_body.started request=<Request [b'POST']>
2024-10-30 05:34:46,087 - DEBUG - receive_response_body.complete
2024-10-30 05:34:46,087 - DEBUG - response_closed.started
2024-10-30 05:34:46,088 - DEBUG - response_closed.complete
2024-10-30 05:34:46,088 - DEBUG - User(api_kwargs={'can_connect_to_business': False, 'has_main_web_app': False}, can_join_groups=True, can_read_all_group_messages=False, first_name='RedditBot', id=7867694458, is_bot=True, supports_inline_queries=False, username='RedditImage_bot')
2024-10-30 05:34:46,088 - DEBUG - Exiting: get_me
2024-10-30 05:34:46,088 - DEBUG - This Bot is already initialized.
2024-10-30 05:34:46,089 - DEBUG - Entering: send_video
2024-10-30 05:34:46,106 - DEBUG - send_request_headers.started request=<Request [b'POST']>
2024-10-30 05:34:46,106 - DEBUG - send_request_headers.complete
2024-10-30 05:34:46,106 - DEBUG - send_request_body.started request=<Request [b'POST']>
2024-10-30 05:34:48,905 - DEBUG - send_request_body.complete
2024-10-30 05:34:48,905 - DEBUG - receive_response_headers.started request=<Request [b'POST']>
2024-10-30 05:34:51,719 - DEBUG - receive_response_headers.complete return_value=(b'HTTP/1.1', 200, b'OK', [(b'Server', b'nginx/1.18.0'), (b'Date', b'Wed, 30 Oct 2024 10:34:51 GMT'), (b'Content-Type', b'application/json'), (b'Content-Length', b'601'), (b'Connection', b'keep-alive'), (b'Strict-Transport-Security', b'max-age=31536000; includeSubDomains; preload'), (b'Access-Control-Allow-Origin', b'*'), (b'Access-Control-Allow-Methods', b'GET, POST, OPTIONS'), (b'Access-Control-Expose-Headers', b'Content-Length,Content-Type,Date,Server,Connection')])
2024-10-30 05:34:51,723 - INFO - HTTP Request: POST https://api.telegram.org/bot7867694458:AAEFLZjWPyd1p640mHENnBt479WRYfSavWg/sendVideo "HTTP/1.1 200 OK"
2024-10-30 05:34:51,725 - DEBUG - receive_response_body.started request=<Request [b'POST']>
2024-10-30 05:34:51,725 - DEBUG - receive_response_body.complete
2024-10-30 05:34:51,725 - DEBUG - response_closed.started
2024-10-30 05:34:51,725 - DEBUG - response_closed.complete
2024-10-30 05:34:51,727 - DEBUG - Message(caption='From r/girlsfinishingthejob: I love when he covers my titties with his hot cum ðŸ¥°\nUpvotes: 241', channel_chat_created=False, chat=Chat(id=-1002490380283, title='Reddit_Pic_Stream', type=<ChatType.CHANNEL>), date=datetime.datetime(2024, 10, 30, 10, 34, 51, tzinfo=<UTC>), delete_chat_photo=False, group_chat_created=False, message_id=264, sender_chat=Chat(id=-1002490380283, title='Reddit_Pic_Stream', type=<ChatType.CHANNEL>), supergroup_chat_created=False, video=Video(duration=0, file_id='BAACAgEAAyEGAASUcC_7AAIBCGciC8uJokX9agr5gbTzN-p5EwJSAALBBAACGRARRb2VwDIBkw0tNgQ', file_name='1geqscs_20241030_053444_2fd81a4e.mp4', file_size=50070206, file_unique_id='AgADwQQAAhkQEUU', height=320, mime_type='video/mp4', width=320))
2024-10-30 05:34:51,727 - DEBUG - Exiting: send_video
2024-10-30 05:34:51,727 - DEBUG - close.started
2024-10-30 05:34:51,728 - DEBUG - close.complete
2024-10-30 05:34:51,728 - DEBUG - This Bot is already shut down. Returning.
2024-10-30 05:34:51,728 - DEBUG - Shut down of Updater complete
2024-10-30 05:34:51,728 - INFO - Successfully sent video to Telegram
2024-10-30 05:34:51,740 - ERROR - Error processing subreddit girlsfinishingthejob: (sqlite3.OperationalError) attempt to write a readonly database
[SQL: INSERT INTO sent_post (post_id, subreddit_name, sent_at) VALUES (?, ?, ?)]
[parameters: ('1geqscs', 'girlsfinishingthejob', '2024-10-30 10:34:51.739598')]
(Background on this error at: https://sqlalche.me/e/20/e3q8)
2024-10-30 05:34:51,745 - ERROR - Job "send_to_telegram (trigger: interval[0:01:00], next run at: 2024-10-30 05:35:16 CDT)" raised an exception
Traceback (most recent call last):
  File "/Users/joewilson/PythonProjects/Snoogram/venv/lib/python3.12/site-packages/sqlalchemy/engine/base.py", line 1967, in _exec_single_context
    self.dialect.do_execute(
  File "/Users/joewilson/PythonProjects/Snoogram/venv/lib/python3.12/site-packages/sqlalchemy/engine/default.py", line 941, in do_execute
    cursor.execute(statement, parameters)
sqlite3.OperationalError: attempt to write a readonly database

The above exception was the direct cause of the following exception:

Traceback (most recent call last):
  File "/Users/joewilson/PythonProjects/Snoogram/venv/lib/python3.12/site-packages/apscheduler/executors/base.py", line 125, in run_job
    retval = job.func(*job.args, **job.kwargs)
             ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/Users/joewilson/PythonProjects/Snoogram/backend/app.py", line 265, in send_to_telegram
    # Update last_check in Cosmos DB
                ^^^^^^^^^^^^^^^^^^^^^
  File "/Users/joewilson/PythonProjects/Snoogram/backend/db_operations.py", line 100, in add_sent_post
  File "/Users/joewilson/PythonProjects/Snoogram/venv/lib/python3.12/site-packages/sqlalchemy/orm/scoping.py", line 597, in commit
    return self._proxied.commit()
           ^^^^^^^^^^^^^^^^^^^^^^
  File "/Users/joewilson/PythonProjects/Snoogram/venv/lib/python3.12/site-packages/sqlalchemy/orm/session.py", line 2028, in commit
    trans.commit(_to_root=True)
  File "<string>", line 2, in commit
  File "/Users/joewilson/PythonProjects/Snoogram/venv/lib/python3.12/site-packages/sqlalchemy/orm/state_changes.py", line 139, in _go
    ret_value = fn(self, *arg, **kw)
                ^^^^^^^^^^^^^^^^^^^^
  File "/Users/joewilson/PythonProjects/Snoogram/venv/lib/python3.12/site-packages/sqlalchemy/orm/session.py", line 1313, in commit
    self._prepare_impl()
  File "<string>", line 2, in _prepare_impl
  File "/Users/joewilson/PythonProjects/Snoogram/venv/lib/python3.12/site-packages/sqlalchemy/orm/state_changes.py", line 139, in _go
    ret_value = fn(self, *arg, **kw)
                ^^^^^^^^^^^^^^^^^^^^
  File "/Users/joewilson/PythonProjects/Snoogram/venv/lib/python3.12/site-packages/sqlalchemy/orm/session.py", line 1288, in _prepare_impl
    self.session.flush()
  File "/Users/joewilson/PythonProjects/Snoogram/venv/lib/python3.12/site-packages/sqlalchemy/orm/session.py", line 4352, in flush
    self._flush(objects)
  File "/Users/joewilson/PythonProjects/Snoogram/venv/lib/python3.12/site-packages/sqlalchemy/orm/session.py", line 4487, in _flush
    with util.safe_reraise():
  File "/Users/joewilson/PythonProjects/Snoogram/venv/lib/python3.12/site-packages/sqlalchemy/util/langhelpers.py", line 146, in __exit__
    raise exc_value.with_traceback(exc_tb)
  File "/Users/joewilson/PythonProjects/Snoogram/venv/lib/python3.12/site-packages/sqlalchemy/orm/session.py", line 4448, in _flush
    flush_context.execute()
  File "/Users/joewilson/PythonProjects/Snoogram/venv/lib/python3.12/site-packages/sqlalchemy/orm/unitofwork.py", line 466, in execute
    rec.execute(self)
  File "/Users/joewilson/PythonProjects/Snoogram/venv/lib/python3.12/site-packages/sqlalchemy/orm/unitofwork.py", line 642, in execute
    util.preloaded.orm_persistence.save_obj(
  File "/Users/joewilson/PythonProjects/Snoogram/venv/lib/python3.12/site-packages/sqlalchemy/orm/persistence.py", line 93, in save_obj
    _emit_insert_statements(
  File "/Users/joewilson/PythonProjects/Snoogram/venv/lib/python3.12/site-packages/sqlalchemy/orm/persistence.py", line 1233, in _emit_insert_statements
    result = connection.execute(
             ^^^^^^^^^^^^^^^^^^^
  File "/Users/joewilson/PythonProjects/Snoogram/venv/lib/python3.12/site-packages/sqlalchemy/engine/base.py", line 1418, in execute
    return meth(
           ^^^^^
  File "/Users/joewilson/PythonProjects/Snoogram/venv/lib/python3.12/site-packages/sqlalchemy/sql/elements.py", line 515, in _execute_on_connection
    return connection._execute_clauseelement(
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/Users/joewilson/PythonProjects/Snoogram/venv/lib/python3.12/site-packages/sqlalchemy/engine/base.py", line 1640, in _execute_clauseelement
    ret = self._execute_context(
          ^^^^^^^^^^^^^^^^^^^^^^
  File "/Users/joewilson/PythonProjects/Snoogram/venv/lib/python3.12/site-packages/sqlalchemy/engine/base.py", line 1846, in _execute_context
    return self._exec_single_context(
           ^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/Users/joewilson/PythonProjects/Snoogram/venv/lib/python3.12/site-packages/sqlalchemy/engine/base.py", line 1986, in _exec_single_context
    self._handle_dbapi_exception(
  File "/Users/joewilson/PythonProjects/Snoogram/venv/lib/python3.12/site-packages/sqlalchemy/engine/base.py", line 2355, in _handle_dbapi_exception
    raise sqlalchemy_exception.with_traceback(exc_info[2]) from e
  File "/Users/joewilson/PythonProjects/Snoogram/venv/lib/python3.12/site-packages/sqlalchemy/engine/base.py", line 1967, in _exec_single_context
    self.dialect.do_execute(
  File "/Users/joewilson/PythonProjects/Snoogram/venv/lib/python3.12/site-packages/sqlalchemy/engine/default.py", line 941, in do_execute
    cursor.execute(statement, parameters)
sqlalchemy.exc.OperationalError: (sqlite3.OperationalError) attempt to write a readonly database
[SQL: INSERT INTO sent_post (post_id, subreddit_name, sent_at) VALUES (?, ?, ?)]
[parameters: ('1geqscs', 'girlsfinishingthejob', '2024-10-30 10:34:51.739598')]
(Background on this error at: https://sqlalche.me/e/20/e3q8)
2024-10-30 05:35:16,975 - DEBUG - Looking for jobs to run
2024-10-30 05:35:16,978 - DEBUG - Next wakeup is due at 2024-10-30 05:36:16.969826-05:00 (in 59.991099 seconds)
2024-10-30 05:35:16,979 - INFO - Running job "send_to_telegram (trigger: interval[0:01:00], next run at: 2024-10-30 05:36:16 CDT)" (scheduled at 2024-10-30 05:35:16.969826-05:00)
2024-10-30 05:35:16,979 - INFO - Running job "send_to_telegram (trigger: interval[0:01:00], next run at: 2024-10-30 05:36:16 CDT)" (scheduled at 2024-10-30 05:35:16.970029-05:00)
2024-10-30 05:35:16,980 - INFO - Processing subreddit: girlsfinishingthejob
2024-10-30 05:35:16,980 - INFO - Processing subreddit: wifebutt
2024-10-30 05:35:16,980 - INFO - Fetching top posts of the day
2024-10-30 05:35:16,981 - INFO - Fetching top posts of the month
2024-10-30 05:35:16,982 - DEBUG - Fetching: GET https://oauth.reddit.com/r/girlsfinishingthejob/top at 1730284516.98223
2024-10-30 05:35:16,982 - DEBUG - Fetching: GET https://oauth.reddit.com/r/wifebutt/top at 1730284516.982572
2024-10-30 05:35:16,982 - DEBUG - Data: None
2024-10-30 05:35:16,982 - DEBUG - Data: None
2024-10-30 05:35:16,983 - DEBUG - Params: {'limit': 50, 'raw_json': 1, 't': 'day'}
2024-10-30 05:35:16,983 - DEBUG - Params: {'limit': 50, 'raw_json': 1, 't': 'month'}
2024-10-30 05:35:17,474 - DEBUG - https://oauth.reddit.com:443 "GET /r/girlsfinishingthejob/top?t=day&limit=50&raw_json=1 HTTP/11" 200 24154
2024-10-30 05:35:17,479 - DEBUG - Response: 200 (24154 bytes) (rst-0:rem-148.0:used-2 ratelimit) at 1730284517.479697
2024-10-30 05:35:17,546 - INFO - Checking post: 1gelyz1 - Score: 7119 - URL: https://www.redgifs.com/watch/uttersvelteamphibian
2024-10-30 05:35:17,551 - INFO - Request URL: 'https://cosmossnoogram-centralus.documents.azure.com:443/dbs/ToDoList/colls/sent_posts/docs/'
Request method: 'POST'
Request headers:
    'Cache-Control': 'no-cache'
    'x-ms-version': 'REDACTED'
    'x-ms-documentdb-query-iscontinuationexpected': 'REDACTED'
    'x-ms-consistency-level': 'REDACTED'
    'x-ms-documentdb-isquery': 'REDACTED'
    'Content-Type': 'application/query+json'
    'x-ms-session-token': 'REDACTED'
    'x-ms-documentdb-query-enablecrosspartition': 'REDACTED'
    'x-ms-date': 'REDACTED'
    'authorization': 'REDACTED'
    'Accept': 'application/json'
    'x-ms-cosmos-correlated-activityid': 'REDACTED'
    'Content-Length': '107'
    'User-Agent': 'azsdk-python-cosmos/4.5.1 Python/3.12.4 (macOS-15.0.1-arm64-arm-64bit)'
A body is sent with the request
2024-10-30 05:35:17,582 - DEBUG - https://cosmossnoogram-centralus.documents.azure.com:443 "POST /dbs/ToDoList/colls/sent_posts/docs/ HTTP/11" 200 None
2024-10-30 05:35:17,582 - INFO - Response status: 200
Response headers:
    'Cache-Control': 'no-store, no-cache'
    'Pragma': 'no-cache'
    'Transfer-Encoding': 'chunked'
    'Content-Type': 'application/json'
    'Server': 'Microsoft-HTTPAPI/2.0'
    'Strict-Transport-Security': 'REDACTED'
    'x-ms-activity-id': 'REDACTED'
    'x-ms-last-state-change-utc': 'REDACTED'
    'x-ms-resource-quota': 'REDACTED'
    'x-ms-resource-usage': 'REDACTED'
    'x-ms-schemaversion': 'REDACTED'
    'lsn': 'REDACTED'
    'x-ms-item-count': 'REDACTED'
    'x-ms-request-charge': 'REDACTED'
    'x-ms-alt-content-path': 'REDACTED'
    'x-ms-content-path': 'REDACTED'
    'x-ms-quorum-acked-lsn': 'REDACTED'
    'x-ms-current-write-quorum': 'REDACTED'
    'x-ms-current-replica-set-size': 'REDACTED'
    'x-ms-documentdb-partitionkeyrangeid': 'REDACTED'
    'x-ms-xp-role': 'REDACTED'
    'x-ms-cosmos-query-execution-info': 'REDACTED'
    'x-ms-global-Committed-lsn': 'REDACTED'
    'x-ms-number-of-read-regions': 'REDACTED'
    'x-ms-transport-request-id': 'REDACTED'
    'x-ms-cosmos-llsn': 'REDACTED'
    'x-ms-cosmos-quorum-acked-llsn': 'REDACTED'
    'x-ms-session-token': 'REDACTED'
    'x-ms-request-duration-ms': 'REDACTED'
    'x-ms-serviceversion': 'REDACTED'
    'x-ms-cosmos-is-partition-key-delete-pending': 'REDACTED'
    'x-ms-cosmos-physical-partition-id': 'REDACTED'
    'x-ms-cosmos-internal-partition-id': 'REDACTED'
    'x-ms-gatewayversion': 'REDACTED'
    'Date': 'Wed, 30 Oct 2024 10:35:17 GMT'
2024-10-30 05:35:17,582 - INFO - Found video post: 1gelyz1
2024-10-30 05:35:17,583 - DEBUG - Starting new HTTPS connection (1): api.redgifs.com:443
2024-10-30 05:35:17,682 - DEBUG - https://api.redgifs.com:443 "GET /v2/gifs/uttersvelteamphibian HTTP/11" 200 None
2024-10-30 05:35:17,684 - DEBUG - Starting new HTTPS connection (1): files.redgifs.com:443
2024-10-30 05:35:17,755 - DEBUG - https://files.redgifs.com:443 "GET /UtterSvelteAmphibian.mp4 HTTP/11" 200 42980012
2024-10-30 05:35:17,838 - DEBUG - https://oauth.reddit.com:443 "GET /r/wifebutt/top?t=month&limit=50&raw_json=1 HTTP/11" 200 49238
2024-10-30 05:35:17,866 - DEBUG - Response: 200 (49238 bytes) (rst-0:rem-149.0:used-1 ratelimit) at 1730284517.866663
2024-10-30 05:35:17,872 - INFO - Checking post: 1g9w053 - Score: 5347 - URL: https://www.reddit.com/gallery/1g9w053
2024-10-30 05:35:17,873 - INFO - Request URL: 'https://cosmossnoogram-centralus.documents.azure.com:443/dbs/ToDoList/colls/sent_posts/docs/'
Request method: 'POST'
Request headers:
    'Cache-Control': 'no-cache'
    'x-ms-version': 'REDACTED'
    'x-ms-documentdb-query-iscontinuationexpected': 'REDACTED'
    'x-ms-consistency-level': 'REDACTED'
    'x-ms-documentdb-isquery': 'REDACTED'
    'Content-Type': 'application/query+json'
    'x-ms-session-token': 'REDACTED'
    'x-ms-documentdb-query-enablecrosspartition': 'REDACTED'
    'x-ms-date': 'REDACTED'
    'authorization': 'REDACTED'
    'Accept': 'application/json'
    'x-ms-cosmos-correlated-activityid': 'REDACTED'
    'Content-Length': '107'
    'User-Agent': 'azsdk-python-cosmos/4.5.1 Python/3.12.4 (macOS-15.0.1-arm64-arm-64bit)'
A body is sent with the request
2024-10-30 05:35:17,912 - DEBUG - https://cosmossnoogram-centralus.documents.azure.com:443 "POST /dbs/ToDoList/colls/sent_posts/docs/ HTTP/11" 200 None
2024-10-30 05:35:17,913 - INFO - Response status: 200
Response headers:
    'Cache-Control': 'no-store, no-cache'
    'Pragma': 'no-cache'
    'Transfer-Encoding': 'chunked'
    'Content-Type': 'application/json'
    'Server': 'Microsoft-HTTPAPI/2.0'
    'Strict-Transport-Security': 'REDACTED'
    'x-ms-activity-id': 'REDACTED'
    'x-ms-last-state-change-utc': 'REDACTED'
    'x-ms-resource-quota': 'REDACTED'
    'x-ms-resource-usage': 'REDACTED'
    'x-ms-schemaversion': 'REDACTED'
    'lsn': 'REDACTED'
    'x-ms-item-count': 'REDACTED'
    'x-ms-request-charge': 'REDACTED'
    'x-ms-alt-content-path': 'REDACTED'
    'x-ms-content-path': 'REDACTED'
    'x-ms-documentdb-partitionkeyrangeid': 'REDACTED'
    'x-ms-xp-role': 'REDACTED'
    'x-ms-cosmos-query-execution-info': 'REDACTED'
    'x-ms-global-Committed-lsn': 'REDACTED'
    'x-ms-number-of-read-regions': 'REDACTED'
    'x-ms-transport-request-id': 'REDACTED'
    'x-ms-cosmos-llsn': 'REDACTED'
    'x-ms-session-token': 'REDACTED'
    'x-ms-request-duration-ms': 'REDACTED'
    'x-ms-serviceversion': 'REDACTED'
    'x-ms-cosmos-is-partition-key-delete-pending': 'REDACTED'
    'x-ms-cosmos-physical-partition-id': 'REDACTED'
    'x-ms-cosmos-internal-partition-id': 'REDACTED'
    'x-ms-gatewayversion': 'REDACTED'
    'Date': 'Wed, 30 Oct 2024 10:35:17 GMT'
2024-10-30 05:35:17,913 - INFO - Post 1g9w053 is not an image or video post, skipping
2024-10-30 05:35:17,913 - INFO - Checking post: 1fv4cfc - Score: 4573 - URL: https://www.reddit.com/gallery/1fv4cfc
2024-10-30 05:35:17,914 - INFO - Request URL: 'https://cosmossnoogram-centralus.documents.azure.com:443/dbs/ToDoList/colls/sent_posts/docs/'
Request method: 'POST'
Request headers:
    'Cache-Control': 'no-cache'
    'x-ms-version': 'REDACTED'
    'x-ms-documentdb-query-iscontinuationexpected': 'REDACTED'
    'x-ms-consistency-level': 'REDACTED'
    'x-ms-documentdb-isquery': 'REDACTED'
    'Content-Type': 'application/query+json'
    'x-ms-session-token': 'REDACTED'
    'x-ms-documentdb-query-enablecrosspartition': 'REDACTED'
    'x-ms-date': 'REDACTED'
    'authorization': 'REDACTED'
    'Accept': 'application/json'
    'x-ms-cosmos-correlated-activityid': 'REDACTED'
    'Content-Length': '107'
    'User-Agent': 'azsdk-python-cosmos/4.5.1 Python/3.12.4 (macOS-15.0.1-arm64-arm-64bit)'
A body is sent with the request
2024-10-30 05:35:17,959 - DEBUG - https://cosmossnoogram-centralus.documents.azure.com:443 "POST /dbs/ToDoList/colls/sent_posts/docs/ HTTP/11" 200 None
2024-10-30 05:35:17,960 - INFO - Response status: 200
Response headers:
    'Cache-Control': 'no-store, no-cache'
    'Pragma': 'no-cache'
    'Transfer-Encoding': 'chunked'
    'Content-Type': 'application/json'
    'Server': 'Microsoft-HTTPAPI/2.0'
    'Strict-Transport-Security': 'REDACTED'
    'x-ms-activity-id': 'REDACTED'
    'x-ms-last-state-change-utc': 'REDACTED'
    'x-ms-resource-quota': 'REDACTED'
    'x-ms-resource-usage': 'REDACTED'
    'x-ms-schemaversion': 'REDACTED'
    'lsn': 'REDACTED'
    'x-ms-item-count': 'REDACTED'
    'x-ms-request-charge': 'REDACTED'
    'x-ms-alt-content-path': 'REDACTED'
    'x-ms-content-path': 'REDACTED'
    'x-ms-documentdb-partitionkeyrangeid': 'REDACTED'
    'x-ms-xp-role': 'REDACTED'
    'x-ms-cosmos-query-execution-info': 'REDACTED'
    'x-ms-global-Committed-lsn': 'REDACTED'
    'x-ms-number-of-read-regions': 'REDACTED'
    'x-ms-transport-request-id': 'REDACTED'
    'x-ms-cosmos-llsn': 'REDACTED'
    'x-ms-session-token': 'REDACTED'
    'x-ms-request-duration-ms': 'REDACTED'
    'x-ms-serviceversion': 'REDACTED'
    'x-ms-cosmos-is-partition-key-delete-pending': 'REDACTED'
    'x-ms-cosmos-physical-partition-id': 'REDACTED'
    'x-ms-cosmos-internal-partition-id': 'REDACTED'
    'x-ms-gatewayversion': 'REDACTED'
    'Date': 'Wed, 30 Oct 2024 10:35:17 GMT'
2024-10-30 05:35:17,960 - INFO - Post 1fv4cfc is not an image or video post, skipping
2024-10-30 05:35:17,960 - INFO - Checking post: 1ganrp0 - Score: 4209 - URL: https://i.redd.it/ezatz8645lwd1.jpeg
2024-10-30 05:35:17,961 - INFO - Request URL: 'https://cosmossnoogram-centralus.documents.azure.com:443/dbs/ToDoList/colls/sent_posts/docs/'
Request method: 'POST'
Request headers:
    'Cache-Control': 'no-cache'
    'x-ms-version': 'REDACTED'
    'x-ms-documentdb-query-iscontinuationexpected': 'REDACTED'
    'x-ms-consistency-level': 'REDACTED'
    'x-ms-documentdb-isquery': 'REDACTED'
    'Content-Type': 'application/query+json'
    'x-ms-session-token': 'REDACTED'
    'x-ms-documentdb-query-enablecrosspartition': 'REDACTED'
    'x-ms-date': 'REDACTED'
    'authorization': 'REDACTED'
    'Accept': 'application/json'
    'x-ms-cosmos-correlated-activityid': 'REDACTED'
    'Content-Length': '107'
    'User-Agent': 'azsdk-python-cosmos/4.5.1 Python/3.12.4 (macOS-15.0.1-arm64-arm-64bit)'
A body is sent with the request
2024-10-30 05:35:18,001 - DEBUG - https://cosmossnoogram-centralus.documents.azure.com:443 "POST /dbs/ToDoList/colls/sent_posts/docs/ HTTP/11" 200 None
2024-10-30 05:35:18,001 - INFO - Response status: 200
Response headers:
    'Cache-Control': 'no-store, no-cache'
    'Pragma': 'no-cache'
    'Transfer-Encoding': 'chunked'
    'Content-Type': 'application/json'
    'Server': 'Microsoft-HTTPAPI/2.0'
    'Strict-Transport-Security': 'REDACTED'
    'x-ms-activity-id': 'REDACTED'
    'x-ms-last-state-change-utc': 'REDACTED'
    'x-ms-resource-quota': 'REDACTED'
    'x-ms-resource-usage': 'REDACTED'
    'x-ms-schemaversion': 'REDACTED'
    'lsn': 'REDACTED'
    'x-ms-item-count': 'REDACTED'
    'x-ms-request-charge': 'REDACTED'
    'x-ms-alt-content-path': 'REDACTED'
    'x-ms-content-path': 'REDACTED'
    'x-ms-documentdb-partitionkeyrangeid': 'REDACTED'
    'x-ms-xp-role': 'REDACTED'
    'x-ms-cosmos-query-execution-info': 'REDACTED'
    'x-ms-global-Committed-lsn': 'REDACTED'
    'x-ms-number-of-read-regions': 'REDACTED'
    'x-ms-transport-request-id': 'REDACTED'
    'x-ms-cosmos-llsn': 'REDACTED'
    'x-ms-session-token': 'REDACTED'
    'x-ms-request-duration-ms': 'REDACTED'
    'x-ms-serviceversion': 'REDACTED'
    'x-ms-cosmos-is-partition-key-delete-pending': 'REDACTED'
    'x-ms-cosmos-physical-partition-id': 'REDACTED'
    'x-ms-cosmos-internal-partition-id': 'REDACTED'
    'x-ms-gatewayversion': 'REDACTED'
    'Date': 'Wed, 30 Oct 2024 10:35:17 GMT'
2024-10-30 05:35:18,001 - INFO - Post 1ganrp0 is a duplicate, skipping
2024-10-30 05:35:18,001 - INFO - Checking post: 1gdrcjt - Score: 4062 - URL: https://www.redgifs.com/watch/unrealisticdefinitebarebirdbat
2024-10-30 05:35:18,002 - INFO - Post 1gdrcjt is a duplicate, skipping
2024-10-30 05:35:18,002 - INFO - Checking post: 1g30sx1 - Score: 3965 - URL: https://www.redgifs.com/watch/hardwarlikesunbittern
2024-10-30 05:35:18,002 - INFO - Post 1g30sx1 is a duplicate, skipping
2024-10-30 05:35:18,002 - INFO - Checking post: 1fs7839 - Score: 3857 - URL: https://www.reddit.com/gallery/1fs7839
2024-10-30 05:35:18,003 - INFO - Request URL: 'https://cosmossnoogram-centralus.documents.azure.com:443/dbs/ToDoList/colls/sent_posts/docs/'
Request method: 'POST'
Request headers:
    'Cache-Control': 'no-cache'
    'x-ms-version': 'REDACTED'
    'x-ms-documentdb-query-iscontinuationexpected': 'REDACTED'
    'x-ms-consistency-level': 'REDACTED'
    'x-ms-documentdb-isquery': 'REDACTED'
    'Content-Type': 'application/query+json'
    'x-ms-session-token': 'REDACTED'
    'x-ms-documentdb-query-enablecrosspartition': 'REDACTED'
    'x-ms-date': 'REDACTED'
    'authorization': 'REDACTED'
    'Accept': 'application/json'
    'x-ms-cosmos-correlated-activityid': 'REDACTED'
    'Content-Length': '107'
    'User-Agent': 'azsdk-python-cosmos/4.5.1 Python/3.12.4 (macOS-15.0.1-arm64-arm-64bit)'
A body is sent with the request
2024-10-30 05:35:18,055 - DEBUG - https://cosmossnoogram-centralus.documents.azure.com:443 "POST /dbs/ToDoList/colls/sent_posts/docs/ HTTP/11" 200 None
